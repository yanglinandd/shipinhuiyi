/*! For license information please see main.fb971985.chunk.js.LICENSE.txt */
(this["webpackJsonpweb-video-call-demo"]=this["webpackJsonpweb-video-call-demo"]||[]).push([[0],{168:function(e,t){var n=function(){},r=function(e){e=e||!0;var t=function(){try{return new window.XMLHttpRequest}catch(e){return!1}}()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return!1}}();if("withCredentials"in t)return t;if(!e)return t;if("undefined"===typeof window.XDomainRequest)return t;var r=new XDomainRequest;return r.readyState=0,r.status=100,r.onreadystatechange=n,r.onload=function(){r.readyState=4,r.status=200;var e=new ActiveXObject("Microsoft.XMLDOM");e.async="false",e.loadXML(r.responseText),r.responseXML=e,r.response=r.responseText,r.onreadystatechange()},r.ontimeout=r.onerror=function(){r.readyState=4,r.status=500,r.onreadystatechange()},r},i={102:{error_code:102,error_msg:"Server disconnect"},10:{error_code:10,error_msg:"Whiteboards don't exist"},15:{error_code:15,error_msg:"Wrong roomname or password"},20:{error_code:20,error_msg:"Token authentication failed"},25:{error_code:25,error_msg:"Whiteboard creation failed"},30:{error_code:30,error_msg:"Whiteboard name can't be null"},35:{error_code:35,error_msg:"Permission Denied"},40:{error_code:40,error_msg:"Wrong roomname or password"},45:{error_code:45,error_msg:"The whiteboard name has been used"},50:{error_code:50,error_msg:"Wrong data, please login again"},99:{error_code:99,error_msg:"Unpredictable error"}},o=function(e){var t=e.dataType||"text",o=e.success||n,s=e.error||n,a=r();a.onreadystatechange=function(){if(4===a.readyState){if(200!==(a.status||0))return void s({data:a.responseText});try{switch(t){case"text":o(a.responseText);break;case"json":var e=function(e){if(window.JSON&&window.JSON.parse)return window.JSON.parse(e+"");var t,n=null,r=utils.trim(e+"");return r&&!utils.trim(r.replace(/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,(function(e,r,i,o){return t&&r&&(n=0),0===n?e:(t=i||r,n+=!o-!i,"")})))?Function("return "+r)():Function("Invalid JSON: "+e)()}(a.responseText);if(0==e.status&&e.error_code)return s(Object.assign({status:0},i[e.error_code]));o(e,a);break;case"xml":a.responseXML&&a.responseXML.documentElement?o(a.responseXML.documentElement,a):s({data:a.responseText});break;default:o(a.response||a.responseText,a)}}catch(n){console.warn(n),s(Object.assign({status:0},i[99]))}}0===a.readyState&&s({data:a.responseText})},e.responseType&&a.responseType&&(a.responseType=e.responseType),e.mimeType&&utils.hasOverrideMimeType&&a.overrideMimeType(e.mimeType);var c=e.type||"POST",u=e.data||null,d="";if("get"===c.toLowerCase()&&u){for(var l in u)u.hasOwnProperty(l)&&(d+=l+"="+u[l]+"&");d=d?d.slice(0,-1):d,e.url+=(e.url.indexOf("?")>0?"&":"?")+(d?d+"&":d)+"_v="+(new Date).getTime(),u=null,d=null}if(a.open(c,e.url,a.setRequestHeader),a.setRequestHeader){var f=e.headers||{};for(var p in f)f.hasOwnProperty(p)&&a.setRequestHeader(p,f[p])}return window.XDomainRequest&&(a.readyState=2),a.send(u),a},s=function(e){"http:"!=e.restApi&&"https:"!=e.restApi||(e.restApi=""),this.restApi=e.restApi,this.appKey=e.appKey,this.orgName=e.appKey.split("#")[0],this.appName=e.appKey.split("#")[1],this.dnsArr=["https://rs.easemob.com","http://182.92.174.78","http://112.126.66.111"],this.dnsIndex=0,this.restIndex=0,this.restHosts=[]};s.prototype.getRestFromHttpDNS=function(e){if(this.restIndex>=this.restHosts.length)return!1;var t="",n=this.restHosts[this.restIndex],r=n.domain,i=n.ip;if(i){var o=n.port;t=("https:"===location.protocol?"https:":"http:")+"//"+i+":"+o}else t=("https:"===location.protocol?"https:":"http:")+"//"+r;return""!=t&&(this.apiUrl=t),t},s.prototype.getHttpDNS=function(e){var t=this;if(this.appKey){var n={url:this.dnsArr[this.dnsIndex]+"/easemob/server.json",dataType:"json",type:"GET",data:{app_key:encodeURIComponent(this.appKey)},success:function(n,r){var i=n.rest.hosts;if(i){for(var o=location.protocol,s=0;s<i.length;s++)if(i[s].protocol===o){var a=i[s];i.splice(s,1),i.unshift(a)}t.restHosts=i,e.suc({restHosts:i})}},error:function(n,r,i){if(t.dnsIndex++,t.dnsIndex<t.dnsArr.length)return t.getHttpDNS.call(t,e);e.error(n)}};o(n)}else console.warn("appKey illegal")},s.prototype.create=function(e){if(this.restApi)i.call(this);else{var t=this,n=function(e){t.restApi=t.getRestFromHttpDNS(),i.call(t)},r=function(r){if(t.restIndex++,t.getRestFromHttpDNS())return n();e.error(r)};this.getHttpDNS({suc:n,error:r})}function i(){var t={url:this.restApi+"/"+this.orgName+"/"+this.appName+"/whiteboards/",dataType:"json",type:"POST",data:JSON.stringify({userId:e.userName,whiteBoardName:e.roomName,password:e.password}),headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},success:e.suc,error:r};o(t)}},s.prototype.join=function(e){if(this.restApi)i.call(this);else{var t=this,n=function(e){t.restApi=t.getRestFromHttpDNS(),i.call(t)},r=function(r){if(t.restIndex++,t.getRestFromHttpDNS())return n();e.error(r)};this.getHttpDNS({suc:n,error:r})}function i(){var t={url:this.restApi+"/"+this.orgName+"/"+this.appName+"/whiteboards/joinorcreate/byname/",dataType:"json",type:"POST",data:JSON.stringify({userId:e.userName,whiteBoardName:e.roomName,password:e.password}),headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},success:e.suc,error:r};o(t)}},s.prototype.joinByRoomName=function(e){if(this.restApi)i.call(this);else{var t=this,n=function(e){t.restApi=t.getRestFromHttpDNS(),i.call(t)},r=function(r){if(t.restIndex++,t.getRestFromHttpDNS())return n();e.error(r)};this.getHttpDNS({suc:n,error:r})}function i(){var t={url:this.restApi+"/"+this.orgName+"/"+this.appName+"/whiteboards/url-by-name/",dataType:"json",type:"POST",data:JSON.stringify({userId:e.userName,whiteBoardName:e.roomName,password:e.password}),headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},success:e.suc,error:r};o(t)}},s.prototype.joinByRoomId=function(e){if(this.restApi)i.call(this);else{var t=this,n=function(e){t.restApi=t.getRestFromHttpDNS(),i.call(t)},r=function(r){if(t.restIndex++,t.getRestFromHttpDNS())return n();e.error(r)};this.getHttpDNS({suc:n,error:r})}function i(){var t={url:this.restApi+"/"+this.orgName+"/"+this.appName+"/whiteboards/"+e.roomId+"/url/",dataType:"json",type:"POST",data:JSON.stringify({userId:e.userName,roomId:e.roomId,password:e.password}),headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},success:e.suc,error:r};o(t)}},s.prototype.destroy=function(e){if(this.restApi)i.call(this);else{var t=this,n=function(e){t.restApi=t.getRestFromHttpDNS(),i.call(t)},r=function(r){if(t.restIndex++,t.getRestFromHttpDNS())return n();e.error(r)};this.getHttpDNS({suc:n,error:r})}function i(){var t={url:this.restApi+"/"+this.orgName+"/"+this.appName+"/whiteboards/"+e.roomId+"/",dataType:"json",type:"DELETE",data:JSON.stringify({userId:e.userName}),headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},success:e.suc,error:r};o(t)}},e.exports=s},183:function(e,t,n){e.exports=n(432)},188:function(e,t,n){},223:function(e,t,n){},281:function(e,t,n){var r={"./admin-icon.png":282,"./admin-small-icon.png":283,"./apply-icon.png":284,"./apply-to-audience-icon.png":285,"./apply-to-talker-icon.png":286,"./audio-is-close-icon.png":287,"./close-handle-icon.png":288,"./destory-white-board-icon.png":289,"./expand-icon.png":290,"./invite-icon.png":291,"./is-speak-icon.png":292,"./join-white-board-icon.png":293,"./leave-icon.png":294,"./login-bg.png":295,"./logo-text-login.png":296,"./logo-text-room.png":297,"./logo.png":298,"./micro-is-close-icon.png":299,"./micro-is-open-icon.png":300,"./mute-all-icon.png":301,"./no-speak-icon.png":302,"./room-setting-close-icon.png":303,"./room-setting-open-icon.png":304,"./setting-icon.png":305,"./share-desktop-icon.png":306,"./stop-share-desktop-icon.png":307,"./unmute-all-icon.png":308,"./video-icon.png":309,"./video-is-close-icon.png":310,"./video-is-open-icon.png":311,"./volume-0.png":312,"./volume-1.png":313,"./volume-10.png":314,"./volume-11.png":315,"./volume-12.png":316,"./volume-13.png":317,"./volume-14.png":318,"./volume-2.png":319,"./volume-3.png":320,"./volume-4.png":321,"./volume-5.png":322,"./volume-6.png":323,"./volume-7.png":324,"./volume-8.png":325,"./volume-9.png":326,"./warning-icon.png":327,"./\u54c1\u724c\u4ef7\u503cLogo.png":328};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=281},282:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAilBMVEUAAAD/////////////////////////////////jQD/jQH/jgP/kQr/kgr/lBD/mRn/mRr/mRz/mh3/mx7/myD/nST/oi//ozH/ozL/pDP/umX/u2b/v3D/wHH/wHL/wXT/xn7/yYb/yof/zI3/69P/7NT/7tj/9Of/9ej/9en/+fH/+fL/+/b////Z11xoAAAACXRSTlMABiuPk7zU8vxOVFVLAAAAmUlEQVQY023PXUrDQBhA0fPNDEG0EAW3UND9b6aQFSgWawItgfnxQXwR7wruCUiRw2ijI4hcjmCpbQhRXoz1Yp7DqY6svPJ57v3q3vO5p1ToF/hqlJTiSO/QG8dIGeUR5gk5BRwK+QCRYF/r3UNbd0iD+rF6mm3vlZEa1xvTxL7R0lhs2G/YLaP0quENutp/1n871fEP7g//G1C/SpfK2LZEAAAAAElFTkSuQmCC"},283:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAhFBMVEUAAAAAAAAAAAAKBQAKBgAQCQARCgAaDQAaDwAbDwAbEAAcEAAuGQAzHQA0HQB/RwCGSgCHSwCPTwCYVACbVgCbVgCcVwCmXACoXQDUdQDWdgDWdwDYeADhfQDkfgDmgADngADogADpgQDrggDyhgD3iQD3iAD8jAD9jAD+jQD/jQD/jQAYi+cHAAAAK3RSTlM7tczNzc7O0NDQ0NDT1NTi4+Tl5+fo6Orq9PT19ff4+Pn5+fn7/P3+/v7+oZWGVwAAAHVJREFUGBkFwQVCAwEQALG9YAWKuxeX+f//SGYWAFhmFgBgGbB1+fFxtQ0G3FTdgoGd76qfXRhYVdUhDLirugcDjj7r6xgMrB96fe5xDYPVpk5P6m0Pg4vqYL+6xmBTnZ1XTxi8V79/1QsGAGAWAGCZWQBgmX918QyBT14d/wAAAABJRU5ErkJggg=="},284:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAB3VBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQECAgIFBQUHBwcJCQkMDAwPDw8QEBARERESEhIWFhYXFxcZGRkaGhocHBwkJCQoKCgpKSkqKioqKiosLCwtLS0uLi4xMTE0NDQ2NjY3Nzc8PDw9PT0+Pj5ERERGRkZHR0dHR0dRUVFTU1NXV1dfX19gYGBhYWFubm5vb29wcHBxcXFzc3N0dHR1dXV4eHh3d3d9fX1+fn5/f3+BgYGCgoKDg4OFhYWHh4eHh4eIiIiLi4uMjIyNjY2QkJCRkZGSkpKWlpaVlZWWlpaYmJiZmZmampqdnZ2fn5+fn5+goKCjo6OkpKSnp6eoqKirq6uurq6urq6vr6+xsbG0tLS2tra3t7e2tra5ubm8vLy7u7u8vLy+vr7AwMDAwMDCwsLFxcXFxcXGxsbIyMjJycnKysrMzMzV1dXW1tba2tre3t7g4ODn5+fo6Ojr6+vr6+vs7Ozt7e3v7+/x8fHy8vL09PTz8/P09PT19fX29vb39/f5+fn6+vr7+/v7+/v8/Pz+/v7///////9fcc+yAAAAnnRSTlMABQgLERIUMjM4RFlhd4CFj5ebnJ+lsrzAx8nMzMzMzc3Ozs7Oz8/P0NDQ0tLS0tPT09PU1NXV1dbW19fX2Nna2tzc3N/f39/g4ODg4eHi4uLi4+Pj5OTk5OXl5ubm5+fn5+jo6Onp6enq6uvr7Ozs7e3t7u7u7+/v7/Dw8PHx8fHy8vX19vf3+fn5+vr6+vv7+/z8/Pz9/f39/v7+/ihEPVQAAALySURBVEjHpVf3QxMxFL6yS/egg7S0qCCIRVRUqggoiIIoiiwFFEEFFbC4UMEJWESmA7Cl39/q9a6Ou6TQku+XvLx7X5PmjbwIAhMZWr3R7nC63U6H3ajXZggpI1tndRMF3FZddkrUXHMhYaDQnLsrNc9GksKWtyM1x0R2hCknOTffRXaBKz8JVWMgKcCgYXEzLSQlWDJpblYBSREFWdS6KXNFtmptjYWkAYvyfxtIWjAofETSxH8ey3GlS3b9ixYTSRumv/FM9oA/cW7bC9mWyEHWt5Lu8LQvLvimw10lLAs5Q830B0/bGoD31YRUfxCFtTYPbWOW6gad+yVvgHDLR8SWloBPlz4Drw/Q1SFeW3T0jz7A5nUv8XcvAF96/MTbvon7tJVOJFtpdTNuykJZuTz24gJtZRXrpJtWn8RTpSKEE7SVO0PQMg7yLF4qFc9xhmGmFfQM7TD6lIpbGGaY6QUjrayLRKtkj1VUyD4KRCN1tJ1RsKs0xfUjEXRK4kXxtBeaJbEDkZH6YpWpXXAQ9dlg7XLiiLG1BfRIk1YxakIqU4fgVGnCuLpfEiqj6PL5uhAJSNN9VxBWmToFtad+4qgsXMNMfJhBuzyvxA+1ryhyFIdk4Q6G4sMQbicCBlGKrN72Oo7LQitmvYR4Z9Eiz49hndq2+sDm8ahGXuk7JmtqJvHtoDQ99RDz1IGpXTUIxMb8cel8RMxG/DonZfXjGGKDlKuoICltWsYTSQpOray8CEriOJabSukgYYRnYFUdyqexGmCFJysxOnFPHeydzMRgpWQQr5SKKQSZKckqBkFMKBVjLLKVXYY6cFcajzQ2ViVccINdhhgFsB+YKCeH38ZEt70LkLJxoJ9dABml1zuwjY3RRSyGQov4OrqB7QEvu/Qyi37tnBgffUWEFIm7wFxt0qLPvG48Dc8SFbR3ssGT/Lrhu+i4rli+y52rreBraPhaKa4mjq995Gtc+Vpmvmad85nA90DhfBpxPsrSeA7+Bu9qmCYUWR3vAAAAAElFTkSuQmCC"},285:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAADJUlEQVRIS82VS2gTURSG/3MzmcxkMm2Spg9sV8WFm+7qxo26LMVtsQ8pRUSkoAsXFgSNFkVUtFIQRFxZEVuQttDuuuxCrO4UEdSNStqaxOY1kyZzr9xMBvHRZhQEB4bZnDsf//+fcy7hHz/k5//i4kVmd3cPoVjspkTshTYwuOTnnKxpCBBv3pj282d3sV0ZgaqCGBNQFFuU7Rwx5Yo2MjK9G2xXgP3g/m0hcJpMk5FhAGoIYAyoViAsCygWhYiYI1pX1zz19pZ+B9oRUHr48ACs0ipraQFFoyAjAtI8QBWiVILI5cAzGaBQSFE0fFA7Ovr2Z8iOAHtmpg9qcJlaEmCxKCgSqSmgQACiIhWUILZyEJk0+OYmULIu6OPjk/4Bi4t9pKrLLJEANTeDIq5FxBhE1VOwBZFOg6+vQ3zNJvWTpy75BlRXVvq4pi1TPA4mAeEwoAZBrK7As6gGSEklSX3s+O6A9MxMU7hYeELx+GFKJD6w5ug+CSDTBGkaKBh0Q5YW2Ra4Z1EqBZ7OJPVjx3YHlKZunUVAucna2yHf7/6boFAIUBSACJAWWVY9ZNcifEknQ8PDDQDTd86ABaZYRwdYWxtc/92Aa4BA4EdAPg9etwiZdDI02ACQmZ1t1rLZVywW62Ttba4C2aIe4CcFPJerh5wClxkMN7BIdkBl7vEhZ9tZoUQrqymQLVqbAQ0IKu7wexblc9J78I11N+TRMX9dZM09uUYB5RxLtIJiMTdkXa+HTBCVKiBDzuXdOdjYgMhkk/qJE/4Aa2trwZ7371ZhGPspFnfnIBwGqarbRY4M2YaQCjJSwQZQ2T6vj45d9T0H9sLCXtjWS2pqMt2gDVBIcwHc+Q7IZmUOnBmRntDAwGvfAFloz88fQWX7ERmGWVsVchbkqnAcwC5DFPIQ+bwDh49rQ0P3/mjZecWFpaUOBRgkoInJoGUncQ5u2/JbFsBTrb//lyXnnW94H/i9WHaqawgoTk5+BKNOGGE3AzlsQtTXhQ1RLIAc/sm4PNn1dxZNTHwSgu8hXQPJC8cDyFkol2trm1jgc+T6jc6/Avxzi/57wDdbZ4AoY1vMvAAAAABJRU5ErkJggg=="},286:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABLElEQVRIS83VvytFYRzH8fdHEeMtGztF7mL3IxObf+EOJhldiyilZDIZlEUmk1UZFCsDq5RsVkXKR6fOLenc8zzPrSfO/DnfV8/n9HyPyPwodr7tJWAKuJJ0HfteELA9AOwDq+VQAy/AG7Aj6aQOqwVsbwIbwGCXIV/AInAp6bMq0xWw3QTuIqt4BGYlPf/O1wELwEUkUMTWJe3lBLYkbf8tYLv4mMfAHFD0OZ1QUfgEtleAw4ShP6NRQAs4ygkMAbfAWA9I+ATFUNtF7zdAfyISB5RIG9jNCfSVl2w+AVmTdJByD0bKVTEcgXwA45KeooGyqhngDKhD3oGWpNOkZdcJ224Ay8BoxYBX4LxqyXWywf9BRD21kSBg+x6YCEAPkiZ7rSgvkL2ifw98A1t0aRn5ZuG2AAAAAElFTkSuQmCC"},287:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAABm0lEQVQ4T2NkYGAQZmBgUGNgYGBnIB38ZGBguMXIwMBgSaYBMCt/ggxxIN0BqDpwGsLPwsK829gw889/hp9Wp07PhmmboaVhOfHBo4vXv337BhPDaoiHsLDQNC31BkEWVt27375vNDl5agJIAwcDA9MTB7sNr3//vqR59HgNhiGT1NVNNbk5VRgZGZl0eHgD2ZkYQQHOADOkWklBY/bTJ3f71dTtvEREapa9eFGeff3mKZAauEveOdrtZGRgZEMPH5AhNidPTXziaLflwbcfu0xOnpr42NZ6zue//55qHTtej2LIe0f7/dgCGOaSw2YmSdpcXBGWp8/6zdXSiFHl5vYQP3AohCRDQN6NlZLoKrt1J85fTMTMWkAgXXD/QTeSDDlkapKsw80VjtclxITJ/W8/dpniC5OJGqommlw8Kszg2OEOZGNiEkGOnRoFBfVZT57cm6ChYe8pKlyNNXaQAxWUTqZradQLsLDooaeTxw52G9/+/nNB4+ixWryJDSSJK8VO19CwmPzo0cVr3759J2gIKfmJarmY4vIEAAXJz+qOcbcSAAAAAElFTkSuQmCC"},288:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACk0lEQVRYR+2XzU4TURTHz7lDWzoLO60kSos2wZXCQpeVIjtjjDFuiG/AE1DCQtM2uiCUJ+ANTDfGGGPcIcUucYG6kqSWFk2gHy6mzJS5x1zMJLV26Ew/zMT0bu+95/zmfz7uGQSXL3Q5H4wA+43QSMGRgv0q0O/9/zsHk8mkV1WNKwA4hcgCjDG/UIxz3iDidQA6kGWpmE6n9V6V7EnBxcVFKRqduS5JdAMAvF2c64aBnwuFT1+y2azhFNQx4NJSSg4GcQGAX3TmjB1Xq7S1uZlSndxzBCjgFIXuIYLsxIl5lgjUWg3fOoG0DSjCOj09e9e5cu2fwo739/fe2Q23bcDl5dSsJNHNXpRrv2MY+HFjI7Vnx5YtQFGtJyfwqL0gdB3eeDx0CxEnOzkjopKu467PBw/a9vXxcXhpp7ptASYST64xJsXaITjnBVlmeU3DO0QUbt0XcH4/bquqNMeYaEV/Ls6NfCbz/Gs3FW0CPl1gjP3l5Ldx/FatlvOhUHjehDThNA3iRDDVCYJzXsxknm0NBHBlJfkQES5YGRPO6vUfHyYmIvHTU4BarZQLhSbnrOCEHSL4ub6efjUQwNXV9GMi7jnPGCIcVCqHO+KMolyOI2Lk/POsubaWfPHPAEVYa7XvOeGwm3pniYEDBOwWYlM9RYnEx8YAjo5KuUDg0m3rvB1wiBMJ6yIRcD4f5BoNmjfDiojlSqW8HQyGYwB0dehFYt1mpKIsGzutcCaMgPT56L2q8hhjLDrUNmPVqDUNXnu9Z426Y0EQ0WGzibteL9wfaqMWxl391AlA1w8LAtLV45aZQ64eWE1IV4/8rdXo2p+mbu/nIPdtjVuDdOjU1gjQqWLt50cKjhTsV4F+77s+B38BCfFUOGOOt8cAAAAASUVORK5CYII="},289:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAABcVBMVEUAAAD/s7Pznp71ra36oqL2oaH4vb31k5P8t7f1kZH5lJH5r6/5qKj2oaH3i4j3qan6rqz4oZ74o6H4nZr4nZ34mZf1lZX1j431j4/4oqL2g4H2kpD4oZ/2mJf1hYX4kY/1kI/0fXv4o6L3l5b4oqH0eXf2hYT2kpH2hYT2hYT0c3H0dHP1gH74r670eXf0eXj0fXz0fn31h4X1h4b1iIf1iYj2jo32kI/2kZD2kpH2k5L2l5b2mJf3mZj3m5r3nJv3nZz3np33n573oJ/3oqH3o6L4p6b4qaj4q6r4raz4rq34r674sbD5srH5s7L5tLP5tbT5t7b5vLv5vbz6wL/6wcH6xMP6xcT6xsX6xsb6x8b6yMj6ycn7ysr7y8v7zMv7zMz7zcz7z8770tH71NT81dT81dX819b82dn82tn82tr829r83d383t7939/94eD94uH95OP95ub95+b96ej+6un+6ur+6+r+6+v+7Oz+7e1makWPAAAALnRSTlMAChUZNzxNTk5PT1BSVGVlZWdnaGhpamtra4qMmLPNz9TY4eTk8vL6+/z9/f7+akfdCQAAAO5JREFUGBm1wTlOA0EQQNFf1TU92BaYJUIEEBJxAu6fEyEiMiBAAlvCnqW6Gg+LyBG8x/84v+CH8W0pSQ/rii8G2KzWEtdJifs7TSLdCAJcHs3zXmqSEmUs3bB5vQUDlot5O2+yCjUGt14CMCDnvN+2SZSoudfqGTDAzFKjpkKN2riZAQaIqEBUJSqIigAGRHgpUplEKR4BGDCOTYcJk+qdjyNggPsgnpOw44MP7vyGAFfW5izCpNZx6P0GDHAdqydlElE8HBBgdlBLHNu6h8XpQydpvQEDtltoz14egdVMn/mgfDp5e2CnPLXKX3sHT95qO9c6uBUAAAAASUVORK5CYII="},290:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAXCAMAAAA4Nk+sAAAAQlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////8IX9KGAAAAFnRSTlMAAQYQFRwiN0BKZXuUlqWptbq/w8rMKd3iyQAAAEpJREFUKM9jYKAL4OCHYFTAKsQLxqiAiU+QBYTRhLlF2MEYFXCKcoExKmAT5mEEYTRhPgFmMCZOGIchOKzE5UBc3sHheVxBRTcAACI/A9XZetZDAAAAAElFTkSuQmCC"},291:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABn0lEQVRIS9WUvUtWYRiHr59DNCgIQVDoINZU6drg5Bw4iIom4ZA0RNDiohgl5hCBi6iDgoIvKIIoQn9BDg1hgWDQEgRt4iDUpD954Lxwej+ec/Tg4LOe+7mu++Pcj7jioyvmkymw3QC8Al4A94DfwDwwK+ksK8E8gsUEXslalvS8kMB2B/AN6lb6WNKXmCRage0pYDICmJE0UURQAoYigHVJg0UEq8CzCKAkabiIIJQ/HQG8lfSuiKAT2I8MuUvS3qUF4aLtbaCnBuQQeCDJRQW3ga9ASwoUoE8kfSq0B+XLtueAlynYlqTeLHj4nmeTm4DvQFsKuCRpNGlhH/AGuA/8BKYkbZZj6wpsB3A/8Bp4WJFtaFHYj1NgI0n0D3A3jA0YKEuqBLbvAGNAyLAx0oZQ0W5KPgKsJPEHkh5Vtch2eDE/ZoDLzhvACXAEjAOfgS5gBrgl6eZ/Atsh6H2ewSUx7cBO7gpsHwPNFxCEwf7IPQPbodxYzyvd/4BuoDXXX2T7KbCQkkQ3NLH9BT4Aa8CvWluduQcXaFnN0OsvOAdWSYAZi7kFOQAAAABJRU5ErkJggg=="},292:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAABmklEQVQ4T2NkYGAQZmBgUGNgYGBnIB38ZGBguMXIwMBgSaYBMCt/ggxxIN0BqDpwGsLCz8FsuNsvk+HP35+nrdbOhmnTmOFo+WjihYvfrr//BhPDaoiwh7yQ+jSHBlZBdt3vdz9uPGWycgJYAwcLk92ThA2/X3+/dFxzaQ2GIeqTbE05NYVVGBkZmXh1hAIZ2ZlBAc4AM0Sh2ljjyewbd9X7re1EvBRqXiy7WX4z++ApkBq4S+zepe5kZGRkQw8fsCE2ayfaPUnc8uPBx12nTFZNtH6cMOff599Pj2strUcxxP592n5sAQxzicnh4CQubaGIs5Zr/TTmOsVwq/J7HBKfG0KSIeqT7E0lYtW77pQdixPxVzATsJZKPyg4y40kQ0wOBSdz6QiF43UJUWFy/+OuU6Z4wkR1op0Jj6agCiMzAxO3jmggExuTCErs1JioP5l1+Z7GBHt7YU+FaqyxgxyooHSiMd2hnkWAXQ8jnTxO2Pjn7Y8LxzSW1OJNbCBJnCl2uoPFo8kXL3679v47QUNIyU9Uy8UUlycAM6HP6oG5UX0AAAAASUVORK5CYII="},293:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAV1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////+ORg7oAAAAHHRSTlMABg0RJyo7QFVXWF14eoCnu7/H1NXY4un2+fr+mIQ8vAAAAFtJREFUKM9jYKAJEBDEKszJJSLKxYkixMIOAjIgIA1mskIlJGTQgCRUQgYDDGoJ0gFOo6RwBQkbFxAIS3ADSX4ZPiDJhmQcuzQviGIWR48THiFGMM0hxkT1BAAAd+0WgxuE4yAAAAAASUVORK5CYII="},294:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAB80lEQVQ4T0WSP28UQQzFf56Zu80BCrQEiZIAOkT+EEIuQAg1LR8AhBAdBYICGiioUiChdBR8AGryBWiQ6GioI2iQIkBJDnS7Ozby7Al2tZqVx36233syf/6iiQAiSPkBM/+sOzHEXxFUteSZKnJ2uGieFGLwLEeYFnmBTkPdnfqdKm3OyPxwwTw5hkBWJYZYuhRU6bpLCGhWTAJ1XRdgOXdhyVSNGENBOpUSNXCzn0rhxyaXgt1JjUiXo95xuLBiPnuIkZOqvDlxhFe/a07HUJD3zHgw6HPnx5ivbUanu8vCpTXLORdSXgwSvwy2xg13B4kgwttJ5tEgMQs8+TkuYCFEZGllZI7i++3MVjzcn/ClVW7PJEIIvPvTcCYIr49X3Ph+UGIpBWRxZVRYdUJ3jvV4fNjwORd6CzNOzDDA1tEem3tjQhBijMjy6rqZdjo+r4SDrLwct0Ue188hns4EKoxnh03BS353ee16GdWfOWB7RvhQK+8b1xFuVZFRhHv7NbtNS0yRXkrI6mjDfD+dumVO4H4/sBy7aT81xvbhhG9Tc7hsvRSR1fUNa9uplcxom1z28r0zRnbhO++RYiREIbo9r1zdLB3dPa6nJ3a2g0ZzibnwnZ3dYUK/l5C1a5vWjck/dHeSd2nV/hcW+1khpqr6/AXKThbItLMXFgAAAABJRU5ErkJggg=="},295:function(e,t,n){e.exports=n.p+"static/media/login-bg.35ac64e9.png"},296:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAcCAYAAAAHgGM3AAAJsElEQVRoQ92aeZBcVRWHv/N6GZJJprsDA0UIogiSkEiiDAiaABENSsh09wTRAixMqSXKUkABgVhACShIoJTFrVQUkEJSyXTPECIUBQpaBbImBASCRbGLZOnXGTJxennHuu91z3RPb68nMZbeP9892/3dc88959wntBrpzKMox7UiazovPEYidvwuyfhvMD/4XidZS1zVme4RviX53WmGJ7jR6M+chfDb3aJQ+Rp9sTt2i6w9ISSViQJbAaukbiHJ2J8aqjYbNRy+fXRewteSmLKxmamNwV9rx8jzMui+rgBlA0KhvXXLZNBZHo+8T4iZnBLNNJWxeutsAoFnfemRYA+a/zPIJF/044ksbiUevbgub8peBPpgyfZNJCIzEdGGely8dNvovMoi+qIPTQz8tP0zVM/2cJN1JKKL215gOnMzyvlj3iA/JxH9dvPTtm0OIk09ZpTfCs3FyT8OTG7bNo/hZpKxC+rypjO3oZxTmluGyBdQPtRETxD0qIr5v4FkG9KLc0d9zx/MHkXBeQJxj9xOijKHU6OvtbXAQfuTFPVJIDDmDThI8ViS+5jv9Yeq8AfCo5MjtvGeBSBb6IjMqGL6Irkq2vKkkz2AvL5aChnvkv/gEKbMcGoUTqLIQqk9zeu0g3/Z7yJMA14gH51HOPsiqoe1hUFTt5fv14KvapG2DThHlnivJBm7pi2lV6nFvOzjoEfX8skzJCJHI1ILRj0lqYyJs+ay3kIy1u3Ljv7MRQg3lWhvIhmrH1oaCUtlzgNu8ablVJLRNaQy8whYe/nS74fIKbxTC34qey44t5YUb6IjcgQny4gfeaM06ex3UOcnDXks6zzikdt8yZwY+OZ+OgIoYlkziUf+7kuXIRrYPBUn+Aqwv8vjhKeztPMfvvnbIKwGf+CD/XDyLwPmpgcfl0aNrvEy6htjk8/P4rR932tpa7vgp7d8Cg08UXKee0lGv9JSRyVBKmM83ni+NyrBX6dd5Ic+3pa8GmJnhHj0afdMVc2lM79DOcP9JnIviTYNN3wp+27Q01saaMkNxKPLW9K1Db59D6oG8CLBwByWdBln8jdWZ08i4KyrSC+rwR8cOp5ioXG66U/LmyRjB1WDP5BZiMPDpQ3ZjlWYRbz7XX/ySlQp+0SEhzCXZvORIxiY6wuYdsBfvWUmweBGVIOACZWbQJaRjD7Tch2D9kco8lfQbpA3QF2Aqjx/7dAcCoXrW8pqRqBsJhlbNgb+qhfChGasH8vJuZBk7MdtKVn3age57g3+MgK5jmR0RV35d77XSbSzZ3SuWDB2zAOyBILx0e9O7jUSe79VfXLt+1E9ueqbcgKBwrPEu4carmeVhglnny/Z/jDIw6A/qAG/LUBaE3semtp2OYinDFlPPtLDaVJszV5BkcpeAc7VPnheJ7hzNkumD7snJDW0mL6utaN8/T7zfEsuJR5dOcqXzp6OOncbXwVMWnyIO2fAF86nI3p608QhlVkD9JAP9hAqLgP94X8e/Pt3HkRupykITKHioIH59HWZwsX/SNkfBTWFUetK0yHO0tigt+n218G5hfCkw1k86Q3327rhGeRy3sJd8PRzgKmyRxAxAHnDce6hb5q3aWt27I+V3+CGDNEbUdkP+GoF+Pe44TARO6vhotJDh6PFSW6IStmX1gXfhDUrcLl/YOpSbqUvdpGZEdKZAZRel0zkVySi32xbeNp+ANWTWvIJgyRiXujo3743UjSX4T5Ufh8vpFXMX6UBwllzzyzENPAi0ROxbdNjqQBfLgc9CbGuJhG5qqWdjcDf7RduKpsGpxxLf00y9g3XuOoT0dLe1gQ6XOXhafuXqHq6sAZIRhJ1ZbQCv9++FtHvgryCWp+hr2srqcydVeAX8q8QCj4LYnL3i0nGygVYfbMbgW8chuL81mttQhGQYeJez0dYkzmIAC+idII4qDUWdqrugl1SaVStIBm9ruT1xyLFv7gpnbCDIrNZGvPCTjueP2B/CUfvdWO8OAtHL+Dx4PfFHqV/23yQRxCCiHUBiUipgq2ns0HY2VUIxvF7F27avgxVDxjYQD56pHvh1mZBE1QvL5F/ex6nzclhwkTINqnfXE+YriA5razbP/gDQ8fhFB4AeR2nuIile789ylwPfHedmfNRbna7k46zgr5p9dPGRp4/wdU3YvPAf1pDvJU1F1ap/WtdSDLipZrV+f9E1CsWJxKP/dFlTmVMF/FHniB5iQMjc+lp8kjRKOykM4+h0kHQWsySri1VhjUC3xD1Z/oRkiX9N5CsU+g1Az9lbwU1DbeJDRnr7I4VQ6mhE6DwiBuKhO1IeBbxTq/Iqqx821Up3E0idqa3kTum4+ReArrcJJDgZ0lObV4xNgTfXk4gcitLZLjGpGbgm757QTeiHADyFB2bF3DyodW9K3/gm5R2Rym1bYWK6dKappxQF3zPK+8CPKAq2wv++jX1DKju4aTt36P6ZU9+xaY0M308+AOZT6DWEixrDb1TX6zL2gx87zT3UtRfENqrhyWT36ndvCYxv+z5ImejMp+A/obeqHHa2mHqmHT2EtCpiBzitj0agj8eZEsWlW9mBrLn4pS7na02ujRf2b3stz+PxYOl1oONFZpJfMo/m0pa9f4UQiFzMo4EyaG6GTEea14JAgvo7TKXdu1oBb7naB8mGXu9Pr8f8AO9PDf1fuZlliOyF8+tv4bvLRx7GzBYanElone5GJajR0Pw3RCTPQd1Su1eGWspu33+7JOg5T5/ix2o6Nub1sNI9/OgH/OY9DyS0+q3lO/LHkqRU1BnMcgC0LGHFY/ZZEVprNx1xPerv3l+wG962nyCn+i6zxWT3v5p1DmXQPgyeie/ifcEeSZW7pJRG32BX/OYYl1JMuI9pgxsPwzH8fcXgmU9SrzL9MWNl10BlFsPz5CINn5MSdu3o+o2nirGRsRKIU6aeOy5luduT4NvDDJ3SZGVKIrDJpKRG6vefH2BbwSNf0YMyRxOafMZsYzQavtgAvqC23owZgWtY+iNPNUQwHT2SlSvQngSoR8k1dZjiLfZ1UWWyfPbGX4uXAn0Uvb8StlrhmewdPJY2lue8w2+uwD7p6DeY/dEH9DdI1nRaayIdw2xWGsfzEgxV5W3twPcngIfMc+k7bxwmcf1AxFZSSJ6qQtrExDMrxCm9zLxX0fUVJPlYor3CUnrX0faBboe/Z7w/InZmcMKH0O80w2d/58/Te0q+Gl7Oape9Tv+DTe9bQU6gf+ElLzbQEzG1pf3rdWLkymw/vd+Fxwcmk2hON1d5E6e5owWP2qN92KThlpyqPs5tPmxmiJsYl5fw/VvTLhwPBiRwwsAAAAASUVORK5CYII="},297:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAcCAYAAAAHgGM3AAAHtklEQVRoQ91ae+yWZRm+Lkvt6LTjQixMKwOCCsow0tQ8TApqq9msZk7bKqVhAyKctAFFKawILZ1HJEb9QaSVqzErrK2DdjA751hSpAaU1qSB4uWur/v99nzv7z087/f78dvy3r5/vue5n8P13M99X/f9vESLSNoG4OS2fi3td5I8ZZRjjLu6pGcDYEy8j+RjY7mIYuDKMSWdD+DmMZrwgyTXj9FYB30YSUcC2APgkJjsVJI/qJs4DurGpH0lyXubFloLvqSjAPwBwItigHsAPN5x188C8OrQ+QeAE0j+q2kMSVMA/CJznpkAfgjgmZn9y93WkVxYpSvpTADfjbY/xdrVAL7x+mfSfibJrcOC/2UAHw7l20nO6bpBSWsBfCzRu4bkR1rAnwqg0WIS/ekAfgzAhzyMrCW5oAb8qwBcHG0XADgbwEsbJnk6gDck7b8D8EhD//WVli/Jg/wkrtx/AUwlub3L7iS9HsDPADwt0XsCwCyS/r9SJHlNhyWNtp63ANgNYGJJaX+pb9F8NIA/x/r/DuB4AJ67LAdIjrjNkg4HYL3nAfgNgNcC+C2AV3XBoKXvp0eAL8k+zuDMCOVlJFd0mTTGsEW+sULv5/6fZBUYI7pLsp91sN5N8oU565D0cQBrou+aOtfSYADzAXwx2t9NcrMkH8AzcubP7LOzCvxLAKyLAezrppHclzlgr5ukjwK4ukFnPklf61YZEnzHp2kADoSvvq91ougg6bkA/gjgJfHXBJIP5Op36TcAvqQXR5B1pLe0Bo3yZBVjVK3nYQdikg+2LbYr+JJODJfpob9G8r1tc6TtkmzxtvxC+uBLOgLAa7qMV9HXlPVu/18G/ysA3hcKnRceVr8RwHkZC7yC5Cfa+g0B/iYABtxW71hlxpYlks4CcHtCL62Xgm/3V0s3syYBdpB82QD4kk4FcEccyL/DMh10skXS6QAcIBvzBwAOlNNzgOkCvqQTgimZedhV2m1eQNJxplEkHQvgpwAcV+4H0AOoBL6Z2Gfbxmpp30XS7Ol/IEkyu/hVwskvJfmFLpMEQ7CvzWEEq0gurRo/khXz90K8Dgc707Z5yf/bSf41HUPStwGcUxr3rc4bSP6nbj+x/1/H2m2A/n2mDH4XPHL6FuB/MpnMhzCTpK9ttki6HMDyDIW/AJhCcm/Qyjkkv1XoScrl+YtJXpno2dXZ5ZlFmRabXloMvnON85qIg6TN3nf8bJmfO+jgS/L1ckLgRMULn03SNDFbJB0X1z0n05xH8ra4cRcGpZtM0lfdt9Bcvti4/3pbZNl2IwaokE3FoUkyM/Gts8tYDcDE4QMJ+I4DW0m6XFIpkiY7U7aLkrS4CvxwazbU0cgekqbCoKRbAcyN0a4n+aGuI0v6DgAHqza5jWTPdUh6fjCrFwDo/18eoM3nS3IS5zjjmHUnAMcd11hS8A2Y17ec5KfaFtkA/tgGXEnfSHzpDSQvCnDSG9G23pz2vQBSC78OQG8uALeSfGfVIBngrwRwWXDzN5PcI+mWEvjm7a4X+YYsJFkkYHW3oM7ybTCzczbb0GdvUfOx5Rtkp84unw64HUlpLBjlnFhKclUc7CwAPwpK92jEgJ7b6WL5kt5jLh8+3lXHXgAug09ymySD9j0AZkILSBYZbNWcleCPFoCyfhFwlwDoARO+c4YDbgULGnb+35uxkNwfbsLUz0UxS/9QuoAvyW8MdncO4E4G/1boV4Efh+LA62Kfq5Oet5I21rmdYTdfp1eAf2iAXpR/+1SzxP+Hmd8bPZ3k9wMAVxE/HwP5UMz3ax8p6tyOJPt3F8DMllx060sd+DH/1wG8KzpXJnpN4Etyjd8Ft2GlX9ntJ0OSTMl8Lf3fQJIlKc18u066keT7Y+MTABhwp+k+lNOaHihCp7KwJsnZsevxjiUD0gK+6+4uWbvyeZcrpmUKmgm+XbRdZk6B0HmUi3LGdiT4sdENAHpApXWRzHpN1aEM1HAkfRXAudGxfyhNp1m2fEmvA/AO006SjlUjpAn82KfZ3bWRz+ysOLxan59Yvt86HEduImmjrVqHwV4EwMU65x0ue9SCX1tYk5RWO3Otv1+9lHRGvAx5QT4Uv2o91AL8c6KW4vK2SxK7wmKtZot10O4MfhzAJJKOF1X6OeD7AJ1R+wbaqlekbwNhsE4CN5jdJN6jGvxYlF9vinJvv6RcUedvO4B+3T5KD07fXxlKtSVlSa8A8Hb78nhESR9WrG5WZHrsEkXl4bVZftvCM93OXJLfDMxOAmDjXEJyRzxB2oMsKtaYC37tY4ok121yv0LYRtL82tQvLT00PqZIcoLUKzwlYh+9xaCT/GUGeAM831SzTSdt7wp+7NGxxJbuWGajXU2y/+abBX4MNOpnxGIzkl4eT3EuPTg4vYmkA12lSFoGwFmoX9PMTLaQzH4MifWPO/jJfiemtDf5vyAt9W4n6fwlAMVj91AP6AFEWmnMeUD3Ye2v2kCu9Y6T23H9q8sLlw36GN8Oko4p9XX3Mfp0xNlkkUxlfTqSC3BTv3ECf5ilmjT45vdc51Pyo6kxAN8Mpsh+B95wJfkdIqd6Wz4cJ5IuILpk35O2FycHy/+7zwXjwysndJa72z7UKqMkaRIAsy6LP3Xs9AFB7pV4EgPu0klJ9YNdAAAAAElFTkSuQmCC"},298:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAKu0lEQVR4Xu2ce6wcVR3HP7/Ze+2D9u7sLRR8FKJG6YMWGiogBUFUMC10d26xQBSQAKKFRFFSMCoE0MhDAWOAIAICRqWhu3t5FASVR0nBQNNCbAsSIII0PLx3Z28ppend+Zm5FCjcM7vzXGiz8+/8Ht/z2bNnzpzfmSN0rrYQkLZk6SShA7pNnaADugO6TQTalKbTozug20SgTWk6PboDuk0E2pSm06M7oNtEoE1pOj26A7pNBNqUptOjdzrQFfdu0Hltale4NCLLKdnzwxkns2pPj64OOWijnExqRt4WCykWMteWPei/6i5srq9Ddc+MUCUN+xLj7WkcJZuSBmrmnz3oinsp6JIsG5E4tujllHoz1Zgt6NsHZmBZqxG6E8PIMoCyla6u2SyYuDarNNmCrtYeQvlSVuJTjSs8TKlwWKoxtwuWHehq7SSUm43CRVYjW49mGM2qYca4Xd1FPL02MKdYJ1PK35KFpmxAV2o28Aww2SDaI2fNZUH+sSwaFBjTfyi/6a4HpjTJ+xpvylS+adfS1pYRaPca0O8F9ObrKdnfSbshLeOVBy9H5JyWdsi1OPbi1nbRLNIH3e/OweMx0NxoKfI6ak2jr2cgmsyE1tXBmai1CjTEQ1kaePJFFuYfT5j1fe7pgr5ALfZz/wnMMYpUTqWvcGOaDWgZS1Xod1egzG1p+57BKkr2AYh4EXyamqYLulpfjHpXmzPqSkqFQxBp7wOw4p4K+vvIwMQ6i1I+oC2Ro6W4r6O8cTJW42lUCwYZw1i6P8Xep6JLTOBx59CuDDeeBibFiOJidU+lOOHVGL6jXNLr0ZWaPy060SzKugIn/6M0BEeKUa3diHJKJJ/3G/8RpxDQpmhR0wFdrh2G8AAY/iHKy+SGp1HcbWM0aQmty0OHII2HjZrCh/aHuSNwCg+GdzFbJgd9nXYz2V0DTA9IcRyOvTSp0Ej+D2gXrrsa2CeSn8lYWMen7P2YI1uTxEoOuuIuAb00APJ9OPZRSQTG8m2qKUZEkfMo2QFtDBcvGeilg3vSzTqQXUaP/vIWwzKLY/PPhpOSktUdg3vSCNAUP8UmcmOms2D8i3FDJANddcuoOsbkwkWUChfEFRbbr1KrAsXY/kGOwi2UCifHjRsf9LLB+VhyV8CQ8Rx2fh++LG/FFRbLb1ltARb9sXxbOSkL6YtfiYkHeulL4+ie8C/gM0Z9OWseC/L3tNKe6v07dTzD7jpgr1TjjgSTe3DsRPXOeKD7axfh8bOABpVxCgvTb2yLiFX3ElTPzSDvZpCZOPZzSWJHB10e+jzS8N/wxhgSv4F40ylNeimJqMi+dwzMYDirSo51Pk7+4siaPuAQHXTFvQ/0a8bEKkvosy9PKiqavwoV9yHg0Gh+IayVZxlrz2SebAlh3dQkGuiqexyqfzFDZi2vPzebM+YkmthHblCl9m3gpsh+YRwsOZKifb/R9O439mD+hFfChBkZ5cMa0q8T8Vx/geYTBh/F43AWFvxX3vZd99Z72axPg+6WelKR2yjZxxvjVgemo9ZyLHsmRQm1tBAedKV2JfADc4Osm3Hyfs9q71V1r0f1tNSTCkPIyPrMBmPsSs1f1zkcuAqncHaY/OFAl2v7IjwBdBmC1tAtU+nb47UwCVOzqQ4cjOZWgFqpxXw3kHU2Tv4qM+T6t8C7dds9v7w8h77Ck600tAb9doXiEZSDzcF0MU5vcGW5lYI49/1Fo7q7CmVWHPcWPk+y1d6fRdIYZXe/5tlU99fc93j3nrCSot2yoNEadNMKhTzOmvxBXJheyScUuErNX9v+VSjbSEbiIY1DKU1aGTBk/BY4a/Q9OQ3HvqFZqtagq+56VKcag6ieQF+veRbSPzgXT74aqZ3hjH3NPugJ4cwjWd2AUzCP+RV3f1C/HmooOuszOL1mRtvStwYdt0f/acOujBsXt4wUiU5KxgNobm9jhX6k6Fx/FPQAc640erQ/RlfdRyBojJbFOLZ5jO53T8fT36UEItswIqdTss1F3H73u4E7nFIbo/3mtZx1dE2lb+LoWcfIg7S+EtWDsqWUNLo8Sik/11ihL78yGRnj/zPNRefUZh3vtKFavwL1zHPGZmu1ldp+iDyOqmlqmJRQcn+RYVS/gFPwy3Gjr0rtD0DQOnTK82g/ff/rE9Gu9SifNMhp/mZYqflz0u8np5JJhN/gFMwvYtWhQ9GGv45iepZtwLKnpv9m6Lex4i4Cvc08A2my1rF8oIctlv/3+3gmqOIGFTbwMW8a8yYNjQrRqsArcjwl28zCoKf1rOODTs1W76zcEoo95tW7/vrxeN6f4zLJxM+yTqCYN09Pq0PnoI2AlUi5H8c+Moqm6KCTrEdXan8DvhJFYIa2f8cpmOf51YEpqOVXa0xz9S1obhZ9Pf+Ooi066JEhpHYRBFVYpIxjmyss/UN743lPgpqKBlF0J7SVLVjWvhR7/D3cpgfgMqDPeM/iYoqF86MKiAc6Sc2w6v4c1Z9EFZqqvcgvKNk/Ncbsr38dzwuqdz7P1jf2YdGUzVH1xAPtZ2laBed5bHuGsQq+VMfR7fof5Xw6qtiU7F9gqz2DRTIa1k0vjMW2/aLzZ425PD2ahb13x9ERH7SfrVoro5j3dcDFOAF/sTuGjqbRuDOO4MQ+udwxLOgxb5Mo1y5EMA8LIhVKtnk4CSEqIeg3p6BvrQ/cqZSTWRwTsFMpq40uzRvdj1MoGU1ur3+OLn0K1bGj7+smZOw0SuNjF52TgR55MDbZeydyH6WAvXfLanuRYy3K6O1kIXpIZBNhEw1msLDwH6Nv1b0X1YB9gnIujn1Z5JzbOSQH7e8m3d1djTLDLESCd5OWB89D5JdJGhDaV+XH9NmXGO3L7jcQNe94Fdbyqj2bMz7s3aS+8mb7o4WXt9XfRhcxn9Bu/uuuQYO2/IbG2MJQ1jMlv69x662/tNDoWo8ELC0oX6av4L+GJ7qS9+h30lfrN6PeSUY1ypX0FX5ovFfZeDgM/yNSRT5akxW6jsCZaN5MXqn/GjyzNrgVp2BuUzQNEbYbtAqc5BuWtyvs6W+A8TVb1gqKefOqY//gLDxZZSw6i9Twcubl31YsDPfT69F+8OrgYlQ+Wl9lBUHx18or7gok4LM4sc6klL8mBlOjS7qgW31naOVOpdjT3u8Mg0hVh05BG0FanmCNfWCaRed0QfuNavrlLP9D/b9jm7+c/SDspfVeuoN2OEkDi4Mo2v4+ltSu9EGPDCHu1aiav6cW+XC+Bd8eWcW9DtT8PbrINZTsM1MjvC1QNqBHTjcQf0/c7gbBH87pBu/Njg5EPX/fhmGHk7wKOhWn4O4YoH2VlfqJ4AWdfbEGa3h++8/rQNCuu1BmBzyxTqZU2IHO63inFRX3QdDMTnVJtdftsCfQjIzVG6fjDa/ZIc5U8rzZHDtpBz1TaWQIGbwUJNMTuJL3bLkMx87i+5d3pWXzMNy+5be8sgs9Y9ahfDTPvRN5kXH56Tv+uXcjQ0jNQcn8tMRYPVvoo1SoxPKN4JR9j37vwfjRO5sUWY6zM51NGuGX31lN29ejd1aCIdvVAR0SVFKzDuikBEP6d0CHBJXUrAM6KcGQ/h3QIUElNeuATkowpH8HdEhQSc06oJMSDOnfAR0SVFKzDuikBEP6d0CHBJXUrAM6KcGQ/h3QIUElNfs/ueZGiEBce48AAAAASUVORK5CYII="},299:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAABPlBMVEUAAAD////////////////////fQED////////wPDzxOTnkQzbpQzf0QzfqQED0QED////rPT3////////5pKT////////6tbX////8ysrwQD3wPz/////wQT7wQD7yQD7////////vQj/vQT7////yQD7wPz/////yYGD0amr0bWryamfwQT/yaWb0ZmbyZWP93d373d3939/94uL////////////////////////////////////////////////////////////wQT7////////////////wQD/////vQT/vQT7////vQT7wQT7vQD/wQD/vQT/////vQT/////vQT7wQT7////vQD7uQD////////////////////////////////////////////////////////////////9+GtcDAAAAaXRSTlMAAQIDBAYIDhAREhMXFxgYGBkgIioqLDRFUlRVVVZXX19gYWJiY2VwcnNzdHV1dXd3eHh6ent8gIGRkpOVoq6vs7S1ubm6v8DKysvMzM3Nzs7Pz9DQ0dHR0tPV1tfY2eHp7/Dy8/T4/f622Q8FAAABAUlEQVQYGYXBh1LCQBQF0AtJzGLFhg17x45iQcGOIlhZLAkG0STr+/8fMGSYyWac0XPwv3iu0cjF8YtukcfS4WmDJEO+DIDRc0gK5CsAY2+9kHDycYy/9kDGyXc18dyNEE5NVqrahTBOnvdUtRMyJQJORLXlyggiCgL8Ak9EtZXKZhmXLwjYXzgjc+1xS5zCcREwqG/aWH9IC5rqJwOBQ9qLLt2nBeWj+5RFICGKk3cD+eM5JeGIQUgWN26H4Bn+oAPIZkrbopg9Kn/TiQbJbKlj1ybP544CyfxNO6AnXTepQ7ZwHUOTbSNsNQaojDHHYYypCNHq1FLXIFNNajFV/O0HqttAllsTUR0AAAAASUVORK5CYII="},300:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAjVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8DizOFAAAALnRSTlMAAQIDBAYOEBgiKyxFVV9ienuBkZKVoq6vs7S5ur/MztDR1dbZ4env8PP0+P3+wpkPNAAAALRJREFUGBmFwYcOgjAUBdCrBeree/EUXEXv/3+e5MWkUI2eg/9ai+t10cKHJGcpTxAaU40R2lPtERIqQUioBCGhEoSESlBjGhAqQcPAO26RUqXYHeEVDhuqDVwB78T2gGrQ5gnejJPmkqVlc8IZvM7Ddc1wtRqarnt0UDHlpYdS78IpquI1n4f5/PDkOkaNGd1Yuo0MQkm/KPoJvrnf8Smy1jpnrY1QE5/5do5RFWV8yyL89gJXDRtk/Nu5+QAAAABJRU5ErkJggg=="},301:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAoCAYAAABjPNNTAAACp0lEQVRYR+2Xz2sTURDHv7NbjIgk3ZCqx4qYgz8uglakZDdNEW/iQYpelCp4VBpB/wQFG72KP/CklB7Em0LT3Q0iEsGLxIM96NVYExIUrHTfyCppk3YT3sZNTXHf9c3OfN53ZufNI2yCRZuAESFkUFkKlQyVDEqBoPyENdk3Sn7JjCYHhDoB4ASAYQAJAIsAPgF4vqw4M0P5lx/+BrjrdNcNIyEINxh8HoDaAcIh0COFcT1qWS6879UVZGU8dVBx6BkDu2UjEvBRqHwyPld4J/tNw843ZNUwhgEugjDkPxiXmZURzbLcUpBeviD5NNTaol5k4FBLBMZTIhxjYGfT6T8z4xUIp5ptCXgbS9hHaBaOLKUvyGo6NQnQgzVBRcy0B+pjqZxgurKyR3xncL4wVUvrywworUB8QTMLD3sCWUnrJQL2rXEuNNNWa2l9WgBTjT0FyMVMO1tN665iLZAMvI+b9v7AIWup1F6hklcr8Q3pwikOJ2OFwoIMqHS6K2P6GWI89nDaFSQTzsbn7SeBQlaNVBZEt7ycEvgSM10E4fDKPuMNEd9n0F1PEOarmlWYDhYyrbv1JuVUJjCArGbaORnbINItE2edTU/S3eHHAcA/AeUegScYSNCfu3uWgUkAEa9T9OTHcQO1aUHuVnmQac9XZSmm8tZrDv24KUSktoV4gYFd6yGppJnWAdkUSKfbdejVzFf7IpWWGEd3WNa3smFsjxBeC3CbXtjDZt7uWmTguwolEzXNYi2jj8fy9lzdMEYEiTxA2zb0WvytpseA4dagAJ8D6DIBxwn0gkC3BYTbV+Or9/kGDBiNYH0/qjVA+37oba6xemY06XR4PqiKMxP9V88H2fYRhJ2vFhREwG58hJDdqOY9ZQXlqYd+wnQHJW6o5H+l5C8dLhs4tJGDbgAAAABJRU5ErkJggg=="},302:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAABgElEQVQoU5VSPU8CQRCdOT6MGg0XIyAWYGLFLzAQYO8iNbHCxN5YaGFCq4W2JBYWJvYmUBlq4rFAgH9AZ8BCRCw4NGo8uBuzcBRXWLjNTmZ23nvzZhHsQ9Go9z3oPySiAwIIijQC9BHxbrU/uMV227BzAF+qummQVSIEDmBcy1rzSRSHaiwM4D0BAraAUmZJ055RII8C/iYBXsqVSumbscgi513RMI+HipIBoDPf6yCGI5UdWwARWeO5t0Riw+2SijKvJqcMLFWbmFZ2vV5/GaosLwF0UVdSLcLxvpDxmU6HjIlRlCvVxLRBSdW9bm92uVzuCXlIngIOlVRHrlS3xAOKx1d0j+tC5rXTGUPyyjc2z7HR+LABOo6GuWN/3QLcIWmGypjLNemJ2DTdIZlzPnNMDSOZBcfQojDaZTtk0j0BoCXB3tpDtSXyusryKIYWtuoBfxNsW3WV5QAgbstq+DSed9gqCmJxP2SVAIEjSDc+TXucsjG2bUlw5Fjcf7/GL/rAyYe/tTdUAAAAAElFTkSuQmCC"},303:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAC1ElEQVRoQ+2Zu69NURDGf58WlcbrCrUeISGICo1LXIX3o/IqPK6/wLPwqrwfBYLboBKEhKDXi+ctqFytkUnWSU72PfvutfY+556zk7PKvWfPzDez1sw3a4uaL9Xcf/oAup3Bfgb6GagYgf4W8gCa2TRgA7AJGJO0ZaLAmtl9YCrwEBiRNFY2EZUyEBzfDxwBZjQ5sVPSrVZOmdkO4GbTu9/AOeByGSBVAWwGPJrZZcBF4IykHyFLs4FjwEFo2X+GJD1IzURVAHOBrwVGR8P7mQVy8yQV6RqnYjIAxAa1KwD84D6O9bBAbqOkZF2lM2BmU4CXwIo2AXgDrJT0L0VfKQDB+VPA0RRjEbJejY6ngCgEEErlWuBdcGARcKCNkc/ieh0q2MfwYhnwLK/ExgAYBk5GRK+TIickecbTqlCI/udMk+qko3m6vdnNb5WFCTNgZtuA293wuIXN7ZLuZJ8XAXgCrCsBwDvxNeA68Cl8vxDYDezJ6cRFZp5KWp8KwGmC04WU9RPYKulFq4/MbDVwF5iVotQpSyuSGHOInXzdiIyaR35NnvMNhwOI5wk6d+WRw0IAbtTMzgOHIiJ2VdK+CDnXeQXYGyF7QdLhPLlYAM4kv0cYWyLpQ4ScA1gMvI+QndNgtMlltPkDM/O9XcQop8dy+lCi/xQAGJU04VmJykDYRvUFYGb13kK1PsRhhq1nGTWze8BQRKVoFumdRmZmtacStSdzfmHVC3T6F7AgmU6H+t8LA82wpNOlOnHTSPk2KPCR0i+n2jXMZ/3ykfIS0Bgpl1YaKXMosd9IeET8SrGd6yzg0Y6+mYimElkvw83EK2B5mxB45FelOO92SwMI52MQeNQmAIOSRlJ1VQUwAHxJNZojPyDpW6quyQAQe7nbFQBOM5xujDsidble90ZX3x8cjbBnfjH9lTQhAeyZX0ypB64T8pUOcSccStXZB5AasXbL/wektixAh5acaQAAAABJRU5ErkJggg=="},304:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAF60lEQVRoQ+1Za28UZRR+3pnZmdndtlsoEZUC1gtSWmIMxl9g/eIHQaJGjWjUEFS8oAnxhty8BaN4QSVEjcGoUYKtH/xi/QVGYgwtRURrsagkFLpt9zLXY87MvuxSd7u73VLcpJO8adLdmTnPeZ7nnPO+K1Dnl6jz+DEH4GIzOMfAHAM1ZmBGJLRnmFqSqezTIzZW6yrSr62I3jBVXM8cyfxoe4i16OhJxM03NraKkeniqAkAB356Irv7jxTdTiAzoghEBNCRUHdsbDO2Fgtqz6C1vT/pvegQ4PgEAZG9Ii4OLGgwN00HSE0Adh23XuhLujtNRUBXAJ0BKIAmQIuiyjcJTd98z2LxKwP57E+6Junau05m/FtdgnB8wPYJtg9kfUJnQtuy+WrjpWqZqAnAviGr4+dRr89QBIwAACBZUATASxciyUHZRAmfAF4y+xy8FSzC9fPUlQ8tMfpmFcD+v6i9/2z2iKkAhiqgixCAlgteASByKSIOHiEANycfmwDLI2R9oL1B6bx/qdE/qwA+HrIfH874b5sqwCwEDAhADZYIgpcUEwAG4REFAHiFDBCyHrAoqmx6cKn+1qwB2EqkLBi0+2yf2qWEZPYlAxz8eQAKGJAsSAlFFHF0pE3v2C4EE1XxNS0PcPCtJ+zPxx2601Sl/kPp8GIGguCZhVwoIQME/usFTIReYCMziKxHaIyIr4aX6HdVA6IsAC6V6az98HwdPRqBPIiutEfrHZ/aowXB56pPIJ1C7U9OpfSClJKsRgwi4xF7aCCuir1aJNKbdWxl1MGamKl/UKrElgWw7Whm/+8p/95GTaBBE4irAnEN4OAD8+ZLJ5QywUsweUOHfmAvMBNsZgaR9oAJl4I17hKujCufblseXVdMV1MC4OwfOpUZ1hSYDKBRA+KaQEwViBYYN9T8+ZnnIFkuhVcoq/A/xUCwoTMekPYIqSD4EIjjI7tqYbS1GAtTAnj5l8wrxyb8Z8PgBWs0YCCmAqx9WXVk8OcyHJg11LsEIQ3N3y18KTtWyiloajkGUh5h3AkZ4LWsQXn1+Wujz01mYUoATx3OHBlzqb0pl30GwQxI+bDupeblgzkgIiJdFd2Ghr0ktB/4M0HujZaLDbZHa4QQgn1SeA+DYD9IGYUMhCyMuYQmTQy8uTK6oioAPHQlbVrVFMkxEHggzD53Xi6b0rBSEgDOxHWxvqtFO1hMs70j7tqUTfsAzJ98L89GsiKlPJzL/phDSOjiULEhsayJefj6O+NvadSEYAZYPswAy0fLNSsONBwTiBoM5fZSwUtADGLC8g8ozESBJ1wKZyNp5Jx86LKosrPUcFgWAL/0vUGrO+3SalmFuPPy4Mb1XhqSJaCr4utbFkbWVtKFvj3lHLQ9uk12bL6He0NQjTyAPcAGjmui55E2Y02pZ1YEgCfJfyzrWAMbWAvLJ8tHAuDsM4AmQ9x8U0uktxIA3484XWMWfRd4KBdF0Nxy5TTNZdQjXGoYy+REW3UZLbzh3d+sUUNFgkuoBCBfHA5ohCYz0tw1P5w+y129ZygxlnVGWYaFzzkHwCNYHpKPXWU0T/WsihjgB9Q1gLqX0PuDVnfqIpk4pomeR2sxcV2X0bpvZHU/SlQyzIUbmHCk+N8Nc3KcjigwuQtfjHGaxwmXkFl1SXRx1eM0Z3TyhoaByHmIGxqPFOFc9N89QakGVG5Dk3Lzo0SwoYkp+7e1R++bVieWW8rmCLrNiO67jtOV8mjDhdxSxlSxTwX1ugLijI3VNW0pi6HObeq/GHfojsJNff5IpfymPn+0ct6m/svhJfrdM7qpLyUDBtEyaPc7Pi2fiWMVXREDp9v0zmqC59gqnoWKAfloyH7yZMbfXXiwlT9aKX2wlT9SyR9stUaVJx5Yqr9Tbgic/HlNAD4ZsjoGJvy+mTha7Jhnrlh3uRiYVQAfnrA6fzrrHZ6Jw93rmtXO9bN9Nvr6cWvL4aS7o26P1+v+Bw6p17r9ialaw12I79dUhS5EQNU+cw5AtRmb6e/XPQP/AvQdtm0LdKT7AAAAAElFTkSuQmCC"},305:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACHklEQVRYR+1XXUvbUBg+H0lL7YZflTknm/PCDfRiFPpX+i/qTWnXQEoMDcRFvJn/on9FKLtwsHmhTly1TN2Ga0ubvMk4nTBpAjlpRA5bzl04z/u+z3nOOc95g5HgAwvODyUE4+5QomCiYFwF4sb/02cQK4qSo3RqbjBwfu7s6Bd31apUtMV0WpoG6F2bpnmJEPImUXNiBVW18dJxvDlWlBDqOc7wot+fv2LfmczVvCSlFl0XbvPD9+1t/ehBCVar2jIh9AlPUddNdyzr7RkPdhwzsYKKoq15Hn3MUxRjuDFN/ZAHey8Ey+WtnCyTF1EK2rb7ZXd3i53FSINXQayqjZXh0LEpRVO8yvnUwHADgHqplCQbRv2E5+JwEVQUZcHzMs8jLT0EjHH/1DTNb2E5uQiqauOV43iPwpJFmZck/Msw6p/DYrgIMk+T5dTSX9vwpXUB4LxQWB8psr//cYFS+pQ5UBABZku2PWyPe2cQlosgC6xWtSVCRkV9AwC+Bhk1pfRZEN514dyy9HaYemyem2Cp9D6dzf7YCEqaz7/+UCwW4e5cs9mkrdanN0H4bnfmYG9vc/B/ERR6i4W/JMLbjPBGzW670E/duB2I2Cz4LEvoduvPy/JumZABZ8MKHcvSH7ZhrdW0VYToLCMb1vJLEr42jPoxz8vha9EmCbqNEfunKcbCIoVyNwuRst4jOCEYV8xEwUTBuArEjRf+DP4G1ewiOH+zPakAAAAASUVORK5CYII="},306:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABGElEQVRIS+3VLUuEQRTF8d8FLWaDRTBYDH4GUVCTiiAGo8kPYzUJgs1kECwKviSzTTCJFoNNLC5ceWRd8OF5QZcNyk6dmfOfOXPPnTDgEQPW988AmTmJA8xh9If2veMa2xHx+LX3m0WZeYH5HwqXl19GxEIdoDjFSJ+ATkT0bl++QfYp/rk9Inq6Q0Clo0OLWgvttxbdYAdv2MVaHakJUBe0K6xExGshmplFGA+xVQFpDFpVqzjDOsZwUuQIq3jBftF7SpDGVlFudqfYwDgK0ExX7A5LeMJe17pOa7Or8jQzp3GOqdL8AxYj4r7p1Rs/nMyc7Z58okbkGcsRcVv74E30zDzCZktdHkdEYWN1qluLus8Ff/9P/gDzWmUZAY/RtgAAAABJRU5ErkJggg=="},307:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAABs1BMVEUAAAD/f3//qqr/////xsboubnr2MT/xcX0vLz3tbX3t7f3lpb42Nj5pqb5qKj61dX6lJT1k474rq76wcH80ND1f3/82Nj0f334r677xML70dD2kI/2kZD3kI/2j4/819f7wsL7wsH6uLf6t7f4qaj4qaf3k5P2kpH3lpX3mJf2lJP2lZT1goD1goH1iYj2iYj2j432j472kZD3oqH2mJf2mZj3nZz3np33oJ/3oqH3paT3pqX3p6b4qKf4qaj4qqn4q6r4rKv4rKz4raz4srH4s7L4s7P5tLT5tbT5t7b5t7f5uLf5urn5u7r5u7v5vbz5vb36wcD6wsH6w8L6w8P6xMT6xcT6xcX6xsX6xsb6yMf6ycn6ysr7zMz7zc37zs37z8/70ND70dH71NP71NT719b719f81tX819f82Nf82Nj82dn82tn82tr829v83dz83d383t7839/84OD84eH84uH94eH94uL94+P95ub95+f96Oj96ej96en96ur96+v97Ov+6+v+7Oz+7u7+7+/+8PD+8fD+8fH+8vL+8/P+9fX/9/b/9/f/+Pf/+Pj/+fn/+vlssJuBAAAANHRSTlMAAgMECQsNFhcfICInKCkxMjSboaevsrO5vcLDw8PGyMnK2Nni4+rr/Pz9/f7+/v7+/v7+gk4JywAAARZJREFUKM+1kVFOwzAMQJ3EadNt3YoADSHgn/NwVrgAZ+CXL/gAprFurKSJnZC24QZgybJeXiInDsD/h0g5b+qV0jgyeW4PuyPAgKfrqjKIQkCMRLasVRZ1tVwaLIfDsSe7hxomsZgt56sCR0GuBeqzQGNWCyPHHsECG/wVCosSEWK6C5UuYRYKtRQihAgiVaGVyiLGyCQgBBAKfEiYRfCO+sA8COV8TyELT94KH9NeqQXZhFmw7aTHcL/j2Z3g/vjNQ+OUDaoQ/MN75+zzTVrv2o9JVIYDP27k9Un39XJ+7PrPdhJELJ82+vL2zNvDxuy3Wz9Nd4x6faWAX9/2mVWuzUXD3ruySDMZA7PQpZPDG3Xx93/+A3wsi2ldjJzCAAAAAElFTkSuQmCC"},308:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACMElEQVRYR+2XPWgVURCFvyPYqlhKbGKjFlYWkQghndioiGJhISRWKRKCv4UYSaFGCTZWRrCwEEU0TbATQTFFKgu10ULE1p9WcMI85oV185DdvdnnFnu7t+ww354zM3eeaPhRw/loAVMdahVsFUxVIDW+rcH/qqCZbQaOAkeA/cCOAPoGrACLwHNJv6uCVrbYzI4Bt4BdwGfgJfA1QAaAUWAQ+AScl/SsCmRpQDPbBNwAzgGvgcuS3vRKbmbDwHXgIHAbuCTpTxnQKoBzATcLzEiyfyU0M88xA1xxSEkXagMMW58Cs5KueiIzczv3SVrKJjazw8A7SR3bzexaQB4vY3dhBaMhPgDeACNd5czMQSclbc8BfgfuSHIwB/Rcr6KR9hRtnDKAJ4DHXk/ZmgtlpiRtzQH+DMCO0gHpNel1e1LSkyJWlwF8CByQ5F27dsoABqR39VtJpzca8KN/vaTxRMCFcGH3RgP+AuYleUdmFRzxQS1pOvd83ge1JK+77PsePy1pS18AiyTpF2BPiysA1mZxzyaJwh8Ctkl6Eb8PAT8kLec/wMxqa5KeYyaAbgJ+Q7g6fryR5iRdzNlb65jxzWXdoA5AH1f3gLEAug+czV6DtQ/qAPEN5q+rLp6fAh4AX6DzV3YncEbSo66CtV91mUTrlgUzmwD2Al1L3fL3ku72dVkItZq9bmWUbObCmuvK5q78ZQd01fcLbzNVE6TGtYCtgqkKpMa3NdgqmKpAavwqlBQbOKzvDTIAAAAASUVORK5CYII="},309:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAv0lEQVQ4T2NkYGAQZmBgUGNgYGBnIB38ZGBguMXIwMBgSaYBMCt/ggxxIN0BqDqoa8iHDx+m8/Pza+Bz1aNHj3bLy8u3gdTw8/Mzf/z48S+IDXfJ////9xPy1rdv3x5zc3PHLV++3DYoKCifnZ09hGRDfvz48erFixcXFBQU3MCaGRkdSTYE3aVD3BBomJxXUFBwJztMYLGzdOlSm5CQkAKM2CE1nfDw8DB9+fLlH0rsEEoj+OSpluypkospLk8Atbxd6uCfBjkAAAAASUVORK5CYII="},310:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAABblBMVEUAAAD////////////////////////////////////////////yPDz////rOzv////tQTvuQEDzQEDuPj7////////////////vPj7wQTz////xQTztQDvxQDvxbW3yPz/////yQj7////////zPj7zQT3vQDz////////////////////////////////2pKT////2mJj////3kpD////1kZH4kJD4lZP4n5/4oaH4qKj4q6j4q6v1kZH4tbP6tbX6uLj////////////////////wQT/////////////////////////////uQT7////////////////////////////////////////////////////////////////////wQD/vQD/vQT/wQT/////vQT/////////////////////////////////////////////////////////////////////////////////2+7lQAAAAeXRSTlMAAQMEBQcMEhMbHyUmJicpKywsLS0uLzAxMzQ3ODg4OTk6Ozw+P0BAQkVHSElLTlRWWV1eZWhqampqampqa2tra3J9fpWZmpqcnaGjpKeprbG0uby9vsHDyMzNz9HV19ja29vb29zd3+jq6+3u7/Hy9PX2+Pn6/P3+Y7IaUQAAARRJREFUGBmFwWVbwmAABdA7MVCxxcBOVGxRsbu7G3ETlOGAyYz77x28exh+0XPwH2loP5JKPe/247faG1quSpHDpzNL62w8hMWt06bNhBsgSLfMUGMktUB4DJZhpp25gbrzt4AyG/dCOKDpwgFT/oQyF+c2hBeaPEhrUuYT5CMEg6SOtGal5pWkDuGd5EcegBalOs8gaUAI0uQD2pQqDNAUgbBFU9DZIVeiKEjTHoQumtRJubV4PMK0QVhOyej002KSwrUES4kaXZCXdAqJCmR5puRlnULcC1t3aESncFkGW0+oHO3rd2rsfsOLHL0hF+oLkFE46kDWpgsrX9rRqt+/dpzkiQM2yaCtDzl2Pmn5fnDiTz8ldm+ACCmVNgAAAABJRU5ErkJggg=="},311:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAACHElEQVRIS7WVS29OURSGnzfEfSQm0gjRARMiVKSo0EY1lWBIRCSkf6C/wFziBzQpE0lHbWLQtIhrtCUMxKRJRQ0YGCAuUdWQJSvZnxz723ufz8Canb0u77q8ax3xn0Wl+Gbm+n7gDNAJtAX7N8A0cF3S7VKMLICZ7QCuAXtqinwEXJD0MmWXBDCzPmAUWNNiBz8DxyVNxfZNAGa2E5j5h+CNmJ+ADkmvqiB/AYSePwN2ZzJ/H943ZPQPJB0uAZwAbiSc7wCDkl64LlR5BehJ2HZLutd4jysYAU5HTm7cK+ln9d3MlgO3gCOR/VVJF3MAr4EtkcNeSd62JjGzDuBppJiTtC0H8ANYUXFYkLS2Zle+RYRYlLQ6B/AdWFUJuOTOkn5lKlgGLERJLUlamQOYBbZHwfok3cwAHAMmI928pPYcwBAwEDk46EFJH6Mhrwd8seKE/HycywF0AQ8T2c4Dl4C7QdcdvrcmbPslTSQBAsedekdLgy3onvhRlGQlgM2A0zK3rbn4X4F9krylfyR37JzfXmarIF+Ak5Lux+ilc+2V+NB7a9rlMxuQNJeyK/5wwkwOAGeB/cCmEOQt8BgYSWVd26KGgZntAmYl+YY3iZmtC3+8sfhWZYdcCT4IXAa8v07P58C7oN8Y/nR+Tf2UjAOnUiC5Ifv7YnQC6pjbI6mxJ2UWhd4PA+cBvzclcc47NQ9J+tAyi+rSbVX/G4RZsBnkowTSAAAAAElFTkSuQmCC"},312:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAjVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8DizOFAAAALnRSTlMAAQIDBAYOEBgiKyxFVV9ienuBkZKVoq6vs7S5ur/MztDR1dbZ4env8PP0+P3+wpkPNAAAALRJREFUGBmFwYcOgjAUBdCrBeree/EUXEXv/3+e5MWkUI2eg/9ai+t10cKHJGcpTxAaU40R2lPtERIqQUioBCGhEoSESlBjGhAqQcPAO26RUqXYHeEVDhuqDVwB78T2gGrQ5gnejJPmkqVlc8IZvM7Ddc1wtRqarnt0UDHlpYdS78IpquI1n4f5/PDkOkaNGd1Yuo0MQkm/KPoJvrnf8Smy1jpnrY1QE5/5do5RFWV8yyL89gJXDRtk/Nu5+QAAAABJRU5ErkJggg=="},313:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAkFBMVEUAAAD///////////////+Z/5n///////////////////////////////////////9R8XT///////////////////////////////////////9I8G3////////////////////////////////////////////////////////////////////////////////9remcAAAAL3RSTlMAAQIDBAUGDhAYIissRVVfbnp7gZGSlaKus7S5ubq/zM7Q0dXW2eHp7/Dz9Pj9/g05MZYAAAC1SURBVBgZhcEHDoJAFATQURDW3rGXr4Jlkbn/7SQ/Jgur0ffwX3txuy3a+BCnLKUxfBOqCXx7qj18QiXwCZXAJ1QCn1AJaoIGhErQCOCctjhSHbE7wckt1lRr2BzOmZ0h1bDDM5w5p80lS8vmlHM43afttUabzajVs88uKma89lHqXzlDVbRicUiSQ8FVhJpgfGfpPg7giwd5PojxzeOBT6ExxlpjTIiaKONbFqEqvPDtEuK3Fz2tHC6gD78OAAAAAElFTkSuQmCC"},314:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAnFBMVEUAAAD///+q/6r///////+Z/5n///////////////////////////////////9S8XZR8XVQ8XX///////////////////////////////9J8G7///9L8XD///9I8G3///////////////////////9J8G5J8G5K8G5K8G////////////////////////////////////8/72b////JX9JrAAAAMnRSTlMAAQMDBAUGDhAYIissRVVqa216e4GRkpWis7m5urq8v8zR1dbZ2tzc3eHp7/Dz9Pj9/gz0LfIAAAC6SURBVBgZhcEHEoIwEAXQryDEXrEX7FEg6O797yaz40wgOvoe/mvOk2TexIfwxIVTCNeYxRiuHYsdXFcSF7g0CQ2XJqHh0iQ0KrwaNAmNmgdrv8KZxBmbPazcYEtiC5PDOnCrT2LQ4gOsKU/qayqs6xOewmo/TKcxXC6HjY55tFES8b2LQvfOEcqCBT/j2Sx+8iJAhTdKuZCOPLjCXp73QnyTZfjkK6WMUUr5qAhu/HYLUOYf+e3o47cXpVkeKeaqKxgAAAAASUVORK5CYII="},315:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAmVBMVEUAAAD///+q/6r///////+Z/5n///////////////////////////////////9S8XZR8XVQ8XX///////////////////////////////9J8G7///9L8XD///9I8G1F8Gr///////////////////9J8G5J8G5K8G////////////////////////////////////8/72b////MZmusAAAAMXRSTlMAAQMDBAUGDhAYIissRVVqa216e4GRkpWis7m5urq8x8zR1dbZ2tzd4env8PP0+P3+wQRYnAAAALpJREFUGBmFwQcSgjAQBdCPIMSu2HtBCJagu/c/nMyOM4Ho6Hv4r7W4XhctfIjOXDpHcI1ZjOHak9jDlZHI4NIkNFyahIZLk9Co8T1oEhqeD+u4RkoixfYIqzDYkdjBFLBO3B6QGLb5BGvGk8aGSpvGhGewOg/TbY5Wq1Gzax4dVEz50kOpd+EpqsIlPw/z+eHJyxA1fnzj0i324Yr6RdGP8M39jk+BUsoYpVSAmjDntzxEVZDwWxLgtxf/sx2iIkNIcAAAAABJRU5ErkJggg=="},316:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAmVBMVEUAAAD///+q/6r///////+Z/5n///////////////////////////////////9S8XZR8XVQ8XX///////9P8nL///////////////////9J8G7///9L8XD///9I8G1F8Gr///////////////////9J8G5J8G5K8G////////////////////////////////////8/72b///+DMAvqAAAAMXRSTlMAAQMDBAUGDhAYIissRVVqa216gYiRkpWis7m5urq8x8zR1dbZ2tzd4env8PP0+P3+9B7C1gAAALpJREFUGBmFwQcSgjAQBdCPIMSu2HtBCJagu/c/nMyOM4Ho6Hv4r7W4XhctfIjOXDpHcE1ITODak9jDlZHI4NIkNFyahIZLk9Co8T1oEhqeD+u4RkoixfYIqzDYkdjBFLBO3B6QGLb5BGvG48aGSpvGmGewOg/TbY5Wq1Gzax4dVEz50kOpd+EpqsIlPw/z+eHJyxA1fnzj0i324Yr6RdGP8M39jk+BUsoYpVSAmjDntzxEVZDwWxLgtxf1pB2csnl/+QAAAABJRU5ErkJggg=="},317:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAn1BMVEUAAAD///+q/6r///////+Z/5n///////////9r8ob///////////////////////9S8XZR8XVQ8XX///////9Q8nT///////////////////9J8G7///9L8XD///9I8G1F72tG72v///////////////9J8G5J8G5K8G9G8Gz///////////////////////////////////8/72b///8BEpvzAAAAM3RSTlMAAQMDBAUGDhATGCIrLEVVamtteoGGkZKVorO5ubq6vMXFzNHV1trc3eHh6e/w8/T4/f51citoAAAAu0lEQVQYGYXBBxKCMBAF0K8gxoqCvVeINeju/c8ms+NMIDr6Hv5rTq/XaRMfGifKnRpwDUkM4dqS2MCVkkjh0iQ0XJqEhkuT0CjxKtAkNCoerP0CCYkEqz2szGBNYg2TwTpwq0ei3+IDrDEPqkvKLasDHsNqP0ynFs3nUa1jHm0UjPjSRa574RGKghk/d5PJ7smzACVefOPcLfbgqodZFtbxzf2OT75SyhillI+S4Mxv5wBF/pHfjj5+ewF0ux7dSdOXwQAAAABJRU5ErkJggg=="},318:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAnFBMVEUAAAD///+q/6r///////+Z/5n///////////9r8oZm7oj///////////////////9S8XZR8XVQ8XX///////9P8HP///////////9K8G////9J8G7///9L8XD///9I8G1G8Gv///////////////9J8G5J8G5K8G9F8Gz///////////////////////9H8Gz///////8/72b////gzZ6EAAAAMnRSTlMAAQMDBAUGDhATHiIrLEVVamtteoGHkZKVrbO5ubq6vMbM0dXW2tzd4eHp8PP0+Pn9/gzRgLkAAAC7SURBVBgZhcEHEoIwEAXQryDE3rtYAI0tqLv3v5vMjjOB4Oh7+K+1fDyWLVQ0z5Q7N+GakpjCtSexh+tE4gSXJqHh0iQ0XJqERolXgyahUfNgxRscSRyxjWFlBjsSO5gMVsLtAYlhmxNYc57UI8pF9QnPYXWeptsYrdejRtc8OyiY8bWHXO/KMxQFK34dFovDi1cBSrzxjXO3sQdX2M+yfohv7ndU+UopY5RSPkqCC39cAhT5KX+kPn57A9BBHkgIY7KNAAAAAElFTkSuQmCC"},319:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAk1BMVEUAAAD///////9/v3+//7////////////////////////////////////////////9S8XX///////////////////////////////////////9H8GxN8HD///////////////////////////////////////////////////////////////////////8/72b///+yOX0uAAAAL3RSTlMAAQMEBAQGDhAYIissRVVfbXp7gZGSlaKztLm6urq/zM7Q0dXW2eHp7/Dz9Pj9/pF1+DQAAAC2SURBVBgZhcEHDoJAFATQEQXW3nvBL1gXde5/OsmPycJq9D3815xfLvMmPsRHFo4xfCOqEXw7qh18QiXwCZXAJ1QCn1AJKoIahEpQC+AcVthT7bE9wMktllRL2BxOylafqt9iCmfKcX3zLGzqY07htO+20xis14NGx97bKJnw3EWhe+YEZdGCj2Q2Sx5cRKgIhlcWrsMAvriX570Y39xu+BQaY6w1xoSoiE58O0UoCzO+ZSF+ewGvmRyM7IpwUQAAAABJRU5ErkJggg=="},320:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAk1BMVEUAAAD///////9//3////+Z/5n///////////////////////////////////9T8XVR8XT///////////////////////////////////9I8G3///////9K8G7///////////////////////////////////////////////////////////////////8/72b///92MoCSAAAAL3RSTlMAAQMEBAUGDhAYIissRVVrbnp7gZGSlaKztLm5uru/zM7Q0dXW2eHp7/Dz9Pj9/jX+F5MAAAC2SURBVBgZhcEHDoJAFATQERHW3nvBL1gXde5/OsmPycJq9D3815xfLvMmPsRHFo4xfCOqEXw7qh18QiXwCZXAJ1QCn1AJKoIahEpQC+Ac1thT7bE5wMktllRL2BxOylb/qfotpnCmHNe3z8K2PuYUTvtuO43BajVodOy9jZIJz10UumdOUBYt+Ehms+TBRYSKYHhl4ToM4It7ed6L8c3thk+hMcZaY0yIiujEt1OEsjDjWxbitxep+hyEGOh1fQAAAABJRU5ErkJggg=="},321:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAllBMVEUAAAD///////9//3////+Z/5n///////////////////////////////////9S83ZU83ZQ8XX///////////////////////////////9J8G7///////9L8HBI8Gz///////////////////////////////////////////////////////////////////8/72b///+bZcbkAAAAMHRSTlMAAQMEBAUGDhAYIissRVVqam16e4GRkpWis7m5uru9v8zO0NHV1tnh6e/w8/T4/f5AQbNuAAAAt0lEQVQYGYXBBw6CQBQE0BER1t57Qb9dF2XufznJj8nCavQ9/FefXa+zOj7EJ+ZOMXxDqiF8CVUCn1AJfEIl8AmVwCdUgpKgAqESVAI4+yV2VDus9nBSi02mNrApnAMb3Uz1GjzAmXBUXWe5dXXECZzmw7Zq/cWiX2vZRxMFY17ayLUvHKMomvO5nU63T84jlASDG3O3QQBf3EnTToxv7nd8Co0x1hpjQpREZ76dIxSFR74dQ/z2AnF8HSubvLfMAAAAAElFTkSuQmCC"},322:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAllBMVEUAAAD///+q/6r///////+Z/5n///////////////////////////////////9S8XZR8XVQ8XX///////////////////////////////9J8G7///9L8XD///9I8G3///////////////////////////9J8G7///////////////////////////////////8/72b///+h1cuQAAAAMHRSTlMAAQMDBAUGDhAYIissRVVqa216e4GRkpWis7m5urq8v8zQ0dXW2drh6e/w8/T4/f6u3cT0AAAAt0lEQVQYGYXBBw6CQBQE0FEQ1t57wW8vizL3v5zkx2RhNfoe/qvPrtdZHR/iI3PHGL4h1RC+hCqBT6gEPqES+IRK4BMqQUlQgVAJKgGc3RKnTJ2w3sFJLTaZ2sCmcPZsdDPVa3APZ8JRdZXlVtURJ3CaD9uq9ReLfq1lH00UjHlpI9e+cIyiaM7ndjrdPjmPUBIMbszdBgF8cSdNOzG+ud/xKTTGWGuMCVESnfl2jlAUHvh2CPHbC16RHR5S91G1AAAAAElFTkSuQmCC"},323:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAmVBMVEUAAAD///+q/6r///////+Z/5n///////////////////////////////////9S8XZR8XVQ8XX///////////////////////////////9J8G7///9L8XD///9I8G3///////////////////////////9J8G5K8G////////////////////////////////////8/72b////7EXAcAAAAMXRSTlMAAQMDBAUGDhAYIissRVVqa216e4GRkpWis7m5urq8v8zQ0dXW2drd4env8PP0+P3+/xN+dwAAALhJREFUGBmFwYcOgjAUBdCrIBT33qtuxaK9//9xkheTQjV6Dv5LprfbNMGH+MjcMYZvQDGAb0OxgU9TaPg0hYZPU2j4NIVGSVDB2YozKgGc3QInK05Y7eBkBmsr1jAZnD3rHSu6de7hjDmsLm1uWR1yDKfxMM1abz7v1Zrm0UDBiNcWcq0rRyiKZnxuJ5Ptk7MIJUE/ZS7tB/DF7Sxrx/jmfsenUClljFIqREl04dslQlF44NshxG8v8ugdnOPneLsAAAAASUVORK5CYII="},324:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAmVBMVEUAAAD///+q/6r///////+Z/5n///////////////////////////////////9S8XZR8XVQ8XX///////////////////////////////9J8G7///9L8XD///9I8G3///////////////////////////9J8G5K8G////////////////////////////////////8/72b////7EXAcAAAAMXRSTlMAAQMDBAUGDhAYIissRVVqa216e4GRkpWis7m5urq8v8zQ0dXW2drd4env8PP0+P3+/xN+dwAAALlJREFUGBmFwYcOgjAUBdCrINS998C6cBXt/f+Pk7yYFKrRc/BffXa9zur4EB+ZO8bwDSmG8CUUCXyaQsOnKTR8mkLDl1qRoiSoILUiRSWAs1viZMUJ6x2czGBjxQYmg7Nno2tFr8E9nAlH1ZXNraojTuA0H6ZV6y8W/VrLPJooGPPSRq594RhF0ZzP7XS6fXIeoSQY3Ji7DQL44k6WdWJ8c7/jU6iUMkYpFaIkOvPtHKEoPPDtEOK3F/v9HaLAHfklAAAAAElFTkSuQmCC"},325:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAmVBMVEUAAAD///+q/6r///////+Z/5n///////////////////////////////////9S8XZR8XVQ8XX///////////////////////////////9J8G7///9L8XD///9I8G3///////////////////////////9J8G5K8G////////////////////////////////////8/72b////7EXAcAAAAMXRSTlMAAQMDBAUGDhAYIissRVVqa216e4GRkpWis7m5urq8v8zQ0dXW2drd4env8PP0+P3+/xN+dwAAALtJREFUGBmFwYcOgjAUBdCrrLoHuHAgrgpaoO//P07yYlKoRs/Bf711nq97+BBcqXYNYAuJhbAlxBLYUmIpbCmxFDapmYRNaibR4nQgNZPoODBOW9w0u2F/glEoHDQ7QBUwztSfaDbt0xnGkqLuTtd23YiWMAalGnqzOJ55Q1UO0LCgbITaKKMFmvwNVcfV6ljRxkeLM39Q7TF3YAvGRTEO8M3ziU+uEEIpIYSLFv9Ob3cfTe6F3i4ufnsBBbcdqHLgiBwAAAAASUVORK5CYII="},326:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAmVBMVEUAAAD///+q/6r///////+Z/5n///////////////////////////////////9S8XZR8XVQ8XX///////////////////////////////9J8G7///9L8XD///9I8G3///////////////////////////9J8G5K8G////////////////////////////////////8/72b////7EXAcAAAAMXRSTlMAAQMDBAUGDhAYIissRVVqa216e4GRkpWis7m5urq8v8zQ0dXW2drd4env8PP0+P3+/xN+dwAAALxJREFUGBmFwQsTgUAUBtAvpZaIEPLIo1iPNvb+/x+nuWNmaxnOwX+95e227OFDcKLaKYBtSmwK247YDrYDsQNsUjMJm9RMwiY1k2hxHUjNJBwXxnGNs2ZnbI8wKoVMswyqgpFTf6TZuE85jDnNOhtd23RmNIcRPtSgG69WcXegHiEaEroOURteKUGTn9Jzv1jsn5T6aHEnd6rdJy5sQVRVUYBvyhKfPCGEUkIIDy3+hd4uPpq8gt4KD7+9AA/4Ha7O8FpQAAAAAElFTkSuQmCC"},327:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAGVElEQVR4Xu2cPWwcRRTH/2/WNhSkCMbQEAQEEoNEw0cDKeK7C4gGpQCUCCQkRPjwrQ0FJHwIYqOIiECB7DsDsSgiIYiAIqJBkDs7RaAB0wExKIDiNMQYJAIS2N55aPfuzNk+cju7s7Nrea69N+/N+83b+XjzQbA/IwTIiBVrBBa0oSCwoC1oQwQMmbERbUEbImDIjI1oC9oQAUNmbERb0IYIGDJjI3o9g+aR7Vd6wtlGRL1g3kqE68G4FIQNYGwI2BDOg3EehN+Y8QOIppn5lCO9kzR44qwhfqHNZCKieT/EYk9fnyDnXmLOMbAltActBAn4nokmJHsfdcxOTtIwZBx9OsqmCtqPXIjOfoZ8kIFNOhxaqYOAGYJ4F3JhLM1ITwU0j+Q2SxL7AH4IhK4kAK/SyZgH6Ihg+SoNTpw2YrPJiFHQXN5+CajjJSn5KQCdpp2t21sQgt4AL75MxRN/mqqDMdA8tuMeZi4xcyJdhCowIpohIpf6j3+sWjaKfOKg+YP7uuS5udd9p5izlf8mAvuNLy7vfpru/3A+CsCwZRIF7Q92TOIYE90StkJpyBHzFLHcmeRgmRhofvvOXrngfQrgqjTgRbB5RnQ6d9Fjn52KULZtkURAz5fztzmMTwB0t61BtgTmPMLdXcXql7qrpR10PZJPrkHIDbZzotPZpjuytYL2+2QpnM/XUHfxf4F7RkjvDp19tjbQ/uyCf5n7IusDX9guIRggr+i+XddsRBtor5QbAWggrCMR5P4QRIcAnKuX7WaWexm0MYKukEV41HEnBkMKX1BMC+jaYkQeS3SeTDTsFCtDzd545dyzYDqoA0QrHf48m0js1LGoiQ3aX1YzOr5NfMXHNOgMVEabgXAp94gEjScF2tcbrCCxeGPc5Xp80GOFQ1LyM0k6G+hOCbRvWgh6jfore+P4GAt0kIUT9J2RBFGKoAEsCMk3xMn6xQLtjRYOg3hPnJYOXTZd0H4fMu4UK4+Gru8KwciggzkzOafN5ZPT6aOXeDHmBXubo86to4Mu7XhFQj4XtYWVy6Ud0X5fDXGQ3OPPK9c92OKM8PP3+Lgn/3NS208tq5QB0MG22Gz16ih7kJFAL5T68gKiEqGNohfJAGi/8hKy0OlOVlUdiQTaKxfeBPPjqsZiyWcENIjecoqVJ1R9iQRalvLTcY8EqFY0zXl0c139owzCrW5Vrb8y6HqGbkbVUGz5rES0PyhKb5Pq7EMZ9GIpv4uA92ODU1WQIdAM7O5wq0dVXFAGzeXCkGTer2JEi2yGQAuiYVqR4GrnozJor5T3o3lXO8Xa/88QaABHHbe6W8XHKKCnANysYkSLbLZAf+24VaWdfWXQspT/kYFrtMBTUZIh0AT8JNzqtSrVVwddzs8y4zIVI1pkswSa8KsoVntU/FIHXcr/zcBFKka0yGYJNPCPcKsXq/hlQavQqsuSEdC26wAZ6jrsYGhoMPyKGUpTmwhf5+oiWeqjCVOiWL1VxS/lPtouWAK8BhYs5cIQ1vkSHC3OmLSLbuWITiupJJgGacW5jsWR3B4SdLidk7r/N5NUqh1kNJ8mBb/nuBMPNEPzSvl3ADysG2Q7fUbSpH4lUkn81zY4vwEwWwfRzcBN7aDo/t9Y4t+veCpbWbqJRdVncisrlc3ZqGA0lzO6OZvKcQPNwKKoM37cwK8kmz5AE4WM5jLGD9AEoE0fCQNSOIj+X0v5iSSS3nWqm7INDcrz6GXTK5OHHFM4iL7sg2AadwZSOORYi2p7bDds7xQrogPY9iB6KNbxQdurFWZA16LawGWhFNKkmbos1GjOpK+/CdABcisvNocPl3MvSKYDoUIqklDGrr8FUZ38hc6/AIwI0NI9Qwn5JEC1x6w0/zJ7oXNpbm2vKLds8tiD4Uqt9tJ9609LO2jfjH1GYjXsREAH3Yh9GGUZ7cRAN/ps+9RPjXeioBuzEft4lQHQje8na8+xATgrhCjqeLkgzMwy8YhevsCwDwyGaRRtMkHWzxH7IA0/mSnoiPDWwZOZq+bc9hFYbcEbSpF91jgUJv1CjYe6HaJeyexfntxCwMZWD3Uz8Dv8S5ZE0559qFt/Y6w1jUZnHWsNjs76WtA6aV5AlwVtQRsiYMiMjWgL2hABQ2ZsRFvQhggYMmMj2oI2RMCQGRvRhkD/C6aEaIjDMHoSAAAAAElFTkSuQmCC"},328:function(e,t,n){e.exports=n.p+"static/media/\u54c1\u724c\u4ef7\u503cLogo.a46ae4e0.png"},4:function(module,exports,__webpack_require__){var factory;window,factory=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=111)}([,,function(e,t,n){e.exports={default:n(3),__esModule:!0}},function(e,t,n){var r=n(4),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t){var n=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r;void 0===(r=function(){return function(){var t,n=function(){var e,t,n,r,i,o=[],s=o.concat,a=o.filter,c=o.slice,u=window.document,d={},l={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,b=/([A-Z])/g,g=["val","css","html","text","data","width","height","offset"],_=u.createElement("table"),y=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:_,thead:_,tfoot:_,td:y,th:y,"*":u.createElement("div")},S=/complete|loaded|interactive/,A=/^[\w-]*$/,x={},C=x.toString,E={},k=u.createElement("div"),I={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},T=Array.isArray||function(e){return e instanceof Array};function R(e){return null==e?String(e):x[C.call(e)]||"object"}function M(e){return"function"==R(e)}function O(e){return null!=e&&e==e.window}function P(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function j(e){return"object"==R(e)}function N(e){return j(e)&&!O(e)&&Object.getPrototypeOf(e)==Object.prototype}function D(e){var n=!!e&&"length"in e&&e.length,r=t.type(e);return"function"!=r&&!O(e)&&("array"==r||0===n||"number"==typeof n&&n>0&&n-1 in e)}function B(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function L(e){return e in l?l[e]:l[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||f[B(e)]?t:t+"px"}function U(e){return"children"in e?c.call(e.children):t.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function F(e,t){var n,r=e?e.length:0;for(n=0;n<r;n++)this[n]=e[n];this.length=r,this.selector=t||""}function G(t,n,r){for(e in n)r&&(N(n[e])||T(n[e]))?(N(n[e])&&!N(t[e])&&(t[e]={}),T(n[e])&&!T(t[e])&&(t[e]=[]),G(t[e],n[e],r)):void 0!==n[e]&&(t[e]=n[e])}function W(e,n){return null==n?t(e):t(e).filter(n)}function q(e,t,n,r){return M(t)?t.call(e,n,r):t}function z(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function Q(e,t){var n=e.className||"",r=n&&void 0!==n.baseVal;if(void 0===t)return r?n.baseVal:n;r?n.baseVal=t:e.className=t}function X(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?t.parseJSON(e):e):e}catch(n){return e}}function Y(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)Y(e.childNodes[n],t)}return E.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=k).appendChild(e),r=~E.qsa(i,t).indexOf(e),o&&k.removeChild(e),r},r=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},i=function(e){return a.call(e,(function(t,n){return e.indexOf(t)==n}))},E.fragment=function(e,n,r){var i,o,s;return h.test(e)&&(i=t(u.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(m,"<$1></$2>")),void 0===n&&(n=p.test(e)&&RegExp.$1),n in w||(n="*"),(s=w[n]).innerHTML=""+e,i=t.each(c.call(s.childNodes),(function(){s.removeChild(this)}))),N(r)&&(o=t(i),t.each(r,(function(e,t){g.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),i},E.Z=function(e,t){return new F(e,t)},E.isZ=function(e){return e instanceof E.Z},E.init=function(e,n){var r,i;if(!e)return E.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&p.test(e))r=E.fragment(e,RegExp.$1,n),e=null;else{if(void 0!==n)return t(n).find(e);r=E.qsa(u,e)}else{if(M(e))return t(u).ready(e);if(E.isZ(e))return e;if(T(e))i=e,r=a.call(i,(function(e){return null!=e}));else if(j(e))r=[e],e=null;else if(p.test(e))r=E.fragment(e.trim(),RegExp.$1,n),e=null;else{if(void 0!==n)return t(n).find(e);r=E.qsa(u,e)}}return E.Z(r,e)},(t=function(e,t){return E.init(e,t)}).extend=function(e){var t,n=c.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){G(e,n,t)})),e},E.qsa=function(e,t){var n,r="#"==t[0],i=!r&&"."==t[0],o=r||i?t.slice(1):t,s=A.test(o);return e.getElementById&&s&&r?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:c.call(s&&!r&&e.getElementsByClassName?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},t.contains=u.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},t.type=R,t.isFunction=M,t.isWindow=O,t.isArray=T,t.isPlainObject=N,t.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},t.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},t.inArray=function(e,t,n){return o.indexOf.call(t,e,n)},t.camelCase=r,t.trim=function(e){return null==e?"":String.prototype.trim.call(e)},t.uuid=0,t.support={},t.expr={},t.noop=function(){},t.map=function(e,n){var r,i,o,s,a=[];if(D(e))for(i=0;i<e.length;i++)null!=(r=n(e[i],i))&&a.push(r);else for(o in e)null!=(r=n(e[o],o))&&a.push(r);return(s=a).length>0?t.fn.concat.apply([],s):s},t.each=function(e,t){var n,r;if(D(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},t.grep=function(e,t){return a.call(e,t)},window.JSON&&(t.parseJSON=JSON.parse),t.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){x["[object "+t+"]"]=t.toLowerCase()})),t.fn={constructor:E.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=E.isZ(t)?t.toArray():t;return s.apply(E.isZ(this)?this.toArray():this,n)},map:function(e){return t(t.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return t(c.apply(this,arguments))},ready:function(e){return S.test(u.readyState)&&u.body?e(t):u.addEventListener("DOMContentLoaded",(function(){e(t)}),!1),this},get:function(e){return void 0===e?c.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return M(e)?this.not(this.not(e)):t(a.call(this,(function(t){return E.matches(t,e)})))},add:function(e,n){return t(i(this.concat(t(e,n))))},is:function(e){return this.length>0&&E.matches(this[0],e)},not:function(e){var n=[];if(M(e)&&void 0!==e.call)this.each((function(t){e.call(this,t)||n.push(this)}));else{var r="string"==typeof e?this.filter(e):D(e)&&M(e.item)?c.call(e):t(e);this.forEach((function(e){r.indexOf(e)<0&&n.push(e)}))}return t(n)},has:function(e){return this.filter((function(){return j(e)?t.contains(this,e):t(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!j(e)?e:t(e)},last:function(){var e=this[this.length-1];return e&&!j(e)?e:t(e)},find:function(e){var n=this;return e?"object"==typeof e?t(e).filter((function(){var e=this;return o.some.call(n,(function(n){return t.contains(n,e)}))})):1==this.length?t(E.qsa(this[0],e)):this.map((function(){return E.qsa(this,e)})):t()},closest:function(e,n){var r=[],i="object"==typeof e&&t(e);return this.each((function(t,o){for(;o&&!(i?i.indexOf(o)>=0:E.matches(o,e));)o=o!==n&&!P(o)&&o.parentNode;o&&r.indexOf(o)<0&&r.push(o)})),t(r)},parents:function(e){for(var n=[],r=this;r.length>0;)r=t.map(r,(function(e){if((e=e.parentNode)&&!P(e)&&n.indexOf(e)<0)return n.push(e),e}));return W(n,e)},parent:function(e){return W(i(this.pluck("parentNode")),e)},children:function(e){return W(this.map((function(){return U(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||c.call(this.childNodes)}))},siblings:function(e){return W(this.map((function(e,t){return a.call(U(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return t.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=function(e){var t,n;return d[e]||(t=u.createElement(e),u.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]}(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=M(e);if(this[0]&&!n)var r=t(e).get(0),i=r.parentNode||this.length>1;return this.each((function(o){t(this).wrapAll(n?e.call(this,o):i?r.cloneNode(!0):r)}))},wrapAll:function(e){if(this[0]){var n;for(t(this[0]).before(e=t(e));(n=e.children()).length;)e=n.first();t(e).append(this)}return this},wrapInner:function(e){var n=M(e);return this.each((function(r){var i=t(this),o=i.contents(),s=n?e.call(this,r):e;o.length?o.wrapAll(s):i.append(s)}))},unwrap:function(){return this.parent().each((function(){t(this).replaceWith(t(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return this.each((function(){var n=t(this);(void 0===e?"none"==n.css("display"):e)?n.show():n.hide()}))},prev:function(e){return t(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return t(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(n){var r=this.innerHTML;t(this).empty().append(q(this,e,n,r))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=q(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,n){var r;return"string"!=typeof t||1 in arguments?this.each((function(r){if(1===this.nodeType)if(j(t))for(e in t)z(this,e,t[e]);else z(this,t,q(this,n,r,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(t))?r:void 0},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){z(this,e)}),this)}))},prop:function(e,t){return e=I[e]||e,1 in arguments?this.each((function(n){this[e]=q(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=I[e]||e,this.each((function(){delete this[e]}))},data:function(e,t){var n="data-"+e.replace(b,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?X(r):void 0},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=q(this,e,t,this.value)}))):this[0]&&(this[0].multiple?t(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(n){var r=t(this),i=q(this,e,n,r.offset()),o=r.offsetParent().offset(),s={top:i.top-o.top,left:i.left-o.left};"static"==r.css("position")&&(s.position="relative"),r.css(s)}));if(!this.length)return null;if(u.documentElement!==this[0]&&!t.contains(u.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+window.pageXOffset,top:n.top+window.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(n,i){if(arguments.length<2){var o=this[0];if("string"==typeof n){if(!o)return;return o.style[r(n)]||getComputedStyle(o,"").getPropertyValue(n)}if(T(n)){if(!o)return;var s={},a=getComputedStyle(o,"");return t.each(n,(function(e,t){s[t]=o.style[r(t)]||a.getPropertyValue(t)})),s}}var c="";if("string"==R(n))i||0===i?c=B(n)+":"+V(n,i):this.each((function(){this.style.removeProperty(B(n))}));else for(e in n)n[e]||0===n[e]?c+=B(e)+":"+V(e,n[e])+";":this.each((function(){this.style.removeProperty(B(e))}));return this.each((function(){this.style.cssText+=";"+c}))},index:function(e){return e?this.indexOf(t(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(Q(e))}),L(e))},addClass:function(e){return e?this.each((function(r){if("className"in this){n=[];var i=Q(this);q(this,e,r,i).split(/\s+/g).forEach((function(e){t(this).hasClass(e)||n.push(e)}),this),n.length&&Q(this,i+(i?" ":"")+n.join(" "))}})):this},removeClass:function(e){return this.each((function(t){if("className"in this){if(void 0===e)return Q(this,"");n=Q(this),q(this,e,t,n).split(/\s+/g).forEach((function(e){n=n.replace(L(e)," ")})),Q(this,n.trim())}}))},toggleClass:function(e,n){return e?this.each((function(r){var i=t(this);q(this,e,r,Q(this)).split(/\s+/g).forEach((function(e){(void 0===n?!i.hasClass(e):n)?i.addClass(e):i.removeClass(e)}))})):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return void 0===e?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return void 0===e?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],n=this.offsetParent(),r=this.offset(),i=v.test(n[0].nodeName)?{top:0,left:0}:n.offset();return r.top-=parseFloat(t(e).css("margin-top"))||0,r.left-=parseFloat(t(e).css("margin-left"))||0,i.top+=parseFloat(t(n[0]).css("border-top-width"))||0,i.left+=parseFloat(t(n[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||u.body;e&&!v.test(e.nodeName)&&"static"==t(e).css("position");)e=e.offsetParent;return e}))}},t.fn.detach=t.fn.remove,["width","height"].forEach((function(e){var n=e.replace(/./,(function(e){return e[0].toUpperCase()}));t.fn[e]=function(r){var i,o=this[0];return void 0===r?O(o)?o["inner"+n]:P(o)?o.documentElement["scroll"+n]:(i=this.offset())&&i[e]:this.each((function(n){(o=t(this)).css(e,q(this,r,n,o[e]()))}))}})),["after","prepend","before","append"].forEach((function(e,n){var r=n%2;t.fn[e]=function(){var e,i,o=t.map(arguments,(function(n){var r=[];return"array"==(e=R(n))?(n.forEach((function(e){return void 0!==e.nodeType?r.push(e):t.zepto.isZ(e)?r=r.concat(e.get()):void(r=r.concat(E.fragment(e)))})),r):"object"==e||null==n?n:E.fragment(n)})),s=this.length>1;return o.length<1?this:this.each((function(e,a){i=r?a:a.parentNode,a=0==n?a.nextSibling:1==n?a.firstChild:2==n?a:null;var c=t.contains(u.documentElement,i);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!i)return t(e).remove();i.insertBefore(e,a),c&&Y(e,(function(e){if(null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},t.fn[r?e+"To":"insert"+(n?"Before":"After")]=function(n){return t(n)[e](this),this}})),E.Z.prototype=F.prototype=t.fn,E.uniq=i,E.deserializeValue=X,t.zepto=E,t}();return window.Zepto=n,void 0===window.$&&(window.$=n),e.exports=n,function(e){var t=1,n=Array.prototype.slice,r=e.isFunction,i=function(e){return"string"==typeof e},o={},s={},a="onfocusin"in window,c={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=t++)}function l(e,t,n,r){if((t=f(t)).ns)var i=(s=t.ns,new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)"));var s;return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!r||e.sel==r)}))}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e,t){return e.del&&!a&&e.e in c||!!t}function h(e){return u[e]||a&&c[e]||e}function m(t,n,r,i,s,a,c){var l=d(t),m=o[l]||(o[l]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(r);var o=f(n);o.fn=r,o.sel=s,o.e in u&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var d=a||r;o.proxy=function(e){if(!(e=w(e)).isImmediatePropagationStopped()){e.data=i;var n=d.apply(t,void 0==e._args?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},o.i=m.length,m.push(o),"addEventListener"in t&&t.addEventListener(h(o.e),o.proxy,p(o,c))}))}function v(e,t,n,r,i){var s=d(e);(t||"").split(/\s/).forEach((function(t){l(e,t,n,r).forEach((function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(h(t.e),t.proxy,p(t,i))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:m,remove:v},e.proxy=function(t,o){var s=2 in arguments&&n.call(arguments,2);if(r(t)){var a=function(){return t.apply(o,s?s.concat(n.call(arguments)):arguments)};return a._zid=d(t),a}if(i(o))return s?(s.unshift(t[o],t),e.proxy.apply(null,s)):e.proxy(t[o],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},g=function(){return!1},_=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function w(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(y,(function(e,r){var i=n[e];t[e]=function(){return this[r]=b,i&&i.apply(n,arguments)},t[r]=g})),t.timeStamp||(t.timeStamp=Date.now()),(void 0!==n.defaultPrevented?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function S(e){var t,n={originalEvent:e};for(t in e)_.test(t)||void 0===e[t]||(n[t]=e[t]);return w(n,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,s,a,c){var u,d,l=this;return t&&!i(t)?(e.each(t,(function(e,t){l.on(e,o,s,t,c)})),l):(i(o)||r(a)||!1===a||(a=s,s=o,o=void 0),void 0!==a&&!1!==s||(a=s,s=void 0),!1===a&&(a=g),l.each((function(r,i){c&&(u=function(e){return v(i,e.type,a),a.apply(this,arguments)}),o&&(d=function(t){var r,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return r=e.extend(S(t),{currentTarget:s,liveFired:i}),(u||a).apply(s,[r].concat(n.call(arguments,1)))}),m(i,t,a,s,o,d||u)})))},e.fn.off=function(t,n,o){var s=this;return t&&!i(t)?(e.each(t,(function(e,t){s.off(e,n,t)})),s):(i(n)||r(o)||!1===o||(o=n,n=void 0),!1===o&&(o=g),s.each((function(){v(this,t,o,n)})))},e.fn.trigger=function(t,n){return(t=i(t)||e.isPlainObject(t)?e.Event(t):w(t))._args=n,this.each((function(){t.type in c&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var r,o;return this.each((function(s,a){(r=S(i(t)?e.Event(t):t))._args=n,r.target=a,e.each(l(a,t.type||t),(function(e,t){if(o=t.proxy(r),r.isImmediatePropagationStopped())return!1}))})),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){i(e)||(e=(t=e).type);var n=document.createEvent(s[e]||"Events"),r=!0;if(t)for(var o in t)"bubbles"==o?r=!!t[o]:n[o]=t[o];return n.initEvent(e,r,!0),w(n)}}(n),function(e){var t,n,r=+new Date,i=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,c=/^\s*$/,u=i.createElement("a");function d(t,n,r,o){if(t.global)return function(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}(n||i,r,o)}function l(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===d(t,n,"ajaxBeforeSend",[e,t]))return!1;d(t,n,"ajaxSend",[e,t])}function f(e,t,n,r){var i=n.context;n.success.call(i,e,"success",t),r&&r.resolveWith(i,[e,"success",t]),d(n,i,"ajaxSuccess",[t,n,e]),h("success",t,n)}function p(e,t,n,r,i){var o=r.context;r.error.call(o,n,t,e),i&&i.rejectWith(o,[n,t,e]),d(r,o,"ajaxError",[n,r,e||t]),h(t,n,r)}function h(t,n,r){var i=r.context;r.complete.call(i,n,t),d(r,i,"ajaxComplete",[n,r]),function(t){t.global&&!--e.active&&d(t,null,"ajaxStop")}(r)}function m(){}function v(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function b(t,n,r,i){return e.isFunction(n)&&(i=r,r=n,n=void 0),e.isFunction(r)||(i=r,r=void 0),{url:t,data:n,success:r,dataType:i}}u.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var o,s,a=t.jsonpCallback,c=(e.isFunction(a)?a():a)||"Zepto"+r++,u=i.createElement("script"),d=window[c],h=function(t){e(u).triggerHandler("error",t||"abort")},m={abort:h};return n&&n.promise(m),e(u).on("load error",(function(r,i){clearTimeout(s),e(u).off().remove(),"error"!=r.type&&o?f(o[0],m,t,n):p(null,i||"error",m,t,n),window[c]=d,o&&e.isFunction(d)&&d(o[0]),d=o=void 0})),!1===l(m,t)?(h("abort"),m):(window[c]=function(){o=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+c),i.head.appendChild(u),t.timeout>0&&(s=setTimeout((function(){h("timeout")}),t.timeout)),m)},e.ajaxSettings={type:"GET",beforeSend:m,success:m,error:m,complete:m,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:m},e.ajax=function(r){var o,h,b=e.extend({},r||{}),g=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===b[t]&&(b[t]=e.ajaxSettings[t]);!function(t){t.global&&0===e.active++&&d(t,null,"ajaxStart")}(b),b.crossDomain||((o=i.createElement("a")).href=b.url,o.href=o.href,b.crossDomain=u.protocol+"//"+u.host!==o.protocol+"//"+o.host),b.url||(b.url=window.location.toString()),(h=b.url.indexOf("#"))>-1&&(b.url=b.url.slice(0,h)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=v(t.url,t.data),t.data=void 0)}(b);var _=b.dataType,y=/\?.+=\?/.test(b.url);if(y&&(_="jsonp"),!1!==b.cache&&(r&&!0===r.cache||"script"!=_&&"jsonp"!=_)||(b.url=v(b.url,"_="+Date.now())),"jsonp"==_)return y||(b.url=v(b.url,b.jsonp?b.jsonp+"=?":!1===b.jsonp?"":"callback=?")),e.ajaxJSONP(b,g);var w,S=b.accepts[_],A={},x=function(e,t){A[e.toLowerCase()]=[e,t]},C=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,E=b.xhr(),k=E.setRequestHeader;if(g&&g.promise(E),b.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",S||"*/*"),(S=b.mimeType||S)&&(S.indexOf(",")>-1&&(S=S.split(",",2)[0]),E.overrideMimeType&&E.overrideMimeType(S)),(b.contentType||!1!==b.contentType&&b.data&&"GET"!=b.type.toUpperCase())&&x("Content-Type",b.contentType||"application/x-www-form-urlencoded"),b.headers)for(n in b.headers)x(n,b.headers[n]);if(E.setRequestHeader=x,E.onreadystatechange=function(){if(4==E.readyState){E.onreadystatechange=m,clearTimeout(w);var t,n=!1;if(E.status>=200&&E.status<300||304==E.status||0==E.status&&"file:"==C){if(_=_||function(e){return e&&(e=e.split(";",2)[0]),e&&("text/html"==e?"html":"application/json"==e?"json":s.test(e)?"script":a.test(e)&&"xml")||"text"}(b.mimeType||E.getResponseHeader("content-type")),"arraybuffer"==E.responseType||"blob"==E.responseType)t=E.response;else{t=E.responseText;try{t=function(e,t,n){if(n.dataFilter==m)return e;var r=n.context;return n.dataFilter.call(r,e,t)}(t,_,b),"script"==_?(0,eval)(t):"xml"==_?t=E.responseXML:"json"==_&&(t=c.test(t)?null:e.parseJSON(t))}catch(r){n=r}if(n)return p(n,"parsererror",E,b,g)}f(t,E,b,g)}else p(E.statusText||null,E.status?"error":"abort",E,b,g)}},!1===l(E,b))return E.abort(),p(null,"abort",E,b,g),E;var I=!("async"in b)||b.async;if(E.open(b.type,b.url,I,b.username,b.password),b.xhrFields)for(n in b.xhrFields)E[n]=b.xhrFields[n];for(n in A)k.apply(E,A[n]);return b.timeout>0&&(w=setTimeout((function(){E.onreadystatechange=m,E.abort(),p(null,"timeout",E,b,g)}),b.timeout)),E.send(b.data?b.data:null),E},e.get=function(){return e.ajax(b.apply(null,arguments))},e.post=function(){var t=b.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=b.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var i,s=this,a=t.split(/\s/),c=b(t,n,r),u=c.success;return a.length>1&&(c.url=a[0],i=a[1]),c.success=function(t){s.html(i?e("<div>").html(t.replace(o,"")).find(i):t),u&&u.apply(s,arguments)},e.ajax(c),this};var g=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(g(t)+"="+g(n))},function t(n,r,i,o){var s,a=e.isArray(r),c=e.isPlainObject(r);e.each(r,(function(r,u){s=e.type(u),o&&(r=i?o:o+"["+(c||"object"==s||"array"==s?r:"")+"]"),!o&&a?n.add(u.name,u.value):"array"==s||!i&&"object"==s?t(n,u,i,r):n.add(r,u)}))}(r,t,n),r.join("&").replace(/%20/g,"+")}}(n),(t=n).fn.serializeArray=function(){var e,n,r=[];return this[0]&&t.each(this[0].elements,(function(i,o){n=o.type,(e=o.name)&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&function t(n){if(n.forEach)return n.forEach(t);r.push({name:e,value:n})}(t(o).val())})),r},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach((function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))})),e.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this},function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(n,r){try{return e(n,r)}catch(t){return null}}}}(),n}()}.call(t,n,t,e))||(e.exports=r)},,,function(e,t,n){e.exports={default:n(9),__esModule:!0}},function(e,t,n){n(10),n(11),n(54),n(58),n(76),n(77),e.exports=n(4).Promise},function(e,t){},function(e,t,n){"use strict";var r=n(12)(!0);n(15)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(13),i=n(14);e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c))<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(16),i=n(17),o=n(32),s=n(21),a=n(33),c=n(34),u=n(50),d=n(52),l=n(51)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,m,v,b){c(n,t,h);var g,_,y,w=function(e){if(!f&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",A="values"==m,x=!1,C=e.prototype,E=C[l]||C["@@iterator"]||m&&C[m],k=E||w(m),I=m?A?w("entries"):k:void 0,T="Array"==t&&C.entries||E;if(T&&(y=d(T.call(new e)))!==Object.prototype&&y.next&&(u(y,S,!0),r||"function"==typeof y[l]||s(y,l,p)),A&&E&&"values"!==E.name&&(x=!0,k=function(){return E.call(this)}),r&&!b||!f&&!x&&C[l]||s(C,l,k),a[t]=k,a[S]=p,m)if(g={values:A?k:w("values"),keys:v?k:w("keys"),entries:I},b)for(_ in g)_ in C||o(C,_,g[_]);else i(i.P+i.F*(f||x),t,g);return g}},function(e,t){e.exports=!0},function(e,t,n){var r=n(18),i=n(4),o=n(19),s=n(21),a=n(31),c=function e(t,n,c){var u,d,l,f=t&e.F,p=t&e.G,h=t&e.S,m=t&e.P,v=t&e.B,b=t&e.W,g=p?i:i[n]||(i[n]={}),_=g.prototype,y=p?r:h?r[n]:(r[n]||{}).prototype;for(u in p&&(c=n),c)(d=!f&&y&&void 0!==y[u])&&a(g,u)||(l=d?y[u]:c[u],g[u]=p&&"function"!=typeof y[u]?c[u]:v&&d?o(l,r):b&&y[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):m&&"function"==typeof l?o(Function.call,l):l,m&&((g.virtual||(g.virtual={}))[u]=l,t&e.R&&_&&!_[u]&&s(_,u,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(22),i=n(30);e.exports=n(26)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(23),i=n(25),o=n(29),s=Object.defineProperty;t.f=n(26)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(24);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){e.exports=!n(26)&&!n(27)((function(){return 7!=Object.defineProperty(n(28)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){e.exports=!n(27)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(24),i=n(18).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(24);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=n(21)},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(35),i=n(30),o=n(50),s={};n(21)(s,n(51)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(23),i=n(36),o=n(48),s=n(45)("IE_PROTO"),a=function(){},c=function(){var e,t=n(28)("iframe"),r=o.length;for(t.style.display="none",n(49).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[s]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(22),i=n(23),o=n(37);e.exports=n(26)?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),a=s.length,c=0;a>c;)r.f(e,n=s[c++],t[n]);return e}},function(e,t,n){var r=n(38),i=n(48);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(31),i=n(39),o=n(42)(!1),s=n(45)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(40),i=n(14);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(41);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(39),i=n(43),o=n(44);e.exports=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),d=o(s,u);if(e&&n!=n){for(;u>d;)if((a=c[d++])!=a)return!0}else for(;u>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var r=n(13),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(13),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(46)("keys"),i=n(47);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=n(18),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(16)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(18).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(22).f,i=n(31),o=n(51)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(46)("wks"),i=n(47),o=n(18).Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(31),i=n(53),o=n(45)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(14);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(55);for(var r=n(18),i=n(21),o=n(33),s=n(51)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var u=a[c],d=r[u],l=d&&d.prototype;l&&!l[s]&&i(l,s,u),o[u]=o.Array}},function(e,t,n){"use strict";var r=n(56),i=n(57),o=n(33),s=n(39);e.exports=n(15)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,s,a=n(16),c=n(18),u=n(19),d=n(59),l=n(17),f=n(24),p=n(20),h=n(60),m=n(61),v=n(65),b=n(66).set,g=n(68)(),_=n(69),y=n(70),w=n(71),S=n(72),A=c.TypeError,x=c.process,C=x&&x.versions,E=C&&C.v8||"",k=c.Promise,I="process"==d(x),T=function(){},R=i=_.f,M=!!function(){try{var e=k.resolve(1),t=(e.constructor={})[n(51)("species")]=function(e){e(T,T)};return(I||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(r){}}(),O=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;g((function(){for(var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s,a=i?t.ok:t.fail,c=t.resolve,u=t.reject,d=t.domain;try{a?(i||(2==e._h&&D(e),e._h=1),!0===a?n=r:(d&&d.enter(),n=a(r),d&&(d.exit(),s=!0)),n===t.promise?u(A("Promise-chain cycle")):(o=O(n))?o.call(n,c,u):c(n)):u(r)}catch(l){d&&!s&&d.exit(),u(l)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)}))}},j=function(e){b.call(c,(function(){var t,n,r,i=e._v,o=N(e);if(o&&(t=y((function(){I?x.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=I||N(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},D=function(e){b.call(c,(function(){var t;I?x.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},L=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw A("Promise can't be resolved itself");(n=O(t))?g((function(){var i={_w:r,_d:!1};try{n.call(t,u(e,i,1),u(B,i,1))}catch(o){B.call(i,o)}})):(r._v=t,r._s=1,P(r,!1))}catch(i){B.call({_w:r,_d:!1},i)}}};M||(k=function(e){h(this,k,"Promise","_h"),p(e),r.call(this);try{e(u(L,this,1),u(B,this,1))}catch(t){B.call(this,t)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(73)(k.prototype,{then:function(e,t){var n=R(v(this,k));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=I?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(L,e,1),this.reject=u(B,e,1)},_.f=R=function(e){return e===k||e===s?new o(e):i(e)}),l(l.G+l.W+l.F*!M,{Promise:k}),n(50)(k,"Promise"),n(74)("Promise"),s=n(4).Promise,l(l.S+l.F*!M,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!M),"Promise",{resolve:function(e){return S(a&&this===s?k:this,e)}}),l(l.S+l.F*!(M&&n(75)((function(e){k.all(e).catch(T)}))),"Promise",{all:function(e){var t=this,n=R(t),r=n.resolve,i=n.reject,o=y((function(){var n=[],o=0,s=1;m(e,!1,(function(e){var a=o++,c=!1;n.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,n[a]=e,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=R(t),r=n.reject,i=y((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(41),i=n(51)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(19),i=n(62),o=n(63),s=n(23),a=n(43),c=n(64),u={},d={};(t=e.exports=function(e,t,n,l,f){var p,h,m,v,b=f?function(){return e}:c(e),g=r(n,l,t?2:1),_=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(o(b)){for(p=a(e.length);p>_;_++)if((v=t?g(s(h=e[_])[0],h[1]):g(e[_]))===u||v===d)return v}else for(m=b.call(e);!(h=m.next()).done;)if((v=i(m,g,h.value,t))===u||v===d)return v}).BREAK=u,t.RETURN=d},function(e,t,n){var r=n(23);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e.return;throw void 0!==o&&r(o.call(e)),s}}},function(e,t,n){var r=n(33),i=n(51)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(59),i=n(51)("iterator"),o=n(33);e.exports=n(4).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(23),i=n(20),o=n(51)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},function(e,t,n){var r,i,o,s=n(19),a=n(67),c=n(49),u=n(28),d=n(18),l=d.process,f=d.setImmediate,p=d.clearImmediate,h=d.MessageChannel,m=d.Dispatch,v=0,b={},g=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},_=function(e){g.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++v]=function(){a("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete b[e]},"process"==n(41)(l)?r=function(e){l.nextTick(s(g,e,1))}:m&&m.now?r=function(e){m.now(s(g,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=_,r=s(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(r=function(e){d.postMessage(e+"","*")},d.addEventListener("message",_,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(s(g,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(18),i=n(66).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,c="process"==n(41)(s);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(c)n=function(){s.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var d=a.resolve(void 0);n=function(){d.then(u)}}else n=function(){i.call(r,u)};else{var l=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(20);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var r=n(18).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(23),i=n(24),o=n(69);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(21);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(18),i=n(4),o=n(22),s=n(26),a=n(51)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(51)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(s){}return n}},function(e,t,n){"use strict";var r=n(17),i=n(4),o=n(18),s=n(65),a=n(72);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then((function(){return n}))}:e,n?function(n){return a(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(17),i=n(69),o=n(70);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},,,function(e,t,n){e.exports={default:n(81),__esModule:!0}},function(e,t,n){n(82),e.exports=n(4).Object.keys},function(e,t,n){var r=n(53),i=n(37);n(83)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(17),i=n(4),o=n(27);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},,,,function(module,exports,__webpack_require__){"use strict";var _typeof2=__webpack_require__(88),_typeof3=_interopRequireDefault(_typeof2),_getPrototypeOf=__webpack_require__(106),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_stringify=__webpack_require__(2),_stringify2=_interopRequireDefault(_stringify);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Util(){}!function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(t,n){var r,i,o=e,s=[];if(n=n||o.length,t)for(r=0;r<t;r++)s[r]=o[0|Math.random()*n];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",r=0;r<36;r++)s[r]||(i=0|16*Math.random(),s[r]=o[19==r?3&i|8:i]);return s.join("")},Math.uuidFast=function(){for(var t,n=e,r=new Array(36),i=0,o=0;o<36;o++)8==o||13==o||18==o||23==o?r[o]="-":14==o?r[o]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,r[o]=n[19==o?3&t|8:t]);return r.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}}(),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var Logger=function(e){var t=this,n=0,r=1,i=2,o=3,s=4,a=5,c=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"];function u(n,r){try{!function(n,r){if(!(emedia&&emedia.LOG_LEVEL&&n<emedia.LOG_LEVEL)){var i=[];i.push(n),e&&i.push(e);for(var o=0;o<r.length;o++)i.push(r[o]&&r[o]._toString?r[o]._toString.call(r[o]):r[o]);t._log.apply(t,i)}}(n,r)}catch(i){if(console){if(console.error)return void console.error(i);if(console.log)return void console.log(i)}throw i}}function d(){if(!(emedia._logContextIndex<0)&&emedia._logContext&&emedia._logContext instanceof Array){var e=emedia._logContextIndex%emedia._logContext.length,t=emedia._logContext[e];t&&t instanceof Array||(t=emedia._logContext[e]=[]);var n=[];n.push(emedia._logContextIndex);var r,i=new Date;"function"===typeof i.toLocaleString?n.push(i.toLocaleString()):i.toJSON?n.push(i.toJSON()):i.toISOString?n.push(i.toISOString()):n.push(i+"");for(var o=0;o<arguments.length;o++){var s=arguments[o];"string"!==typeof s&&s?"string"!==typeof s.message?"function"!==typeof s.message?"string"!==typeof s.stack?s.event&&"function"===typeof s.event.toString||s.event&&"function"===typeof s.event.toString?n.push(s.event.toString()):"string"!==typeof s.candidate?"string"!==typeof s.sdp?isPlainObject(s)?n.push((0,_stringify2.default)(s)):n.push(String(s)):n.push(s.sdp):n.push(s.candidate):n.push(s.stack):n.push(s.message()):n.push(s.message):n.push(s)}if(emedia.config.loglastStoreArray&&t.push(r=n.join(" ")),"function"===typeof emedia.config.onSdkLog)try{r||(r=n.join(" ")),emedia.config.onSdkLog(r)}catch(a){console.error(a)}}}function l(){try{d.apply(null,arguments)}catch(e){console.warn(e)}}this._log=function(){var e=arguments[0];e=arguments[0]=c[e],emedia._logContext&&l.apply(null,arguments),!0===emedia.config.consoleLogger&&(emedia&&emedia.isElectron?console.log.apply(console,arguments):console&&e&&(console[e.toLowerCase()]||console.warn).apply(console,arguments))},this.log=function(){this._log&&u(i,arguments)},this.trace=function(){this._log&&u(n,arguments)},this.debug=function(){this._log&&u(r,arguments)},this.info=function(){this._log&&u(i,arguments)},this.warn=function(){this._log&&u(o,arguments)},this.error=function(){this._log&&u(s,arguments)},this.fatal=function(){this._log&&u(a,arguments)}};Logger.prototype.count=function(){if(emedia._logContext){emedia._logContextIndex++;var e=emedia._logContextIndex%emedia._logContext.length;0===e&&0!==emedia._logContextIndex&&(emedia._logContext.loadlogs=emedia._logContext[e]),emedia._logContext[e]=[]}},Util.prototype.logger=new Logger,Util.prototype.tagLogger=function(e){return new Logger(e)},Util.prototype.parseJSON=function(e){return JSON.parse(e)};var stringifyJSON=Util.prototype.stringifyJSON=function(e){return(0,_stringify2.default)(e)},class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,fnToString=hasOwn.toString,ObjectFunctionString=fnToString.call(Object),isPlainObject=Util.prototype.isPlainObject=function(e){var t,n;return!(!e||"[object Object]"!==toString.call(e)||"<JSAPI-Auto Javascript Object>"===e.toString()||"[object IFBComJavascriptObject]"===e.toString())&&(!(t=(0,_getPrototypeOf2.default)(e))||"function"===typeof(n=hasOwn.call(t,"constructor")&&t.constructor)&&fnToString.call(n)===ObjectFunctionString)};Util.prototype.isArray=Array.isArray,Util.prototype.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},Util.prototype.type=function(e){return null==e?e+"":"object"===("undefined"===typeof e?"undefined":(0,_typeof3.default)(e))||"function"===typeof e?class2type[toString.call(e)]||"object":"undefined"===typeof e?"undefined":(0,_typeof3.default)(e)},Util.prototype.extend=function(){var e,t,n,r,i,o,s=this,a=arguments[0]||{},c=1,u=arguments.length,d=!1;for("boolean"===typeof a&&(d=a,a=arguments[c]||{},c++),"object"===("undefined"===typeof a?"undefined":(0,_typeof3.default)(a))||s.isFunction(a)||(a={}),c===u&&(a=this,c--);c<u;c++)if(null!=(e=arguments[c]))for(t in e)n=a[t],a!==(r=e[t])&&(d&&r&&(s.isPlainObject(r)||(i=s.isArray(r)))?(i?(i=!1,o=n&&s.isArray(n)?n:[]):o=n&&s.isPlainObject(n)?n:{},a[t]=s.extend(d,o,r)):void 0!==r&&(a[t]=r));return a},Util.prototype.removeAttribute=function(e,t){if(null!==e&&void 0!==e){var n=e[t];return delete e[t],n}},Util.prototype.prototypeExtend_000=Util.prototype.classExtend=function(){var e,t=this;function n(){for(var e=0;e<arguments.length;e++){var n=arguments[e]||{};t.extend(!0,this,n)}this.__init__&&this.__init__.apply(this,arguments)}for(var r=0;r<arguments.length;r++){var i=arguments[r]||{};"function"===typeof i?e?(i.constructor=e,i.__proto__=e.prototype):e=i:t.extend(!0,n.prototype,i)}return e&&(n.prototype.__proto__=e.prototype),e&&(n.prototype.constructor=e),n.extend||(n.extend=function(e){return t.prototypeExtend(n,e)}),n},Util.prototype.prototypeExtend=Util.prototype.classExtend=function(){var e=this;function t(){for(var t=0;t<arguments.length;t++){var n=arguments[t]||{};e.extend(!0,this,n)}this.__init__&&this.__init__.apply(this,arguments)}for(var n=0;n<arguments.length;n++){var r=arguments[n]||{};"function"===typeof r&&(r=r.prototype),e.extend(!0,t.prototype,r)}return t.extend||(t.extend=function(n){return e.prototypeExtend(t,n)}),t},Util.prototype.hasLocalStorage=function(e){return null!=localStorage.getItem(e)&&"{}"!=localStorage.getItem(e)},Util.prototype.toggleClass=function(e,t){e.hasClass(t)?e.removeClass(t):e.addClass(t)},Util.prototype.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()},Util.prototype.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},Util.prototype.parseURL=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},Util.prototype.forEach=function(e,t){if(e&&(!this.isArray(e)||0!==e.length)&&(void 0===e.length||0!==e.length))if(e.length)for(var n=0;n<e.length;n++)t(n,e[n]);else if(e&&!this.isEmptyObject(e)){e=e||{};var r=this.extend(!1,{},e);for(var i in r)t(i,e[i])}},Util.prototype.isInt=function(e){return Number(e)===e&&e%1===0},Util.prototype.isFloat=function(e){return Number(e)===e&&e%1!==0},Util.prototype.list=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);return e},Util.prototype.addEvent=function(e,t,n){if(e.attachEvent)return e.attachEvent("on"+t,n);if(e.addEventListener)return e.addEventListener(t,n,!1);throw"Handler could not be attached"},Util.prototype.removeEvent=function(e,t,n){if(e.detachEvent)return e.detachEvent("on"+t,n);if(e.removeEventListener)return e.removeEventListener(t,n,!1);throw"Handler could not be removed"},Util.prototype.stopEvent=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1},Util.prototype.getDomPageRect=function(e){var t=e.getBoundingClientRect();return{x:t.left+(window.pageXOffset||window.document.documentElement.scrollLeft),y:t.top+(window.pageYOffset||window.document.documentElement.scrollTop),width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}},Util.prototype.getEventElementXY=function(e,t,n){var r,i,o=(e=e||window.event).changedTouches?e.changedTouches[0]:e.touches?e.touches[0]:e;void 0!=o.pageX&&void 0!=o.pageY?(r=o.pageX,i=o.pageY):void 0!=o.clientX&&void 0!=o.clientY&&(r=o.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=o.clientY+document.body.scrollTop+document.documentElement.scrollTop);var s=this.getDomPageRect(t),a=r-s.x,c=i-s.y;return(0===n||void 0==n)&&(n=1),{x:Math.round(Math.max(Math.min(a,s.width-1),0)/n),y:Math.round(Math.max(Math.min(c,s.height-1),0)/n),width:Math.round(s.width/n),height:Math.round(s.height/n),realX:a,realY:c}},Util.prototype.layoutEngine=function(){var e={presto:!!window.opera,trident:!!window.ActiveXObject&&(window.XMLHttpRequest?document.querySelectorAll?6:5:4),webkit:function(){try{return!navigator.taintEnabled&&(i.Features.xpath?i.Features.query?525:420:419)}catch(e){return!1}}(),gecko:!(!document.getBoxObjectFor&&null==window.mozInnerScreenX)&&(document.getElementsByClassName?19:18)};return e.webkit&&(e.webkit=function(e){var t=(navigator.userAgent.match(/WebKit\/([0-9\.]*) /)||["",e])[1];return parseFloat(t,10)}(e)),e}(),Util.prototype.targetDOM="object"===("undefined"===typeof HTMLElement?"undefined":(0,_typeof3.default)(HTMLElement))?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"===("undefined"===typeof e?"undefined":(0,_typeof3.default)(e))&&1===e.nodeType&&"string"===typeof e.nodeName},Util.prototype.cloneCSS=function(e,t){var n=window.getComputedStyle&&window.getComputedStyle(e,null)||e.currentStyle;for(var r in n){var i=n[r];/^[a-z]/i.test(r)&&[null,"",void 0].indexOf(i)<0&&(t.style[r]=i)}},Util.prototype.canYield=function(){try{return eval("!!Function('yield true;')().next()")}catch(e){return!1}}(),module.exports=new Util},function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(89)),i=s(n(92)),o="function"===typeof i.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===o(r.default)?function(e){return"undefined"===typeof e?"undefined":o(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":o(e)}},function(e,t,n){e.exports={default:n(90),__esModule:!0}},function(e,t,n){n(11),n(54),e.exports=n(91).f("iterator")},function(e,t,n){t.f=n(51)},function(e,t,n){e.exports={default:n(93),__esModule:!0}},function(e,t,n){n(94),n(10),n(104),n(105),e.exports=n(4).Symbol},function(e,t,n){"use strict";var r=n(18),i=n(31),o=n(26),s=n(17),a=n(32),c=n(95).KEY,u=n(27),d=n(46),l=n(50),f=n(47),p=n(51),h=n(91),m=n(96),v=n(97),b=n(100),g=n(23),_=n(24),y=n(53),w=n(39),S=n(29),A=n(30),x=n(35),C=n(101),E=n(103),k=n(98),I=n(22),T=n(37),R=E.f,M=I.f,O=C.f,P=r.Symbol,j=r.JSON,N=j&&j.stringify,D=p("_hidden"),B=p("toPrimitive"),L={}.propertyIsEnumerable,V=d("symbol-registry"),U=d("symbols"),F=d("op-symbols"),G=Object.prototype,W="function"==typeof P&&!!k.f,q=r.QObject,z=!q||!q.prototype||!q.prototype.findChild,Q=o&&u((function(){return 7!=x(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=R(G,t);r&&delete G[t],M(e,t,n),r&&e!==G&&M(G,t,r)}:M,X=function(e){var t=U[e]=x(P.prototype);return t._k=e,t},Y=W&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},H=function(e,t,n){return e===G&&H(F,t,n),g(e),t=S(t,!0),g(n),i(U,t)?(n.enumerable?(i(e,D)&&e[D][t]&&(e[D][t]=!1),n=x(n,{enumerable:A(0,!1)})):(i(e,D)||M(e,D,A(1,{})),e[D][t]=!0),Q(e,t,n)):M(e,t,n)},K=function(e,t){g(e);for(var n,r=v(t=w(t)),i=0,o=r.length;o>i;)H(e,n=r[i++],t[n]);return e},J=function(e){var t=L.call(this,e=S(e,!0));return!(this===G&&i(U,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,D)&&this[D][e])||t)},Z=function(e,t){if(e=w(e),t=S(t,!0),e!==G||!i(U,t)||i(F,t)){var n=R(e,t);return!n||!i(U,t)||i(e,D)&&e[D][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=O(w(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==D||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===G,r=O(n?F:w(e)),o=[],s=0;r.length>s;)!i(U,t=r[s++])||n&&!i(G,t)||o.push(U[t]);return o};W||(a((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function t(n){this===G&&t.call(F,n),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),Q(this,e,A(1,n))};return o&&z&&Q(G,e,{configurable:!0,set:t}),X(e)}).prototype,"toString",(function(){return this._k})),E.f=Z,I.f=H,n(102).f=C.f=$,n(99).f=J,k.f=ee,o&&!n(16)&&a(G,"propertyIsEnumerable",J,!0),h.f=function(e){return X(p(e))}),s(s.G+s.W+s.F*!W,{Symbol:P});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=T(p.store),ie=0;re.length>ie;)m(re[ie++]);s(s.S+s.F*!W,"Symbol",{for:function(e){return i(V,e+="")?V[e]:V[e]=P(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in V)if(V[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!W,"Object",{create:function(e,t){return void 0===t?x(e):K(x(e),t)},defineProperty:H,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var oe=u((function(){k.f(1)}));s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return k.f(y(e))}}),j&&s(s.S+s.F*(!W||u((function(){var e=P();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!Y(e))return b(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,N.apply(j,r)}}),P.prototype[B]||n(21)(P.prototype,B,P.prototype.valueOf),l(P,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(e,t,n){var r=n(47)("meta"),i=n(24),o=n(31),s=n(22).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(27)((function(){return c(Object.preventExtensions({}))})),d=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},l=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[r].w},onFreeze:function(e){return u&&l.NEED&&c(e)&&!o(e,r)&&d(e),e}}},function(e,t,n){var r=n(18),i=n(4),o=n(16),s=n(91),a=n(22).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,n){var r=n(37),i=n(98),o=n(99);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,a=n(e),c=o.f,u=0;a.length>u;)c.call(e,s=a[u++])&&t.push(s);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(41);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(39),i=n(102).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return s.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(38),i=n(48).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(99),i=n(30),o=n(39),s=n(29),a=n(31),c=n(25),u=Object.getOwnPropertyDescriptor;t.f=n(26)?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(n){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){n(96)("asyncIterator")},function(e,t,n){n(96)("observable")},function(e,t,n){e.exports={default:n(107),__esModule:!0}},function(e,t,n){n(108),e.exports=n(4).Object.getPrototypeOf},function(e,t,n){var r=n(53),i=n(52);n(83)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},,,function(e,t,n){e.exports=n(112)},function(e,t,n){"use strict";var r=window.emedia=window.emedia||{},i=r.util=n(87),o=n(5);if(r.config=function(e){for(var t in e=i.extend({},e))r.config[t]=e[t],"logLevel"===t&&(r.LOG_LEVEL=e[t]);r.config.loglastConfrCount&&!r._logContext&&(r._logContext=new Array(r.config.loglastConfrCount),r._logContextIndex=-1)},r.config({autoSub:!0,onlyEnter:!1,reconnect:13,reconnectDelay:3e3,getCopyIntervalMillis:3e4,checkConnectIntervalMillis:1e3,iceRebuildCount:3,iceRebuildIntervalMillis:500,enterTimeout:2e4,useRTCCfgIfServerReturn:!1,forceUseRTCCfgIfServerReturnWhenP2P:!0,allowRepeatAudioMixerPublish:!1,logVolumeWhenInstantGE:.5,getMediaMeterIntervalMillis:400,_useRequestAnimationFrame:!1,meterWithTrackAudioLevel:!1,judgeTalkingByInstantGE:.05,_printSoundData:!1,trackBufferSize:20,allowSendWhenLessThan:4,disableTrack:!1,ctrlCheckIntervalMillis:1e4,ctrlTimeoutMillis:3e4,_printDebugStats:!1,statsSeconds:10,remainLastStatsCount:120,loglastConfrCount:2,loglastStoreArray:!0,consoleLogger:!0,printStatsWhenPCClose:!0,rebuildPeerConnectionWhenNetworkChanaged:!0,useDeployMore:!1,useDTX:!0,uploadStats:!0,liveCfgs:[],rtcStatsTypeMath:function(e,t){switch(e.type){case"remote-candidate":case"local-candidate":case"track":case"stream":case"inbound-rtp":case"outbound-rtp":case"transport":return!0}return!1}}),i.logger.count(),function(){var e=n(113).default;if(r.browser=e.__browser,r.browserVersion=e.__browserVersion,void 0===r.browser)throw"Not discern browser. may require adapter error. eg. it.default"}(),i.logger.info("Current browser",r.browser,r.browserVersion),r.AudioContext=window.AudioContext||window.webkitAudioContext,r.config.getMediaMeterIntervalMillis){try{"function"===typeof r.AudioContext?(r.__audioContext=new r.AudioContext,r.__usingWebAudio=!0):r.__usingWebAudio=!1}catch(d){r.__usingWebAudio=!1}r.__usingWebAudio&&"suspended"===r.__audioContext.state&&o((function(){var e=function e(){"suspended"===r.__audioContext.state&&r.__audioContext.resume(),i.logger.warn("AudioContext state suspended ->",r.__audioContext.state),setTimeout((function(){"running"===r.__audioContext.state&&(document.body.removeEventListener("touchend",e,!1),document.body.removeEventListener("click",e,!1))}),0)};document.body.addEventListener("touchend",e,!1),document.body.addEventListener("click",e,!1)})),r.__usingWebAudio||console.warn("'new AudioContext()' failed. can not know who talking."),r.__audioContext&&"suspended"===r.__audioContext.state&&console.warn("audioContext.state is suspended. can not know who talking. You can resume() emedia.__audioContext, but only in response to a tap.")}if(window.requestAnimationFrame&&r.config._useRequestAnimationFrame?r.requestAnimationFrame=function(e){window.requestAnimationFrame(e)}:r.requestAnimationFrame=function(e,t){return setTimeout(e,t||r.config.getMediaMeterIntervalMillis)},window.cancelAnimationFrame&&r.config._useRequestAnimationFrame?r.cancelAnimationFrame=function(e){window.cancelAnimationFrame(e)}:r.cancelAnimationFrame=function(e){clearTimeout(e)},r.isWifi=function(){try{var e=!0,t=window.navigator.userAgent,n=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;if(/MicroMessenger/.test(t)){if(t.indexOf("WIFI")>=0)return!0;e=!1}else if(n){var r=n.type;"wifi"!==r&&"2"!==r&&"unknown"!==r&&(e=!1)}return e}catch(d){return!1}},r.stopAudioTracks=function(e){e&&e.getAudioTracks().forEach((function(t){t.stop(),i.logger.info("Media stream stop audio track. stream =",e.id,"track =",t.id,t.kind)}))},r.stopAndRemoveAudioTracks=function(e){var t=[];e&&e.getAudioTracks().forEach((function(n){n.stop(),t.push(n),i.logger.info("Media stream stop and remove audio tracks. stream =",e.id,"track =",n.id,n.kind)})),i.forEach(t,(function(t,n){e.removeTrack(n)}))},r.stopTracks=function(e){try{if(!e||!1===e.active)return void i.logger.debug("stream tracks had been stoped. it ",e&&e.id);e.getTracks().forEach((function(t){t.stop(),i.logger.info("Media stream stop track. stream =",e.id," track =",t.id,t.kind)})),e._bindAttendee&&(i.removeAttribute(e._bindAttendee._openedRtcMediaStreams,e.id),e._bindAttendee=null),i.logger.info("stream tracks stoped. it ",e.id)}catch(d){i.logger.error(d)}},r.enableVideoTracks=function(e,t){e&&e.getVideoTracks().forEach((function(n){if("function"===typeof n.enable)return n.enable(),i.logger.info("Media stream enable video track. stream =",e.id,"track =",n.kind,n.enabled,n.id),void(n.enabled===t||n.enable(t));n.enabled===t||(n.enabled=t),i.logger.info("Media stream enable video track. stream =",e.id,"track =",n.kind,n.enabled,n.id)}))},r.enableAudioTracks=function(e,t){e&&e.getAudioTracks().forEach((function(n){if("function"===typeof n.enable)return n.enable(),i.logger.info("Media stream enable audio track. stream =",e.id,"track =",n.kind,n.enabled,n.id),void(n.enabled===t||n.enable(t));n.enabled===t||(n.enabled=t),i.logger.info("Media stream enable audio track. stream =",e.id,"track =",n.kind,n.enabled,n.id)}))},r.hasEnabledTracks=function(e){if(!e||"function"!==typeof e.getAudioTracks)return!1;if(!e.active)return!1;var t=e.getAudioTracks();if(0===t.length)return!1;for(var n in t)if("function"===typeof t[n].enable&&t[n].enable(),t[n].enabled)return!0;return!1},r.genReportName=function(){var e=r._lastSetupDate||new Date;return(r._lastSetupTktId||r._lastSetupConfr)+"_"+r._lastSetupMemName+"_"+e.getTime()+".log"},r.getReportUploadUrl=function(e,t,n){var r=new XMLHttpRequest;r.open(e,t,!0),r.addEventListener("load",(function(e){n&&n(e)}),!1),r.send(null)},r.uploadReport=function(e,t,n,o,s,a){var c=r.genReport();if(c){"function"===typeof n&&(a=s,s=o,o=n,n=void 0);var u=new Blob([c],{type:"text/plain"}),d=new FormData;d.append(e,u,e),n&&"function"===typeof d.set&&i.forEach(n,(function(e,t){d.set(e,t)}));var l=new XMLHttpRequest;l.open("POST",t,!0),l.setRequestHeader("X-File-Name",e),a&&a(l),l.addEventListener("load",(function(n){console.info("log begin upload. result = ",n.currentTarget.status,e," > ",t),200===n.currentTarget.status?o&&o(n):s&&s(n)}),!1),l.send(d),console.info("log begin upload. ",e," > ",t)}else s&&s("not logs")},r.genReport=function(){if(r._logContext&&r._logContext instanceof Array&&!("undefined"===typeof r._logContextIndex||r._logContextIndex<0)){var e=0,t=r._logContextIndex;r._logContextIndex>=r._logContext.length&&(e=r._logContextIndex-r._logContext.length+1);for(var n="",i=e;i<=t;i++){var o=i%r._logContext.length;n+=r._logContext[o].join("\r\n")+"\r\n"}return r._logContext.loadlogs&&r._logContext.loadlogs instanceof Array&&(n+="-------------------------------------------------------------\r\n",n+=r._logContext.loadlogs.join("\r\n")+"\r\n"),n}},r.fileReport=function(e,t){var n=r.genReport();if(n){t&&(n="\u9047\u5230\u7684\u5f02\u5e38\u63cf\u8ff0\u5982\u4e0b\uff1a\r\n "+t+" \r\n "+n);var i=encodeURIComponent(n),o=document.createElement("a");o.style.display="none",o.download=e||"emedia-"+(new Date).toJSON()+".log",o.href="data:text/plain;charset=utf-8,"+i,document.body.appendChild(o),o.click(),o.parentNode.removeChild(o)}},navigator.mediaDevices){var s=navigator.mediaDevices.getSupportedConstraints();i.logger.info("Supported constraints",s)}r.config({globalConstraints:{}});var a=n(141),c=n(150);r.Webrtc=n(155),r.Service=a,r.P2P=n(165),r.XService=a,r.XServiceWithP2P=r.P2P(a),r.mgr=n(166).outer,r.ctrl=n(373),r.CompositeCanvas=n(379),r.pannel||(r.pannel={}),r.pannel.DefaultMouseTrack=n(162),r.pannel.MouseTrack=n(163),r.pannel.KeyboardTrack=n(380);var u=r.PCStats=n(161);if(r.helper=r.helper||{},r.helper.PCStats=u,r.helper.pcstats=u.echo,r.helper.intervalPcstats=u.intervalEcho,r.helper.inboundAudio=u.inboundAudio,r.helper.inboundVideo=u.inboundVideo,r.helper.outboundAudio=u.outboundAudio,r.helper.outboundVideo=u.outboundVideo,r.event=c,r.LOG_LEVEL=0,r.isFirefox="firefox"===r.browser,r.isChrome="chrome"===r.browser,r.isSafari="safari"===r.browser,r.isEdge="edge"===r.browser,r.isElectron=/Electron/.test(navigator.userAgent),r.isElectron)try{n(381)}catch(d){i.logger.error(d)}r.youInSomeBrowsers=function(){if(r.isSafari){var e=new RegExp("(Version)/([0-9.]+)","i"),t=navigator.userAgent.match(e);if(null!=t){var n=unescape(t[2]);return(n=parseInt(n))<13}}return!1},r.replaceIpAndPortOfCandidate=function(e,t,n){var r="string"===typeof e?e:e.candidate;return r=r.replace(/(candidate:\d+\s+\d+\s+udp\s+\d+\s+)([\d\.]+)\s+(\d+)(\s+.*)/g,(function(e,r,i,o,s){return r+t+" "+n+s})),e.candidate?(e=i.extend(!0,{},e)).candidate=r:e=r,e},r.replaceIpAndPort=function(e,t){if("function"!==typeof t)return e;var n="string"===typeof e?e:e.candidate;return n=n.replace(/(candidate:\d+\s+\d+\s+udp\s+\d+\s+)([\d\.]+)\s+(\d+)(\s+.*)/g,(function(e,n,r,i,o){var s=t(r,i);return"string"===typeof s?n+(s=s.replace(":"," "))+o:n+r+" "+i+o})),e.candidate?(e=i.extend(!0,{},e)).candidate=n:e=n,e},r.replaceURL=function(e,t){return"function"!==typeof t?e:e.replace(/([^:\/?&#=]+):\/\/([^\/:?#]+)(:\d+)?(\/[^?#]*)?(\?[^\/#]*)?(#[^\/?]*)?/g,(function(n,r,i,o,s,a,c){o&&(o=o.substring(1));var u=t(n,r,i,o,s,a,c);if(!u)return e;if("string"===typeof u)return u;var d=u.protocol||r,l=u.host||i,f=u.port||o,p=u.path||s,h=u.query||a,m=u.fragment||c;return d+"://"+l+(f?":"+f:"")+(p||"")+(h||"")+(m||"")}))},r.requireTrustBeforeJoin=function(){return!1},r.isWebRTC=window.RTCPeerConnection&&/^https\:$/.test(window.location.protocol),(r.isChrome||r.isSafari)&&(r.supportPRAnswer=!0),r.supportPRAnswer=!1,r.config({baseAcptOps:[102,104,105,106,107,300,302,303,304,301,204,206,400,401,1001,100221,100222,100223,100224,100201,100202,100203]}),r.config({clientType:"WEB",version:"3.2.2",userAgent:navigator.userAgent,isHttpDNS:!0,acptOps:[100230,100205,1003,1004]}),e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=emedia.singleWebrtcAdapter;emedia.util.logger.warn("webrtc-adapter must load once. if more, safari may initC sdp error(too many audio video, easemob server dont work)"),r?emedia.util.logger.error("webrtc-adapter repeated load, safari may dont work"):function(){if(document.documentMode){var e=/\brv[ :]+(\d+)/g.exec(navigator.userAgent)||[],t=parseInt(e[1],10);t||(e=/\bMSIE[ :]+(\d+)/g.exec(navigator.userAgent)||[],t=parseInt(e[1]||"0",10)),emedia.util.logger.error("adapter.ie not required"),r.__browser="IE",r.__browserVersion=t}else r=n(114),emedia.util.logger.info("webrtc-adapter load first"),function(){function e(e,t){e.srcObject=t,emedia.isSafari&&(e.pause(),e.play());var n=emedia.util.logger||window.console||console;if(n){if(t&&n.info("stream attach videoTag.",t.id,t._located,">>",e.id,e.muted,e.volume,e),t||n.info("stream(null) attach videoTag.",e.id,e.muted,e.volume,e),!e.hxSetOnvolumechange){var r=e.onvolumechange;e.onvolumechange=function(){n.debug("stream attach detail: video tag volume chanage",e.volume,t?t.id:t),r&&r.apply(e,arguments)},e.hxSetOnvolumechange=!0}if(!e.hxSetOnstalled){var i=e.onstalled;e.onstalled=function(){n.debug("stream attach detail: video tag onstalled",t?t.id:t),i&&i.apply(e,arguments)},e.hxSetOnstalled=!0}if(!e.hxSetOnabort){var o=e.onabort;e.onabort=function(){n.debug("stream attach detail: video tag onabort",t?t.id:t),o&&o.apply(e,arguments)},e.hxSetOnabort=!0}if(!e.hxSetOncanplay){var s=e.oncanplay;e.oncanplay=function(){t&&t.getTracks().forEach((function(e){"function"===typeof e.getSettings&&n.debug("stream attach detail",t.id," track setting =",e.enabled,e.id,e.kind,e.label,e.getSettings())})),n.debug("stream attach detail: video tag",e.videoWidth,"x",e.videoHeight,t?t.id:t),s&&s.apply(e,arguments)},e.hxSetOncanplay=!0}}}window.attachMediaStream&&!0!==window.attachMediaStream._wrapped&&(window.__attachMediaStream=window.attachMediaStream),window.attachMediaStream=function(t,n,r,i){function o(){r=!!(void 0===r?n._located:r),t.muted=!1,r!==t.muted&&(t.muted=!0)}if(i||(i=window.__attachMediaStream)||(i=e.bind(this)),t){if(n)return t.srcObject&&t.srcObject._located&&n._located&&t.srcObject.id===n.id?t.srcObject:(o(),i(t,n),t);i(t,n)}},window.attachMediaStream._wrapped=!0,console&&"function"===typeof console.info&&console.info("Wrap the attachMediaStream ",r.__browser,r.__browserVersion)}();emedia.singleWebrtcAdapter=r}(),r.__browser=r.__browser||r.browserDetails.browser,r.__browserVersion=r.__browserVersion||r.browserDetails.version,emedia.util.logger.info("Current browser",r.__browser,r.__browserVersion),"Not a supported browser."===r.__browser&&emedia.util.logger.error("Not a supported browser"),t.default=r},function(e,t,n){"use strict";var r,i,o,s,a=b(n(115)),c=b(n(2)),u=b(n(119)),d=b(n(8)),l=b(n(80)),f=b(n(122)),p=b(n(138)),h=b(n(89)),m=b(n(92)),v=b(n(88));function b(e){return e&&e.__esModule?e:{default:e}}s=function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var o=!1,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){console.warn("webrtc adapter version: 7.6.1");var r=(0,e("./adapter_factory.js").adapterFactory)({window:window});t.exports=r},{"./adapter_factory.js":2}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},u=r.log,d=r.detectBrowser(t),l={browserDetails:d,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(d.browser){case"chrome":if(!i||!i.shimPeerConnection||!n.shimChrome)return u("Chrome shim is not included in this adapter release."),l;if(null===d.version)return u("Chrome shim can not determine version, not shimming."),l;u("adapter.js shimming chrome."),l.browserShim=i,i.shimGetUserMedia(t),i.shimMediaStream(t),i.shimPeerConnection(t),i.shimOnTrack(t),i.shimAddTrackRemoveTrack(t),i.shimGetSendersWithDtmf(t),i.shimGetStats(t),i.shimSenderReceiverGetStats(t),i.fixNegotiationNeeded(t),c.shimRTCIceCandidate(t),c.shimConnectionState(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t),c.removeAllowExtmapMixed(t);break;case"firefox":if(!s||!s.shimPeerConnection||!n.shimFirefox)return u("Firefox shim is not included in this adapter release."),l;u("adapter.js shimming firefox."),l.browserShim=s,s.shimGetUserMedia(t),s.shimPeerConnection(t),s.shimOnTrack(t),s.shimRemoveStream(t),s.shimSenderGetStats(t),s.shimReceiverGetStats(t),s.shimRTCDataChannel(t),s.shimAddTransceiver(t),s.shimCreateOffer(t),s.shimCreateAnswer(t),c.shimRTCIceCandidate(t),c.shimConnectionState(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t);break;case"edge":if(!o||!o.shimPeerConnection||!n.shimEdge)return u("MS edge shim is not included in this adapter release."),l;u("adapter.js shimming edge."),l.browserShim=o,o.shimGetUserMedia(t),o.shimGetDisplayMedia(t),o.shimPeerConnection(t),o.shimReplaceTrack(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t);break;case"safari":if(!a||!n.shimSafari)return u("Safari shim is not included in this adapter release."),l;u("adapter.js shimming safari."),l.browserShim=a,a.shimRTCIceServerUrls(t),a.shimCreateOfferLegacy(t),a.shimCallbacksAPI(t),a.shimLocalStreamsAPI(t),a.shimRemoteStreamsAPI(t),a.shimTrackEventTransceiver(t),a.shimGetUserMedia(t),a.shimAudioContext(t),c.shimRTCIceCandidate(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t),c.removeAllowExtmapMixed(t);break;default:u("Unsupported browser!")}return l};var r=u(e("./utils")),i=u(e("./chrome/chrome_shim")),o=u(e("./edge/edge_shim")),s=u(e("./firefox/firefox_shim")),a=u(e("./safari/safari_shim")),c=u(e("./common_shim"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"===typeof m.default&&"symbol"===(0,v.default)(h.default)?function(e){return"undefined"===typeof e?"undefined":(0,v.default)(e)}:function(e){return e&&"function"===typeof m.default&&e.constructor===m.default&&e!==m.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,v.default)(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},n.shimOnTrack=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},n.shimGetSendersWithDtmf=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},n.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new f.default((0,l.default)(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(a(s(e)))};return t.apply(this,[c,r])}return new d.default((function(n,r){t.apply(e,[function(e){n(a(s(e)))},r])})).then(i,o)}}},n.shimSenderReceiverGetStats=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,r=void 0,i=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?i=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(r?i=!0:r=e),e.track===t})),i||n&&r?d.default.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():d.default.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=c,n.shimAddTrackRemoveTrack=function(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return c(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var s=this._streams[n.id];if(s)s.addTrack(t),d.default.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=a({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"===typeof arguments[0];return r?n.apply(this,[function(n){var r=p(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return p(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=h(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var f=(0,u.default)(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=f.get.apply(this);return""===e.type?e:p(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;(0,l.default)(this._streams).forEach((function(r){t._streams[r].getTracks().find((function(t){return e.track===t}))&&(n=t._streams[r])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function p(e,t){var n=t.sdp;return(0,l.default)(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function h(e,t){var n=t.sdp;return(0,l.default)(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}},n.shimPeerConnection=function(e){var t=s.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=a({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?d.default.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),d.default.resolve())}}},n.fixNegotiationNeeded=function(e){var t=s.detectBrowser(e);s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils.js"));function a(e,t,n){return t in e?(0,p.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},(0,l.default)(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&(0,l.default)(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof m.default&&"symbol"===(0,v.default)(h.default)?function(e){return"undefined"===typeof e?"undefined":(0,v.default)(e)}:function(e){return e&&"function"===typeof m.default&&e.constructor===m.default&&e!==m.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,v.default)(e)};n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var n=i.detectBrowser(e),s=function(e){if("object"!==("undefined"===typeof e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return(0,l.default)(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"===typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var s={};"number"===typeof i.ideal?(s[o("min",n)]=i.ideal,t.optional.push(s),(s={})[o("max",n)]=i.ideal,t.optional.push(s)):(s[o("",n)]=i.ideal,t.optional.push(s))}void 0!==i.exact&&"number"!==typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach((function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse((0,c.default)(e)))&&"object"===r(e.audio)){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse((0,c.default)(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=s(e.audio)}if(e&&"object"===r(e.video)){var u=e.video.facingMode;u=u&&("object"===("undefined"===typeof u?"undefined":r(u))?u:{ideal:u});var d=n.version<66;if(u&&("user"===u.exact||"environment"===u.exact||"user"===u.ideal||"environment"===u.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||d)){delete e.video.facingMode;var l=void 0;if("environment"===u.exact||"environment"===u.ideal?l=["back","rear"]:"user"!==u.exact&&"user"!==u.ideal||(l=["front"]),l)return t.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return l.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&l.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=u.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=s(e.video),o("chrome: "+(0,c.default)(e)),i(e)}))}e.video=s(e.video)}return o("chrome: "+(0,c.default)(e)),i(e)},u=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){a(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){r&&r(u(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var f=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return f(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return d.default.reject(u(e))}))}))}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils.js")),o=i.log},{"../utils.js":15}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof m.default&&"symbol"===(0,v.default)(h.default)?function(e){return"undefined"===typeof e?"undefined":(0,v.default)(e)}:function(e){return e&&"function"===typeof m.default&&e.constructor===m.default&&e!==m.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,v.default)(e)};n.shimRTCIceCandidate=function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse((0,c.default)(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=s.default.parseCandidate(e.candidate),o=(0,a.default)(n,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,u.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},n.shimMaxMessageSize=function(e){if(e.RTCPeerConnection){var t=u.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=s.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=s.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=s.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),s=e.sdpSemantics;"plan-b"===s&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var c=r(arguments[0]),u=i(c),d=o(arguments[0],c),l=void 0;l=0===u&&0===d?Number.POSITIVE_INFINITY:0===u||0===d?Math.max(u,d):Math.min(u,d);var f={};Object.defineProperty(f,"maxMessageSize",{get:function(){return l}}),this._sctp=f}return a.apply(this,arguments)}}},n.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},u.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}},n.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}},n.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=u.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}}}};var i,o=e("sdp"),s=(i=o)&&i.__esModule?i:{default:i},u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),n.shimPeerConnection=function(e){var t=s.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=(0,u.default)(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=(0,d.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),s.log("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype},n.shimReplaceTrack=function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var o,s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils")),a=e("./filtericeservers"),c=e("rtcpeerconnection-shim"),d=(o=c)&&o.__esModule?o:{default:o}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=function(e,t){var n=!1;return(e=JSON.parse((0,c.default)(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"===typeof t;return i&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=i?t[0]:t,!!t.length}}))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15}],9:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return d.default.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"===typeof m.default&&"symbol"===(0,v.default)(h.default)?function(e){return"undefined"===typeof e?"undefined":(0,v.default)(e)}:function(e){return e&&"function"===typeof m.default&&e.constructor===m.default&&e!==m.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,v.default)(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=function(e){"object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(e){var t=s.detectBrowser(e);if("object"===("undefined"===typeof e?"undefined":r(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n,r,i,o=e.RTCPeerConnection.prototype[t],s=(i=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)},(r=t)in(n={})?(0,p.default)(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n);e.RTCPeerConnection.prototype[t]=s[t]})),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?d.default.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),d.default.resolve())}}var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],r=e[1],s=e[2];return o.apply(this,[n||null]).then((function(e){if(t.version<53&&!r)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(n){if("TypeError"!==n.name)throw n;e.forEach((function(t,n){e.set(n,(0,a.default)({},t,{type:i[t.type]||t.type}))}))}return e})).then(r,s)}}},n.shimSenderGetStats=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):d.default.resolve(new f.default)}}},n.shimReceiverGetStats=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})},n.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},n.shimAddTransceiver=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();"encodings"in o||(o.encodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).catch((function(){}))))}return r})}},n.shimCreateOffer=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?d.default.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}},n.shimCreateAnswer=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?d.default.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,d.default.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}},{}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof m.default&&"symbol"===(0,v.default)(h.default)?function(e){return"undefined"===typeof e?"undefined":(0,v.default)(e)}:function(e){return e&&"function"===typeof m.default&&e.constructor===m.default&&e!==m.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,v.default)(e)};n.shimGetUserMedia=function(e){var t=i.detectBrowser(e),n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===("undefined"===typeof e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse((0,c.default)(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},o&&o.prototype.getSettings){var u=o.prototype.getSettings;o.prototype.getSettings=function(){var e=u.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var d=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===("undefined"===typeof e?"undefined":r(e))&&(e=JSON.parse((0,c.default)(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[e])}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof m.default&&"symbol"===(0,v.default)(h.default)?function(e){return"undefined"===typeof e?"undefined":(0,v.default)(e)}:function(e){return e&&"function"===typeof m.default&&e.constructor===m.default&&e!==m.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,v.default)(e)};n.shimLocalStreamsAPI=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}},n.shimRemoteStreamsAPI=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}},n.shimCallbacksAPI=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),d.default.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),d.default.resolve()):r};var c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),d.default.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),d.default.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),d.default.resolve()):r},t.addIceCandidate=c}},n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(o(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))},n.shimConstraints=o,n.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse((0,c.default)(s))).urls=s.url,delete s.url,r.push(s)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},n.shimTrackEventTransceiver=function(e){"object"===("undefined"===typeof e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}},n.shimAudioContext=function(e){"object"!==("undefined"===typeof e?"undefined":r(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"));function o(e){return e&&void 0!==e.video?(0,a.default)({},e,{video:i.compactObject(e.video)}):e}},{"../utils":15}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof m.default&&"symbol"===(0,v.default)(h.default)?function(e){return"undefined"===typeof e?"undefined":(0,v.default)(e)}:function(e){return e&&"function"===typeof m.default&&e.constructor===m.default&&e!==m.default.prototype?"symbol":"undefined"===typeof e?"undefined":(0,v.default)(e)};n.extractVersion=s,n.wrapPeerConnectionEvent=function(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},(0,p.default)(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},n.disableLog=function(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":r(e))+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},n.disableWarnings=function(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":r(e))+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},n.log=function(){if("object"===("undefined"===typeof window?"undefined":r(window))){if(i)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")},n.detectBrowser=function(e){var t=e.navigator,n={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=s(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=s(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=s(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=s(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n},n.compactObject=function e(t){return c(t)?(0,l.default)(t).reduce((function(n,r){var i=c(t[r]),o=i?e(t[r]):t[r],s=i&&!(0,l.default)(o).length;return void 0===o||s?n:(0,a.default)(n,function(e,t,n){return t in e?(0,p.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,o))}),{}):t},n.walkStats=u,n.filterStats=function(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new f.default;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&u(e,n,i)}))})),i};var i=!0,o=!0;function s(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),(0,l.default)(t).forEach((function(r){r.endsWith("Id")?u(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){u(e,e.get(t),n)}))})))}},{}],16:[function(e,t,n){var r=e("sdp");function i(e,t,n,i,o){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;(s=JSON.parse((0,c.default)(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function u(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function p(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function h(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var m=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse((0,c.default)(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw p("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse((0,c.default)(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"===typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(m.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(m.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),m.prototype.onicecandidate=null,m.prototype.onaddstream=null,m.prototype.ontrack=null,m.prototype.onremovestream=null,m.prototype.onsignalingstatechange=null,m.prototype.oniceconnectionstatechange=null,m.prototype.onconnectionstatechange=null,m.prototype.onicegatheringstatechange=null,m.prototype.onnegotiationneeded=null,m.prototype.ondatachannel=null,m.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},m.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},m.prototype.getConfiguration=function(){return this._config},m.prototype.getLocalStreams=function(){return this.localStreams},m.prototype.getRemoteStreams=function(){return this.remoteStreams},m.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},m.prototype.addTrack=function(t,n){if(this._isClosed)throw p("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw p("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},m.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},m.prototype.removeTrack=function(t){if(this._isClosed)throw p("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw p("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},m.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},m.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},m.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},m.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===(0,l.default)(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},m.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var c=e.candidate,u=!c||0===(0,l.default)(c).length;if(u)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),c.component=1,c.ufrag=o.getLocalParameters().usernameFragment;var d=r.writeCandidate(c);s.candidate=(0,a.default)(s.candidate,r.parseCandidate(d)),s.candidate.candidate=d,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var f=r.getMediaSections(i._localDescription.sdp);f[s.candidate.sdpMLineIndex]+=u?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+f.join("");var p=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),u||i._dispatchEvent("icecandidate",s),p&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},m.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},m.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},m.prototype._transceive=function(e,n,i){var s=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),i&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},m.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return d.default.reject(p("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,i.signalingState)||i._isClosed)return d.default.reject(p("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var s=i.transceivers[t],c=s.iceGatherer,u=s.iceTransport,d=s.dtlsTransport,l=s.localCapabilities,f=s.remoteCapabilities;if((!r.isRejected(e)||0!==r.matchPrefix(e,"a=bundle-only").length)&&!s.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);a&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===u.state&&u.start(c,p,a?"controlling":"controlled"),"new"===d.state&&d.start(h));var m=o(l,f);i._transceive(s,m.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),d.default.resolve()},m.prototype.setRemoteDescription=function(i){var a=this;if(-1===["offer","answer"].indexOf(i.type))return d.default.reject(p("TypeError",'Unsupported type "'+i.type+'"'));if(!s("setRemoteDescription",i.type,a.signalingState)||a._isClosed)return d.default.reject(p("InvalidStateError","Can not set remote "+i.type+" in state "+a.signalingState));var c={};a.remoteStreams.forEach((function(e){c[e.id]=e}));var f=[],m=r.splitSections(i.sdp),v=m.shift(),b=r.matchPrefix(v,"a=ice-lite").length>0,g=r.matchPrefix(v,"a=group:BUNDLE ").length>0;a.usingBundle=g;var _=r.matchPrefix(v,"a=ice-options:")[0];return a.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,m.forEach((function(s,d){var l=r.splitLines(s),p=r.getKind(s),h=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,m=l[0].substr(2).split(" ")[2],_=r.getDirection(s,v),y=r.parseMsid(s),w=r.getMid(s)||r.generateIdentifier();if(h||"application"===p&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m))a.transceivers[d]={mid:w,kind:p,protocol:m,rejected:!0};else{var S,A,x,C,E,k,I,T,R;!h&&a.transceivers[d]&&a.transceivers[d].rejected&&(a.transceivers[d]=a._createTransceiver(p,!0));var M,O,P=r.parseRtpParameters(s);h||(M=r.getIceParameters(s,v),(O=r.getDtlsParameters(s,v)).role="client"),I=r.parseRtpEncodingParameters(s);var j=r.parseRtcpParameters(s),N=r.matchPrefix(s,"a=end-of-candidates",v).length>0,D=r.matchPrefix(s,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!h&&g&&d>0&&a.transceivers[d]&&(a._disposeIceAndDtlsTransports(d),a.transceivers[d].iceGatherer=a.transceivers[0].iceGatherer,a.transceivers[d].iceTransport=a.transceivers[0].iceTransport,a.transceivers[d].dtlsTransport=a.transceivers[0].dtlsTransport,a.transceivers[d].rtpSender&&a.transceivers[d].rtpSender.setTransport(a.transceivers[0].dtlsTransport),a.transceivers[d].rtpReceiver&&a.transceivers[d].rtpReceiver.setTransport(a.transceivers[0].dtlsTransport)),"offer"!==i.type||h)"answer"!==i.type||h||(A=(S=a.transceivers[d]).iceGatherer,x=S.iceTransport,C=S.dtlsTransport,E=S.rtpReceiver,k=S.sendEncodingParameters,T=S.localCapabilities,a.transceivers[d].recvEncodingParameters=I,a.transceivers[d].remoteCapabilities=P,a.transceivers[d].rtcpParameters=j,D.length&&"new"===x.state&&(!b&&!N||g&&0!==d?D.forEach((function(e){u(S.iceTransport,e)})):x.setRemoteCandidates(D)),g&&0!==d||("new"===x.state&&x.start(A,M,"controlling"),"new"===C.state&&C.start(O)),!o(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,a._transceive(S,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!E||"sendrecv"!==_&&"sendonly"!==_?delete S.rtpReceiver:(R=E.track,y?(c[y.stream]||(c[y.stream]=new e.MediaStream),n(R,c[y.stream]),f.push([R,E,c[y.stream]])):(c.default||(c.default=new e.MediaStream),n(R,c.default),f.push([R,E,c.default]))));else{(S=a.transceivers[d]||a._createTransceiver(p)).mid=w,S.iceGatherer||(S.iceGatherer=a._createIceGatherer(d,g)),D.length&&"new"===S.iceTransport.state&&(!N||g&&0!==d?D.forEach((function(e){u(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(D)),T=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(T.codecs=T.codecs.filter((function(e){return"rtx"!==e.name}))),k=S.sendEncodingParameters||[{ssrc:1001*(2*d+2)}];var B,L=!1;"sendrecv"===_||"sendonly"===_?(L=!S.rtpReceiver,E=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,p),L&&(R=E.track,y&&"-"===y.stream||(y?(c[y.stream]||(c[y.stream]=new e.MediaStream,Object.defineProperty(c[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(R,"id",{get:function(){return y.track}}),B=c[y.stream]):(c.default||(c.default=new e.MediaStream),B=c.default)),B&&(n(R,B),S.associatedRemoteMediaStreams.push(B)),f.push([R,E,B]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),S.associatedRemoteMediaStreams=[]),S.localCapabilities=T,S.remoteCapabilities=P,S.rtpReceiver=E,S.rtcpParameters=j,S.sendEncodingParameters=k,S.recvEncodingParameters=I,a._transceive(a.transceivers[d],!1,L)}}})),void 0===a._dtlsRole&&(a._dtlsRole="offer"===i.type?"active":"passive"),a._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?a._updateSignalingState("have-remote-offer"):a._updateSignalingState("stable"),(0,l.default)(c).forEach((function(t){var n=c[t];if(n.getTracks().length){if(-1===a.remoteStreams.indexOf(n)){a.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){a._dispatchEvent("addstream",r)}))}f.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&h(a,t,r,[n])}))}})),f.forEach((function(e){e[2]||h(a,e[0],e[1],[])})),e.setTimeout((function(){a&&a.transceivers&&a.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),d.default.resolve()},m.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},m.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},m.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},m.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},m.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},m.prototype.createOffer=function(){var n=this;if(n._isClosed)return d.default.reject(p("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,s=n.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));o>0||s>0;)o>0&&(n._createTransceiver("audio"),o--),s>0&&(n._createTransceiver("video"),s--);var c=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,o){var s=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=d})),"max-compat"!==n._config.bundlePolicy&&(c+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){c+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,c+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:c});return d.default.resolve(u)},m.prototype.createAnswer=function(){var n=this;if(n._isClosed)return d.default.reject(p("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return d.default.reject(p("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var c=new e.RTCSessionDescription({type:"answer",sdp:s});return d.default.resolve(c)},m.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?d.default.reject(new TypeError("sdpMLineIndex or sdpMid required")):new d.default((function(i,o){if(!n._remoteDescription)return o(p("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<n.transceivers.length;a++)if(n.transceivers[a].mid===e.sdpMid){s=a;break}var c=n.transceivers[s];if(!c)return o(p("OperationError","Can not add ICE candidate"));if(c.rejected)return i();var d=(0,l.default)(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return i();if(d.component&&1!==d.component)return i();if((0===s||s>0&&c.iceTransport!==n.transceivers[0].iceTransport)&&!u(c.iceTransport,d))return o(p("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[s]+="a="+(d.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var h=0;h<n.transceivers.length&&(n.transceivers[h].rejected||(n.transceivers[h].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[h]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));h++);i()}))},m.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw p("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),d.default.all(r).then((function(e){var t=new f.default;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new f.default;return(0,l.default)(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var v=["createOffer","createAnswer"];return v.forEach((function(e){var t=m.prototype[e];m.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"===typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"===typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(v=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=m.prototype[e];m.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)}),(function(t){"function"===typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=m.prototype[e];m.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),m}},{sdp:17}],17:[function(e,t,n){var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&(0,l.default)(e.parameters).length){var r=[];(0,l.default)(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===(0,v.default)(e.keyParams)?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),u=a.length>0&&a[0].ssrc,d=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));d.length>0&&d[0].length>1&&d[0][0]===u&&(t=d[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:u,codecPayloadType:parseInt(e.parameters.apt,10)};u&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse((0,c.default)(r))).fec={ssrc:u,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&u&&n.push({ssrc:u});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var s=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===("undefined"===typeof t?"undefined":(0,v.default)(t))&&(t.exports=r)},{}]},{},[1])(1)},"object"===(0,v.default)(t)&&"undefined"!==typeof e?e.exports=s():(i=[],void 0===(o="function"===typeof(r=s)?r.apply(t,i):r)||(e.exports=o))},function(e,t,n){e.exports={default:n(116),__esModule:!0}},function(e,t,n){n(117),e.exports=n(4).Object.assign},function(e,t,n){var r=n(17);r(r.S+r.F,"Object",{assign:n(118)})},function(e,t,n){"use strict";var r=n(26),i=n(37),o=n(98),s=n(99),a=n(53),c=n(40),u=Object.assign;e.exports=!u||n(27)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=a(e),u=arguments.length,d=1,l=o.f,f=s.f;u>d;)for(var p,h=c(arguments[d++]),m=l?i(h).concat(l(h)):i(h),v=m.length,b=0;v>b;)p=m[b++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:u},function(e,t,n){e.exports={default:n(120),__esModule:!0}},function(e,t,n){n(121);var r=n(4).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var r=n(39),i=n(103).f;n(83)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){e.exports={default:n(123),__esModule:!0}},function(e,t,n){n(10),n(11),n(54),n(124),n(131),n(134),n(136),e.exports=n(4).Map},function(e,t,n){"use strict";var r=n(125),i=n(126);e.exports=n(127)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(22).f,i=n(35),o=n(73),s=n(19),a=n(60),c=n(61),u=n(15),d=n(57),l=n(74),f=n(26),p=n(95).fastKey,h=n(126),m=f?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var d=e((function(e,r){a(e,d,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[u],e)}));return o(d.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){h(this,t);for(var n,r=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),f&&r(d.prototype,"size",{get:function(){return h(this,t)[m]}}),d},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?d(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,d(1))}),n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){var r=n(24);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(18),i=n(17),o=n(95),s=n(27),a=n(21),c=n(73),u=n(61),d=n(60),l=n(24),f=n(50),p=n(22).f,h=n(128)(0),m=n(26);e.exports=function(e,t,n,v,b,g){var _=r[e],y=_,w=b?"set":"add",S=y&&y.prototype,A={};return m&&"function"==typeof y&&(g||S.forEach&&!s((function(){(new y).entries().next()})))?(y=t((function(t,n){d(t,y,e,"_c"),t._c=new _,void 0!=n&&u(n,b,t[w],t)})),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in S)||g&&"clear"==e||a(y.prototype,e,(function(n,r){if(d(this,y,e),!t&&g&&!l(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i}))})),g||p(y.prototype,"size",{get:function(){return this._c.size}})):(y=v.getConstructor(t,e,b,w),c(y.prototype,n),o.NEED=!0),f(y,e),A[e]=y,i(i.G+i.W+i.F,A),g||v.setStrong(y,e,b),y}},function(e,t,n){var r=n(19),i=n(40),o=n(53),s=n(43),a=n(129);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,d=4==e,l=6==e,f=5==e||l,p=t||a;return function(t,a,h){for(var m,v,b=o(t),g=i(b),_=r(a,h,3),y=s(g.length),w=0,S=n?p(t,y):c?p(t,0):void 0;y>w;w++)if((f||w in g)&&(v=_(m=g[w],w,b),e))if(n)S[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:S.push(m)}else if(d)return!1;return l?-1:u||d?d:S}}},function(e,t,n){var r=n(130);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(24),i=n(100),o=n(51)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(17);r(r.P+r.R,"Map",{toJSON:n(132)("Map")})},function(e,t,n){var r=n(59),i=n(133);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(61);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(135)("Map")},function(e,t,n){"use strict";var r=n(17);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(137)("Map")},function(e,t,n){"use strict";var r=n(17),i=n(20),o=n(19),s=n(61);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,a,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),void 0==e?new this:(n=[],t?(r=0,a=o(c,arguments[2],2),s(e,!1,(function(e){n.push(a(e,r++))}))):s(e,!1,n.push,n),new this(n))}})}},function(e,t,n){e.exports={default:n(139),__esModule:!0}},function(e,t,n){n(140);var r=n(4).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(17);r(r.S+r.F*!n(26),"Object",{defineProperty:n(22).f})},function(e,t,n){"use strict";var r=c(n(80)),i=c(n(142)),o=c(n(2)),s=c(n(145)),a=c(n(88));function c(e){return e&&e.__esModule?e:{default:e}}var u=n(87),d=n(146),l=u.tagLogger("Service"),f=n(149),p=n(153),h=n(150),m=n(159),v=new(n(160))({onExtLoaded:function(){l.info("Share desktop ext. had loaded.")}}),b=n(157),g=n(161),_=n(162);e.exports=u.prototypeExtend({__init__:function(){l.warn("emedia version: ",window._emediaVersion||"unkown"),l.warn("UserAgent: ",navigator.userAgent);var e=u.parseURL("__log_level___");e&&(emedia.LOG_LEVEL=parseInt(e)),this.namespace=Math.uuidFast(),emedia.useCurrentXService=this,void 0===this.useRTCCfg&&(this.useRTCCfg=emedia.config.useRTCCfgIfServerReturn),"string"===typeof this.useRTCCfg&&(this.useRTCCfg=JSON.parse(this.useRTCCfg)),this.inboundAudio=g.inboundAudio.bind(this),this.inboundVideo=g.inboundVideo.bind(this),this.outboundAudio=g.outboundAudio.bind(this),this.outboundVideo=g.outboundVideo.bind(this),this._cache_receive_sessions=[]},AVPubstream:b.extend({__init__:function(){this.type=0,this._located=!0,this.mutedMuted=!0,this.constaints&&(this.constaints.video||(this.voff=1),this.constaints.audio||(this.aoff=1)),this.constaints||(this.constaints={audio:!0,video:!0}),emedia.config.maxVideoBitrate&&(this.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(this.abitrate=emedia.config.maxAudioBitrate)}}),AudioMixerPubstream:new b.extend({__init__:function(){if(this.type=2,this._located=!0,this.mutedMuted=!0,this.constaints||(this.constaints={audio:!0,video:!1}),this.constaints){var e=!!this.constaints.audio;this.constaints.video||(this.constaints.video=!1),this.constaints.video||(this.voff=1),this.constaints.audio||(this.aoff=1),!1===e&&(this.aoff=1)}emedia.config.maxVideoBitrate&&(this.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(this.abitrate=emedia.config.maxAudioBitrate)},onGotRemoteMediaStream:function(e){if(!this.remotePlayAudioObject){var t="__o_remote_play_audio_"+this.id,n=document.querySelector("#"+t);n||((n=document.createElement("audio")).style.display="none",n.id="__o_remote_play_audio_"+this.id,n.autoplay=!0,n.playsinline=!0,document.body.appendChild(n)),this.remotePlayAudioObject=n}this.remotePlayAudioObject.srcObject=e}}),ShareDesktopPubstream:b.extend({voff:0,__init__:function(){this.type=1,this._located=!0,this.mutedMuted=!0,this.constaints={audio:!this.aoff,video:!0},emedia.config.maxVideoBitrate&&(this.vbitrate=emedia.config.maxVideoBitrate),emedia.config.maxAudioBitrate&&(this.abitrate=emedia.config.maxAudioBitrate)}}),__assertCurrent:function(){if(!this.current)throw l.error("Please call emedia.service.setup(ticket)"),"Please call emedia.service.setup(ticket)";if(this.current.closed)throw l.error("current closed"),"current closed"},hasAudioMixers:function(){for(var e in this.__assertCurrent(),this.current.audioMixers){var t=this.current.audioMixers[e];if(t&&t.located())return!0}},getMediaDevices:function(e,t,n){"function"===typeof e&&(n=t,t=e,e=void 0),navigator.mediaDevices.enumerateDevices().then((function(n){for(var r=[],i=0;i!==n.length;++i){var o=n[i];e?e===o.kind?r.push(o):"audioinput"===o.kind||"audiooutput"===o.kind||"videoinput"===o.kind||l.info("Some other kind of source/device: ",o):r.push(o)}t&&t(r)})).catch((function(e){l.warn("navigator.getUserMedia error: ",e),n&&n(e)}))},attachSinkId:function(e,t){"undefined"!==typeof e.sinkId?e.setSinkId(t).then((function(){l.info("Success, audio output device attached: "+t)})).catch((function(e){var t=e;"SecurityError"===e.name&&(t="You need to use HTTPS for selecting audio output device: "+e),l.warn(t)})):l.warn("Browser does not support output device selection.")},_stopTracks:function(e){emedia.stopTracks(e),e&&l.warn("Stream tracks stop. it = ",e)},_enableVideoTracks:function(e,t){emedia.enableVideoTracks(e,t)},_enableAudioTracks:function(e,t){emedia.enableAudioTracks(e,t)},openUserMedia:function(e){l.debug("begin open user media",e);var t=this;if(!e)throw l.error("require pubS"),"require pubS";return{then:function(n,r){function i(){n.apply(null,arguments);var r=e.localStream;r&&(r.oninactive=t._onStreamInactive.bind(t,e,r),r.onactive=t._onStreamActive.bind(t,e,r))}if(e instanceof t.AVPubstream)t._openCamera(e,i,r);else if(e instanceof t.ShareDesktopPubstream)t._openSharedDesktop(e,i,r);else{if(!(e instanceof t.AudioMixerPubstream))throw l.error("Unspported pubS"),"Unspported pubS";t._openCamera(e,i,r)}}}},_openSharedDesktop:function(e,t,n){var r,i=this;function o(e){var r={audio:!0};e.constaints&&("object"===(0,a.default)(e.constaints.audio)&&e.constaints.audio||e.constaints.audio||(r.audio=!1)),i.__getUserMedia(r,(function(n,r){var o=new MediaStream;o._located=!0,r&&r.getAudioTracks().forEach((function(e){o.addTrack(e)})),e.localStream&&e.localStream.getVideoTracks().forEach((function(e){o.addTrack(e)})),e.localStream=o,t&&t(i.current,o)}),n)}if(e._localMediaStream&&(r=e._localMediaStream.getVideoTracks())&&r.length>0)return e.localStream=e._localMediaStream,void(e.constaints.audio?o(e):t&&t(i.current,stream));v.openDesktopMedia(e.screenOptions||["screen","window","tab"],(function(r){if(r instanceof h.OpenDesktopMedia){var s=r.desktopStreamId;l.warn("desktop streamId",s);var a={audio:!1,video:{mandatory:u.extend(e.mandatory||{},{chromeMediaSource:"desktop",chromeMediaSourceId:s}),optional:[]}};i.__getUserMedia(a,(function(n,r){e.localStream=r,e.constaints.audio?o(e):t&&t(i.current,r)}),n)}else i.current&&i.current.onEvent(new h.ShareDesktopExtensionNotFound({member:i.current})),n&&n(r)}))},_openCamera:function(e,t,n){var r=this,i=e.constaints||{audio:!0,video:!0};r.__getUserMedia(i,function(n,i){r.__controlStream(e,i),e.localStream=i,t&&t(r.current,i)}.bind(i),n)},__controlStream:function(e,t){emedia.enableVideoTracks(t,!e.voff),emedia.enableAudioTracks(t,!e.aoff)},__getUserMedia:function(e,t,n){l.debug("get user media. using constaints",e);var r,i=this;function o(e){l.debug("[WebRTC-API] getUserMedia() error: ",e),emedia.stopTracks(r),i.current&&i.current.onEvent(new h.OpenMediaError({member:i.current,event:e})),n&&n(new h.OpenMediaError({member:i.current,event:e}))}e=u.extend({},e),i.__sysGetUserMedia(e,(function(n){i.current&&!i.current.closed&&(i.current._openedRtcMediaStreams[n.id]=n,n._bindAttendee=i.current,n._bindAttendeeId=i.current.getMemberId(),l.info("stream bind attendee.",n.id,i.current.ticket&&i.current.ticket.id,i.current.getMemberId(),i.current.memName)),emedia._yetGetUserMedia=!0,r=n;var s=n.getVideoTracks(),a=n.getAudioTracks();if(s.length>0){var c=s[0];l.debug(n.id,"using video device: ",c.id,c.label,c.kind,c.enabled)}if(a.length>0){var u=a[0];l.debug(n.id,"using audio device: ",u.id,u.label,u.kind,u.enabled)}if(n._located=!0,"boolean"===typeof n.active&&!n.active)return l.error("media stream not active. it is",n.id),void o({constraint:e,name:"NotAllowedStreamNonactive",message:"stream non-active"});t&&t(i.current,n)}),o)},_onStreamInactive:function(e,t,n){var r=this;l.warn("media stream inactive. it =",t.id),e.onMediaInactive&&r.current&&u.forEach(r.current._cacheStreams,(function(i,o){o.located()&&o.localStream&&o.localStream.id===t.id&&(o._webrtc&&o._webrtc.closed||e.onMediaInactive.call(o,t,n,r))}))},_onStreamActive:function(e,t,n){var r=this;l.warn("media stream active. it =",t.id),e.onMediaActive&&r.current&&u.forEach(r.current._cacheStreams,(function(i,o){o.located()&&o.localStream&&o.localStream.id===t.id&&e.onMediaActive.call(o,t,n,r)}))},__sysGetUserMedia:function(e,t,n){!function(){var e=(0,s.default)(i.default.mark((function e(t,n,r){var s,c,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===(0,a.default)(emedia.config.globalConstraints)&&("object"===(0,a.default)(emedia.config.globalConstraints.audio)&&t.audio&&("boolean"===typeof t.audio?t.audio=u.extend({},emedia.config.globalConstraints.audio):t.audio=u.extend({},emedia.config.globalConstraints.audio,t.audio)),"object"===(0,a.default)(emedia.config.globalConstraints.video)&&t.video&&("boolean"===typeof t.video?t.video=u.extend({},emedia.config.globalConstraints.video):t.video=u.extend({},emedia.config.globalConstraints.video,t.video))),l.info("navigator.mediaDevices.getUserMedia constaints = ",(0,o.default)(t)),s=new MediaStream,c=void 0,d=void 0,!t.audio){e.next=14;break}return e.prev=5,e.next=8,navigator.mediaDevices.getUserMedia({audio:!0});case 8:c=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.error("getUserMedia audio error",e.t0);case 14:if(!t.video){e.next=24;break}return e.prev=15,e.next=18,navigator.mediaDevices.getUserMedia({video:t.video});case 18:d=e.sent,e.next=24;break;case 21:e.prev=21,e.t1=e.catch(15),console.error("getUserMedia video error",e.t1);case 24:c&&c.getAudioTracks().forEach((function(e){s.addTrack(e)})),d&&d.getVideoTracks().forEach((function(e){s.addTrack(e)})),c||d?n(s):r({message:"getUserMedia error: not have input device"});case 27:case"end":return e.stop()}}),e,this,[[5,11],[15,21]])})));return function(t,n,r){return e.apply(this,arguments)}}()(e,t,n)},attachMediaStream:window.attachMediaStream.bind({logger:l}),setup:function(e,t){var n=this;l.count(),l.debug("recv ticket",e,t),l.debug("use sdk version",window._emediaVersion),l.debug(navigator.userAgent);var r,i,s=t=t||{};if(u.isPlainObject(t))t=(0,o.default)(t);else try{s=JSON.parse(t)}catch(d){}if("string"===typeof e&&(e=JSON.parse(e)),r=i=e.memName,emedia._lastSetupConfr=e.confrId,emedia._lastSetupMemName=i,emedia._lastSetupDate=new Date,emedia._lastSetupTktId=e.tktId,n.current&&!n.current.closed){var a=new h.CurrentCalling;throw n.current.onEvent(a),l.error("confr not close. calling..."),a}var c=(n.Attendee||p).extend(m);return n.current=new c({_service:n,service:n,autoSub:emedia.config.autoSub,getCopyIntervalMillis:emedia.config.getCopyIntervalMillis,sysUserId:r,memName:i,resource:n.resource,nickName:n.nickName,ticket:e,ext:t,extObj:s,sessionFactory:function(){return n.newSession(this,e)}},n.listeners||{})},getStreamById:function(e){var t=this.current&&this.current._cacheStreams[e];return t&&u.extend(!1,{},t)},getStreamsByRtcId:function(e){if(this.current&&this.current._cacheStreams){var t=[];return u.forEach(this.current._cacheStreams,(function(n,r){r.rtcId===e&&t.push(r)})),t}},getMemberById:function(e){var t=this.current&&this.current._cacheMembers[e];return t&&u.extend(!1,{},t)},exit:function(e){l.warn("User click exit ",e),this.current&&this.current.exit(e)},join:function(e,t){if(l.debug("begin join ..."),this.__assertCurrent(),this.current._memberId)return l.warn("Had joined. igrone it"),void(e&&e(this.memId));this.current._session._sessionId=void 0,this.current.join(e,t)},withpublish:function(e){if(!e||!e.localStream)throw l.error("pubS null or stream not open"),"pubS null or stream not open";return this.__assertCurrent(),this.current._memberId?l.warn("Had joined. igrone it"):this.current._session._sessionId=void 0,this.current.withpublish(e)},push:function(e,t,n){l.debug("begin push ...");var r=this;if(2===arguments.length&&(n=t,t=void 0),!e||!e.localStream)throw l.error("pubS or stream open"),"pubS or stream open";r.__assertCurrent(),r.current.push(e,t,n,!1)},subscribe:function(e,t,n,r){var i=this;if(l.info("begin subscribe ",e,r),t&&u.isPlainObject(t)&&(r=t,t=n=void 0),n&&u.isPlainObject(n)&&(r=n,n=t,t=void 0),emedia.isSafari){var o=function(){try{var e=d.shift();e&&e.onSub&&e.onSub.apply(e,arguments)}finally{a()}},s=function(){try{var e=d.shift();e&&e.subfail&&e.subfail.apply(e,arguments)}finally{a()}},a=function(){d.length>0&&i.__subscribe(d[0].streamId,o,s,d[0].subArgs)},c={streamId:e,onSub:t,subfail:n,subArgs:r},d=i.__safari_subs||(i.__safari_subs=[]);d.push(c),1===d.length&&a()}else i.__subscribe(e,t,n,r)},__subscribe:function(e,t,n,r){var i=this;i.__assertCurrent(),2==arguments.length&&(n=t,t=void 0),t&&u.isPlainObject(t)&&(r=t,t=void 0),n&&u.isPlainObject(n)&&(r=n,n=void 0),r||(r={subSVideo:!0,subSAudio:!0}),i.current._cacheStreams[e];var o=i.current._getWebrtc(e),s=o&&o.isConnected(),a=s&&o.getRemoteStream();if(a&&(s=a.active)){var c=a.getAudioTracks().length,d=a.getVideoTracks().length;(c||!0!==r.subSAudio)&&(d||!0!==r.subSVideo)||(s=!1)}if(l.info("sub stream",e,", use prertcpeer =",s),s)return i.current.subscribeStream(o._rtcId,e,n,r,t),void(t&&t());o&&!o.closed&&i.current.closeWebrtc(o.getRtcId(),!0,!1),i.current.createWebrtcAndSubscribeStream(e,{onGotRemote:function(e){t&&t(e)},onEvent:function(e){n&&n(e)}},void 0,r)},closePubstream:function(e){e.located()&&(emedia.stopTracks(e._localMediaStream),emedia.stopTracks(e.localStream))},hungup:function(e){var t=this.getStreamById(e);try{this._hungup(e)}finally{this.onHungup&&t&&this.onHungup(t)}},_hungup:function(e){this.__assertCurrent();var t=this.current,n=t._cacheStreams[e];n&&!n.closeReason&&n.updateAttributes({closeReason:"UserHangup"});var r=n&&n.rtcId;if(r&&(t.closeWebrtc(r),n.located()&&(1!==n.type&&n._localMediaStream&&emedia.stopTracks(n._localMediaStream),n.remotePlayAudioObject&&document.body.removeChild(n.remotePlayAudioObject),t._cacheStreams[e]&&t.onRemoveStream(n),u.removeAttribute(t._cacheStreams,e),this._streamAutomators&&u.removeAttribute(this._streamAutomators,e))),n&&!n.located()){if(t._linkedStreams[n.id]&&u.removeAttribute(t._linkedStreams,n.id),l.warn("Hangeup remove from _linkedStreams. stream = ",n.id),!(n=t._cacheStreams[e]))return;n.updateAttributes({rtcId:void 0,_webrtc:void 0,mediaStream:void 0});var i=new b(n);t.onUpdateStream(i,new i.Update(i))}},postMessage:function(e,t,n,r){var i=t;"string"!==typeof t&&(t=(0,o.default)(t)),this.__assertCurrent();var s,a=this.current,c=a._linkedStreams[e];s=c&&c.owner?c.owner.id:e,t=a.newMessage({op:1003,memId:s,arg:t}),a.postMessage(t,(n||r)&&function(e){if(r&&r(e,i),0!=e.result){var o=new h.RemoteControlFail({memId:s,failed:e.result,cause:e.msg,type:"postMessage",postMessage:t});return a.onEvent(o),void(n&&n(o,i))}})},torchRemote:function(e,t,n,r){"function"===typeof t&&(r=n,n=t,t=void 0),void 0!==t&&(t=t?1:0),this.__assertCurrent();var i=this.current,s=i._linkedStreams[e];if(!s||s.located())throw l.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var a=s.torch,c={op2:20,streamId:e,tor:t=void 0===t?s.torch?0:1:t},u=i.newMessage({op:1002,memId:s.owner.id,arg:(0,o.default)(c),_reqOps:[100206]});s.updateAttributes({torch:t}),i.postMessage(u,(function(e){if(0!=e.result){var t=new h.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"torch_control"});return i.onEvent(t),s.updateAttributes({torch:a}),void(r&&r(t,s.torch))}n&&n(s.torch)}))},freezeFrameRemote:function(e,t,n){this.__assertCurrent();var r=this.current,i=r._linkedStreams[e];if(!i||i.located())throw l.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var s=!i.freezeFrame,a={op2:20,streamId:e,frz:s?1:0},c=r.newMessage({op:1002,memId:i.owner.id,arg:(0,o.default)(a),_reqOps:[100204]});i.updateAttributes({freezeFrame:s}),r.postMessage(c,(function(e){if(0!=e.result){var o=new h.RemoteControlFail({stream:i,failed:e.result,cause:e.msg,type:"freeze_control"});return r.onEvent(o),i.updateAttributes({freezeFrame:!i.freezeFrame}),void(n&&n(o,i.freezeFrame))}t&&t(i.freezeFrame)}))},base64Img2Blob:function(e){for(var t=e.split(";base64,"),n=t[0].split(":")[1],r=window.atob(t[1]),i=r.length,o=new Uint8Array(i),s=0;s<i;++s)o[s]=r.charCodeAt(s);return new Blob([o],{type:n})},blob2URL:function(e){return URL.createObjectURL(e)},imagesPngContext2URL:function(e){return this.blob2URL(this.blob2URL(e))},downloadFile:function(e,t,n){var r=document.createElement("a");r.style.display="none";var i,o=t?this.base64Img2Blob(t):n;r.download=e,r.href=i=this.blob2URL(o),r.rel="noopener";var s=document.createEvent("HTMLEvents");s.initEvent("click",!1,!1),r.dispatchEvent(s),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r),setTimeout((function(){URL.revokeObjectURL&&URL.revokeObjectURL(i)}),4e4)},videoCaptureBase64Context2URL:function(e){return this.imagesPngContext2URL(this.getCaptureBase64Context(e))},getCaptureBase64Context:function(e){var t=document.createElement("canvas");return t.id="__capture_video_"+(new Date).getTime(),t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),t.toDataURL("images/png")},captureVideo:function(e,t,n){var r=this.getCaptureBase64Context(e);return t&&(n=n||"capture_"+(new Date).getTime(),this.downloadFile(n,r)),r},capturePictureRemote:function(e,t,n,r){this.__assertCurrent();var i=this.current,s=i._linkedStreams[e];if(!s||s.located())throw l.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var a={op2:20,streamId:e,pic:1,rspBase64Pic:!0===t},c=i.newMessage({op:1002,memId:s.owner.id,arg:(0,o.default)(a),_reqOps:[100205]});i.postMessage(c,(function(e){if(0!=e.result){var o=new h.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"capture_control"});return i.onEvent(o),void(r&&r(o))}if(t)if(e.arg){var a=JSON.parse(e.arg);n&&n(a.pic)}else r&&r(new h.RemoteControlFail({stream:s,failed:e.result,cause:"Not found base64 pic"}));else n&&n()}))},zoomRemote:function(e,t,n,r){this.__assertCurrent();var i=this.current,s=i._linkedStreams[e];if(!s||s.located())throw l.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";s._zoom||s.updateAttributes({_zoom:1});var a=s._zoom*t;if(!(a<1)){s.updateAttributes({_zoom:a});var c={op2:20,streamId:e,zoom:Math.round(1e4*a)},u=i.newMessage({op:1002,memId:s.owner.id,arg:(0,o.default)(c),_reqOps:[100201]});i.postMessage(u,(function(e){if(0!=e.result){var t=new h.RemoteControlFail({stream:s,failed:e.result,cause:e.msg,type:"zoom_control"});return i.onEvent(t),void(n&&n(t))}r&&r()}))}},_getPosition:function(e){for(var t=0,n=0;e;)n+=e.offsetLeft,t+=e.offsetTop,e=e.offsetParent;return{clientX:n,clientY:t}},eventXYAtMedia:function(e,t){var n=u.getDomPageRect(t),r=n.width,i=n.height,o=t.videoWidth,s=t.videoHeight;if(s/o>i/r){var a=o/s;o=(s=i)*a}else a=s/o,s=(o=r)*a;var c,d,l=e;if((c=u.isFloat(l.x))&&(l.x=l.x*r),(d=u.isFloat(l.y))&&(l.y=l.y*i),!(Math.abs(l.x)<(r-o)/2||r-Math.abs(l.x)<(r-o)/2)&&!(Math.abs(l.y)<(i-s)/2||i-Math.abs(l.y)<(i-s)/2))return l.x=l.x<0?Math.floor(l.x+(r-o)/2):Math.floor(l.x-(r-o)/2),l.y=l.y<0?Math.floor(l.y+(i-s)/2):Math.floor(l.y-(i-s)/2),c&&(l.x=l.x/o),d&&(l.y=l.y/s),{x:l.x,y:l.y,width:o,height:s}},eventXYAtVideo:function(e,t){var n,r,i=u.getDomPageRect(t),o=i.width,s=i.height,a=t.videoWidth,c=t.videoHeight;if(c/a>s/o){var d=a/c;a=(c=s)*d}else d=c/a,c=(a=o)*d;return(n=u.isFloat(e.x))&&(e.x=e.x*a),(r=u.isFloat(e.y))&&(e.y=e.y*c),e.x=e.x<0?Math.floor(e.x-(o-a)/2):Math.floor(e.x+(o-a)/2),e.y=e.y<0?Math.floor(e.y-(s-c)/2):Math.floor(e.y+(s-c)/2),n&&(e.x=e.x/o),r&&(e.y=e.y/s),e},getClickXY:function(e,t){var n=t||window.event,r=document.documentElement.scrollLeft||document.body.scrollLeft,i=document.documentElement.scrollTop||document.body.scrollTop,o=n.pageX||n.clientX+r,s=n.pageY||n.clientY+i,a=this._getPosition(e);l.info("Video tag position ",a.clientX,":",a.clientY);var c=e.videoWidth,u=e.videoHeight;if(u/c>e.offsetHeight/e.offsetWidth){var d=c/u;c=(u=e.offsetHeight)*d,a.clientX+=(e.offsetWidth-c)/2}else d=u/c,u=(c=e.offsetWidth)*d,a.clientY+=(e.offsetHeight-u)/2;return l.info("Media position ",a.clientX,":",a.clientY),l.info("Media xy ",c,":",u),l.info("Click position ",o,":",s),{mediaWidth:c,mediaHeight:u,x:o-a.clientX,y:s-a.clientY}},focusExpoRemote:function(e,t,n,r,i){var o=n||window.event,s=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop,c=o.pageX||o.clientX+s,u=o.pageY||o.clientY+a,d=this._getPosition(t);l.info("Video tag position ",d.clientX,":",d.clientY);var f=t.videoWidth,p=t.videoHeight;if(p/f>t.offsetHeight/t.offsetWidth){var h=f/p;f=(p=t.offsetHeight)*h,d.clientX+=(t.offsetWidth-f)/2}else h=p/f,p=(f=t.offsetWidth)*h,d.clientY+=(t.offsetHeight-p)/2;l.info("Media position ",d.clientX,":",d.clientY),l.info("Media xy ",f,":",p),l.info("Click position ",c,":",u),this._focusExpo(e,f,p,c-d.clientX,u-d.clientY,r,i)},_focusExpo:function(e,t,n,r,i,s,a){if(!(r<=0||r>t)&&!(i<=0||i>n)){this.__assertCurrent();var c=this.current,u=c._linkedStreams[e];if(!u||u.located())throw l.error("not exsits or locate, not connect",e),e+" not exsits or locate, not connect";var d={op2:20,streamId:e,focus:1,expo:1,x:0===t?0:Math.round(1e4*r/t),y:0===n?0:Math.round(1e4*i/n)},f=c.newMessage({op:1002,memId:u.owner.id,arg:(0,o.default)(d),_reqOps:[100202,100203]});c.postMessage(f,(function(e){if(0!=e.result){var t=new h.RemoteControlFail({stream:u,failed:e.result,cause:e.msg,type:"focus_expo_control"});return c.onEvent(t),void(s&&s(t))}a&&a()}))}},_republish:function(e,t,n){l.info("Republish stream. it = ",e.id);var r,i,o=this;if(e.id){var s=o.current.__getWebrtcFor(e.id);s&&o.current.closeWebrtc(s,!0),r=o.current._getWebrtc(e.id)}switch(e.type){case 0:emedia.stopTracks(e._localMediaStream),i=new o.AVPubstream(e);break;case 1:emedia.stopAndRemoveAudioTracks(e._localMediaStream),i=new o.ShareDesktopPubstream(e);break;case 2:emedia.stopTracks(e._localMediaStream),i=new o.AudioMixerPubstream(e)}setTimeout((function(){o.openUserMedia(i).then((function(){e.localStream=i.localStream,e.isRepublished=!0,e.optimalVideoCodecs=e.optimalVideoCodecs||r&&r.optimalVideoCodecs,o.push(e,t,n)}),n)}),100)},switchMobileCamera:function(e,t,n){if("string"===typeof e?e=this.current._cacheStreams[e]:e.id&&(e=this.current._cacheStreams[e.id]),e.voff)l.warn("Stream id = ",e.id," voff, do not chanage camera.");else{e.constaints||(e.constaints={});var r=u.extend({},e.constaints);e._lastConstaints=r,e.constaints.video="object"===(0,a.default)(e.constaints.video)?e.constaints.video:{},"user"!==e.constaints.video.facingMode&&e.constaints.video.facingMode?e.constaints.video.facingMode="user":e.constaints.video.facingMode={exact:"environment"},this._republish(e,(function(e){n&&n(e)}),(function(n){n instanceof emedia.event.OpenMediaError&&(e.constaints=r),t&&t(n)}))}},chanageCamera:function(e,t,n){var r=this;"string"===typeof e?e=r.current._cacheStreams[e]:e.id&&(e=r.current._cacheStreams[e.id]),e.voff?l.warn("Stream id = ",e.id," voff, do not chanage camera."):r.getMediaDevices("videoinput",(function(i){if(i.length<=1)l.warn("Only video input. not chanage");else{var o=e._cameraIndex;if(null===e._cameraIndex||void 0===e._cameraIndex){var s=e.getLocalMediaStream(),c=(h=s&&s.getVideoTracks())&&h.length&&h[0];if(c&&c.getCapabilities&&"function"===typeof c.getCapabilities){var d=c.getCapabilities(),f=d&&d.deviceId;for(var p in i)if((v=i[p]).deviceId===f||v.label==c.label){o=parseInt(p);break}}else for(var p in i)if((v=i[p]).label==c.label){o=parseInt(p);break}}for(;o<i.length;){var h,m=i[o],v=i[o=(o+1)%i.length];if(!(h=e.getLocalMediaStream().getVideoTracks())||0===h.length||v.label!=h[0].label)break}var b=(v=i[o]).label;l.warn("Stream ",e.id,m.label,">>",b),e._cameraIndex=o,e.constaints||(e.constaints={});var g=u.extend({},e.constaints);e._lastConstaints=g,e.constaints.video="object"===(0,a.default)(e.constaints.video)?e.constaints.video:{},e.constaints.video.deviceId={exact:v.deviceId},r._republish(e,(function(e){n&&n(e)}),(function(n){n instanceof emedia.event.OpenMediaError&&(e.constaints=g),t&&t(n)}))}}),t)},chanageConstraints:function(e,t,n,r){if("string"===typeof e?e=this.current._cacheStreams[e]:e.id&&(e=this.current._cacheStreams[e.id]),e){if(l.info("chanage pubstream constraints. it",e.id,t),d.isObject(t)&&!d.isEqual(e.constaints,t)){var i=e.constaints||{},o=e.voff,s=e.aoff;return e._lastConstaints=i,e.constaints=u.extend(!0,{},i,t),e.aoff=e.constaints.audio?0:1,e.voff=e.constaints.video?0:1,void this._republish(e,(function(e){a(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints=i,e.aoff=s,e.voff=o),n&&n(t)}))}a(),r&&r(e.getMediaStream())}else l.warn("Not found pubS");function a(){var t=e.getMediaStream();emedia.enableVideoTracks(t,!e.voff),emedia.enableAudioTracks(t,!e.aoff)}},voff:function(e,t,n,r){var i=this;"string"===typeof e&&(e=i.current._cacheStreams[e]);var o=e.voff;function s(){t!=o?(emedia.enableVideoTracks(e.getMediaStream(),!t),i.current&&i.current.voff(e,t)):l.info("pubstream voff not chanage.")}if(t=t?1:0,e.voff=t,!t&&e.constaints&&!e.constaints.video){var a=e.constaints.video;return e.constaints.video=!0,void i._republish(e,(function(e){s(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints.video=a,e.voff=o),n&&n(t)}))}s(),r&&r(e.getMediaStream())},aoff:function(e,t,n,r){var i=this;"string"===typeof e&&(e=i.current._cacheStreams[e]);var o=e.aoff;function s(){t!=o?(emedia.enableAudioTracks(e.getMediaStream(),!t),i.current&&i.current.aoff(e,t)):l.info("pubstream aoff not chanage.")}if(t=t?1:0,e.aoff=t,!t&&e.constaints&&!e.constaints.audio){var a=e.constaints.audio;return e.constaints.audio=!0,void i._republish(e,(function(e){s(),r&&r(e)}),(function(t){t instanceof emedia.event.OpenMediaError&&(e.constaints.audio=a,e.aoff=o),n&&n(t)}))}s(),r&&r(e.getMediaStream())},iceing:function(e){return u.isPlainObject(this.current._linkedStreams[e])},recording:function(e){return u.isPlainObject(this.current._records[e])},startRecord:function(e,t){var n=this.current._linkedStreams[e];if(!n)throw l.error("not at linked streams",e),e+" not at linked streams";n._webrtc||t&&t(!1),this.current.startRecord(n,t)},stopRecord:function(e,t){var n=this.current._records[e];if(!n)throw l.error("not at recording streams",e),e+" not at recording streams";this.current.stopRecord(n,t)},getCurrentMembers:function(){return this.current.getCurrentMembers()},_onCapturePicture:function(e){var t,n=e.arg.rspBase64Pic,r=e.arg.streamId,i=this.current._cacheStreams[r];if(n){var s;if("function"!==typeof this.getHTMLVideo||!(s=this.getHTMLVideo(r)))return void l.warn("Not support capture picture. caused by htmlVideo not found");t=this.getCaptureBase64Context(s)}else{if("function"!==typeof this.onCapturePicture)return void l.warn("Not support capture picture. caused by onCapturePicture not found");this.onCapturePicture(i)}var a=this.current.newMessage({op:1001,tsxId:e.tsxId,memId:e.memId,arg:(0,o.default)(t?{pic:t}:{}),result:0});return this.current.postMessage(a,(function(e){l.warn("Send remote control onCapturePicture response. the result = ",e.result,e.msg||"")})),!0},newSession:function(e,t){var n=this;return new(n.Session||f)({ticket:t,owner:e,onTcklC:function(t){e.onTcklC(t.rtcId,t.cands)},onAcptC:function(t){e.onAcptC(t.rtcId,t.sdp,t.cands)},onAnsC:function(t){e.onAnsC(t.rtcId,t.sdp,t.cands)},onTermC:function(t){l.info("Server termc rtc: ",t.rtcId,t.message||t.msg);var r=t.endReason;if(21===r||22===r)u.forEach(e._cacheStreams,(function(n,i){var o;i.rtcId===t.rtcId&&(o=21===r?new emedia.event.SwitchVCodes({stream:i,useVCodes:t.useVCodes}):new emedia.event.SubFailNotSupportVCodes({stream:i}),e.onEvent(o))}));else if(23==r){var i=n.listeners.mgr.onPubVideoTooMuch;if(!i||"function"!=typeof i)return;i()}else if(24==r){var o=n.listeners.mgr.onPubDesktopTooMuch;if(!o||"function"!=typeof o)return;o()}else e.closeWebrtc(t.rtcId,!1,!0)},onEnter:function(t){e.onEnter(t.cver,t.mem)},onExit:function(t){e.onExit(t.cver,t.memId,t.reason||0)},onPub:function(t){e.onPub(t.cver,t.memId,t.pubS)},onUnpub:function(t){e.onUnpub(t.cver,t.memId,t.pubSId)},onMems:function(e){},onClose:function(t){e.onClose(t.cver,t.confrId)},onEvent:function(t){e.onEvent(t)},onStreamControl:function(t){e.onStreamControl(t.cver,t.streamId,t.voff,t.aoff,t.sver)},onRoleUpdate:function(t){e._onRoleUpdate(t.role,t.roleToken)},onRemoteControl:function(t){if("string"===typeof t.arg&&(t.arg=JSON.parse(t.arg)),20!==t.arg.op2||!t.arg.pic||!n._onCapturePicture.call(n,t)){if(30===t.arg.op2&&n._onRemotePannelControl)try{return void n._onRemotePannelControl.call(n,t)}catch(v){l.warn(v)}if(21!==t.arg.op2)if(22!==t.arg.op2){if(23===t.arg.op2){var r=n.listeners.mgr.onMuted;if(r&&"function"==typeof r)return void r()}if(24===t.arg.op2){var i=n.listeners.mgr.onUnmuted;if(i&&"function"==typeof i)return void i()}l.warn("Not support remote control");var s=e.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,o.default)(t.arg),result:t&&t.arg&&30===t.arg.op2?-405:-507,msg:"Not support the remote control."});e.postMessage(s,(function(e){l.warn("Send remote control response. the result = ",e.result,e.msg||"")}))}else{var a=t.arg,c=a.memId,u=a.nickName;if(!c)return void console.warn("onRequestToAdmin not have memberId");n._cache_receive_sessions.push(t);var d=n.listeners.mgr.onRequestToAdmin;d&&"function"==typeof d&&d({memberId:c,nickName:u},(function(e){return n.agreeRequestToAdmin(e)}),(function(e){return n.refuseRequestToAdmin(e)}))}else{var f=t.arg,p=f.memId,h=f.nickName;if(!p)return void console.warn("onRequestToTalker not have memberId");n._cache_receive_sessions.push(t);var m=n.listeners.mgr.onRequestToTalker;m&&"function"==typeof m&&m({memberId:p,nickName:h},(function(e,t){return n.agreeRequestToTalker(e,t)}),(function(e){return n.refuseRequestToTalker(e)}))}}},onRecvRemoteMessage:function(t){e._onRecvRemoteMessage&&e._onRecvRemoteMessage(t.memId,t.arg,t)},onConfrAttrsUpdated:function(e){var t=function(e){if(n.listeners.mgr){var t,r,i=n.listeners.mgr.cattrs||[];e.cattrs instanceof Array==1?(t=i,0==(r=e.cattrs).length||r.forEach((function(e){var n=!1;t.forEach((function(r,i){if(r.key==e.key)return t.splice(i,1,e),void(n=!0)})),n||t.push(e)})),i=t):i=function(e){var t=[];for(var n in e){var r={};r.key=n,r.val=e[n],r.op="",t.push(r)}return t}(e.cattrs),n.listeners.mgr.cattrs=i;var o=n.listeners.mgr.onConfrAttrsUpdated;o&&"function"==typeof o&&(o=o.bind(n.listeners.mgr))(i)}};e.cattrs instanceof Array==1&&e.cattrs.length>0&&t(e),e.cattrs.constructor==Object&&(0,r.default)(e.cattrs).length>0&&t(e),e.cstate&&function(e){if(e.cstate&&0!=(0,r.default)(e.cstate).length){var t=n.listeners.mgr.onConfrStateUpdated;t&&"function"==typeof t&&(t=t.bind(n.listeners.mgr))(e.cstate)}}(e)},onAdminChanged:function(e){var t=n.listeners.mgr.onAdminChanged;t&&"function"==typeof t&&t(e)},onRequestToTalkerReply:function(e){var t=n.listeners.mgr.onRequestToTalkerReply;t&&"function"==typeof t&&t(e)},onRequestToAdminReply:function(e){var t=n.listeners.mgr.onRequestToAdminReply;t&&"function"==typeof t&&t(e)},onLivecfgsChanged:function(e){e.liveCfgs&&emedia.config({liveCfgs:e.liveCfgs})}})},_judgeTalking:function(e){return!!e&&e.instant>=emedia.config.judgeTalkingByInstantGE},graffitiVideo:function(e,t,n){var r=this.getStreamById(e),i=new MediaStream;i._located=!0,r._localMediaStream.getAudioTracks().forEach((function(e){i.addTrack(e)})),n.captureStream(25).getVideoTracks().forEach((function(e){i.addTrack(e)})),t.srcObject=i,r.updateAttributes({localStream:i,isRepublished:!0,optimalVideoCodecs:r.optimalVideoCodecs}),this.push(r)},resetCanvas:function(e){var t;if(arguments.length>1)for(var n=0;n<arguments.length;n++)"function"===typeof(t=arguments[n])&&t(e),"function"!==typeof t&&u.isPlainObject(t)&&u.forEach(t,(function(t,n){l.debug("Canvas set ",t," = ",n),e.setAttribute(t,n)}))},_random:function(e){return Math.floor(Math.random()*e)},requestFrame:function(e,t){var n,r=this;if("string"===typeof e)n=this.current._cacheStreams[e];else{if(!e.id)return;n=this.current._cacheStreams[e.id]}function i(){n.requestFrame(),n.canvas&&_.prototype.redraw.bind({_canvasContext:n.canvas.getContext("2d")})(3,3)}n&&(t?setTimeout((function(){i(),r.requestFrame(n,t)}),t):i())},graffitiCanvas:function(e,t){u.targetDOM(e)&&(t=e,e=!1);var n=this,r=new n.ShareDesktopPubstream({voff:0,aoff:e?0:1});t||(t=document.createElement("canvas")),t.getContext("2d"),r.canvas=t;var i=function(){};return i.prototype.setCanvas=function(e){return this.canvasTag=t,n.resetCanvas(t,e),this},i.prototype.push=function(e,t){this._push(e,t)},i.prototype._push=function(i,o){"function"===typeof i&&(o=i,i=void 0),t.captureStream&&(t.captureStream.enabled=!0);var s=t.captureStream(i||25);function a(n){n.canvas=t,o&&o(n,t,s),e&&n.requestFrame()}function c(e,t){var r=new MediaStream;r._located=!0,e._localMediaStream&&e._localMediaStream.getAudioTracks().forEach((function(e){r.addTrack(e)})),s.getVideoTracks().forEach((function(e){r.addTrack(e)})),e._localMediaStream=r,e.localStream=r,n.push(e,t)}return e?n.__getUserMedia({audio:!0},(function(e,t){r._localMediaStream=t,c(r,a)})):c(r,a),this},new i},blobRecorder:function(e,t,n,r){var i=this;u.targetDOM(e)&&(e=e.srcObject),t||(t={mimeType:"video/webm;codecs=vp9"}),MediaRecorder.isTypeSupported(t.mimeType)||(l.info(t.mimeType," is not Supported"),t={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(t.mimeType)||(l.info(t.mimeType," is not Supported"),t={mimeType:"video/webm"},MediaRecorder.isTypeSupported(t.mimeType)||(l.info(t.mimeType," is not Supported"),t={mimeType:""})));try{var o=new MediaRecorder(e,t)}catch(c){return void l.error("Exception while creating MediaRecorder: ",c)}var s=[];function a(){this.blobs=s}return o.onstop=r||function(e){l.info("Recorder stopped: ",e)},o.ondataavailable=n||function(e){e.data&&e.data.size>0&&s.push(e.data)},a.prototype.start=function(e){o.start(e)},a.prototype.stop=function(){o.stop()},a.prototype.playurl=function(e){var t=new Blob(this.blobs,e||{type:"video/webm"});return window.URL.createObjectURL(t)},a.prototype.download=function(e,t){var n=new Blob(this.blobs,t||{type:"video/webm"});i.downloadFile(e,void 0,n)},new a},requestToTalker:function(){this.current.requestToTalker()},_get_session_by_memberId_and_op_type:function(e,t){if(e&&t){var n=void 0;return this._cache_receive_sessions.map((function(i){var o=i.arg;if(o&&o instanceof Object&&(0,r.default)(o).length>0){var s=o.memId,a=o.op2;s==e&&a==t&&(n=i)}})),n}},_delete_session_by_memberId_and_op_type:function(e,t){if(e&&t){var n=this;this._cache_receive_sessions.map((function(i,o){var s=i.arg;if(s&&s instanceof Object&&(0,r.default)(s).length>0){var a=s.memId,c=s.op2;a==e&&c==t&&n._cache_receive_sessions.splice(o,1)}}))}},agreeRequestToTalker:function(){var e=(0,s.default)(i.default.mark((function e(t,n){var r,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._get_session_by_memberId_and_op_type(t,21)){e.next=3;break}return e.abrupt("return");case 3:return o=r.arg.memName,s=this.listeners.confrId,e.prev=5,e.next=8,this.listeners.mgr.chanageRoles(3,[o],s);case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(5),-523!=e.t0.error){e.next=16;break}if(!n||"function"!=typeof n){e.next=16;break}return n(),e.abrupt("return");case 16:this._delete_session_by_memberId_and_op_type(t,21);case 17:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t,n){return e.apply(this,arguments)}}(),refuseRequestToTalker:function(e){if(e){var t=this._get_session_by_memberId_and_op_type(e,21);t&&(this.current.refuseRequestToTalker(t),this._delete_session_by_memberId_and_op_type(e,21))}else console.warn("refuseRequestToTalker memberId is required")},requestToAdmin:function(){this.current.requestToAdmin()},agreeRequestToAdmin:function(e){var t=this._get_session_by_memberId_and_op_type(e,22);if(t){var n=t.arg.memName,r=this.listeners.confrId;this.listeners.mgr.chanageRoles(7,[n],r),this._delete_session_by_memberId_and_op_type(e,22)}},refuseRequestToAdmin:function(e){if(e){var t=this._get_session_by_memberId_and_op_type(e,22);t&&(this.current.refuseRequestToAdmin(t),this._delete_session_by_memberId_and_op_type(e,22))}else console.warn("refuseRequestToAdmin memberId is required")},muteBymemberId:function(e){this.current&&7==this.current.role&&this.current.muteBymemberId(e)},unmuteBymemberId:function(e){this.current&&7==this.current.role&&this.current.unmuteBymemberId(e)}})},function(e,t,n){e.exports=n(143)},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(144),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(s){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag",c="object"===typeof e,u=t.regeneratorRuntime;if(u)c&&(e.exports=u);else{(u=t.regeneratorRuntime=c?e.exports:{}).wrap=m;var d={},l={};l[o]=function(){return this};var f=Object.getPrototypeOf,p=f&&f(f(E([])));p&&p!==n&&r.call(p,o)&&(l=p);var h=_.prototype=b.prototype=Object.create(l);g.prototype=h.constructor=_,_.constructor=g,_[a]=g.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(h),e},u.awrap=function(e){return{__await:e}},y(w.prototype),w.prototype[s]=function(){return this},u.AsyncIterator=w,u.async=function(e,t,n,r){var i=new w(m(e,t,n,r));return u.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(h),h[a]="Generator",h[o]=function(){return this},h.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}}}function m(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,o=Object.create(i.prototype),s=new C(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=S(s,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=v(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function b(){}function g(){}function _(){}function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(n,i){function o(){return new Promise((function(t,o){!function t(n,i,o,s){var a=v(e[n],e,i);if("throw"!==a.type){var c=a.arg,u=c.value;return u&&"object"===typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),s)}s(a.arg)}(n,i,t,o)}))}return t=t?t.then(o,o):o()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=v(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(8),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return function(){var t=e.apply(this,arguments);return new o.default((function(e,n){return function r(i,s){try{var a=t[i](s),c=a.value}catch(u){return void n(u)}if(!a.done)return o.default.resolve(c).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(c)}("next")}))}}},function(e,t,n){(function(e,n){var r;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},o=i._,s=Array.prototype,a=Object.prototype,c="undefined"!==typeof Symbol?Symbol.prototype:null,u=s.push,d=s.slice,l=a.toString,f=a.hasOwnProperty,p=Array.isArray,h=Object.keys,m=Object.create,v=function(){},b=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};t.nodeType?i._=b:(!n.nodeType&&n.exports&&(t=n.exports=b),t._=b),b.VERSION="1.9.1";var g,_=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},y=function(e,t,n){return b.iteratee!==g?b.iteratee(e,t):null==e?b.identity:b.isFunction(e)?_(e,t,n):b.isObject(e)&&!b.isArray(e)?b.matcher(e):b.property(e)};b.iteratee=g=function(e,t){return y(e,t,1/0)};var w=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},S=function(e){if(!b.isObject(e))return{};if(m)return m(e);v.prototype=e;var t=new v;return v.prototype=null,t},A=function(e){return function(t){return null==t?void 0:t[e]}},x=function(e,t){return null!=e&&f.call(e,t)},C=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},E=Math.pow(2,53)-1,k=A("length"),I=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=E};b.each=b.forEach=function(e,t,n){var r,i;if(t=_(t,n),I(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=b.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},b.map=b.collect=function(e,t,n){t=y(t,n);for(var r=!I(e)&&b.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o};var T=function(e){var t=function(t,n,r,i){var o=!I(t)&&b.keys(t),s=(o||t).length,a=e>0?0:s-1;for(i||(r=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var c=o?o[a]:a;r=n(r,t[c],c,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,_(n,i,4),r,o)}};b.reduce=b.foldl=b.inject=T(1),b.reduceRight=b.foldr=T(-1),b.find=b.detect=function(e,t,n){var r=(I(e)?b.findIndex:b.findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]},b.filter=b.select=function(e,t,n){var r=[];return t=y(t,n),b.each(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r},b.reject=function(e,t,n){return b.filter(e,b.negate(y(t)),n)},b.every=b.all=function(e,t,n){t=y(t,n);for(var r=!I(e)&&b.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},b.some=b.any=function(e,t,n){t=y(t,n);for(var r=!I(e)&&b.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,r){return I(e)||(e=b.values(e)),("number"!=typeof n||r)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=w((function(e,t,n){var r,i;return b.isFunction(t)?i=t:b.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),b.map(e,(function(e){var o=i;if(!o){if(r&&r.length&&(e=C(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))})),b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=I(e)?e:b.values(e)).length;a<c;a++)null!=(r=e[a])&&r>o&&(o=r);else t=y(t,n),b.each(e,(function(e,n,r){((i=t(e,n,r))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)}));return o},b.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=I(e)?e:b.values(e)).length;a<c;a++)null!=(r=e[a])&&r<o&&(o=r);else t=y(t,n),b.each(e,(function(e,n,r){((i=t(e,n,r))<s||i===1/0&&o===1/0)&&(o=e,s=i)}));return o},b.shuffle=function(e){return b.sample(e,1/0)},b.sample=function(e,t,n){if(null==t||n)return I(e)||(e=b.values(e)),e[b.random(e.length-1)];var r=I(e)?b.clone(e):b.values(e),i=k(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=b.random(s,o),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,t)},b.sortBy=function(e,t,n){var r=0;return t=y(t,n),b.pluck(b.map(e,(function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")};var R=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=y(r,i),b.each(n,(function(t,i){var s=r(t,i,n);e(o,t,s)})),o}};b.groupBy=R((function(e,t,n){x(e,n)?e[n].push(t):e[n]=[t]})),b.indexBy=R((function(e,t,n){e[n]=t})),b.countBy=R((function(e,t,n){x(e,n)?e[n]++:e[n]=1}));var M=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;b.toArray=function(e){return e?b.isArray(e)?d.call(e):b.isString(e)?e.match(M):I(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:I(e)?e.length:b.keys(e).length},b.partition=R((function(e,t,n){e[n?0:1].push(t)}),!0),b.first=b.head=b.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,Boolean)};var O=function e(t,n,r,i){for(var o=(i=i||[]).length,s=0,a=k(t);s<a;s++){var c=t[s];if(I(c)&&(b.isArray(c)||b.isArguments(c)))if(n)for(var u=0,d=c.length;u<d;)i[o++]=c[u++];else e(c,n,r,i),o=i.length;else r||(i[o++]=c)}return i};b.flatten=function(e,t){return O(e,t,!1)},b.without=w((function(e,t){return b.difference(e,t)})),b.uniq=b.unique=function(e,t,n,r){b.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=y(n,r));for(var i=[],o=[],s=0,a=k(e);s<a;s++){var c=e[s],u=n?n(c,s,e):c;t&&!n?(s&&o===u||i.push(c),o=u):n?b.contains(o,u)||(o.push(u),i.push(c)):b.contains(i,c)||i.push(c)}return i},b.union=w((function(e){return b.uniq(O(e,!0,!0))})),b.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=k(e);r<i;r++){var o=e[r];if(!b.contains(t,o)){var s;for(s=1;s<n&&b.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},b.difference=w((function(e,t){return t=O(t,!0,!0),b.filter(e,(function(e){return!b.contains(t,e)}))})),b.unzip=function(e){for(var t=e&&b.max(e,k).length||0,n=Array(t),r=0;r<t;r++)n[r]=b.pluck(e,r);return n},b.zip=w(b.unzip),b.object=function(e,t){for(var n={},r=0,i=k(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var P=function(e){return function(t,n,r){n=y(n,r);for(var i=k(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};b.findIndex=P(1),b.findLastIndex=P(-1),b.sortedIndex=function(e,t,n,r){for(var i=(n=y(n,r,1))(t),o=0,s=k(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o};var j=function(e,t,n){return function(r,i,o){var s=0,a=k(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!==i)return(o=t(d.call(r,s,a),b.isNaN))>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}};b.indexOf=j(1,b.findIndex,b.sortedIndex),b.lastIndexOf=j(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},b.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(d.call(e,r,r+=t));return n};var N=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=S(e.prototype),s=e.apply(o,i);return b.isObject(s)?s:o};b.bind=w((function(e,t,n){if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var r=w((function(i){return N(e,r,t,this,n.concat(i))}));return r})),b.partial=w((function(e,t){var n=b.partial.placeholder;return function r(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===n?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return N(e,r,this,this,s)}})),b.partial.placeholder=b,b.bindAll=w((function(e,t){var n=(t=O(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=b.bind(e[r],e)}})),b.memoize=function(e,t){var n=function n(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return x(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=w((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:b.now(),r=null,s=e.apply(i,o),r||(i=o=null)},u=function(){var u=b.now();a||!1!==n.leading||(a=u);var d=t-(u-a);return i=this,o=arguments,d<=0||d>t?(r&&(clearTimeout(r),r=null),a=u,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,d)),s};return u.cancel=function(){clearTimeout(r),a=0,r=i=o=null},u},b.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},s=w((function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,t),a&&(i=e.apply(this,s))}else r=b.delay(o,t,this,s);return i}));return s.cancel=function(){clearTimeout(r),r=null},s},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},b.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},b.once=b.partial(b.before,2),b.restArguments=w;var D=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(e,t){var n=B.length,r=e.constructor,i=b.isFunction(r)&&r.prototype||a,o="constructor";for(x(e,o)&&!b.contains(t,o)&&t.push(o);n--;)(o=B[n])in e&&e[o]!==i[o]&&!b.contains(t,o)&&t.push(o)};b.keys=function(e){if(!b.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)x(e,n)&&t.push(n);return D&&L(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&L(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},b.mapObject=function(e,t,n){t=y(t,n);for(var r=b.keys(e),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=t(e[a],a,e)}return o},b.pairs=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},b.invert=function(e){for(var t={},n=b.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()};var V=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==n[u]||(n[u]=o[u])}return n}};b.extend=V(b.allKeys),b.extendOwn=b.assign=V(b.keys),b.findKey=function(e,t,n){t=y(t,n);for(var r,i=b.keys(e),o=0,s=i.length;o<s;o++)if(t(e[r=i[o]],r,e))return r};var U,F,G=function(e,t,n){return t in n};b.pick=w((function(e,t){var n={},r=t[0];if(null==e)return n;b.isFunction(r)?(t.length>1&&(r=_(r,t[1])),t=b.allKeys(e)):(r=G,t=O(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];r(a,s,e)&&(n[s]=a)}return n})),b.omit=w((function(e,t){var n,r=t[0];return b.isFunction(r)?(r=b.negate(r),t.length>1&&(n=t[1])):(t=b.map(O(t,!1,!1),String),r=function(e,n){return!b.contains(t,n)}),b.pick(e,r,n)})),b.defaults=V(b.allKeys,!0),b.create=function(e,t){var n=S(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0},U=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&F(e,t,n,r)},F=function(e,t,n,r){e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var i=l.call(e);if(i!==l.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!U(e[u],t[u],n,r))return!1}else{var d,f=b.keys(e);if(u=f.length,b.keys(t).length!==u)return!1;for(;u--;)if(d=f[u],!x(t,d)||!U(e[d],t[d],n,r))return!1}return n.pop(),r.pop(),!0},b.isEqual=function(e,t){return U(e,t)},b.isEmpty=function(e){return null==e||(I(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length)},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=p||function(e){return"[object Array]"===l.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){b["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}})),b.isArguments(arguments)||(b.isArguments=function(e){return x(e,"callee")});var W=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof W&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return!b.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&isNaN(e)},b.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){if(!b.isArray(t))return x(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!f.call(e,i))return!1;e=e[i]}return!!n},b.noConflict=function(){return i._=o,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=function(e){return b.isArray(e)?function(t){return C(t,e)}:A(e)},b.propertyOf=function(e){return null==e?function(){}:function(t){return b.isArray(t)?C(e,t):e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var r=Array(Math.max(0,e));t=_(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=b.invert(q),Q=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};b.escape=Q(q),b.unescape=Q(z),b.result=function(e,t,n){b.isArray(t)||(t=[t]);var r=t.length;if(!r)return b.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=b.isFunction(o)?o.call(e):o}return e};var X=0;b.uniqueId=function(e){var t=++X+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,J=function(e){return"\\"+H[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var r,i=RegExp([(t.escape||Y).source,(t.interpolate||Y).source,(t.evaluate||Y).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,(function(t,n,r,i,a){return s+=e.slice(o,a).replace(K,J),o=a+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return r.call(this,e,b)},c=t.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},b.chain=function(e){var t=b(e);return t._chain=!0,t};var Z=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){return b.each(b.functions(e),(function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Z(this,n.apply(b,e))}})),b},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=s[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Z(this,n)}})),b.each(["concat","join","slice"],(function(e){var t=s[e];b.prototype[e]=function(){return Z(this,t.apply(this._wrapped,arguments))}})),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return b}.apply(t,[]))||(n.exports=r)}()}).call(this,n(147),n(148)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=o(n(88)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(87),a=s.tagLogger("Sess"),c=n(150),u=0,d=n(151).default,l=s.prototypeExtend({setSessId:function(e){return e&&(this.sessId=e),this},setOp:function(e){return e&&(this.op=e),200===e&&(this.res={type:emedia.config.clientType,ver:window._emediaVersion||emedia.config.version,agent:emedia.config.userAgent,ops:emedia.config.acptOps}),this},setTsxId:function(e){return e&&(this.tsxId=e),this},setTicket:function(e){return e&&(this.tkt=e),this},setSdp:function(e){return e&&(this.sdp=e),this},setCands:function(e){return e&&(this.cands=e),this},setSubSId:function(e){return e&&(this.subSId=e),this},setMemId:function(e){return e&&(this.memId=e),this},setPubS:function(e){e&&(this.pubS=s.extend(!1,{},e));var t=this.pubS;return t.ext&&s.isPlainObject(t.ext)&&(t.ext=(0,i.default)(t.ext)),t&&s.forEach(t,(function(e,n){(s.isPlainObject(n)||"function"===typeof n)&&"resolution"!=e&&s.removeAttribute(t,e)})),t&&s.removeAttribute(t,"localStream"),t&&s.removeAttribute(t,"_localMediaStream"),t&&s.removeAttribute(t,"_webrtc"),this},setRtcId:function(e){return e&&(this.rtcId=e),this},setCver:function(e){return e&&(this.cver=e),this},setEndReason:function(e){return e&&(this.endReason=e),this},setNickName:function(e){return e&&(this.nickName=e),this},setResource:function(e){return e&&(this.resource=e),this},setReason:function(e){return e&&(this.reason=e),this},setConfrId:function(e){return e&&(this.confrId=e),this},setVoff:function(e){return"undefined"===typeof e||(this.voff=e?1:0),this},setAoff:function(e){return"undefined"===typeof e||(this.aoff=e?1:0),this},setFlag:function(e){return 0===e&&(this.flag=0),1===e&&(this.flag=1),this},setExt:function(e){return e&&s.isPlainObject(e)&&(e=(0,i.default)(e)),e&&(this.ext=e),this}}),f=emedia.__session_globalCount=0;function p(e,t,n){var r=this;function o(e,i){try{r.onWebsocketEvent(new c.WSClose({url:r.thisWsUri,retry:n,online:r.online,cause:e,event:i,session:r}))}finally{t&&t(new c.WSClose({url:r.thisWsUri,retry:n,online:r.online,cause:e,event:i,session:r}))}}function u(e){if(r.connected(r.thisWsUri)){if(s.isPlainObject(e)&&!(e instanceof l))throw a.error("message not a Messages"),"message not a Messages";if(r.sessId&&e.sessId!=r.sessId)a.warn("self.sessId && message.sessId != self.sessId",e);else{var t=(0,i.default)(e);r.thisWsUri===r._websocket.url&&r._websocket.send(t),r.thisWsUri===r._websocket.url&&a.debug("Done send req:",t,r._websocket.url),r.thisWsUri===r._websocket.url||a.debug("Donot send(url not equal): req:",t,r._websocket.url)}}else a.debug("current dont connect. the message = ",e)}if(r.connected(r.thisWsUri))return e&&e(r),a.info("Session connected. dont continue connect"),void(r.notifyNewMessage&&r.notifyNewMessage());if(r.online){r.notifyNewMessage=function(){if(r.connected(r.thisWsUri)){if(0===r._bufferedMessages.length)return;for(var e,t=[];e=r._bufferedMessages.shift();)if(e.sessId||r.sessId||200==e.op){if(200===e.op){u(e);break}r.sessId&&!e.sessId&&(e.sessId=r.sessId);var i=u(e);i&&t.push(i)}else t.push(e),a.warn("tmp store message, util enter success!",e);t.length>0&&Array.prototype.push.apply(r._bufferedMessages,t)}else if(0!==n&&r.online)r.connected();else{var o=s.extend(!1,{},r._callbacks),c=[];for(var d in o){var l=o[d];n>0&&!r.online?c.push(l):r.onMessage({op:1001,tsxId:d,result:-9527,msg:"sdk rsp fail. retry fail or online = "+r.online})}r._bufferedMessages=r._bufferedMessages||[],c.length>0&&Array.prototype.push.apply(r._bufferedMessages,c)}},a.info("Session begin connect.");var d=r._websocket;d&&(a.warn("will close. websocket state",d.readyState,d.url,r.thisWsUri),d.close(1e3));try{a.info("Connecting",r.thisWsUri,n),d=r._websocket=new WebSocket(r.thisWsUri)}catch(f){return a.warn(f),void o(f)}d.onopen=function(n){var i=this.url;if(i===r.thisWsUri)try{a.info("websocket connected:",i),t&&(t=null),e&&e(r),r.onWebsocketEvent(new c.WSConnected({event:n,session:r}))}finally{}else a.warn("ignore the onopen. caused by websocket url not ",r.thisWsUri,i)},d.onmessage=function(e){var t=this.url;if(t===r.thisWsUri){a.debug("recv data",e.data);var n=JSON.parse(e.data);n&&1001==n.op&&a.debug("recv message: rsp:",n),n&&1001!=n.op&&a.debug("recv message: evt:",n),r.onMessage(n)}else a.warn("ignore recv data. caused by websocket url not ",r.thisWsUri,t,e.data)},d.onclose=function(e){var t=this.url;a.info("Disconnected:",t,r.thisWsUri,e),t===r.thisWsUri?(r.notifyNewMessage(),1e3!==e.code&&o(void 0,e)):a.warn("ignore onclose. caused by websocket url not ",r.thisWsUri,t)},d.onerror=function(e){a.info("On error:",e),r.onWebsocketEvent(new c.WSError({event:e,online:r.online,session:r,url:this.url}))}}else o()}e.exports=s.prototypeExtend({_events:{0:"onReqP2P",1:"onNewCfr",2:"onDelCfr",3:"onReqTkt",100:"onPing",101:"onPong",102:"onInitC",103:"onReqC",104:"onAcptC",105:"onTcklC",106:"onAnsC",107:"onTermC",300:"onEnter",301:"onExit",302:"onPub",303:"onUnpub",304:"onMems",204:"onClose",400:"onStreamControl",401:"onJoin",412:"onRoleUpdate",1002:"onRemoteControl",1003:"onRecvRemoteMessage",402:"onConfrAttrsUpdated",413:"onAdminChanged",452:"onLivecfgsChanged"},__init__:function(){var e=this;e._bufferedMessages=[],e._callbacks={},navigator.onLine?e.online=!0:e.online=!1,window.addEventListener("online",(function(t){e.online=!0,a.warn("online online online"),e.closed||e._reconnect(emedia.config.reconnect)}),!0),window.addEventListener("offline",(function(t){e.online=!1,a.warn("offline offline offline"),e.__checkConnectIntervalId&&clearTimeout(e.__checkConnectIntervalId),e.__retryConnectIntervalId&&clearTimeout(e.__retryConnectIntervalId),e.__retryConnectIntervalId&&delete e.__retryConnectIntervalId,e._websocket&&e._websocket.close(1e3)}),!0),a.info("online status = ",e.online)},_nextWsUri:function(){var e=this.ticket.url;emedia.config.useDeployMore&&(emedia.mgr.rtc_url_config=null,emedia.mgr.rtc_url_config=new d(emedia.config.rtcConfigUrl||""),e=emedia.mgr.rtc_url_config.replace_ws(e));var t=emedia.config&&emedia.config.convertWebsocketURLOfTicket||emedia.convertWebsocketURLOfTicket;if("function"===typeof t){var n=e;e=t(e),a.warn(n,"--\x3e",e)}if(e.startsWith("/")){if(emedia.config.wsorigin)e=emedia.config.wsorigin+e;else{var r=window.location.href,i=r.startsWith("https")?"wss://":"ws://",o=r.indexOf("://")+3,s=r.indexOf("/",o);e=i+r.substring(o,s)+e}a.warn("websocket url. update. {} -> {}",this.ticket.url,e)}else emedia.config.wsorigin&&a.warn("emedia.config.wsorigin invalidate. causeby server url {}",e);return e.indexOf("?")>=0?e+="&"+u++:e+="?"+u++,e},_reconnect:function(e){var t=this;function n(){a.warn("Reconnected. at ",e,t._websocket.url),t.__retryConnectIntervalId&&clearTimeout(t.__retryConnectIntervalId),t.__retryConnectIntervalId&&delete t.__retryConnectIntervalId;var n=t.newMessage().setOp(200).setSessId(t._sessionId).setTicket(t.ticket).setNickName(t.nickName||t.ticket.memName).setResource(t.resource).setExt(t.owner.ext);t.postMessage(n,(function(e){if(0==e.result){var r=t.owner;s.forEach(r._cacheStreams,(function(e,t){if(!r._maybeNotExistStreams[e]&&t._webrtc){var n=t._webrtc;n.closed||(a.warn("network chanage. webrtc will rebuild.",n._rtcId,n.__id),r.onICEClosed(n))}})),t.onEvent(new c.EnterSuccess({ip:t.owner.ip})),t.owner.onMembers(e.cver,e.mems),t.owner.onStreams(e.cver,e.streams),t.notifyNewMessage()}else try{t.onEvent(new c.EnterFail({me:t.owner,cause:new c.RspFail({request:n,response:e})}))}finally{-9527!==e.result&&t.onEvent(new c.ServerRefuseEnter({failed:e.result,msg:e.msg}))}}))}t.connect(n,(function r(i){if(e<=0)return a.warn("Reconnect end. but fail.",i.url,e),void(t.__retryConnectIntervalId&&delete t.__retryConnectIntervalId);e&&(t.__retryConnectIntervalId=setTimeout((function(){t.connect(n,r,--e)}),emedia.config.reconnectDelay))}),--e)},__checkConnect:function(){var e=this;e.__checkConnectIntervalId&&clearTimeout(e.__checkConnectIntervalId),emedia.config.checkConnectIntervalMillis&&(e.__checkConnectIntervalId=setTimeout((function(){try{e.online&&!e.connected()&&(e.__retryConnectIntervalId&&a.debug("online, reconnecting..."),e.__retryConnectIntervalId||a.debug("online, but disconnect. will reconnect"),e.__retryConnectIntervalId||e._reconnect(emedia.config.reconnect))}finally{e.__checkConnect()}}),emedia.config.checkConnectIntervalMillis))},connect:function(e,t,n){var r=this,i=r.thisWsUri=r._nextWsUri();"undefined"!==typeof n&&a.warn("begin connect... at retry = ",n,i),p.call(r,(function(){try{e.apply(r,arguments)}finally{r.__checkConnect()}}),(function(e){try{t.apply(r,arguments)}finally{n||e.url!==i||r.onEvent(new c.ServerRefuseEnter({failed:-95270,msg:"sdk reconnect fail. "+i+"|"+e.url}))}}),n)},connected:function(e){return this.online&&this._websocket&&(!e||e===this._websocket.url)&&this._websocket.readyState==WebSocket.OPEN},onWebsocketEvent:function(e){this.onEvent(e)},register:function(e){if("object"===("undefined"===typeof e?"undefined":(0,r.default)(e)))for(var t in e)this.bind(t,e[t])},bind:function(e,t){var n;if(!(n=this._events[e]))throw a.error("Not supported event = ",e),"Not supported event = "+e;this[n]=t},getSessionId:function(){return this._sessionId},newMessage:function(e){return new l(e)},__modifyMessage:function(e){if(e&&e.sdp&&("string"===typeof e.sdp&&(e.sdp=s.parseJSON(e.sdp)),e.sdp.type&&(e.sdp.type=e.sdp.type.toLowerCase()),e.cctx&&(e.sdp.cctx=e.cctx)),e&&e.cands){"string"===typeof e.cands&&(e.cands=s.parseJSON(e.cands));for(var t=0;t<e.cands.length;t++)"string"===typeof e.cands[t]&&(e.cands[t]=s.parseJSON(e.cands[t])),e.cands[t].sdpMLineIndex=e.cands[t].mlineindex,e.cands[t].sdpMid=e.cands[t].mid,delete e.cands[t].mlineindex,delete e.cands[t].mid,e.cctx&&(e.cands[t].cctx=e.cctx)}if(e&&e.mems){if(!s.isArray(e.mems))return;var n=e.mems;e.mems={},s.forEach(n,(function(t,n){n.name&&(n.memName=n.name),e.mems[n.id]=n;var r=n.acptOps={};if(s.forEach(emedia.config.baseAcptOps,(function(e,t){r[t]=!0})),n.res&&s.forEach(n.res.ops,(function(e,t){r[t]=!0})),n&&n.ext)try{e.mems[n.id].ext=JSON.parse(n.ext)}catch(i){a.debug(i)}}))}if(e&&e.mem){e.mem.name&&(e.mem.memName=e.mem.name);var r=e.mem.acptOps={};if(s.forEach(emedia.config.baseAcptOps,(function(e,t){r[t]=!0})),e.mem.res&&s.forEach(e.mem.res.ops,(function(e,t){r[t]=!0})),e.mem&&e.mem.ext)try{e.mem.ext=JSON.parse(e.mem.ext)}catch(o){a.debug(o)}}if(e&&e.streams){if(!s.isArray(e.streams))return;var i=e.streams;e.streams={},s.forEach(i,(function(t,n){if(e.streams[n.id]=n,n&&n.ext)try{e.streams[n.id].ext=JSON.parse(n.ext)}catch(o){a.debug(o)}}))}if(e&&e.pubS&&e.pubS&&e.pubS.ext)try{e.pubS.ext=JSON.parse(e.pubS.ext)}catch(o){a.debug(o)}if(e&&e.ext)try{e.ext=JSON.parse(e.ext)}catch(o){a.debug(o)}return e},onMessage:function(e){var t=this;function n(e){var n=t._events[e.op],r=t[n];r?r.call(t,e):a.warn("Not supported event = ",e)}if(1001!=e.op&&!e.sessId)throw a.error("message sessId error. server evt data error"),"message sessId error. server evt data error";if(1001!=e.op&&t._sessionId&&t._sessionId!=e.sessId)throw a.error("message sessId error. server and local not equal"),"message sessId error. server and local not equal";if(1004!==e.op){if(1001==e.op&&e.arg){var r=JSON.parse(e.arg).op2;if(21==r){var i=e.result;return void t.onRequestToTalkerReply(i)}if(22==r){var o=e.result;return void t.onRequestToAdminReply(o)}}var u;e=t.__modifyMessage(e);var d=s.removeAttribute(t._callbacks,e.tsxId);if(d&&200===d.op){t._sessionId=e.sessId;var l="string"===typeof e.yourIp?e.yourIp:void 0;if("string"===typeof t._session_ip&&l!=t._session_ip&&(u=t._session_ip),a.info(t._sessionId,"ip is",l,u),t._session_ip=l,t.owner.ip=l,0===e.result){for(var f in t._bufferedMessages){var p=t._bufferedMessages[f];p.sessId||200===p.op||(p.sessId=e.sessId)}setTimeout((function(){t.notifyNewMessage()}),100),1001==e.op&&(e.cattrs||e.cstate)&&t.onConfrAttrsUpdated(e)}else for(var h;h=t._bufferedMessages.shift();)200!==h.op&&t.onMessage({op:1001,tsxId:h.tsxId,result:-9527,msg:"sdk enter fail. sdk callback. enter result = "+e.result})}if(t.owner&&t.owner.closed)a.warn("self closed. me is "+t.owner.getMemberId()+", session_id = "+t.getSessionId()+". drop message",e);else{if(t.onEvent(new c.RecvResponse({request:d,response:e})),d&&d.__callback__&&1004!==e.op)return d.__callback__(e),void(u&&t.onWebsocketEvent(new c.NetworkChanaged({preIp:u,nowIp:t._session_ip})));e.op&&1001!=e.op?(n(e),u&&t.onWebsocketEvent(new c.NetworkChanaged({preIp:u,nowIp:t._session_ip}))):a.debug("Igron message. caused by op not found.",e)}}else n(e)},__modifyMessageForPost:function(e){if(e.cands){for(var t=[],n=e.cands,r=0;r<n.length;r++){var o;0==r&&n[r].cctx&&(e.cctx=n[r].cctx),o="string"===typeof n[r]?{type:"candidate",candidate:n[r],mlineindex:0,mid:"audio"}:{type:"candidate",candidate:n[r].candidate,mlineindex:n[r].sdpMLineIndex,mid:n[r].sdpMid},t.push((0,i.default)(o))}e.cands=t}if(e.sdp&&"string"!==typeof e.sdp){var a={type:e.sdp.type,sdp:e.sdp.sdp};e.sdp.cctx&&(e.cctx=e.sdp.cctx),e.sdp=a,e.sdp.type=e.sdp.type.toUpperCase(),e.sdp=s.stringifyJSON(e.sdp)}return e.pubS&&s.removeAttribute(e.pubS,"_located"),e.pubS&&s.removeAttribute(e.pubS,"mutedMuted"),e.pubS&&s.removeAttribute(e.pubS,"mediaStream"),e.pubS&&s.removeAttribute(e.pubS,"isRepublished"),e.pubS&&s.removeAttribute(e.pubS,"optimalVideoCodecs"),"function"===typeof e.post&&s.removeAttribute(e,"post"),e},postMessage:function(e,t,n){1002==e.op&&console.log("postMessage 1002",(0,i.default)(e));var r=this;if(e.tsxId||(e.tsxId="MSG"+Date.now()+"-"+f++),e.memId){var o=r.owner._cacheMembers[e.memId],c=e.arg,u=!1;if(c&&(21!=(c=JSON.parse(c)).op2&&22!=c.op2&&23!=c.op2&&24!=c.op2||(u=!0)),!o&&!u)return a.warn("Member not found at local. memberId = "+e.memId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-507,msg:" member not found at local. memberId = "+e.memId}));var d=e._reqOps;if(d||(d=[]).push(e.op),!u)for(var l in d){var p=d[l];if(!o.acptOps[p])return a.warn("Member not accept op "+p+", "+e.memId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-507,msg:" member not accept op "+p+", "+e.memId}))}}if(s.removeAttribute(e,"_reqOps"),r._sessionId&&r._sessionId!=e.sessId)return a.warn("sessionId not excepted. self._sessionId = "+r._sessionId,e),void(t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"sessionId not excepted."}));if(r.closed)return a.warn("session closed.",e),void(t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"session closed"}));var h=s.extend({},e);if(!(e=r.__modifyMessageForPost(e)))return a.warn("Message drop. callback success.",e),void(t&&t({op:1001,tsxId:h.tsxId,result:0,msg:"Message drop. callback success."}));200===e.op?(r._bufferedMessages.unshift(e),t&&setTimeout((function(){r._callbacks[e.tsxId]&&(a.error("Enter timeout. fail."),r.onMessage({op:1001,tsxId:e.tsxId,result:-9527,msg:"enter timeout. millis = "+emedia.config.enterTimeout}))}),emedia.config.enterTimeout)):r._bufferedMessages.push(e),t&&(r._callbacks[e.tsxId]=s.extend(e,{__callback__:t.bind(r.owner)})),r.notifyNewMessage&&r.notifyNewMessage(),n&&t&&setTimeout((function(){var e=r._callbacks[e.tsxId];e&&e.__callback__&&e.__callback__({op:1001,tsxId:h.tsxId,result:-408,msg:"Message request timeout."}),s.removeAttribute(r._callbacks,e.tsxId)}),n)},close:function(e){a.warn("sessiong closing, reason = ",e),this.notifyNewMessage&&this.notifyNewMessage(),this.closed=!0,this.seqno=0,this._websocket&&(0==e||100==e?this._websocket.close(1e3):this._websocket.close()),this.__retryConnectIntervalId&&clearTimeout(this.__retryConnectIntervalId),this.__retryConnectIntervalId&&delete this.__retryConnectIntervalId,this.__checkConnectIntervalId&&clearTimeout(this.__checkConnectIntervalId),this.__checkConnectIntervalId&&delete this.__checkConnectIntervalId,this.owner=null,this._bufferedMessages=[],this._callbacks={},a.warn("session closed")}})},function(e,t,n){"use strict";var r=n(87),i=(r.logger,r.prototypeExtend({msg:"",__init__:function(){this.day=new Date},execTime:function(){var e=this.day.getHours();e<10&&(e="0"+e);var t=this.day.getMinutes();t<10&&(t="0"+t);var n=this.day.getSeconds();return n<10&&(n="0"+n),e+":"+t+":"+n}})),o=i.extend({_webrtcDesc:function(){return this.webrtc,this.webrtc.getRtcId()}});e.exports={Exception:i.extend(),NetworkChanaged:i.extend({message:function(){var e=this.execTime()+" : Network chanage ("+this.preIp+" -> "+this.nowIp+").";return e}}),WSClose:i.extend({message:function(){var e=this.execTime()+" WSClose: Websocket close ("+(this.retry||0)+").";return this.online||(e+=" offline."),this.event&&(e+=" wscode: "+this.event.code),this.cause&&(e+=" cause: "+this.cause.message),this.url&&(e+=" url: "+this.url),e+=" retry: "+(this.retry||0),this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),e}}),WSError:i.extend({message:function(){var e=this.execTime()+" WSError: Websocket error. ready state:"+(this.event.srcElement&&this.event.srcElement.readyState||this.event.currentTarget.readyState)+". online = "+this.online;return this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),this.url&&(e+=" url: "+this.url),e}}),WSConnected:i.extend({message:function(){var e=this.execTime()+" WSConnected: Websocket success. ready state:"+(this.event.srcElement&&this.event.srcElement.readyState||this.event.currentTarget.readyState);return this.session&&this.session.getSessionId()&&(e=e+", sess = "+this.session.getSessionId()),e}}),ICEChanage:o.extend({message:function(){return this.execTime()+" ICEChanage: "+this._webrtcDesc()+" state: "+this.state}}),AddIceCandError:o.extend({message:function(){return this.execTime()+" AddIceCandError: "+this._webrtcDesc()+", add cand error"}}),ICEConnectFail:o.extend({message:function(){return this.execTime()+" ICEConnectFail: "+this._webrtcDesc()+" failed"}}),ICEConnected:o.extend({message:function(){return this.execTime()+" ICEConnected: "+this._webrtcDesc()+" connected"}}),ICEDisconnected:o.extend({message:function(){return this.execTime()+" ICEDisconnected: "+this._webrtcDesc()+" disconnected"}}),ICEClosed:o.extend({message:function(){return this.execTime()+" ICEClosed: "+this._webrtcDesc()+" closed"}}),ICERemoteMediaStream:o.extend({message:function(){return this.execTime()+" ICERemoteMediaStream: "+this._webrtcDesc()+" got remote stream"}}),StreamState:i.extend({message:function(){return this.execTime()+" StreamState:  stream "+this.stream.id+" state: "+this.state+" "+this.msg},iceFail:function(){this.state=1,this.msg="network anomaly. media lost"}}),OpenMediaError:i.extend({message:function(){return this.execTime()+" OpenMediaError:  open media error. caused by "+(this.event.name?this.event.name:this.event.message?this.event.message:this.event.toString())}}),Hangup:i.extend({message:function(){return this.self?"hangup id = "+(this.self.id||"--")+" reason\uff1a"+(this.reason||0):this.execTime()+" Hangup: "+(this.parnter&&(this.parnter.name||this.parnter.id||" ")||"")+" hangup, reason\uff1a"+(this.reason||0)}}),ServerRefuseEnter:i.extend({message:function(){return this.execTime()+" ServerRefuseEnter: server refuse, cause\uff1a"+this.failed+", msg:"+(this.msg||"")}}),RspFail:i.extend({__init__:function(){this.day=new Date,this.failed=this.response.result,this.msg=this.response.msg||this.response.message||"--"},message:function(){return this.execTime()+" RspFail: "+this.request.tsxId+", "+(this.response.sessId||"--")+" op: "+this.request.op+", cause: "+this.failed+" "+this.msg}}),RecvResponse:i.extend({__init__:function(){this.day=new Date,this.failed=this.response.result,this.msg=this.response.msg},message:function(){return this.request?this.execTime()+" RecvResponse: "+(this.request&&this.request.tsxId)+", "+(this.response.sessId||"--")+" op: "+(this.request&&this.request.op)+", cause: "+this.failed+" "+this.msg:this.execTime()+" RecvMessage: "+(this.response&&this.response.tsxId)+", "+(this.response.sessId||"--")+" op: "+(this.response&&this.response.op)+" "+this.msg}}),EnterFail:i.extend({message:function(){return this.execTime()+" EnterFail: enter fail\uff1a"+(this.cause?this.cause.message():"unkown")}}),EnterSuccess:i.extend({message:function(){return this.execTime()+" EnterSuccess: enter success "+(this.ip?", ip = "+this.ip:"")}}),PushSuccess:i.extend({message:function(){return this.execTime()+" PushSuccess: push success, streamId = "+this.stream.id+", "+this.stream.optimalVideoCodecs+", webrtc = "+this.stream.rtcId}}),PushFail:i.extend({message:function(){return this.execTime()+" PushFail: push fail, streamId = "+this.stream.id+", "+this.stream.optimalVideoCodecs+", webrtc = "+this.stream.rtcId+" cause\uff1a"+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),RemoteControlFail:i.extend({message:function(){return this.execTime()+" RemoteControlFail: "+(this.type||"remote control")+" fail, "+(this.stream?this.stream.id:"")+" failed = "+this.failed+" cause\uff1a"+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubSuccess:i.extend({message:function(){return this.execTime()+" SubSuccess: sub success, streamId = "+this.stream.id+", "+this.stream.vcodes+", webrtc = "+this.stream.rtcId}}),SubFail:i.extend({message:function(){return this.execTime()+" SubFail: sub fail, streamId = "+this.stream.id+", "+this.stream.vcodes+", webrtc = "+this.stream.rtcId+" cause\uff1a"+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubFailNotSupportVCodes:i.extend({message:function(){return this.execTime()+" SubFailNotSupportVCodes: sub fail, streamId = "+this.stream.id+" cause\uff1a"+(this.cause?this.cause.message?this.cause.message():this.cause:"unkown")}}),SubFailSafariNotAllowSubBeforePub:i.extend({message:function(){return this.execTime()+" SubFailSafariNotAllowSubBeforePub: sub fail, streamId = "+this.stream.id+" cause\uff1aSafari without access to capture devices, WebKit only exposes Server Reflexive and TURN ICE candidates, which expose IPs that could already be gathered by websites."}}),SwitchVCodes:i.extend({message:function(){return this.execTime()+" SwitchVCodes: pub streamId = "+this.stream.id}}),CurrentCalling:i.extend({message:function(){return this.execTime()+" CurrentCalling: warn! current calling..."}}),OpenDesktopMedia:i.extend({message:function(){return this.execTime()+" OpenDesktopMedia: shared desktop, desktopStreamId = "+desktopStreamId}}),OpenDesktopMediaAccessDenied:i.extend({message:function(){return this.execTime()+" OpenDesktopMediaAccessDenied: shared desktop not allow"}}),ShareDesktopExtensionNotFound:i.extend({message:function(){return this.execTime()+" ShareDesktopExtensionNotFound: shared desktop plugin required"}}),OtherDeviceAnswer:i.extend({message:function(){return this.execTime()+" other device answer, webrtc = "+this.rtcId}}),AudioMixerStreamNotAllowSub:i.extend({message:function(){return this.execTime()+" audio mixer stream not allow sub, webrtc = "+this.rtcId+", streamId = "+this.stream.id}}),AudioMixerStreamNotAllowOnlySubVideo:i.extend({message:function(){return this.execTime()+" audio mixer stream not allow only sub video, webrtc = "+this.rtcId+", streamId = "+this.stream.id}}),AudioMixerStreamRepeatPublish:i.extend({message:function(){return this.execTime()+" audio mixer stream repeat publish"}})}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(80)),i=o(n(152));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){this.rtcconfig=void 0,this.rtcConfigUrl=e,this.get_rtcconfig()}s.prototype={get_rtcconfig:function(){var t={url:"https://rs.easemob.com/easemob/rtcconfig.json",async:!1};this.rtcConfigUrl&&(t.url=this.rtcConfigUrl);var n=this,o=void 0;try{e.ajax((0,i.default)({},t,{success:function(e){console.log("get_rtcconfig success"),e&&(0,r.default)(e).length>0&&(n.rtcconfig=e,o=e)},error:function(e){return console.error("DeployMore get error",e),e}}))}catch(s){return}return o},replace_ws:function(e){if(this.rtcconfig&&this.rtcconfig.ws){var t="wss://"+this.rtcconfig.ws+"/";return e.replace(/wss.*com\//,t)}return e},_get_info_from_candifate:function(e){if(!e)return{};var t={};return e=e.split(" "),t.ip=e[4],t.port=e[5],t},_can_replace:function(e,t,n){return!!(e&&t&&n)&&!!e.src.ip&&e.src.ip==t&&!(e.src.min_port>n||e.src.max_port<n)},_replace_candidate:function(e){var t=this._get_info_from_candifate(e),n=t.ip,r=t.port,i=this;return this.rtcconfig.rtc.candidate_map.map((function(t){if(i._can_replace(t,n,r)){var o=t.dst.ip,s=Number(r)-Number(t.src.min_port),a=Number(t.dst.min_port)+Number(s),c=e.split(" ");c[4]=o,c[5]=a,e=c.join(" ")}})),e},replace_candidates:function(e){if(!this.rtcconfig)return e;var t=this;return e=e.map((function(e){return e&&e.candidate?(e.candidate=t._replace_candidate(e.candidate),e):e}))},replace_trun_url:function(e){if(this.rtcconfig&&this.rtcconfig.turn){var t=e.iceServers;if(!t)return e;if(t instanceof Array==0)return e;var n=this.rtcconfig.turn;return t=t.map((function(e){e.url&&(e.url="turn:"+n)})),e}return e}},t.default=s}).call(this,n(5))},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(115),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";var r=o(n(2)),i=o(n(115));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(87),a=s.tagLogger("Me"),c=n(154),u=n(150),d=n(157),l=c.extend({__init__:function(){if(this._session||this.sessionFactory&&(this._session=this.sessionFactory()),!this._session)throw a.error("Require session"),"Require session";this._cver=0,this._cacheMembers={},this._cacheStreams={},this._streamAutomators={},this._mediaMeters={},this._openedRtcMediaStreams={},this._linkedStreams={},this._maybeNotExistStreams={},this._records={},this._ices={},this.audioMixers={},this.closed=!1,this._nextStreamSeqno=0,this.getMediaMeterIntervalMillis=this.getMediaMeterIntervalMillis||emedia.config.getMediaMeterIntervalMillis},getCurrentMembers:function(){var e=[];return s.forEach(this._cacheMembers,(function(t,n){var r=s.extend(!0,{},n);e.push(r)})),e},newStream:function(e){var t=this;return new d(e,{__init__:function(){if(this.rtcId||this._webrtc&&(this.rtcId=this._webrtc.getRtcId()),this._webrtc||this.rtcId&&(this._webrtc=t._ices[this.rtcId]),this.__create_id=t._nextStreamSeqno++,this.memId&&!this.owner&&(this.owner=s.extend({},t._cacheMembers[this.memId]),!this.owner&&!this.located()))throw a.error("Remote stream, not owner. it = ",this.id),"Remote stream, not owner. it = "+this.id}})},getConfrId:function(){return this.ticket.confrId},isCaller:function(){return this.isP2P()&&this.ticket.caller==this.ticket.memName},isCallee:function(){return this.isP2P()&&this.ticket.callee==this.ticket.memName},isP2P:function(){return this.ticket&&("P2P"==this.ticket.type||"p2p"==this.ticket.type)},isConfr:function(){return this.ticket&&("CONFR"==this.ticket.type||"confr"==this.ticket.type)},onEvent:function(e){},join:function(e,t){var n=this;emedia.requireTrustBeforeJoin()?n.someBrowsersRequireGetUserMedia((function(){n._join(e,t)}),t):n._join(e,t)},_join:function(e,t){a.debug("begin join ...");var n,r=this;if(console.log("Attendee self",r),r._memberId)return a.warn("Had joined. igrone it"),void(e&&e(r.memId));function i(e){try{if(e instanceof u.WSClose&&e.retry)return;e instanceof u.EnterFail||(e=new u.EnterFail({attendee:r,cause:e})),r.onEvent(e),t&&t(e)}finally{}}function o(t){if(0==t.result){r.reflushSupportVCodes(t.vcodes),r.setMemberId(t.memId),r.role=t.role,r.onEvent(new u.EnterSuccess({ip:r.ip})),e&&e(t.memId);try{r.__rtc_cfg=t.rtcCfg,"string"===typeof t.rtcCfg&&(r.__rtc_cfg=JSON.parse(t.rtcCfg))}finally{r.onMembers(t.cver,t.mems),r.onStreams(t.cver,t.streams)}}else try{i(new u.RspFail({request:n,response:t}))}finally{-9527!==t.result&&r.onEvent(new u.ServerRefuseEnter({failed:t.result,msg:t.msg}))}}r.connect((function(){n=r.newMessage().setOp(200).setTicket(r.ticket).setNickName(r.nickName||r.ticket.memName).setResource(r.resource).setExt(r.ext),r.postMessage(n,o)}),i),a.debug("join",r.ticket.url)},withpublish:function(e){var t,n=this;if(!e||!e.localStream)throw a.error("pubS null or stream not open"),"pubS null or stream not open";var r,i=e&&e.localStream;return{join:function(o,s){if(1===arguments.length&&(s=o,o=void 0),n._memberId)return a.warn("Had joined. igrone it"),void(o&&o(n.memId));function c(e){try{if(e instanceof u.WSClose&&e.retry)return;e instanceof u.EnterFail||(e=new u.EnterFail({attendee:n,cause:e})),n.onEvent(e),s&&s(e)}finally{emedia.stopTracks(i),r&&n.closeWebrtc(r.getRtcId())}}var d=n.getOptimalVideoCodecs();function l(i){if(0==i.result){n.reflushSupportVCodes(i.vcodes),n.setMemberId(i.memId),n.role=i.role,n.onEvent(new u.EnterSuccess({ip:n.ip}));var s=n.newStream(e);s.updateAttributes({_localMediaStream:e.localStream,rtcId:r.getRtcId(),_webrtc:r,id:i.streamId,csrc:i.csrc,owner:{id:i.memId,nickName:n.nickName,name:n.sysUserId,ext:n.extObj},optimalVideoCodecs:d}),o&&o(i.memId,s),r.useIp=n.ip,n.onEvent(new u.PushSuccess({stream:s,hidden:!0})),i.sdp&&n.ansC(r.getRtcId(),i.sdp),i.cands&&n.tcklC(r.getRtcId(),i.cands);try{n.__rtc_cfg=i.rtcCfg,"string"===typeof i.rtcCfg&&(n.__rtc_cfg=JSON.parse(i.rtcCfg)),n.__rtc_cfg&&n.__rtc_cfg.iceServers&&n.__rtc_cfg.iceServers.length>0&&(a.warn("Server rsp one rtc cfg. publish will republish"),n._service&&setTimeout((function(){n._service._republish(s)}),200))}finally{n.onMembers(i.cver,i.mems),n.onStreams(i.cver,i.streams)}}else try{c(new u.RspFail({request:t,response:i}))}finally{-9527!==i.result&&n.onEvent(new u.ServerRefuseEnter({failed:i.result,msg:i.msg}))}}function f(){a.debug("enter and pubs");var i,o,s=e.localStream;2===e.type&&(i={offerToReceiveAudio:!0,offerToReceiveVideo:!1},o={subSVideo:!1,subSAudio:!0}),r=n.createWebrtc({_rtcId:e.rtcId,optimalVideoCodecs:d,offerOptions:i,subArgs:o,vbitrate:e.vbitrate||e.constaints&&e.constaints.video&&e.constaints.video.bitrate,abitrate:e.abitrate||e.constaints&&e.constaints.audio&&e.constaints.audio.bitrate},e.iceRebuildCount),n.setLocalStream(s,r.getRtcId()),n.doOffer(r.getRtcId(),(function(i){t=n.newMessage().setOp(200).setTicket(n.ticket).setNickName(n.nickName||n.ticket.memName).setResource(n.resource).setSdp(i).setRtcId(r.getRtcId()).setPubS(e).setExt(n.ext),n.postMessage(t,l)}))}n.connect(f,c),a.debug("join",n.ticket.url)}}},push:function(e,t,n,r){a.debug("begin push ...");var i,o=this;if(2===arguments.length&&(n=t,t=void 0),!e||!e.localStream)throw a.error("pubS or stream open"),"pubS or stream open";var s,c=e.localStream;function d(t){try{var i=o.newStream(e);i.updateAttributes({_localMediaStream:e.localStream,_webrtc:s,rtcId:s&&s.getRtcId(),owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj}}),t=new u.PushFail({stream:i,cause:t,hidden:r&&!0===t.hidden}),o.onEvent(t),t.hidden||n&&n(t)}finally{c&&!0!==t.hidden&&emedia.stopTracks(c),s&&o.closeWebrtc(s.getRtcId(),!0===t.hidden)}}if(e.rtcId||2!==e.type||emedia.config.allowRepeatAudioMixerPublish||!o._service.hasAudioMixers()){var l=e.optimalVideoCodecs||o.getOptimalVideoCodecs();p(e),a.debug("push",o.ticket.url)}else d(new u.AudioMixerStreamRepeatPublish);function f(n,r){if(0==r.result){var s=o.newStream(e);s.updateAttributes({_localMediaStream:e.localStream,_webrtc:n,rtcId:n.getRtcId(),id:r.streamId,csrc:r.csrc,owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj},optimalVideoCodecs:l}),s.id&&2===s.type&&(o.audioMixers[s.id]=s);try{o.onEvent(new u.PushSuccess({stream:s,hidden:!0}))}finally{r.sdp&&o.ansC(n.getRtcId(),r.sdp),r.cands&&o.tcklC(n.getRtcId(),r.cands),t&&t(s)}}else d(new u.RspFail({request:i,response:r,hidden:!0===r.retrying}))}function p(e){a.debug("pubs");var t,n,r=e.localStream;if(2===e.type&&(t={offerToReceiveAudio:!0,offerToReceiveVideo:!1},n={subSVideo:!1,subSAudio:!0}),s=o.createWebrtc({_rtcId:e.rtcId,optimalVideoCodecs:l,offerOptions:t,subArgs:n,vbitrate:e.vbitrate||e.constaints&&e.constaints.video&&e.constaints.video.bitrate,abitrate:e.abitrate||e.constaints&&e.constaints.audio&&e.constaints.audio.bitrate},e.iceRebuildCount),o.setLocalStream(r,s.getRtcId()),e.constaints&&e.constaints.video){var c=e.constaints.video,u=c.width,d=c.height;if(u&&d){var p={w:u.exact||u.min,h:d.exact||d.min};e.resolution=p}}o.doOffer(s.getRtcId(),(function(t){i=o.newMessage().setOp(102).setRtcId(s.getRtcId()).setSdp(t).setPubS(e),o.postMessage(i,(function(e){f(s,e)}))}))}},isSafari:function(){return emedia.isSafari},someBrowsersRequireGetUserMedia:function(e,t){var n=this;if(emedia.youInSomeBrowsers()&&!emedia._yetGetUserMedia){if(!0===n.__tryingOpenMedia)n.__tryingOpenMediaWaitSuceess=n.__tryingOpenMediaWaitSuceess||[],n.__tryingOpenMediaWaitFail=n.__tryingOpenMediaWaitFail||[],"function"===typeof e&&n.__tryingOpenMediaWaitSuceess.push(e),"function"===typeof t&&n.__tryingOpenMediaWaitFail.push(t);else{var r=function(t,r){emedia._yetGetUserMedia=!0,emedia.stopTracks(r),setTimeout((function(){n.__tryingOpenMedia=!1,e&&e.apply(n),n.__tryingOpenMediaWaitSuceess&&s.forEach(n.__tryingOpenMediaWaitSuceess,(function(e,t){t.apply(n)})),n.__tryingOpenMediaWaitSuceess=[],n.__tryingOpenMediaWaitFail=[]}),300)},i=function(e){n.__tryingOpenMedia=!1,a.error("Some browsers must getUserMedia, gather cands. now try get audio. fail. subfail"),t&&t.call(n,e),n.__tryingOpenMediaWaitFail&&s.forEach(n.__tryingOpenMediaWaitFail,(function(t,r){r.call(n,e)})),n.__tryingOpenMediaWaitSuceess=[],n.__tryingOpenMediaWaitFail=[]};n.__tryingOpenMedia=!0,n._service.__getUserMedia({audio:!0},r,(function(e){n._service.__getUserMedia({video:!0},r,i)}))}return!0}return!1},createWebrtcAndSubscribeStream:function(e,t,n,r){var i=this;t||(t={});var o=i._cacheStreams[e],c=i._cacheMembers[o.memId],d=o;function l(n){a.warn("sub stream error",e,n),b&&d._webrtc&&d._webrtc.setSubArgs(b),b&&d.updateAttributes({subArgs:b}),n=new u.SubFail({stream:d,hidden:!0===n.hidden,cause:n}),t&&t.onEvent&&t.onEvent(n),i.onEvent&&i.onEvent(n)}function f(){d.updateAttributes(d.subArgs)}r=r||d.subArgs||{subSVideo:!0,subSAudio:2!==o.type};var p=o.vcodes||[],h=c&&c.vcodes||[],m=i.supportVCodes,v=i._getOptimalVideoCodecsSubset(p,h,m);r=r||d.subArgs;var b=d.subArgs,g=!(d.vcodes&&d.vcodes.length>0);emedia.isSafari&&(g=g||!!d.voff);var _={offerToReceiveAudio:!0,offerToReceiveVideo:r.subSVideo&&!g};function y(){var o=i.createWebrtc({iceServerConfig:n,optimalVideoCodecs:v,offerOptions:_,onGotMediaStream:function(e){t.onGotRemote&&t.onGotRemote(d)}},d.iceRebuildCount),u=o.getRtcId();a.warn(u," sub stream ",e,v),d.updateAttributes({_webrtc:o,rtcId:u,owner:s.extend({},c)}),r&&d._webrtc&&d._webrtc.setSubArgs(r),r&&d.updateAttributes({subArgs:r})}_.offerToReceiveAudio||_.offerToReceiveVideo||a.warn("offerToReceiveAudio == false and offerToReceiveVideo == false"),i.someBrowsersRequireGetUserMedia((function(){y(),i.offerCall(d.rtcId,null,e,l,f)}),(function(t){a.error("Some browsers must getUserMedia, gather cands. now try get audio. fail. subfail",e),l(t)}))||(y(),i.offerCall(d.rtcId,null,e,l,f))},_getOptimalVideoCodecsSubset:function(e,t,n){var r=this,i=[];if(e&&e.length>0&&n[e[0]]&&i.push(e[0]),0==i.length)for(var o=0;o<r._orderVCodes.length;o++)s.forEach(t,(function(e,t){t==r._orderVCodes[o]&&i.push(t)}));return i},subscribeStream:function(e,t,n,r,i){var o=this,a=o._ices[e],c=o._cacheStreams[t],d=o._cacheMembers[c.memId],l=c;l.updateAttributes({_webrtc:a,rtcId:e,owner:s.extend({},d)});var f=l.subArgs;if(r=r||{subSVideo:!0,subSAudio:!0},l.updateAttributes({subArgs:l.subArgs||{subSVideo:!0,subSAudio:!0}}),l._webrtc&&l._webrtc.setSubArgs(l._webrtc.subArgs||{subSVideo:!0,subSAudio:!0}),!l.subArgs.subSVideo&&r.subSVideo&&!l.voff){var p=c.vcodes,h=d.vcodes,m=o.supportVCodes;o._getOptimalVideoCodecsSubset(p,h,m)}r&&l._webrtc&&l._webrtc.setSubArgs(r),r&&l.updateAttributes({subArgs:r});var v=o.newMessage().setOp(205).setRtcId(e).setSubSId(t);r&&s.extend(v,r),o.postMessage(v,(function(e){if(0!=e.result){f&&l._webrtc&&l._webrtc.setSubArgs(f),f&&l.updateAttributes({subArgs:f});var t=new u.SubFail({stream:l,cause:new u.RspFail({request:v,response:e})});return n&&n(t),void o.onEvent(t)}l.updateAttributes(l.subArgs),t=new u.SubSuccess({stream:l,hidden:!0}),o._updateRemoteStream(l,l._webrtc.getRemoteStream()),o.onEvent(t),"function"===typeof i&&i()}))},unsubscribeStream:function(e){var t=this._cacheStreams[e],n=t._webrtc&&t._webrtc.getRtcId();if(n){try{var r=this.newMessage().setOp(206).setRtcId(n).setSubSId(e);this.postMessage(r)}finally{this.closeWebrtc(n)}return n}},onEnter:function(e,t){var n=this;if(e&&(n._cver=e),t&&!n._cacheMembers[t.id]){n._cacheMembers[t.id]=t;var r={};t.res&&t.res.vcodes&&t.res.vcodes.length>0&&s.forEach(t.res.vcodes,(function(e,t){r[t]||(r[t]=!0,n.supportVCodes[t]&&n.supportVCodes[t]++)})),n.onAddMember(s.extend({},t))}},_onFinally:function(){this._cacheMembers={},this._cacheStreams={},this._linkedStreams={},this._ices={},this._maybeNotExistStreams={};var e=[];if(s.forEach(this._openedRtcMediaStreams,(function(t,n){!1!==n.active&&e.push(n)})),e.length>0)for(var t=0;t<e.length;t++)try{var n=e[t];a.info("exit, close stream = ",n.id),emedia.stopTracks(n)}catch(r){a.error(r)}a.warn("finally. all clean.")},_onRoleUpdate:function(e,t){a.info("Role ",e," <-",this.role),a.info(t),this.role=e,this.roleToken=t,this.onRoleUpdate&&this.onRoleUpdate(e,t)},onExit:function(e,t,n){var r=this;if(e&&(r._cver=e),t!=r.getMemberId()){var i=r._cacheMembers[t];i&&(i.res&&i.res.vcodes&&i.res.vcodes.length>0&&s.forEach(i.res.vcodes,(function(e,t){r.supportVCodes[t]--})),r._onRemoveMember(i,n),r.onEvent(new u.Hangup({reason:n,parnter:i})))}else{a.warn("Me exit. ",n,t);try{r.closed||r.close(n)}catch(o){r.onEvent(new u.Hangup({reason:n,self:{id:r._memberId}})),r.onMeExit&&r.onMeExit(n),a.warn(o)}}},onPub:function(e,t,n){if(!this._cacheMembers[t])throw a.error("No found member. when pub"),"No found member. when pub";var r=this.newStream(n),i=this._cacheStreams[n.id];if(e&&(this._cver=e),i&&r.sver!==i.sver)return a.info("Onpub. the steam ",i.id," republish. sver ",i.sver,r.sver),!r||r.aoff===i.aoff&&r.voff==i.voff||this.onStreamControl(void 0,n.id,r.voff,r.aoff),s.extend(i,r),void this._onRepublishStream(i);var o=r;return o.updateAttributes({owner:this._cacheMembers[t]}),this._cacheStreams[n.id]=o,this._onAddStream(this.newStream(o)),this.autoSub&&this.createWebrtcAndSubscribeStream(n.id,{onGotRemote:function(e){}}),o},onUnpub:function(e,t,n){var r=this._cacheStreams[n];this._onRemovePubstream(this._cacheMembers[t],r),e&&(this._cver=e)},onClose:function(e,t,n){try{this.close(n||0)}finally{this.onConfrClose&&this.onConfrClose(t,n)}},__getWebrtcFor:function(e){var t=this._cacheStreams[e]&&this._cacheStreams[e]._webrtc;return t&&t.getRtcId()},_getWebrtc:function(e){return this._cacheStreams[e]&&this._cacheStreams[e]._webrtc},_updateRemoteStream:function(e,t){e.located()&&2===e.type?emedia.enableAudioTracks(t,!0):emedia.enableAudioTracks(t,!e.aoff&&!(e.subArgs&&!1===e.subArgs.subSAudio)),emedia.enableVideoTracks(t,!e.voff&&!(e.subArgs&&!1===e.subArgs.subSVideo))},onStreamControl:function(e,t,n,r,o){var s=this,c=s._cacheStreams[t];c.updateAttributes({voff:n,aoff:r});var u=c._webrtc;u&&u._remoteStream&&s._updateRemoteStream(c,u._remoteStream);var d=s.newStream(c);s.onUpdateStream&&s.onUpdateStream(d,new d.Update({voff:n,aoff:r})),e&&(s._cver=e),o&&c.updateAttributes({sver:o}),emedia.isSafari&&!n&&u&&!u.closed&&u.offerOptions&&!u.offerOptions.offerToReceiveVideo&&(a.warn("stream video turn on. but sub not video, will close it, repsub stream",u.getRtcId(),u.__id,t),s.closeWebrtc(u.getRtcId(),!0,!1),s.createWebrtcAndSubscribeStream(t,{onGotRemote:function(e){var t=(0,i.default)(s._service.__safari_subs,{});t&&t instanceof Array&&t.map((function(n,r){n.streamId==e.id&&t.splice(r,1)})),s._service.__safari_subs=t},onEvent:function(e){var t=(0,i.default)(s._service.__safari_subs,{});t&&t instanceof Array&&t.map((function(e,n){e.streamId==c.id&&t.splice(n,1)})),s._service.__safari_subs=t}},void 0,c.subArgs))},aoff:function(e,t,n){var r=this.__getWebrtcFor(e.id);if(!r)throw a.error("pubS not publish",e.id),"pubS not publish"+e.id;this._linkedStreams[e.id].updateAttributes({aoff:t}),e.updateAttributes({aoff:t});var i=this.newMessage().setOp(400).setRtcId(r).setVoff(e.voff).setAoff(t);this.postMessage(i,n),this.onUpdateStream&&this.onUpdateStream(e,new e.Update({aoff:t}))},voff:function(e,t,n){var r=this.__getWebrtcFor(e.id);if(!r)throw a.error("pubS not publish",e.id),"pubS not publish"+e.id;this._linkedStreams[e.id].updateAttributes({voff:t}),e.updateAttributes({voff:t});var i=this.newMessage().setOp(400).setRtcId(r).setVoff(t).setAoff(e.aoff);this.postMessage(i,n),this.onUpdateStream&&this.onUpdateStream(e,new e.Update({voff:t}))},startRecord:function(e,t){var n=this,r=e.rtcId,i=n.newMessage().setOp(500).setRtcId(r).setFlag(1);n.postMessage(i,(function(i){a.warn("record ",r,i.result,i.msg),t&&t(0===i.result),0===i.result&&(n._records[e.id]=s.extend(!1,{},e))}))},stopRecord:function(e,t){var n=e.rtcId,r=this.newMessage().setOp(500).setRtcId(n).setFlag(0);this.postMessage(r,(function(e){a.warn("stop record ",n,e.result,e.msg),t&&t(0===e.result)})),this._records[e.id]&&s.removeAttribute(this._records,e.id)},onMembers:function(e,t){var n=this,r=[];s.forEach(n._cacheMembers,(function(e,n){t[e]||r.push(n)})),s.forEach(r,(function(e,t){n.onExit(void 0,t.id)}));var i=[];s.forEach(t,(function(e,t){(t.name&&t.name!=n.memName||!t.name&&e!=n.getMemberId())&&(n._cacheMembers[e]||i.push(t),n._cacheMembers[e]&&s.extend(n._cacheMembers[e],t))})),s.forEach(i,(function(e,t){n.onEnter(void 0,t)})),e&&(n._cver=e)},onStreams:function(e,t){var n=this,r=[];s.forEach(n._cacheStreams,(function(e,n){n.located()||t[e]||r.push(n)})),s.forEach(r,(function(e,t){n.onUnpub(void 0,t.memId,t.id)}));var i=[];s.forEach(t,(function(e,t){(t.memName&&t.memName!=n.memName||!t.memName&&t.memId!=n.getMemberId())&&(n._cacheStreams[e]||i.push(t),n._cacheStreams[e]&&s.extend(n._cacheStreams[e],t))})),s.forEach(i,(function(e,t){n.onPub(void 0,t.memId,t)})),s.forEach(n._cacheStreams,(function(e,r){var i;r.located()||(i=t[e]),!i||i.aoff===r.aoff&&i.voff==r.voff||n.onStreamControl(void 0,e,i.voff,i.aoff),i&&i.sver!==r.sver&&(s.extend(r,i),n._onRepublishStream(r))})),e&&(n._cver=e)},_onRemoveMember:function(e,t){var n=this;a.info("remove",e,t);var r=[];s.forEach(n._cacheStreams,(function(t,n){(n.memId||n.owner&&n.owner.id)===e.id&&r.push(n)})),s.forEach(r,(function(e,r){n._onRemovePubstream(r.owner,r,t)})),s.removeAttribute(n._cacheMembers,e.id),n.onRemoveMember&&n.onRemoveMember(e,t)},_onAddStream:function(e){a.info("add stream ",e.id),a.debug("add stream ",e),this.onAddStream(e)},_onRemovePubstream:function(e,t,n){var r=this;if(t&&0!=t.id)try{var i=s.removeAttribute(r._mediaMeters,t.id);i&&i._finally()}finally{!function(e){2===e.type&&(s.removeAttribute(r.audioMixers,e.id),e.remotePlayAudioObject&&document.body.removeChild(e.remotePlayAudioObject)),n||(n="Unpub"),e&&!e.closeReason&&e.updateAttributes({closeReason:n}),r.unsubscribeStream(e.id),s.removeAttribute(r._cacheStreams,e.id),r._streamAutomators&&s.removeAttribute(r._streamAutomators,e.id),r._monitSoundChanagedStreams&&s.removeAttribute(r._monitSoundChanagedStreams,e.id),r.onRemoveStream&&(e=r.newStream(e),r.onRemoveStream(e))}(t)}},_onRepublishStream:function(e){!this._ices[e.rtcId]&&!emedia.subscribed(e)||this._maybeNotExistStreams[e.id]?this.onUpdateStream(e):(this.unsubscribeStream(e.id),this.createWebrtcAndSubscribeStream(e.id,{onGotRemote:function(e){}}))},_onRecvRemoteMessage:function(e,t,n){a.debug("Recv remote message",e,t);var r,i=this._cacheMembers[e];try{r=JSON.parse(t)}catch(o){}this.onRecvRemoteMessage&&this.onRecvRemoteMessage(i||e,r||t,n)},_onSoundChanage:function(e,t,n){emedia.config._printSoundData&&a.info("Stream id "+t.id+", meter "+(n&&n.instant.toFixed(2)+" "+n.slow.toFixed(2)+" "+n.clip.toFixed(2)+" "+(n.trackAudioLevel||"--")+" "+(n.trackTotalAudioEnergy||"--"))),n||(n={instant:0,slow:0,clip:0}),emedia.config.logVolumeWhenInstantGE&&emedia.config.logVolumeWhenInstantGE>0&&n.instant>=emedia.config.logVolumeWhenInstantGE&&n.instant<3*emedia.config.logVolumeWhenInstantGE&&a.info("Stream id "+t.id+", webrtc = "+(t._webrtc?t._webrtc.getRtcId():"null")+", media streamId = "+(t.getMediaStream()?t.getMediaStream().id:"null")+", instant >= "+emedia.config.logVolumeWhenInstantGE+", meter instant="+n.instant+", slow="+n.slow+", clip="+n.clip),0===n.instant&&(n.instant=n.trackAudioLevel||n.trackTotalAudioEnergy||0),this.onSoundChanage(e,t,n),this._service._judgeTalking(n)&&this.onTalking(e,t,n)},onAddMember:function(e){},onRemoveMember:function(e,t){},onAddStream:function(e){},onRemoveStream:function(e){},onUpdateStream:function(e,t){},onRecvRemoteMessage:function(e,t){},onSoundChanage:function(e,t,n){},onTalking:function(e,t,n){},_sendRequestMessage:function(e){if(e){var t=this,n=function(){var e="";for(var n in t._cacheMembers){var r=t._cacheMembers[n];if(r.role==emedia.mgr.Role.ADMIN){e=r.id;break}}return e}();if(n){var o=this._memberId,s=this.memName,a=this.nickName,c=this.newMessage(),u={op:1002,memId:n,arg:(0,r.default)({op2:e,memId:o,memName:s,nickName:a||s}),tsxTime:(new Date).getTime(),_reqOps:["1002"+e]};(0,i.default)(c,u),this.postMessage(c)}else console.warn("this confrence have not admin")}},requestToTalker:function(){this._sendRequestMessage(21)},_send_action_request_message:function(e,t,n){if(t&&e&&void 0!==n){var o=t.tsxId,s=t.arg.memId,a=this.newMessage(),c={op:1001,arg:(0,r.default)({op2:e,memId:s}),memId:s,result:n,tsxId:o,_reqOps:["1002"+e]};(0,i.default)(a,c),this.postMessage(a)}},refuseRequestToTalker:function(e){this._send_action_request_message(21,e,1)},refuseRequestToAdmin:function(e){this._send_action_request_message(22,e,1)},requestToAdmin:function(){this._sendRequestMessage(22)},_sendControlAudioMessage:function(e,t){if(e&&t){var n=this.newMessage(),o={op:1002,memId:e,arg:(0,r.default)({op2:t,memId:e}),tsxTime:(new Date).getTime(),_reqOps:[100223,100224]};(0,i.default)(n,o),this.postMessage(n)}},muteBymemberId:function(e){this._sendControlAudioMessage(e,23)},unmuteBymemberId:function(e){this._sendControlAudioMessage(e,24)}});e.exports=l},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("Member"),o=n(150),s=n(155);e.exports=r.prototypeExtend({__init__:function(){if(!this._session)throw i.error("Require session"),"Require session";this.closed=!1,this._ices={},this.supportVCodes={},this.audioMixers={}},reflushSupportVCodes:function(e){var t=this;t.supportVCodes={},t._orderVCodes=e,e&&0!=e.length?r.forEach(e,(function(e,n){t.supportVCodes[n]=1})):i.warn("Not config support vcodes")},getOptimalVideoCodecs:function(){if(!this._orderVCodes||0==this._orderVCodes.length)return/Chrome/.test(navigator.userAgent)?"VP8":/Safari/.test(navigator.userAgent)&&/Version\/11/.test(navigator.userAgent)?"H264":"VP8";var e=0;r.forEach(this._cacheMembers,(function(){e++}));for(var t,n=0,i=0;i<this._orderVCodes.length;i++){var o=this._orderVCodes[i];if(0==n&&(n=this.supportVCodes[o]),this.supportVCodes[o]>e)return o;this.supportVCodes[o]>n&&(n=this.supportVCodes[o],t=o)}return t||this._orderVCodes&&this._orderVCodes.length>0&&this._orderVCodes[0]},setMemberId:function(e){this._memberId=e},getMemberId:function(){return this._memberId||this.id},createWebrtc:function(e,t){var n=this;e||(e={}),r.extend(e,{_rebuildCount:t||0}),!0===n._service.useRTCCfg&&n.__rtc_cfg?e.iceServerConfig=r.extend(!0,{},n.__rtc_cfg):r.isPlainObject(n._service.useRTCCfg)&&(e.iceServerConfig=r.extend(!0,{},n._service.useRTCCfg));var a=new s({confrAttendee:n,useIp:n.ip,onIceStateChange:function(e){var t=e;i.debug("evt.target ice state",t);try{if("failed"==t)return n.onEvent(new o.ICEConnectFail({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEConnectFail({webrtc:a})));if("connected"==t)return n.onEvent(new o.ICEConnected({webrtc:a})),void(a.onEvent=null);if("closed"==t)return n.onEvent(new o.ICEClosed({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEClosed({webrtc:a})));if("disconnected"==t)return n.onEvent(new o.ICEDisconnected({webrtc:a})),void(a.onEvent&&a.onEvent(new o.ICEDisconnected({webrtc:a})))}finally{n._onIceStateChange&&n._onIceStateChange(a,e)}},onIceCandidate:function(e){n._onIceCandidate&&e&&n._onIceCandidate(a,e)},onGotRemoteStream:function(e){i.info("got stream.",a._rtcId,a.__id,e),a.onGotMediaStream&&a.onGotMediaStream(e),n.onEvent(new o.ICERemoteMediaStream({webrtc:a}))},onAddIceCandidateError:function(e){n.onEvent(new o.AddIceCandError({webrtc:a,event:e}))},onSetSessionDescriptionError:function(e){i.warn("onSetSessionDescriptionError : Failed to set session description: "+e.toString()),n.onEvent&&n.onEvent(new o.ICEConnectFail({webrtc:a,event:e}))},onCreateSessionDescriptionError:function(e){i.warn("Failed to create session description: "+e.toString()),n.onEvent&&n.onEvent(new o.ICEConnectFail({webrtc:a,event:e}))}},e);return n._ices||(n._ices={}),n._ices[a.getRtcId()]&&n._howDoWebrtcWhenCrtExsitsWebrtc(a),n._ices[a.getRtcId()]=a,n._ices[a.__id]=a,n._iceCreateRtcPeerConnection(a.getRtcId()),i.debug("create rtc ",a),a},_howDoWebrtcWhenCrtExsitsWebrtc:function(e){this.closeWebrtc(e.getRtcId(),!0,!1)},connect:function(e,t){this._session.connect(e,t)},connected:function(){return this._session.connected()},newMessage:function(e){var t=this,n=t._session.newMessage(e);return n.post=function(e,n){t.postMessage(this,e,n)},n},message:function(e){var t=this,n=t._session.newMessage(e);return n.post=function(e,n){t.postMessage(this,e,n)},n},postMessage:function(e,t,n){try{e.sessId||(e.sessId=this._session._sessionId),this._session.postMessage(e,t,n)}catch(r){t&&t({op:1001,tsxId:e.tsxId,result:-9527,msg:"post message. exception"}),i.warn(r)}},onEvent:function(e){},_onIceStateChange:function(e,t){i.info(e.getRtcId(),t),this.onEvent(new o.ICEChanage({webrtc:e,state:t}))},_onIceCandidate:function(e,t){var n,i=this;r.isArray(t)?n=t:(n=[]).push(t);var s=i.newMessage().setOp(105).setRtcId(e.getRtcId()).setCands(n);i.postMessage(s,(function(e){0==e.result||i.onEvent(new o.RspFail({request:s,response:e}))}))},_initC:function(e,t,n,s,a,c){var u=this;if(t&&t.rtcId!==e.getRtcId())throw i.error("stream and webrtc rtcId not equal."),"stream and webrtc rtcId not equal.";var d=u.newMessage().setOp(102).setRtcId(e.getRtcId()).setSdp(n).setSubSId(s);e.subArgs&&r.extend(d,e.subArgs),t&&t.located()&&d.setPubS(t),u.postMessage(d,(function(n){if(0!=n.result)return u.onEvent(new o.RspFail({request:d,response:n})),void(a&&a(new o.RspFail({request:d,response:n,hidden:!0===n.retrying})));t&&!t.id&&n.streamId&&t.updateAttributes({id:n.streamId});try{c&&c()}catch(r){i.warn(r)}n.sdp&&u.ansC(e.getRtcId(),n.sdp,n.cands),n.mems&&u.onMembers&&u.onMembers(n.cver,n.mems),n.streams&&u.onStreams&&u.onStreams(n.cver,n.streams)}))},_acptC:function(e,t,n){var r=this,i=r.newMessage().setOp(104).setRtcId(e.getRtcId()).setSdp(t);r.postMessage(i,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:i,response:e})),void(n&&n(new o.RspFail({request:i,response:e})))}))},_ansCAndPubstream:function(e,t,n,s,a){var c=this,u=c.newMessage().setOp(106).setRtcId(e.getRtcId()).setSdp(n);e.subArgs&&r.extend(u,e.subArgs),t&&t.located()&&(t=r.extend({},t),r.removeAttribute(t,"mutedMuted"),r.removeAttribute(t,"_located"),u.setPubS(t)),c.postMessage(u,(function(e){if(0!=e.result)return c.onEvent(new o.RspFail({request:u,response:e})),void(s&&s(new o.RspFail({request:u,response:e,hidden:!0===e.retrying})));t&&!t.id&&e.streamId&&t.updateAttributes({id:e.streamId});try{a&&a()}catch(n){i.warn(n)}}))},_ansC:function(e,t,n){var r=this,i=r.newMessage().setOp(106).setRtcId(e.getRtcId()).setSdp(t);r.postMessage(i,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:i,response:e})),void(n&&n(new o.RspFail({request:i,response:e})))}))},_termC:function(e,t,n){var r=this,i="string"===typeof e?e:e.getRtcId(),s=r.newMessage().setOp(107).setRtcId(i).setEndReason(t);r.postMessage(s,(function(e){if(0!=e.result)return r.onEvent(new o.RspFail({request:s,response:e})),void(n&&n(new o.RspFail({request:s,response:e})))}))},_iceCreateRtcPeerConnection:function(e){this._ices[e].createRtcPeerConnection(),i.debug("create rtc peer connection",e)},doOffer:function(e,t,n){this._ices[e].createOffer((function(e){t(e)}))},offerCall:function(e,t,n,r,i){var o=this,s=o._ices[e];s.createOffer((function(e){o._initC&&o._initC(s,t,e,n,r,i)}))},accept:function(e,t){var n=this,r=n._ices[e];r.createPRAnswer((function(e){n._acptC&&n._acptC(r,e,t)}))},answerCall:function(e,t,n,r){var i=this,o=i._ices[e];o.createAnswer((function(e){i._ansCAndPubstream&&i._ansCAndPubstream(o,t,e,n,r)}))},answer:function(e,t){var n=this,r=n._ices[e];r.createAnswer((function(e){n._ansC&&n._ansC(r,e,t)}))},onTcklC:function(e,t){this._addIceCandidate(t,e)},onAcptC:function(e,t,n){this._iceSetRemoteSDP(t,e),n&&this._addIceCandidate(n,e)},onAnsC:function(e,t,n){this._iceSetRemoteSDP(t,e),n&&this._addIceCandidate(n,e)},_addIceCandidate:function(e,t){if(e&&0!=e.length){var n=this._ices[t];n&&n.addIceCandidate(e)}else i.warn("drop cands",e)},closeWebrtc:function(e,t,n){var o=this,s=o._ices[e];if(r.forEach(o._cacheStreams,(function(t,n){if(n.rtcId===e&&!n.located())try{var s=r.removeAttribute(o._mediaMeters,t);s&&s._finally()}catch(a){i.warn(a)}n.rtcId===e&&2===n.type&&r.removeAttribute(o.audioMixers,n.id)})),!s||s.closed)return i.warn("Webrtc not exsits or closed",s&&s.closed),n&&s&&r.forEach(o._cacheStreams,(function(t,n){n.rtcId===e&&(r.removeAttribute(o._linkedStreams,t),i.warn("Webrtc close, remvoe from _linkedStreams",t))})),void(n||o._termC(e,0));o._records&&r.forEach(o._records,(function(t,n){n.rtcId===e&&function(e){try{o.stopRecord(e)}catch(t){i.warn(t)}finally{r.removeAttribute(o._records,e.id)}}(n)}));try{n||s&&o._termC(s,t&&s._localStream?-10:0)}finally{s&&s.close(t),s&&o.onWebrtcTermC&&o.onWebrtcTermC(s),t||s&&r.forEach(o._cacheStreams,(function(t,s){s.rtcId===e&&(s.located()&&(emedia.stopTracks(s._localMediaStream),s&&!s.closeReason&&s.updateAttributes({closeReason:"WebrtcClose"}),o._cacheStreams[t]&&o._linkedStreams[t]&&o.onRemoveStream(s),r.removeAttribute(o._cacheStreams,t),o._streamAutomators&&r.removeAttribute(o._streamAutomators,t),o._monitSoundChanagedStreams&&r.removeAttribute(o._monitSoundChanagedStreams,t),i.info("Webrtc close. Remove stream",t,". from cache")),n&&(r.removeAttribute(o._linkedStreams,t),i.info("Webrtc close. Remove stream",t,". from _linkedStreams")))}))}return s},__close:function(e){if(i.warn("closing, reason = ",e),!this.closed){if(this.closed=!0,this.__getCopyInterval&&(clearInterval(this.__getCopyInterval),i.warn("Stop interval get copy")),this._ices)for(var t in this._ices)this.closeWebrtc(t,!1);var n=this.newMessage().setOp(201).setReason(e||0);this.postMessage(n)}},exit:function(e){var t=this;e?(e&&t._closeMyConfr(11),setTimeout((function(){t.close(0)}),100)):t.close(0)},_closeMyConfr:function(e){var t=this.newMessage().setOp(204).setReason(e||0);this.postMessage(t,(function(e){i.warn("Close confr ",e.result,e.msg)}))},close:function(e,t){var n=this;if(!n.closed)try{r.forEach(n._cacheStreams||{},(function(e,t){t.located()&&t._localMediaStream&&emedia.stopTracks(t._localMediaStream)})),n.__close(e),r.forEach(n._cacheStreams,(function(e,t){n.onRemoveStream(t)})),r.forEach(n._cacheMembers,(function(e,t){}))}finally{try{setTimeout((function(){n._session&&n._session.close(e)}),500),n.onEvent(new o.Hangup({reason:e,failed:t,self:{id:n._memberId}})),n.onMeExit&&n.onMeExit(e,t)}catch(s){i.error(s)}finally{n._onFinally&&n._onFinally()}}},webrtcState:function(e){return this._ices[e].iceConnectionState()},_iceSetRemoteSDP:function(e,t){var n=this._ices[t];n&&n.setRemoteDescription(e)},setLocalStream:function(e,t){this._ices[t].setLocalStream(e)},onWebrtcTermC:function(e){}})},function(e,t,n){"use strict";var r=o(n(2)),i=o(n(80));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(87),a=s.tagLogger("Webrtc"),c=n(156),u=n(151).default,d={headerSection:null,audioSection:null,videoSection:null,_parseHeaderSection:function(e,t,n){var r=t;return-1===n||(r=-1===t?n:Math.min(t,n)),r>=0?e.slice(0,r):e},_parseAudioSection:function(e,t,n){var r=t;if(r>=0)return e.slice(r,n<r?e.length:n)},_parseVideoSection:function(e,t,n){var r=n;if(r>=0)return e.slice(r,t<r?e.length:t)},spiltSection:function(e){this._preSDP=e;var t=this._preAudioIndex=e.indexOf("m=audio"),n=this._preVideoIndex=e.indexOf("m=video");this.headerSection=this._parseHeaderSection(e,t,n),this.audioSection=this._parseAudioSection(e,t,n),this.videoSection=this._parseVideoSection(e,t,n)},setVideoBitrate:function(e){e&&this.videoSection&&(this.videoSection=this.setBitrate(this.videoSection,e))},setVideoMinBitrate:function(e){this.setAllFmtpBitrate({"x-google-min-bitrate":e})},setVideoMaxBitrate:function(e){this.setAllFmtpBitrate({"x-google-max-bitrate":e})},setVideoStartBitrate:function(e){this.setAllFmtpBitrate({"x-google-start-bitrate":e})},setAllFmtpBitrate:function(e){if(this.videoSection){var t={};(0,i.default)(e).forEach((function(n){var r=n+"="+e[n],i=new RegExp("(a=fmtp\\:\\d+\\s\\S*;?)("+n+"=\\d+)(;?\\S*)","g");t[n]={field:r,regex:i}})),this.videoSection=this.videoSection.replace(/(a=fmtp\:\d+[^\r\n]+)([\r\n]+)/g,(function(e,n,r){return n.indexOf("apt=")>=0?e:((0,i.default)(t).forEach((function(e){var r=t[e],i=r.regex,o=r.field,s=n.replace(i,(function(e,t,n,r){return t+o+r}));s.indexOf(e)<0?(s.endsWith(";")||(s+=";"),n=s+o):n=s})),n+r)}))}},setFmtpBitrate:function(e,t){if(t&&this.videoSection){var n=e+"="+t,r=new RegExp("(a=fmtp\\:\\d+\\s\\S*;?)("+e+"=\\d+)(;?\\S*)","g");this.videoSection=this.videoSection.replace(/(a=fmtp\:\d+[^\r\n]+)([\r\n]+)/g,(function(t,i,o){var s=i.replace(r,(function(e,t,r,i){return t+n+i}));return s.indexOf(e)<0&&(s.endsWith(";")||(s+=";"),s+=n),s+o}))}},setAudioBitrate:function(e){e&&this.audioSection&&(this.audioSection=this.setBitrate(this.audioSection,e))},setBitrate0:function(e,t){return(e=e.replace(/(b=)(?:AS|TIAS)(\:)\d+/g,"$1AS$2"+t)).indexOf("b=AS")<0&&(e=e.replace(/(m=(?:audio|video)[^\r\n]+)([\r\n]+)/g,"$1$2b=AS:"+t+"$2")),e},setBitrate:function(e,t){var n="AS";return emedia.isFirefox&&(t=1e3*(t>>>0),n="TIAS"),(e=e.replace(/(b=)(?:AS|TIAS)(\:)\d+/g,"$1"+n+"$2"+t)).indexOf("b="+n+":")<0&&(e=e.indexOf("c=IN ")<0?e.replace(/(m=(?:audio|video)[^\r\n]+)([\r\n]+)/g,"$1$2b="+n+":"+t+"$2"):e.replace(/c=IN ([^\r\n]+)([\r\n]+)/,"c=IN $1$2b="+n+":"+t+"$2")),e},updateVideoSection:function(e,t){this.videoSection&&(this.videoSection=this.videoSection.replace(e,t))},updateAudioSection:function(e,t){this.audioSection&&(this.audioSection=this.audioSection.replace(e,t))},updateVideoSendonly:function(){this.videoSection&&(this.videoSection=this.videoSection.replace(/sendrecv/g,"sendonly"))},updateVideoRecvonly:function(){this.videoSection&&(this.videoSection=this.videoSection.replace(/sendrecv/g,"recvonly"))},updateAudioSendonly:function(){this.audioSection&&(this.audioSection=this.audioSection.replace(/sendrecv/g,"sendonly"))},updateAudioRecvonly:function(){this.audioSection&&(this.audioSection=this.audioSection.replace(/sendrecv/g,"recvonly"))},updateACodes:function(e){if(e&&this.audioSection){"string"===typeof e&&((n=[]).push(e),e=n);for(var t={},n=this._parseLine(this.audioSection,/a=rtpmap:(\d+) ([A-Za-z0-9]+)\/.*/gi),r=0;r<n.length;r++){var i=n[++r];t[n[++r]]=i}var o=[];for(r=0;r<e.length;r++){var c=t[e[r]];c&&o.push(c)}0==o.length&&(this._webrtc?a.warn("Not found acodes map",e,this._webrtc._rtcId,this._webrtc.__id):a.warn("Not found acodes map",e));var u=this.audioSection.indexOf("\r"),d=this.audioSection.substring(0,u),l=d.split(" ");Array.prototype.push.apply(o,l.slice(3));var f=[],p={};s.forEach(o,(function(e,t){0==f.length?(f.push(t),p[t]=!0):p[t]||(f.push(t),p[t]=!0)})),l.splice(3,l.length-3,f.join(" ")),d=l.join(" "),this._webrtc&&a.warn(d,this._webrtc._rtcId,this._webrtc.__id),this.audioSection=d+this.audioSection.substring(u)}},updateVCodes:function(e){if(e&&this.videoSection){"string"===typeof e&&((n=[]).push(e),e=n);for(var t={},n=this._parseLine(this.videoSection,/a=rtpmap:(\d+) ([A-Za-z0-9]+)\/.*/gi),r=0;r<n.length;r++){var i=n[++r];t[n[++r]]=i}var o=this._parseLine(this.videoSection,/a=fmtp:(\d+) .*profile-level-id=42e01f;?.*/gi);o&&o.length>=2&&(t.H264=o[1]);var c=[];for(r=0;r<e.length;r++){var u=t[e[r]];u&&c.push(u)}0==c.length&&(this._webrtc?a.warn("Not found vcodes map",e,this._webrtc._rtcId,this._webrtc.__id):a.warn("Not found vcodes map",e));var d=this.videoSection.indexOf("\r"),l=this.videoSection.substring(0,d),f=l.split(" ");Array.prototype.push.apply(c,f.slice(3));var p=[],h={};s.forEach(c,(function(e,t){0==p.length?(p.push(t),h[t]=!0):h[t]||(p.push(t),h[t]=!0)})),f.splice(3,f.length-3,p.join(" ")),l=f.join(" "),this._webrtc&&a.warn(l,this._webrtc._rtcId,this._webrtc.__id),this.videoSection=l+this.videoSection.substring(d)}},removeSSRC:function(e){for(var t=[],n=e.split(/a=ssrc:[^\n]+/g),r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);return t.join("\n")},removeField_msid:function(e){for(var t=[],n=e.split(/a=msid:[^\n]+/g),r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);for(e=t.join("\n"),t=[],n=e.split(/[\n]+/g),r=0;r<n.length;r++)"\n"!=n[r]&&t.push(n[r]);return t.join("\n")},updateHeaderMsidSemantic:function(e){var t="a=msid-semantic: WMS "+e,n=this.headerSection.split(/a=msid\-semantic: WMS.*/g),r=[];switch(n.length){case 1:r.push(n[0]);break;case 2:r.push(n[0]),r.push(t),r.push("\n");break;case 3:r.push(n[0]),r.push(t),r.push("\n"),r.push(n[2]),r.push("\n")}return this.headerSection=r.join("")},updateAudioSSRCSection:function(e,t,n,r){this.audioSection&&(this.audioSection=this.removeSSRC(this.audioSection)),this.audioSection&&(this.audioSection=this.removeField_msid(this.audioSection)),this.audioSection&&(this.audioSection=this.audioSection+this.ssrcSection(e,t,n,r))},updateVideoSSRCSection:function(e,t,n,r){this.videoSection&&(this.videoSection=this.removeSSRC(this.videoSection)),this.videoSection&&(this.videoSection=this.removeField_msid(this.videoSection)),this.videoSection&&(this.videoSection=this.videoSection+this.ssrcSection(e,t,n,r))},getUpdatedSDP:function(e){var t,n,r;if(void 0!==e&&null!=e||(e=this._preAudioIndex<this._preVideoIndex),this.videoSection&&this.videoSection.replace(/a=mid:([^\r\n]+)/,(function(e,n){return t=n,e})),this.audioSection&&this.audioSection.replace(/a=mid:([^\r\n]+)/,(function(e,t){return n=t,e})),e){var i=["a=group:BUNDLE"];this.audioSection&&i.push(n),this.videoSection&&i.push(t),r=this.headerSection.replace(/a=group:BUNDLE [^\r\n]+/,i.join(" ")),this.audioSection&&(r+=this.audioSection),this.videoSection&&(r+=this.videoSection)}else i=["a=group:BUNDLE"],this.videoSection&&i.push(t),this.audioSection&&i.push(n),r=this.headerSection.replace(/a=group:BUNDLE [^\r\n]+/,i.join(" ")),this.videoSection&&(r+=this.videoSection),this.audioSection&&(r+=this.audioSection);return r},parseMsidSemantic:function(e){var t=this._parseLine(e,/a=msid\-semantic:\s*WMS (\S+)/gi);return t&&2==t.length&&(this.msidSemantic={line:t[0],WMS:t[1]}),this.msidSemantic},ssrcSection:function(e,t,n,r){return["a=ssrc:"+e+" cname:"+t,"a=ssrc:"+e+" msid:"+n+" "+r,"a=ssrc:"+e+" mslabel:"+n,"a=ssrc:"+e+" label:"+r,""].join("\n")},parseSSRC:function(e){var t=new RegExp("a=(ssrc):(\\d+) (\\S+):(\\S+)","ig"),n=this._parseLine(e,t);if(n){for(var r={lines:[],updateSSRCSection:this.ssrcSection},i=0;i<n.length;i++){var o=n[i];if(o.indexOf("a=ssrc")>=0)r.lines.push(o);else switch(o){case"ssrc":case"cname":case"msid":case"mslabel":case"label":r[o]=n[++i]}}return r}},_parseLine:function(e,t){for(var n,r=[];null!=(n=t.exec(e));)for(var i=0;i<n.length;i++)r.push(n[i]);if(r.length>0)return r}},l=function(e,t){s.extend(this,d),this._webrtc=t,this.spiltSection(e)};l.isAudioVideo=function(e){return e.indexOf("m=audio")<e.indexOf("m=video")},l.isVideoPreAudio=function(e){var t=e.indexOf("m=audio"),n=e.indexOf("m=video");return t>=0&&n>=0&&n<t};var f=emedia.__rtc_globalCount=0,p=s.prototypeExtend({closed:!1,sdpConstraints:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},offerOptions:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},optimalVideoCodecs:null,optimalAudioCodecs:null,__init__:function(){this._rtcId||(this._rtcId="RTC"+f++),this.__id="_i_"+f++,this.__setRemoteSDP=!1,this.__tmpRemoteCands=[],this.__tmpLocalCands=[],this._rtcPeerConnection=null,this.cctx=this.__id,emedia&&emedia.config&&emedia.config.forceUseVideoCodecs&&emedia.config.forceUseVideoCodecs.length>0&&(this.optimalVideoCodecs=emedia.config.forceUseVideoCodecs),emedia&&emedia.config&&emedia.config.forceUseAudioCodecs&&emedia.config.forceUseAudioCodecs.length>0&&(this.optimalAudioCodecs=emedia.config.forceUseAudioCodecs),emedia&&emedia.config&&"number"===typeof emedia.config.forceVideoBitrate&&(this.vbitrate=emedia.config.forceVideoBitrate),emedia&&emedia.config&&"number"===typeof emedia.config.forceMinVideoBitrate&&(this.vminBitrate=emedia.config.forceMinVideoBitrate),emedia&&emedia.config&&"number"===typeof emedia.config.forceAudioBitrate&&(this.abitrate=emedia.config.forceAudioBitrate),a.info("Webrtc created. optimal video codecs:",this.optimalVideoCodecs,"audio codecs:",this.optimalAudioCodecs,"vbitrate:",this.vbitrate,"vminBitrate:",this.vminBitrate,"abitrate:",this.abitrate,this._rtcId,this.__id)},getRtcId:function(){return this._rtcId},iceState:function(){return this._rtcPeerConnection.iceConnectionState},setSubArgs:function(e){this.subArgs=e},getReceiversOfPeerConnection:function(){if(this._rtcPeerConnection&&"closed"!=this._rtcPeerConnection.iceConnectionState)return this._rtcPeerConnection.getReceivers()},updateRemoteBySubArgs:function(){this.subArgs&&this._remoteStream&&(emedia.enableVideoTracks(this._remoteStream,!(this.subArgs&&!1===this.subArgs.subSVideo)),emedia.enableAudioTracks(this._remoteStream,!(this.subArgs&&!1===this.subArgs.subSAudio)),a.info("enable tracks remote stream",this._remoteStream,this.subArgs,this._rtcId,this.__id,this.closed))},createRtcPeerConnection:function(e){var t=this;a.debug("begin create peer connection ......",t._rtcId,t.__id,t.closed),e||(e=t.iceServerConfig),e||emedia.isEdge?(e||(e={}),!e.iceServers&&(e.iceServers=[]),e.rtcpMuxPolicy="require",e.bundlePolicy="max-bundle",e.relayOnly&&(e.iceTransportPolicy="relay")):e=null,emedia&&emedia.config&&"function"===typeof emedia.config.reconfigRTCConfiguration&&(e=emedia.config.reconfigRTCConfiguration(e)),emedia.config.useDeployMore&&(emedia.mgr.rtc_url_config||(emedia.mgr.rtc_url_config=new u(emedia.config.rtcConfigUrl||"")),e&&e.iceServers&&(e=emedia.mgr.rtc_url_config.replace_trun_url(e))),a.info("create pc, set config:",e,t._rtcId,t.__id,t.closed);var n=t._rtcPeerConnection=new RTCPeerConnection(e);function r(e){a.info("states: connectionState",n.connectionState,", iceConnectionState",n.iceConnectionState,"@",t._rtcId,t.__id,t.closed);try{var r=n.iceConnectionState||n.connectionState;"failed"!=n.connectionState&&"failed"!=n.iceConnectionState&&"closed"!=n.iceConnectionState&&"closed"!=n.iceConnectionState||(r="failed",console.log("sqx state",r)),t.lastIceConnectionState!==r&&(t.lastIceConnectionState=r,t.onIceStateChange(r))}finally{}}n.__peerId=t._rtcId,a.debug("created local peer connection object",n,t._rtcId),n.onicecandidate=function(e){var n=e.candidate;if("icecandidate"!=e.type||n&&("string"!==typeof n.protocol||"tcp"!==n.protocol.toLowerCase())&&!/ TCP /.test(n.candidate)){if(!n.candidate)throw a.error("Not found candidate. candidate is error"),"Not found candidate. candidate is error,";if(n.cctx=t.cctx,!t.__setRemoteSDP)return(t.__tmpLocalCands||(t.__tmpLocalCands={})).push(n),void a.debug("On ICE candidate ok: but tmp buffer caused by not set remote sdp: ",n,t._rtcId,t.__id,t.closed);a.debug("On ICE candidate ok: ",n,t._rtcId,t.__id,t.closed),t._onIceCandidate(n)}else a.debug("On ICE candidate: drop",n,t._rtcId,t.__id,t.closed)},t.lastIceConnectionState="",n.onconnectionstatechange=r.bind(t),n.onicestatechange=r.bind(t),n.oniceconnectionstatechange=r.bind(t),n.onsignalingstatechange=function(e){a.info("states: signaling",n.signalingState,"@",t._rtcId,t.__id,t.closed)},null===n.ontrack&&t._onTrack&&(n.ontrack=function(e){t._onTrack(e)}),n.onaddstream=function(e){t._onGotRemoteStream(e)}},addTrack:function(e,t){var n=this;e.forEach((function(e){n._rtcPeerConnection.addTrack(e,t),a.debug("Added track(",e.id,e.kind,e.label,") of stream(",t.id,") to RtcPeerConnection",n._rtcId,n.__id,n.closed)}))},setLocalStream:function(e){var t=this;if(t._localStream=e,t._rtcPeerConnection.addTrack)e.getTracks().forEach((function(n){t._rtcPeerConnection.addTrack(n,e),a.debug("Added track(",n.enabled,n.id,n.kind,n.label,") of localStream(",e.id,") to RtcPeerConnection",t._rtcId,t.__id,t.closed)}));else{t._rtcPeerConnection.addStream(e);var n=e.getVideoTracks(),r=e.getAudioTracks();n&&n.length>0&&a.debug("RtcPeerConnection video: ",n[0].enabled,n[0].id,n[0].kind,n[0].label,t._rtcId,t.__id,t.closed),r&&r.length>0&&a.debug("RtcPeerConnection audio: ",r[0].enabled,r[0].id,r[0].kind,r[0].label,t._rtcId,t.__id,t.closed)}a.debug("Added local stream to RtcPeerConnection",e.id,e.active,t._rtcId,t.__id,this.closed)},removeStream:function(e){this._rtcPeerConnection.removeStream(e),a.debug("Remove stream from RtcPeerConnection",e,self._rtcId,self.__id,this.closed)},getLocalStream:function(){return this._localStream},getRemoteStream:function(){return this._remoteStream},createOffer:function(e,t){a.info("start create offer... self.offerOption str",(0,r.default)(this.offerOptions)),a.info("start create offer... self.offerOption",this.offerOptions);var n=this,i=s.extend({},n.offerOptions),o=n.subArgs?{offerToReceiveAudio:!0,offerToReceiveVideo:!0}:JSON.parse((0,r.default)(n.offerOptions));return n._rtcPeerConnection.createOffer(o).then((function(t){if(a.info("original offer sdp",t),n.offerDescription=t,emedia.isEdge&&(t.sdp=t.sdp.replace(/profile-level-id=[^;]+/,"profile-level-id=42e01f")),emedia.isFirefox?n.fireFoxOfferVideoPreAudio=n.__offerVideoPreAudio=l.isVideoPreAudio(t.sdp):n.__offerVideoPreAudio=l.isVideoPreAudio(t.sdp),t.sdp=t.sdp.replace(/m=video 0/g,"m=video 9"),a.warn("setLocalDescription. modify offer. if 'm=video 0' -> 'm=video 9'; if H264, 'profile-level-id=42e01f'",n._rtcId,n.__id),n.optimalVideoCodecs&&n.optimalVideoCodecs.length>0||n.optimalAudioCodecs&&n.optimalAudioCodecs.length>0||i&&(!1===i.offerToReceiveVideo||!1===i.offerToReceiveAudio)){var r=new l(t.sdp,n);n.optimalVideoCodecs&&r.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&r.updateACodes(n.optimalAudioCodecs),o&&!1===i.offerToReceiveVideo&&r.updateVideoSection(/a=sendrecv|a=recvonly/g,"a=sendonly"),o&&!1===i.offerToReceiveAudio&&r.updateAudioSection(/a=sendrecv|a=recvonly/g,"a=sendonly"),t.sdp=r.getUpdatedSDP()}if(a.debug("setLocalDescription start",n._rtcId,n.__id,n.closed,n.optimalVideoCodecs,n.optimalAudioCodecs),emedia.config.useDTX){t.sdp=t.sdp.replace(/a=rtpmap:(.*)CN\/(.*)\r\n/g,"");var s=t.sdp.match(/a=rtpmap:(.*)\sopus/)[1];t.sdp=t.sdp.replace(new RegExp("a=fmtp:"+s+"(.*)\\r\\n"),"a=fmtp:"+s+"$1;usedtx=1\r\n")}n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){t.cctx=n.cctx,(e||n.onCreateOfferSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,o))},createPRAnswer:function(e,t){var n=this;return a.info(" createPRAnswer start",n.closed,n.sdpConstraints),n._rtcPeerConnection.createAnswer(n.sdpConstraints).then((function(t){a.debug("_____________PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),t.type="pranswer",t.sdp=t.sdp.replace(/a=recvonly/g,"a=inactive");var r=new l(t.sdp,n);n.optimalVideoCodecs&&r.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&r.updateACodes(n.optimalAudioCodecs),t.sdp=r.getUpdatedSDP(),n.__prAnswerDescription=t,a.debug("inactive PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),a.debug("setLocalDescription start",t,n._rtcId,n.__id,n.closed),n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){r.updateHeaderMsidSemantic("MS_0000"),r.updateAudioSSRCSection(1e3,"CHROME0000","MS_0000","LABEL_AUDIO_1000"),r.updateVideoSSRCSection(2e3,"CHROME0000","MS_0000","LABEL_VIDEO_2000"),t.sdp=r.getUpdatedSDP(),a.debug("Send PRAnswer ",t.sdp,n._rtcId,n.__id,n.closed),n.cctx&&(t.cctx=n.cctx),(e||n.onCreatePRAnswerSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,n.sdpConstraints))},createAnswer:function(e,t){var n=this;return a.info("createAnswer start",n.closed,n.sdpConstraints),n._rtcPeerConnection.createAnswer(n.sdpConstraints).then((function(t){a.debug("_____________________Answer ",n._rtcId,n.__id,n.closed),t.type="answer";var r=new l(t.sdp,n);n.optimalVideoCodecs&&r.updateVCodes(n.optimalVideoCodecs),n.optimalAudioCodecs&&r.updateACodes(n.optimalAudioCodecs),emedia.supportPRAnswer?function(e){var n=e.parseMsidSemantic(e.headerSection);if(n){"*"==n.WMS&&e.updateHeaderMsidSemantic(n.WMS="MS_0000");var r=e.parseSSRC(e.audioSection),i=e.parseSSRC(e.videoSection);r&&e.updateAudioSSRCSection(1e3,"CHROME0000",n.WMS,r.label||"LABEL_AUDIO_1000"),i&&e.updateVideoSSRCSection(2e3,"CHROME0000",n.WMS,i.label||"LABEL_VIDEO_2000"),t.sdp=e.getUpdatedSDP()}}(r):t.sdp=r.getUpdatedSDP(),n.__answerDescription=t,a.debug("Answer ",n._rtcId,n.__id,n.closed),a.debug("setLocalDescription start",t,n._rtcId,n.__id,n.closed),n._rtcPeerConnection.setLocalDescription(t).then(n._onSetLocalSessionDescriptionSuccess.bind(n),n._onSetSessionDescriptionError.bind(n,t)).then((function(){emedia.supportPRAnswer&&(r.updateHeaderMsidSemantic("MS_0000"),r.updateAudioSSRCSection(1e3,"CHROME0000","MS_0000","LABEL_AUDIO_1000"),r.updateVideoSSRCSection(2e3,"CHROME0000","MS_0000","LABEL_VIDEO_2000"),t.sdp=r.getUpdatedSDP()),a.debug("Send Answer ",n._rtcId,n.__id,n.closed),n.cctx&&(t.cctx=n.cctx),(e||n.onCreateAnswerSuccess.bind(n))(t)}))}),t||n._onCreateSessionDescriptionError.bind(n,n.sdpConstraints))},_printStats:function(e){var t=this;t.confrAttendee&&emedia.config.remainLastStatsCount&&e&&e.getTracks().forEach((function(e){t._printTrackStats(e)}))},_printTrackStats:function(e){if(this.confrAttendee&&emedia.config.remainLastStatsCount){var t=this.confrAttendee._trackStats&&this.confrAttendee._trackStats[e.id];if(t){for(var n in t){var r=t[n];for(var i in r){var o=r[i];if(o)for(var c=o.curIndex,u=0;u<emedia.config.remainLastStatsCount;u++){var d=o[c=(c-1)%emedia.config.remainLastStatsCount];if(!d||void 0===d.data)break;a.info("[track]",this._rtcId,this.__id,e.kind,e.id,n,i,d.data,d.timestamp.toLocaleString())}}}s.removeAttribute(this.confrAttendee._trackStats,e.id)}}},close:function(e,t,n){var r=this;if(a.warn("webrtc closing",r._rtcId,r.__id,r.closed),r.__iceWaitIntervalId&&clearTimeout(r.__iceWaitIntervalId),!r.closed){t=!0===t,r.closed=!0;try{var i=function(){r._rtcPeerConnection&&r._rtcPeerConnection.close(),a.info("peer connection close. it is",r._rtcPeerConnection&&r._rtcPeerConnection.__peerId),!n&&emedia.isSafari&&(r._rtcPeerConnection.iceConnectionState||r._rtcPeerConnection.connectionState,setTimeout((function(){r._rtcPeerConnection.iceConnectionState||r._rtcPeerConnection.connectionState,r.onIceStateChange&&r.onIceStateChange("closed")}),200))},o=r._localStream,s=r._remoteStream;emedia.config.printStatsWhenPCClose?r.getStats((function(){i(),o&&r._printStats(o),s&&r._printStats(s)})):i()}catch(c){a.warn(c)}finally{r._localStream&&!1===e&&emedia.stopTracks(r._localStream),r._remoteStream&&emedia.stopTracks(r._remoteStream),r._remoteStream=null,t||r.onClose&&r.onClose(),!0===n&&(a.info("Webrtc close. but retry build. will onIceStateChange(failed). eg. emedia.config iceWaitBuildMillis",r._rtcId,r.__id),r.onIceStateChange&&r.onIceStateChange("failed")),a.warn("webrtc closed. closed:",r._rtcId,r.__id,r.closed)}}},addIceCandidate:function(e){console.log("addIceCandidate candidate",(0,r.default)(e));var t=s.isArray(e)?e:[e];if(emedia.mgr.rtc_url_config&&(t=emedia.mgr.rtc_url_config.replace_candidates(t)),emedia&&emedia.config&&"function"===typeof emedia.config.reChanageCandidate){for(var n=[],i=0;i<t.length;i++){e=t[i];var o=emedia.config.reChanageCandidate(e);o&&(a.info("Candidate rechanage. addons. it =",e,"->",o),s.isArray(o)?Array.prototype.push.apply(n,o):n.push(o))}t=n}this._addIceCandidate(t)},_addIceCandidate:function(e){if(this._rtcPeerConnection){a.debug("Add ICE candidate: ",e,this._rtcId,this.__id,this.closed);var t=s.isArray(e)?e:[e];if(!this.__setRemoteSDP)return Array.prototype.push.apply(this.__tmpRemoteCands||(this.__tmpRemoteCands={}),t),void a.debug("Add ICE candidate but tmp buffer caused by not set remote sdp: ",e,this._rtcId,this.__id,this.closed);for(var n=0;n<t.length;n++)if((e=t[n]).cctx&&e.cctx!=this.cctx)a.warn("addIceCandidate fail drop. cctx not equal. ",e,this._rtcId,this.__id,this.closed);else{if(!0===this.fireFoxOfferVideoPreAudio){var r=e.sdpMLineIndex;e.sdpMLineIndex=parseInt(e.sdpMid.replace(/[^0-9]*/,"")),a.warn("Firefox sdp section video pre audio, sdp mline index update ",r,"->",e.sdpMLineIndex)}e.candidate&&""!==e.candidate?this._rtcPeerConnection.addIceCandidate(new RTCIceCandidate(e)).then(this.onAddIceCandidateSuccess.bind(this),this._onAddIceCandidateError.bind(this,e)):a.warn("Add ICE candidate fail. drop it ",e,this._rtcId,this.__id,this.closed)}}},setRemoteDescription:function(e){return this._setRemoteDescription(e)},_setRemoteDescription:function(e){var t=this;if(t.__iceWaitIntervalId&&(clearTimeout(t.__iceWaitIntervalId),t.__iceWaitIntervalId=null,a.info("emedia.config iceWaitBuildMillis, clear ice wait interval id",t._rtcId,t.__id)),a.debug("setRemoteDescription start. ",t._rtcId,t.__id,t.closed),t.offerDescription){if(e.cctx&&e.cctx!=t.cctx)return void a.warn("setRemoteDescription fail drop. cctx not equal. ",e,t._rtcId,t.__id,t.closed);if(!0===t.fireFoxOfferVideoPreAudio||!0===t.__offerVideoPreAudio){var n=new l(e.sdp,t);e.sdp=n.getUpdatedSDP(!1),a.info("Remote sdp.2. switch audio video",e.sdp)}}else e.cctx&&(t.cctx=e.cctx);return e.sdp=e.sdp.replace(/UDP\/TLS\/RTP\/SAVPF/g,"RTP/SAVPF"),a.warn("setRemoteDescription. UDP/TLS/RTP/SAVPF -> RTP/SAVPF; if firefox: switch audio video;",t._rtcId,t.__id),(t.vbitrate||t.abitrate||t.vminBitrate)&&(n=new l(e.sdp,t),t.vbitrate&&n.setVideoBitrate(t.vbitrate),t.vminBitrate&&n.setVideoMinBitrate(t.vminBitrate),t.abitrate&&n.setAudioBitrate(t.abitrate),a.warn("vbitrate = ",t.vbitrate,"vminBitrate = ",this.vminBitrate,", abitrate = ",t.abitrate,t._rtcId,t.__id),e.sdp=n.getUpdatedSDP("undefined"===typeof t.__offerVideoPreAudio||null===t.__offerVideoPreAudio?void 0:!t.__offerVideoPreAudio)),a.debug("final remote sdp =",e.sdp,t._rtcId,t.__id),e=t.__remoteDescription=new RTCSessionDescription(e),t._rtcPeerConnection.setRemoteDescription(e).then((function(){t.__setRemoteSDP=!0,t._onSetRemoteSuccess.apply(t,arguments),t.__tmpLocalCands&&t.__tmpLocalCands.length>0&&(a.debug("After setRemoteDescription. send cands",t._rtcId,t.__id,t.closed),t._onIceCandidate(t.__tmpLocalCands),t.__tmpLocalCands=[]),t.__tmpRemoteCands&&t.__tmpRemoteCands.length>0&&(a.debug("After setRemoteDescription. add tmp cands",t._rtcId,t.__id,t.closed),t._addIceCandidate(t.__tmpRemoteCands),t.__tmpRemoteCands=[])}),t._onSetSessionDescriptionError.bind(t,e))},iceConnectionState:function(){return this._rtcPeerConnection.iceConnectionState},isConnected:function(){var e=this.lastIceConnectionState;return"connected"===e||"completed"===e},_onGotRemoteStream:function(e){var t=this;t._remoteStream=e.stream||e.streams[0],t._remoteStream._rtcId=t._rtcId,t._remoteStream.__rtc_c_id=t.__id,a.debug("On got remote stream",t._remoteStream?t._remoteStream.id+"_"+t._remoteStream.active:"null",t._rtcId,t.__id),t._remoteStream&&t._remoteStream.getTracks().forEach((function(e){a.debug("remote stream",t._remoteStream.id," track =",e.enabled,e.id,e.kind,e.label,t._rtcId,t.__id)})),t.updateRemoteBySubArgs(),this.onGotRemoteStream(this._remoteStream,e),a.debug("received remote stream, you will see the other.",t._rtcId,t.__id,this.closed)},_onSetRemoteSuccess:function(){a.info("onSetRemoteSuccess success",this._rtcId,this.__id),this.onSetRemoteSuccess.apply(this,arguments),this.offerDescription&&this.__remoteDescription&&this.__remoteDescription.sdp&&this._onAnswerCodes(this.__remoteDescription.sdp)},_onAnswerCodes:function(e){var t=new l(e,this);if(t.videoSection){var n=c.parseRtpParameters(t.videoSection);if(!n.codecs||0===n.codecs.length)return void a.info("not found any video codes. @ ",this._rtcId,this.__id);var r=[],i={};s.forEach(n.codecs,(function(e,t){!0!==i[t.name]&&(i[t.name]=!0,r.push(t.name))})),this.finalVCodeChoices=r,this.onVCodeChoices&&this.onVCodeChoices(r)}},onSetRemoteSuccess:function(){},onAddIceCandidateSuccess:function(){a.debug("addIceCandidate success",this._rtcId,this.__id)},_onAddIceCandidateError:function(e,t){a.error("failed to add ICE Candidate: "+t.toString(),", error candidate:",e,this._rtcId,this.__id),this.onAddIceCandidateError(t)},onAddIceCandidateError:function(e){},_onIceCandidate:function(e){a.debug("onIceCandidate:",e,this._rtcId,this.__id),this.onIceCandidate(e)},onIceCandidate:function(e){},onIceStateChange:function(e){a.debug("onIceStateChange : ICE state ",e)},_onCreateSessionDescriptionError:function(e,t){a.error("Failed to create session description: "+t.toString()," offerOptionsOrSDPConstraints:",e,this._rtcId,this.__id),this.onCreateSessionDescriptionError(t)},onCreateSessionDescriptionError:function(e){},onCreateOfferSuccess:function(e){a.debug("create offer success",this._rtcId,this.__id)},onCreatePRAnswerSuccess:function(e){a.debug("create answer success",this._rtcId,this.__id)},onCreateAnswerSuccess:function(e){a.debug("create answer success",this._rtcId,this.__id)},_onSetSessionDescriptionError:function(e,t){a.error("onSetSessionDescriptionError : Failed to set session description: ",t.toString(),this._rtcId,this.__id),e&&e.type&&e.sdp&&a.error("error sdp: type=",e.type,"sdp=",e.sdp,this._rtcId,this.__id),this.onSetSessionDescriptionError(t)},onSetSessionDescriptionError:function(e){},_onSetLocalSessionDescriptionSuccess:function(){var e=this;a.debug("onSetLocalSessionDescriptionSuccess : setLocalDescription complete",this._rtcId,this.__id),emedia.config.iceWaitBuildMillis&&(this.__iceWaitIntervalId&&clearTimeout(this.__iceWaitIntervalId),this.__iceWaitIntervalId=setTimeout((function(){a.info("emedia.config iceWaitBuildMillis, timeout, will close webrtc, will retry build by onIceStateChange(failed)",e._rtcId,e.__id),e.onIceStateChange&&e.onIceStateChange("failed")}),emedia.config.iceWaitBuildMillis),a.info("emedia.config iceWaitBuildMillis, start timeout",e._rtcId,e.__id)),this.onSetLocalSessionDescriptionSuccess(),this.__answerDescription&&this.__answerDescription.sdp&&this._onAnswerCodes(this.__answerDescription.sdp)},onSetLocalSessionDescriptionSuccess:function(){},onGotRemoteStream:function(e){a.debug("Got remote stream. ",e,this._rtcId,this.__id)},getStats:function(e){var t=this;return t._rtcPeerConnection?"function"!==typeof emedia.config.rtcStatsTypeMath?(a.warn("Get stats, but config rtcStatsTypeMather, ",this._rtcId,this.__id),void(e&&e())):void t._rtcPeerConnection.getStats(null).then((function(n){n.forEach((function(e,n){emedia.config.rtcStatsTypeMath(e,n)&&a.info("Rtc stats",e,t._rtcId,t.__id)})),e&&e(n)})):(a.warn("Get stats, but peer connection not exsits, ",this._rtcId,this.__id),void(e&&e()))}});e.exports=p},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return{usernameFragment:(n=n.concat(r.splitLines(t))).filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:n.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=d}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var s=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";var r=n(87),i=n(158);emedia.subscribed=function(e){return!!e._located||(2===e.type?!(e._located||!e._webrtc):void 0!==e._webrtc)};var o=r.prototypeExtend({voff:0,aoff:0,__init__:function(){var e=this;if(!e._mediaStream)throw _logger.error("_mediaStream empty"),"_mediaStream empty";if(e.hasEnabledTracks(e._mediaStream)){if(!e.__audioContext)throw _logger.error("require audioContext"),"require audioContext";e.__soundMeter=new i(e.__audioContext),e.__soundMeter.connectToSource(e._mediaStream,(function(t){if(t)throw t;e.__worked=e.__soundMeter.__worked=!0}))}},hasEnabledTracks:function(e){return emedia.hasEnabledTracks(e)},getSoundMeters:function(){if(this.__soundMeter&&this.__worked)if(this._mediaStream.active){if(this.hasEnabledTracks(this._mediaStream))return{instant:this.__soundMeter.instant,slow:this.__soundMeter.slow,clip:this.__soundMeter.clip}}else this.__worked&&this._finally()},_finally:function(){this.__soundMeter&&(this.__soundMeter.stop(),this.__worked=this.__soundMeter.__worked=!1)}});e.exports=r.prototypeExtend({__undefinedEQDelete:!0,Update:r.prototypeExtend({ifAoff:function(e){this.if("aoff",e)},ifVoff:function(e){this.if("voff",e)},ifMediaStream:function(e){this.if("mediaStream",e)},if:function(e,t){"undefined"!==typeof this[e]&&t(this[e])}}),located:function(){return this._located||!1},webrtc:function(e){return e&&(this._webrtc=e),this},getMediaStream:function(){return"undefined"!==typeof this.mediaStream?this.mediaStream:this._located?this._localMediaStream:this._webrtc&&(this._webrtc.getRemoteStream()||this._webrtc.getLocalStream())},requestFrame:function(){this._localMediaStream&&this._localMediaStream.getVideoTracks().forEach((function(e){"function"===typeof e.requestFrame&&e.requestFrame()}))},getLocalMediaStream:function(){return this._localMediaStream},getRemoteMediaStream:function(){if(this._webrtc&&"undefined"!==typeof this._webrtc.getRemoteStream())return this._webrtc.getRemoteStream()},mutedNeed:function(){return this.mutedMuted||!1},ifMediaStream:function(e){"undefined"===typeof this.mediaStream?this._located&&"undefined"!==typeof this._localMediaStream?e(this._localMediaStream):this._located||!this._webrtc||"undefined"===typeof this._webrtc.getRemoteStream()||e(this._webrtc.getRemoteStream()):e(this.mediaStream)},subscribed:function(){return emedia.subscribed(this)},updateAttributes:function(){for(var e=this,t=0;t<arguments.length;t++){var n=arguments[t];if(r.isPlainObject(n))for(var i in n){var o=n[i];e[i]=o}}},getHtmlDOMID:function(){return"_m_"+this.owner.id+"_s_"+this.id},MediaSoundMeter:o,StreamSoundMeter:r.prototypeExtend({__init__:function(){if(!this._stream||"function"!==typeof this._stream.getMediaStream)throw _logger.error("_stream empty or not found method getMediaStream"),"_stream empty or not found method getMediaStream";if(this._streamId=this._stream.id,this._streamCreateId=this._stream.__create_id,this._mediaStream=this._mediaStream,2===this._stream.type&&!this._stream.located()&&!this._webrtc)throw _logger.error("require webrtc. when type = 2 and not located"),"require webrtc. when type = 2 and not located";this.__mediaSoundMeter=this.__mediaSoundMeter||new o({__audioContext:this.__audioContext,_mediaStream:this._mediaStream}),this.__mediaSoundMeter.useCount=(this.__mediaSoundMeter.useCount||0)+1},onSoundMeters:function(e){var t={instant:0,slow:0,clip:0};if(this._stream.aoff)return this._finally(),e(t),t;if(2!==this._stream.type&&this._stream.subArgs&&void 0!==this._stream.subArgs.subSAudio&&!this._stream.subArgs.subSAudio)return this._finally(),e(t),t;if(0==this._stream.id||2===this._stream.type&&!this._stream.located()&&(!this._stream.subArgs||!this._stream.subArgs.subSAudio)){var n,i=this._webrtc.getReceiversOfPeerConnection();if(!i||0===i.length)return e(t),t;for(var o in i)"audio"===i[o].track.kind&&(n=i[o]);if(!n)return e(t),t;if("function"===typeof n.getContributingSources){var s,a=n.getContributingSources();if(emedia.config._printSoundData&&r.logger.debug(this._stream.id,this._stream.csrc,"rtpContributingSources ",a),!a||0===a.length)return e(t),t;for(var o in a)a[o].source==this._stream.csrc&&(s=this._stream.csrc);if(emedia.config._printSoundData&&r.logger.debug(this._stream.id,this._stream.csrc,"source ",s),void 0===s)return e(t),t}}var c=this.__mediaSoundMeter.getSoundMeters()||t,u=2===this._stream.type?this._webrtc:this._stream._webrtc;(emedia.meterWithTrackAudioLevel||0===c.instant)&&u&&!u.closed&&u._rtcPeerConnection&&u._rtcPeerConnection.getStats().then((function(t){t.size>0&&t.forEach((function(t){"track"!==t.type||"audio"!==t.kind&&"audio"!==t.trackIdentifier||(c.trackAudioLevel=t.audioLevel,c.trackTotalAudioEnergy=t.totalAudioEnergy,e(c))}))})),e(c)},_finally:function(){2===this._stream.type&&this._stream.located()&&this._remoteMediaSoundMeters&&this._remoteMediaSoundMeters._finally(),this.__mediaSoundMeter.useCount--,0===this.__mediaSoundMeter.useCount&&this.__mediaSoundMeter._finally()}})})},function(e,t,n){"use strict";function r(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);var t=this;this.script.onaudioprocess=function(e){var n,r=e.inputBuffer.getChannelData(0),i=0,o=0;for(n=0;n<r.length;++n)i+=r[n]*r[n],Math.abs(r[n])>.99&&(o+=1);t.instant=Math.sqrt(i/r.length),t.slow=.95*t.slow+.05*t.instant,t.clip=o/r.length}}r.prototype.connectToSource=function(e,t){console.log("SoundMeter connecting");try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),"undefined"!==typeof t&&t(null)}catch(n){console.error(n),"undefined"!==typeof t&&t(n)}},r.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e.exports=r},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("Handler"),o=n(150),s=r.prototypeExtend({onEvent:function(e){this.mgr.upload_stats&&this.mgr.upload_stats.upload_event(e);var t=this;function n(){try{t.handleEvent(e)}catch(n){i.warn(n)}}if(e&&i.info("[EVT]",e.message(),e.hidden||""),e instanceof o.ServerRefuseEnter&&e.failed&&-95270===e.failed&&(e.failed=-9527),e instanceof emedia.event.StreamState&&e.stream&&e.stream.located())n();else try{e.hidden||t.onNotifyEvent&&t.onNotifyEvent(e)}finally{n()}},handleEvent:function(e){var t=this;if(e instanceof o.RecvResponse)t._onRecvResponse(e);else if(e instanceof o.ServerRefuseEnter)i.warn("Server refuse, ",e.failed,e.msg),t.onServerRefuseEnter(e);else if(e instanceof o.NetworkChanaged)i.warn("Network chanaged, ",e.preIp,e.nowIp),t.onNetworkChanaged(e);else if(e instanceof o.EnterFail)i.warn("Enter fail, result = ",e.failed),t.onEnterFail();else if(e instanceof o.WSClose)t.onWSClose();else if(e instanceof o.WSConnected)i.warn("Websocket connected");else if(e instanceof o.ICEConnected){var n=e.webrtc;t.onICEConnected(n)}else if(e instanceof o.ICEConnectFail)n=e.webrtc,t.onICEConnectFail(n);else if(e instanceof o.ICEDisconnected)n=e.webrtc,t.onICEDisconnected(n);else if(e instanceof o.ICEClosed)n=e.webrtc,t.onICEClosed(n);else if(e instanceof o.ICERemoteMediaStream)t.onICERemoteMediaStream(e.webrtc);else if(e instanceof o.PushSuccess){t._cacheStreams[e.stream.id]=t._linkedStreams[e.stream.id]=e.stream;var s=t.newStream(e.stream);if(e.hidden&&!t._maybeNotExistStreams[e.stream.id]&&!s.isRepublished)return void t._onAddStream(s);emedia._yetGetUserMedia=!0;try{!0!==e.hidden&&s&&t.onUpdateStream(s,new s.Update({voff:s.voff,aoff:s.aoff,mediaStream:s.getMediaStream()}))}finally{emedia.isSafari&&r.forEach(t._cacheStreams,(function(e,n){!0===n._autoSubWhenPushStream&&(r.removeAttribute(n,"_autoSubWhenPushStream"),t.createWebrtcAndSubscribeStream(n.id))}))}}else if(e instanceof o.SubSuccess)console.log("__event.SubSuccess",e),t._linkedStreams[e.stream.id]=e.stream,e.stream.updateAttributes({_zoom:1});else if(e instanceof o.PushFail){if(!0!==e.hidden){var a=r.removeAttribute(t._linkedStreams,e.stream.id);i.warn("PushFail remove from _linkedStreams",e.stream.id,a),a&&(s=t.newStream(e.stream),t.onRemoveStream(s))}}else if(e instanceof o.SubFail)!0!==e.hidden&&(r.removeAttribute(t._linkedStreams,e.stream.id),i.warn("SubFail remove from _linkedStreams",e.stream.id),(s=t.newStream(e.stream)).updateAttributes({rtcId:void 0,_webrtc:void 0,mediaStream:void 0}),t.onUpdateStream(s,new s.Update(s)));else if(e instanceof o.SubFailNotSupportVCodes){var c=e.stream;i.warn("Rtc donot support pub VCodes. close. sub fail.",c.rtcId," -> ",c.id);try{t.onNotSupportPublishVideoCodecs&&t.onNotSupportPublishVideoCodecs(c)}catch(l){i.warn(l)}}else if(e instanceof o.EnterSuccess)console.log("__event.EnterSuccess",e),t.onEnterSuccess();else if(e instanceof o.SwitchVCodes){c=e.stream;var u,d=e.useVCodes;if(n=c._webrtc,i.warn("Rtc switch VCodes. ",c.id,d),d&&0!=d.length||i.warn("Rtc switch VCodes. error! useVCodes is empty ",c.id,d),emedia.config&&emedia.config.forceUseVideoCodecs&&emedia.config.forceUseVideoCodecs.length>0&&(u=emedia.config.forceUseVideoCodecs,r.isArray(u)||(u=[]).push(emedia.config.forceUseVideoCodecs)),u){if("string"===typeof u&&u!==d[0])return void i.warn("Rtc switch VCodes. igrone . useVCodes !== forceUseVideoCodecs ",c.id,n._rtcId,d,u);if(r.isArray(u)&&u[0]!==d[0])return void i.warn("Rtc switch VCodes. igrone ddd . useVCodes == forceUseVideoCodecs ",c.id,n._rtcId,d,u)}if(n&&n.optimalVideoCodecs){if("string"===typeof n.optimalVideoCodecs&&n.optimalVideoCodecs==d[0])return void i.warn("Rtc switch VCodes. igrone . useVCodes == optimalVideoCodecs ",c.id,n._rtcId,d);if(r.isArray(n.optimalVideoCodecs)&&n.optimalVideoCodecs.length>0&&n.optimalVideoCodecs[0]==d[0])return void i.warn("Rtc switch VCodes. igrone ddd . useVCodes == optimalVideoCodecs ",c.id,n._rtcId,d)}c.updateAttributes({optimalVideoCodecs:d}),n&&t.closeWebrtc(n.getRtcId(),!0),setTimeout((function(){c.updateAttributes({iceRebuildCount:1}),t.iceRebuild(c),i.warn("Rtc switch VCodes. iceRebuild end.",c.id,d)}),300)}},_onRecvResponse:function(e){var t=e.request,n=e.response;if(t&&n&&200!==t.op&&1002!==t.op&&0!==n.result){i.warn("Server refuse. when request = ",t);var r=e.failed;switch(r){case-9527:case-95270:break;case-500:case-502:case-504:case-508:case-510:this.close(4,r);break;case-506:this.close(11,r);break;case-501:this.close(11,r)}}},onServerRefuseEnter:function(e){var t=e.failed;switch(t){case-9527:case-95270:this.close(4,-9527);break;case-500:case-502:case-504:case-508:case-510:this.close(4,t);break;case-506:this.close(11,t);break;default:this.close(2)}},onEnterFail:function(){this.__getCopyInterval&&clearInterval(this.__getCopyInterval)},onNetworkChanaged:function(e){var t=this,n=e.nowIp;emedia.config.rebuildPeerConnectionWhenNetworkChanaged&&setTimeout((function(){var e={};r.forEach(t._cacheStreams,(function(r,o){if(!t._maybeNotExistStreams[r]&&o._webrtc){var s=o._webrtc;e[o.rtcId]||(s.closed||"string"!==typeof s.useIp||s.useIp===n||(i.warn("network chanage. webrtc will rebuild.",s._rtcId,s.__id),t.onICEClosed(s)),e[o.rtcId]=!0)}}))}),100)},onEnterSuccess:function(){var e=this;setTimeout((function(){e._failIcesRebuild()}),50),e.getCopyIntervalMillis&&e.getCopyIntervalMillis>0&&(i.warn("Run interval get copy. interval = ",e.getCopyIntervalMillis),e.__getCopyInterval&&clearInterval(e.__getCopyInterval),e.__getCopyInterval=setInterval((function(){e._session.connected()?e._sysCopy.apply(e):(i.warn("Warn! cannot get copy. cause offline."),e.__getCopyInterval&&clearInterval(e.__getCopyInterval))}),e.getCopyIntervalMillis)),e.getMediaMeterIntervalMillis&&e.getMediaMeterIntervalMillis>0&&e._intervalGetMediaMeters()},_intervalGetMediaMeters:function(){var e=this;!function t(){e.__getMediaMetersIntervalFlag&&emedia.cancelAnimationFrame(e.__getMediaMetersIntervalFlag),e.getMediaMeterIntervalMillis?e.__getMediaMetersIntervalFlag=emedia.requestAnimationFrame((function(n){"function"===typeof emedia.AudioContext&&e._flushMediaMetersByAudioContext.apply(e),!1===e.closed&&t()}),e.getMediaMeterIntervalMillis):i.warn("Ontalking closed. please use getMediaMeterIntervalMillis")}()},_flushMediaMetersByAudioContext:function(){var e=this;r.forEach(e._cacheStreams,(function(t,n){e._monitSoundChanagedStreams&&!e._monitSoundChanagedStreams[t]||"0"!=n.id&&e._updateMetersOrNewOne.call(e,t,n)}));var t=[];r.forEach(e._mediaMeters,(function(n,r){var i=e._cacheStreams[n];i&&e._updateMetersOrNewOne.call(e,n,i),i||t.push(n)})),r.forEach(t,(function(t,n){r.removeAttribute(e._mediaMeters,n)}))},_updateMetersOrNewOne:function(e,t){var n=this,i=n._mediaMeters[e];if(2===t.type&&!t.located()&&(!t.subArgs||!t.subArgs.subSAudio)){var o=n._oneAudioMixers();if(!o||i&&i._webrtc&&o._webrtc.__id!=i._webrtc.__id)return i&&i._finally(),r.removeAttribute(n._mediaMeters,e),void n._onSoundChanage.call(n,t.owner,t)}return i&&i._streamCreateId===t.__create_id&&i.__mediaSoundMeter.__worked?(i.onSoundMeters((function(e){n._onSoundChanage.call(n,t.owner,t,e)})),i):(i&&(i._streamCreateId!==t.__create_id||i.__mediaSoundMeter.__worked)&&(i&&i._finally(),r.removeAttribute(n._mediaMeters,e),n._onSoundChanage.call(n,t.owner,t)),t.aoff?void 0:((i=n._newMediaMeters(t))&&(n._mediaMeters[e]&&n._mediaMeters[e]._finally(),n._mediaMeters[e]=i),i))},_newAudioContext:function(){if(emedia.__usingWebAudio)return emedia.__audioContext},_newMediaMeters:function(e){var t;if(2===e.type&&e.subArgs&&e.subArgs.subSAudio&&e._webrtc&&e._webrtc.getRemoteStream())return new e.StreamSoundMeter({_stream:e,_mediaStream:e._webrtc.getRemoteStream(),_webrtc:e._webrtc,__audioContext:this._newAudioContext()});if(2===e.type&&e.located())return new e.StreamSoundMeter({_stream:e,_mediaStream:e._localMediaStream,__audioContext:this._newAudioContext()});if(2===e.type&&!e.located()){var n=this._oneAudioMixers();if(!n||!n._webrtc||n._webrtc.closed)return;if(n&&(void 0===n._remoteMediaSoundMeters||!n._remoteMediaSoundMeters.__worked)&&n._webrtc&&n._webrtc.getRemoteStream()&&(n._remoteMediaSoundMeters=new n.MediaSoundMeter({_mediaStream:n._webrtc.getRemoteStream(),__audioContext:this._newAudioContext()})),!n._remoteMediaSoundMeters)return;return new e.StreamSoundMeter({_stream:e,_webrtc:n._webrtc,__mediaSoundMeter:n._remoteMediaSoundMeters})}return!e.aoff&&(t=e.getMediaStream())?new e.StreamSoundMeter({_stream:e,_mediaStream:t,__audioContext:this._newAudioContext()}):void 0},_oneAudioMixers:function(){var e=this._cacheStreams[0];if(e&&e._webrtc&&!e._webrtc.closed)return e;for(var t in this.audioMixers){var n=this.audioMixers[t];if(n.located())return n}},onWSClose:function(){this.__getCopyInterval&&clearInterval(this.__getCopyInterval),i.info("Websocket closed.")},onICEDisconnected:function(e){var t=this;t.__networkWeakInterval&&clearTimeout(t.__networkWeakInterval),t.__networkWeakInterval=setTimeout((function(){t.onNetworkWeak&&t.onNetworkWeak()}),1e3),r.forEach(t._linkedStreams,(function(n,o){o.rtcId==e.getRtcId()&&(t._maybeNotExistStreams[n]||(t._maybeNotExistStreams[n]=r.extend({},o)).updateAttributes({iceRebuildCount:1}),i.info("Stream maybe not exist. caused by disconnected",o.id))}))},onICEConnectFail:function(e){var t=this;for(var n in t._linkedStreams){var s=t._linkedStreams[n];if(s.rtcId==e.getRtcId()){if(s._webrtc&&s._webrtc.__id!==e.__id){i.warn("Stream use other webrtc rtcId = ",s.rtcId,", id: ",s._webrtc.__id,e.__id);continue}var a;if((a=t._maybeNotExistStreams[n])||(a=t._maybeNotExistStreams[n]=r.extend({},s)).updateAttributes({iceRebuildCount:1}),a){var c=new o.StreamState({stream:a});c.iceFail(),t.onEvent(c)}if(i.info("ice fail. webrtc = ",e.getRtcId()," problem stream is ",a.iceRebuildCount,a.id),a.iceRebuildCount>emedia.config.iceRebuildCount)i.info("ice fail. webrtc = ",e.getRtcId()," rebuild fail. problem stream is ",a.id),a.located()?t.onEvent(new o.PushFail({stream:s,cause:"pub ice rebuild failed."})):t.onEvent(new o.SubFail({stream:s,cause:"sub ice rebuild failed."})),t.closeWebrtc(e.getRtcId(),!1);else{var u=t._records[a.id];a._localMediaStream?i.info("ice fail. webrtc = ",e.getRtcId()," will rebuild. remain local stream. ",a.id):i.info("ice fail. webrtc = ",e.getRtcId()," will rebuild.",a.id),t.closeWebrtc(e.getRtcId(),!0),u&&(t._records[a.id]=u),function(e){setTimeout((function(){t.iceRebuild(e)}),emedia.config.iceRebuildIntervalMillis)}(a),i.info("ice fail. webrtc = ",e.getRtcId()," will rebuilding. problem stream is ",a.id)}2===s.type&&r.removeAttribute(t.audioMixers,s.id)}}},onICEClosed:function(e){if(e.closed){i.warn("Webrtc will be removed. by __id = ",e.__id,", rtcId = ",e.getRtcId());var t=r.removeAttribute(this._ices,e.__id);t?i.warn("Webrtc removed. by id = ",t.__id,", rtcId = ",t.getRtcId()):i.warn("Webrtc removed. by id = ",e.__id,", rtcId = ",e.getRtcId());var n=this._ices[e.getRtcId()];n&&n.__id===t.__id&&(t=r.removeAttribute(this._ices,e.getRtcId()),i.warn("Webrtc removed. by rtcId = ",t.getRtcId(),", __id = ",t.__id))}else i.info("ICE self closed. not allow. will rebuild",e.getRtcId()),this.onICEConnectFail(e)},onICEConnected:function(e){var t=this;r.forEach(t._cacheStreams,(function(n,s){if(s.rtcId==e.getRtcId()){if(s.updateAttributes({finalVCodeChoices:e.finalVCodeChoices}),t._maybeNotExistStreams[n]){r.removeAttribute(t._maybeNotExistStreams,s.id),t._linkedStreams[n]=s,i.info("ice reconnected. webrtc = ",e.getRtcId(),"will update stream = ",s.id);var a=t._records[s.id];a&&a.rtcId!==s.rtcId&&(t.startRecord(s),i.warn("Re record. for ",s.id,", after rebuild ice.",a.rtcId,"->",s.rtcId))}else i.info("ice connected. webrtc = ",e.getRtcId(),s.id),s.located()&&t.onEvent(new o.PushSuccess({stream:s})),s.located()||t.onEvent(new o.SubSuccess({stream:s}));2===s.type&&(t.audioMixers[s.id]=s)}}))},onICERemoteMediaStream:function(e){var t=this;r.forEach(t._cacheStreams,(function(n,r){if(r.rtcId==e.getRtcId()&&(!r.located()||2===r.type)){var i=e.getRemoteStream();t._updateRemoteStream(r,i),r.onGotRemoteMediaStream?r.onGotRemoteMediaStream.call(r,i):((r=t.newStream(r)).updateAttributes({mediaStream:e.getRemoteStream()}),t.onUpdateStream(r,new r.Update({mediaStream:r.mediaStream})))}}))},_failIcesRebuild:function(){var e=this;r.forEach(e._maybeNotExistStreams,(function(t,n){setTimeout((function(){e.iceRebuild(n)}),100)}))},iceRebuild:function(e){return this.connected()?this._linkedStreams[e.id]&&this._cacheStreams[e.id]?void(e.iceRebuildCount>emedia.config.iceRebuildCount?(i.info("ice rebuild fail. count too many. stream is ",e.id),e.located()?this.onEvent(new o.PushFail({stream:e,cause:"pub ice rebuild failed."})):this.onEvent(new o.SubFail({stream:e,cause:"sub ice rebuild failed."}))):this.connected()?(i.info("ice try rebuild. count",e.iceRebuildCount,". stream is ",e.id),this.rebuildIce(e),e.iceRebuildCount++):i.warn("ice rebuild. stop. cause by not websocket disconnect",e.id)):(i.info("ice rebuild fail. it yet closed. stream is ",e.id,e.rtcId),r.removeAttribute(this._maybeNotExistStreams,e.id),r.removeAttribute(this._linkedStreams,e.id),void i.warn("iceRebuild, remvoe from _linkedStreams",e.id)):(e.updateAttributes({iceRebuildCount:1}),void i.warn("Websocket disconnect. waiting. rebuild count reset",e.iceRebuildCount,e.id))},rebuildIce:function(e){this._cacheStreams[e.id]?(i.warn("Begin rebuild ice ",e.iceRebuildCount,e.id),e.located()?(e.updateAttributes({isRepublished:!0}),this.push(e,void 0,void 0,!0)):this.createWebrtcAndSubscribeStream(e.id),i.warn("Finish rebuild ice ",e.iceRebuildCount,e.id,this._cacheStreams[e.id].rtcId)):i.warn("Begin rebuild ice. not found stream at local",e.iceRebuildCount,e.id)},_sysCopy:function(){var e=this,t=e.newMessage().setOp(1e3).setCver(e._cver||0);e.postMessage(t,(function(t){0==t.result?(e._cver||0)<t.cver&&(e._cver=t.cver,e.onMembers(t.cver,t.mems||{}),e.onStreams(t.cver,t.streams||{}),i.info("Got copy success.")):i.warn("Get copy fail. result = ",t.result)}))}});e.exports=s},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("Desktop"),o=n(150);window.__shareDesktopMessageCount__=0,e.exports=r.prototypeExtend({__RTC_PAGE_MSG_TYPE__:"RTC-SD-PAGE",__RTC_EXT_MSG_TYPE__:"RTC-SD-EXT",__init__:function(){var e=this;e.__extLoaded=e.rsdExtLoaded(),e.__extLoaded&&e.__onRsdExtLoad(),window.addEventListener("load",(function(t){if(!e.__extLoaded){var n=e.rsdExtLoaded();e.__extLoaded=n}})),window.addEventListener("message",(function(t){if(t.data){var n=t.data;n.type&&n.type===e.__RTC_EXT_MSG_TYPE__&&n.evname&&(i.info("got ext-msg: ",n),"extLoaded"!==n.evname?e.__onMessage(n):e.__extLoaded||(e.__extLoaded=!0,setTimeout(e.__onRsdExtLoad(),50)))}}))},rsdExtLoaded:function(){var e=document.getElementById("RTC-Share-Deskto-installed-ele-rat1abrr");return!(!emedia.isElectron&&!e)},__sendMessage:function(e,t){var n=this,o="tsx_"+__shareDesktopMessageCount__+++"_"+Math.random().toString(36).substr(2,4);if(!n.__extLoaded)throw i.error("Rtc share desktop not loaded"),"Rtc share desktop not loaded";e.tsxId=o,n["on_"+o]=function(){t&&t.apply(n,arguments),r.removeAttribute(n,"on_"+o)},window.postMessage&&window.postMessage(e,"*")},__onMessage:function(e){var t=e.tsxId;this["on_"+t]&&this["on_"+t](e)},__onRsdExtLoad:function(){this.onExtLoaded&&this.onExtLoaded()},openDesktopMedia:function(e,t){if(emedia.isElectron)this.openDesktopMediaInElectron(e,t);else if(this.__extLoaded&&this.rsdExtLoaded()){var n={type:this.__RTC_PAGE_MSG_TYPE__,evname:"chooseDesktopMedia",screenOptions:e};this.__sendMessage(n,(function(e){"onAccessApproved"===e.evname&&e.streamId?t(new o.OpenDesktopMedia({desktopStreamId:e.streamId})):t(new o.OpenDesktopMediaAccessDenied)}))}else t(new o.ShareDesktopExtensionNotFound)},openDesktopMediaInElectron:function(e,t){e||(e=["screen","window"]);var n={types:e,thumbnailSize:{width:230,height:230}};emedia.electron.desktopCapturer.getSources(n).then((function(e){if("function"===typeof emedia.chooseElectronDesktopMedia){for(var n=0;n<e.length;n++){var r=e[n];r.hxThumbDataURL=r.thumbnail.toDataURL()}emedia.chooseElectronDesktopMedia(e,(function(e){var n;n=e&&e.id?e.id:e,t(new o.OpenDesktopMedia({desktopStreamId:n}))}),(function(){t(new o.OpenDesktopMediaAccessDenied({message:function(){return"User denied access"}}))}))}else t(new o.OpenDesktopMedia({desktopStreamId:e[0].id}))})).catch((function(e){return t(new o.OpenDesktopMediaAccessDenied({error:e}))}))}})},function(e,t,n){"use strict";var r,i=n(87),o=i.tagLogger("PCStats");e.exports=r=i.prototypeExtend({__init__:function(){this._webrtc||this._stream&&(this._webrtc=this._stream._webrtc),this.samplesDatas={},this.gatherResults={},this._bysamples={},!1!==this._inbound_&&(this._bysamples["inbound-rtp"]=["bytesRateReceived","packageLossRate","bytesReceived","packetsLost","packetsReceived","pliCount","framesDecoded"]),!1!==this._outbound_&&(this._bysamples["outbound-rtp"]=["bytesRateSent","bytesSent","packetsSent","qpSum","pliCount"])},_onGatherResult:function(e,t,n,r){if(this._service&&this._service.current&&emedia.config.remainLastStatsCount){var i=this._service.current._trackStats;i||(i=this._service.current._trackStats={});var o=(i[e]||(i[e]={}))[t];o||(o=i[e][t]={});var s=o[n];s||(s=o[n]=new Array(emedia.config.remainLastStatsCount)),void 0===s.curIndex&&(s.curIndex=0),s[s.curIndex]={data:r,timestamp:new Date},s.curIndex=(s.curIndex+1)%emedia.config.remainLastStatsCount}"function"===typeof this.onGatherResult&&this.onGatherResult(e,t,n,r)},stats:function(e){if(this._webrtc&&this._webrtc._rtcPeerConnection)return this._webrtc._rtcPeerConnection.getStats(e);o.warn("not found webrtc or peer connection")},statsOfTrack:function(e){if(!e instanceof window.MediaStreamTrack)throw o.error("selector not a MediaStreamTrack"),"selector not a MediaStreamTrack";return this.stats(e)},audioTrack:function(e){var t=e&&e.getAudioTracks();return t&&t.length?t[0]:void 0},videoTrack:function(e){var t=e&&e.getVideoTracks();return t&&t.length?t[0]:void 0},gatherTrack:function(e,t){var n=this;t=(t=e.kind||t)&&t.toLowerCase();var r=e.id;this.statsOfTrack(e).then((function(i){n.samplesDatas[r]||(n.samplesDatas[r]={});var s=n.samplesDatas[r];i.forEach((function(r,i){var a=n._bysamples[r.type],c=r.mediaType||i.indexOf("ideo")>=0&&"video"||i.indexOf("udio")>=0&&"audio"||void 0;if(a&&a.length&&(!0===emedia.config._printDebugStats&&o.debug(i,r,e,c,t),!c||c===t)){var u=s[r.type]||(s[r.type]={});a.forEach((function(n){var i=u[n]||(u[n]=[]),o={timestamp:r.timestamp,kind:r.mediaType||e.kind||t};o[n]="packageLossRate"===n?{packetsLost:r.packetsLost,packetsReceived:r.packetsReceived}:"bytesRateReceived"===n?r.bytesReceived:"bytesRateSent"===n?r.bytesSent:r[n],i.push(o)}))}}))}))},gatherWebrtcMediaStream:function(e,t){var n=this;t?"audio"!==t.toLowerCase()?"video"!==t.toLowerCase()||e.getVideoTracks().forEach((function(e){n.gatherTrack(e,e.kind||t.toLowerCase())})):e.getAudioTracks().forEach((function(e){n.gatherTrack(e,e.kind||t.toLowerCase())})):e.getTracks().forEach((function(e){n.gatherTrack(e)}))},gatherWebrtc:function(){this._webrtc._localStream&&this.gatherWebrtcMediaStream(this._webrtc._localStream),this._webrtc._remoteStream&&this.gatherWebrtcMediaStream(this._webrtc._remoteStream)},_gather_inbound_rtp_packageLossRate:function(e){if(!e||0===e.length)return 0;var t=0,n=0;if(e.length>1)for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];i.packageLossRate.packetsReceived!=o.packageLossRate.packetsReceived?(t+=(i.packageLossRate.packetsLost-o.packageLossRate.packetsLost)/(i.packageLossRate.packetsReceived-o.packageLossRate.packetsReceived),n++):(t=0,n=0)}return e.length>=emedia.config.statsSeconds&&e.shift(),0==n?0:t/n},_gatherBytesRate:function(e,t,n){if(!n||0===n.length)return 0;var r=n[n.length-1][t]-n[0][t],i=n[n.length-1].timestamp-n[0].timestamp;return n.length>=emedia.config.statsSeconds&&n.shift(),0===i?0:parseFloat(1e3*r/i).toFixed(2)},_gather:function(e,t,n){e=e.replace(/[^\w]/g,"_"),t=t.replace(/[^\w]/g,"_");var r=i.list("_gather",e,t).join("_");if("function"===typeof this[r])return this[r](n);if(t.startsWith("bytesRate"))return this._gatherBytesRate(e,t,n);var o=n.shift();return o&&o[t]||0},_statsCount:function(){var e=this;i.forEach(e.samplesDatas,(function(t,n){!function(t,n,r){i.forEach(r,(function(r,o){var s=n[r]||(n[r]={});!function(t,n,r,o){i.forEach(o,(function(i,o){var s=n[i]=e._gather(r,i,o);e._onGatherResult(t,r,i,s)}))}(t,s,r,o)}))}(t,e.gatherResults[t]=e.gatherResults[t]||{},n)}))},gather:function(){this.gatherWebrtc(),this._statsCount()},intervalGather:function(e){this._intervalId&&clearInterval(this._intervalId),this._intervalId=setInterval(this.gather.bind(this),e||1e3)},stopIntervalGather:function(){this._intervalId&&clearInterval(this._intervalId)}});var s={},a=r.echo=function(e){i.forEach(e,(function(e,t){var n;!s[t.id]&&t._webrtc&&!t._webrtc.closed&&t.getMediaStream()?(s[t.id]=n=new r({_webrtc:t._webrtc}),n._mediaStream=t.getMediaStream()):!s[t.id]||t._webrtc&&!t._webrtc.closed&&t.getMediaStream()||i.removeAttribute(s,t.id)}));var t=[];i.forEach(s,(function(n,r){e&&e[n]?(r.gatherWebrtcMediaStream(r._mediaStream),r._statsCount()):t.push(n)})),i.forEach(t,(function(e,t){i.removeAttribute(s,t)}))};r.intervalEcho=function(e,t){return setInterval((function(){a(e)}),t)},i.forEach(["inbound","outbound"],(function(e,t){i.forEach(["Audio","Video"],(function(e,n){!function(e,t){var n;r[e+t]=n=function(o,s,a){var c;n.__intervalIds||(n.__intervalIds={}),c=this instanceof emedia.XService?this:emedia.useCurrentXService;var u=o.id+"___"+c.namespace,d=n.__intervalIds&&n.__intervalIds[u];return d&&clearInterval(d),d=setInterval((function(){var a,l=n[u];!l&&o&&o._webrtc&&!o._webrtc.closed&&o.getMediaStream()?(n[u]=l=new r({_webrtc:o._webrtc,_inbound_:"inbound"===e,_outbound_:"outbound"===e}),l._service=c,s&&(l.onGatherResult=s),l._mediaStream=o.getMediaStream()):!l||o&&o._webrtc&&!o._webrtc.closed&&o._webrtc.__id===l._webrtc.__id&&o.getMediaStream()&&l._mediaStream&&l._mediaStream.id===o.getMediaStream().id||(i.removeAttribute(n,u),l=null),l?(l.gatherWebrtcMediaStream(l._mediaStream,t),l._statsCount()):o&&c&&(a=c.getStreamById(o.id))?o=a:d&&clearInterval(d)}),a),n.__intervalIds[u]=d,d}}(t,n)}))}))},function(e,t,n){"use strict";var r,i=n(87).tagLogger("DefaultTrack"),o=n(163);e.exports=r=o.extend({__init__:function(){this._canvas||(this._canvas=function(e){var t;return t=document.createElement("canvas"),e.appendChild(t),t.style.cssText="position: absolute; background: transparent; width: 100%; height: 100%",t.width=e.offsetWidth,t.height=e.offsetHeight,i.warn("Canvas",t.width,t.height),t}(this._target)),this._canvasContext||(this._canvasContext=this._canvas.getContext("2d"))},resizeCanvas:function(){},_calPosition:function(){var e=o.prototype._calPosition.apply(this,arguments);return e.x=Math.floor(e.x*this._canvas.width/e.width),e.y=Math.floor(e.y*this._canvas.height/e.height),e},_draw:function(e,t,n,r,i,o){var s=this._canvasContext;(!t||t<=1)&&(t=2);var a=s.getImageData(e.x-t/2,e.y-t/2,t,t);a&&function(e,t,n,r,i){for(var o=0,s=e.data;o<s.length;o+=4){var a={r:void 0===t?s[o]:t,g:void 0===n?s[o+1]:n,b:void 0===r?s[o+2]:r,alpha:void 0===i?s[o+3]:i};s[o]=a.r,s[o+1]=a.g,s[o+2]=a.b,s[o+3]=a.alpha}}(a,n,r,i,o),s.putImageData(a,e.x,e.y)},redraw:function(e,t,n,i,o,s){r.prototype._draw.bind(this)({x:e,y:t},2)},onMouseTrigger:function(e,t){e.isLeftKey()&&this._draw(e.xy,8,189,56,51,255),e.isRightKey()&&this._draw(e.xy,8,45,23,189,255),e.isWheelKey()&&this._draw(e.xy,8,58,189,76,255)},onMouseTrack:function(e,t,n){this._draw(e,2,227,18,247,255)}})},function(e,t,n){"use strict";var r=n(87),i=(r.tagLogger("MouseTrack"),n(164));e.exports=r.prototypeExtend({_scale:1,__init__:function(){},getTargetPageXY:function(){return this._target&&r.extend({},r.getDomPageRect(this._target))},onMouseTrack:function(e,t,n){},onMouseTrigger:function(e,t){},_onMouseTrack:function(e,t,n){this.onMouseTrack&&this.onMouseTrack(e,t,n)},_onMouseTrigger:function(e,t){this.onMouseTrigger&&this.onMouseTrigger(e,t)},track:function(e){var t=e=r.extend({},e),n=this.getTargetPageXY();n&&(t={x:(e=this._calPosition(e)).x,y:e.y,pageX:n.x+e.x,pageY:n.y+e.y}),this._onMouseTrack(t,this._lastPageXY,this._lastTrigger),this._lastPageXY=t},trigger:function(e){e=new i(e);var t,n=this.getTargetPageXY();n&&(t=this._calPosition(e.xy),e.xy={x:t.x,y:t.y,pageX:n.x+t.x,pageY:n.y+t.y}),e._time||(e._time=(new Date).getTime()),this._onMouseTrigger(e,this._lastTrigger),this._lastTrigger=e},releaseTrigger:function(){this._lastTrigger=void 0,this._lastPageXY=void 0,this.onReleaseTrigger&&this.onReleaseTrigger(this._lastTrigger)},_calPosition:function(e){this._referenceVideo&&(e=emedia.Service.prototype.eventXYAtVideo.call(null,e,this._referenceVideo));var t=this.getTargetPageXY();if(!t)return e;r.isFloat(e.x)&&void 0!==e.width&&(e.x=e.x*e.width*this._scale*(t.width/e.width)),r.isFloat(e.y)&&void 0!==e.height&&(e.y=e.y*e.height*this._scale*(t.height/e.height)),r.isFloat(e.x)&&void 0===e.width&&(e.x=e.x*this._scale*t.width),r.isFloat(e.y)&&void 0===e.height&&(e.y=e.y*this._scale*t.height),r.isInt(e.x)&&void 0!==e.width&&(e.x=e.x*this._scale*(t.width/e.width)),r.isInt(e.y)&&void 0!==e.height&&(e.y=e.y*this._scale*(t.height/e.height)),r.isInt(e.x)&&void 0===e.width&&(e.x=e.x*this._scale),r.isInt(e.y)&&void 0===e.height&&(e.y=e.y*this._scale);var n=Math.floor(e.x),i=Math.floor(e.y);return n<0&&(n=t.width+n),i<0&&(i=t.width+i),{x:n,y:i,width:t.width,height:t.height}}})},function(e,t,n){"use strict";var r=n(87),i=(r.tagLogger("MouseTrigger"),{LEFT:1,WHEEL:2,RIGHT:4,WHEEL_ROLL_UP:8,WHEEL_ROLL_DOWN:16,KEY_UP:0,KEY_DOWN:1,MOVE:2,KEYBOARD_DOWN:3,KEYBOARD_UP:4});e.exports=r.prototypeExtend({_timeoutMillis:500,_time:(new Date).getTime(),isKeyup:function(){return i.KEY_UP==this.oper},isKeydown:function(){return i.KEY_DOWN==this.oper},isWheelup:function(){return i.WHEEL_ROLL_UP==this.btn},isWheeldown:function(){return i.WHEEL_ROLL_DOWN==this.btn},isLeftKey:function(){return i.LEFT==this.btn},isRightKey:function(){return i.RIGHT==this.btn},isWheelKey:function(){return i.WHEEL==this.btn},isWheelRoll:function(){return this.isWheeldown()||this.isWheelup()},timeout:function(){return(new Date).getTime()-this._time>=this._timeoutMillis},_toString:function(){return r.list("btn:",this.btn,", oper:",this.oper,", timeout:",this.timeout(),", at (",this.xy.x,", ",this.xy.y,")").join("")}}),e.exports.BTN=i},function(e,t,n){"use strict";var r,i=n(2),o=(r=i)&&r.__esModule?r:{default:r},s=n(87),a=s.tagLogger("AddonsP2P"),c=n(150);e.exports=function(e){return function(e,t,n){return e.extend({Session:t,Attendee:n,__init__:function(){e.prototype.__init__.call(this),void 0!==this.useRTCCfg&&!1!==this.useRTCCfg&&null!==this.useRTCCfg||(this.useRTCCfg=emedia.config.forceUseRTCCfgIfServerReturnWhenP2P)},push:function(t,n,r){if(this.current&&this.current.isP2P()){if(2===t.type)throw a.error("P2P do not allow audio_mixer"),"P2P do not allow audio_mixer";t instanceof this.AVPubstream&&!t.rtcId&&(this.current._cacheStreams["rtc-"+this.current.ticket.confrId+"__Caller"]||this.current._cacheStreams["rtc-"+this.current.ticket.confrId+"__Callee"]||(t.rtcId="rtc-"+this.current.ticket.confrId))}e.prototype.push.call(this,t,n,r)},newSession:function(t,n){var r=this,i=e.prototype.newSession.call(r,t,n),o=i.onTermC,u=i.onAnsC;return s.extend(i,{onInitC:function(e){if(t.isP2P()){if(e.rtcId==="rtc-"+t.ticket.confrId){var n=e.rtcId+(t.isCaller()?"__Callee":"__Caller");if((r=t._cacheStreams[n])&&r.owner&&r.owner.id!==e.memId)return t.rejectAnswer(e.memId,e.rtcId,10),void t.postMessage(t.newMessage({op:1001,memId:e.memId,tsxId:e.tsxId,result:-554,msg:"Other device call it. you no."}))}var r;e.pubS.sdp=e.sdp,e.pubS.cands=e.cands,e.pubS.id=e.rtcId+(t.isCaller()?"__Callee":"__Caller"),e.pubS._located=!1,e.pubS.memId=e.memId,e.pubS.rtcId=e.rtcId,e.pubS.sver=0,(r=t._cacheStreams[e.pubS.id])&&(e.pubS.sver=r.sver+1,s.removeAttribute(t._maybeNotExistStreams,e.pubS.id)),t.onPub.call(t,++t._cver,e.memId,e.pubS)}},onTermC:function(e){if(t.isP2P()){if(-20===e.endReason){var n=t._cacheStreams[e.rtcId+"__Caller"];return a.warn("Begin re-publish. 20",n),void(n&&r._republish(n))}if(e.memId&&e.memId!==t.getMemberId()){var i=[];return s.forEach(t._cacheStreams,(function(e,t){i.push(t)})),i=i.sort((function(e,n){var r=-1;return e.id>n.id&&(r=1),t.isCallee()?0-r:r})),void s.forEach(i,(function(n,r){r&&r.owner&&r.owner.id===e.memId&&e.rtcId===r.rtcId&&(-10!==e.endReason&&o.call(t,e),e.rtcId==="rtc-"+t.ticket.confrId&&t.onUnpub(++t._cver,e.memId,r.id),10===e.endReason&&t.onEvent(new c.OtherDeviceAnswer({rtcId:e.rtcId,stream:r}))),r&&r.owner&&r.owner.id===t.getMemberId()&&e.rtcId===r.rtcId&&(t.closeWebrtc(e.rtcId),t.onUnpub(++t._cver,r.owner.id,r.id))}))}-10!==e.endReason&&o.call(t,e),10===e.endReason&&t.onEvent(new c.OtherDeviceAnswer({rtcId:e.rtcId}))}else o.call(t,e)},onAnsC:function(e){if(t.isP2P())if(t.__cache_[e.rtcId]){if(!0===t.__cache_[e.rtcId].answered)return a.warn("Webrtc ",e.rtcId,"had been ansC"),t.rejectAnswer(e.memId,e.rtcId,10),void t.postMessage(t.newMessage({op:1001,memId:e.memId,tsxId:e.tsxId,result:-554,msg:"Other device sub it. you no."}));try{if(e.pubS){var n=t.newStream(e.pubS);n.updateAttributes({_webrtc:t._ices[e.rtcId],rtcId:e.rtcId,id:e.rtcId+(t.isCaller()?"__Callee":"__Caller"),owner:t._cacheMembers[e.memId]}),t._cacheStreams[n.id]?t._cacheStreams[n.id]=n:t.onPub.call(t,++t._cver,e.memId,n),t.onEvent(new c.SubSuccess({stream:n,hidden:!0}))}var r=t._cacheMembers[e.memId];u.call(t,e),s.forEach(t._cacheMembers,(function(n,i){n!==e.memId&&r.memName===i.memName&&t.rejectAnswer(n,e.rtcId,10)}))}finally{t.__cache_[e.rtcId].answered=!0}}else a.warn("Webrtc ",e.rtcId,"not created. drop the answer");else u.call(t,e)}})}})}(e,function(e){var t=e.extend({postMessage:function(t,n){var r=this,i=t.tsxId;t.tsxId||(i=t.tsxId="MSG"+Date.now()+"-"+emedia.__session_globalCount++),e.prototype.postMessage.call(r,t,n),function(e){r.owner.isP2P()&&r._callbacks[e]&&setTimeout((function(){var t=r._callbacks[e];if(t&&1004===t.op){var n=r.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,result:0,msg:"3000ms not recv response. will success callback. "+t.tsxId});r.onMessage(n)}}),3e3)}(i)},__modifyMessageForPost:function(t){var n=this;t=e.prototype.__modifyMessageForPost.call(n,t);var r=n.owner;if(r.isP2P()){if(102===t.op||105===t.op){var i=n.newMessage({op:1001,tsxId:t.tsxId,memId:t.memId,result:0,streamId:t.rtcId+(r.isCaller()?"__Caller":"__Callee"),sver:1});if(setTimeout((function(){n.onMessage(i)}),100),!t._cached_){var a=s.extend({_cached_:!0},t);s.removeAttribute(a,"tsxId"),102===t.op&&(r.__cache_[t.rtcId]=[]).push(a),105===t.op&&r.__cache_[t.rtcId]&&r.__cache_[t.rtcId].push(a),r.__cache_[t.rtcId]&&(r.__cache_[t.rtcId].selfId=r.getMemberId())}}switch(s.removeAttribute(t,"_cached_"),t.memId&&(t=n.newMessage({op:1004,sessId:s.removeAttribute(t,"sessId"),memId:s.removeAttribute(t,"memId"),tsxId:s.removeAttribute(t,"tsxId"),arg:(0,o.default)(t)})),t.op){case 205:return i=n.newMessage({op:1001,tsxId:t.tsxId,result:0}),void setTimeout((function(){n.onMessage(i)}),50);case 102:case 104:case 105:case 106:case 107:if(-10===t.endReason)return;case 1001:case 400:t=n.newMessage({op:1004,sessId:s.removeAttribute(t,"sessId"),tsxId:s.removeAttribute(t,"tsxId"),arg:(0,o.default)(t)});break;case 303:case 206:return}}return t},onP2PMessage:function(e){var t=this,n=t.owner;if(t.owner.isConfr())a.warn("Recv p2p ctrl message. when CONFR. ignore");else{var r=JSON.parse(e.arg);if(r.memId=e.memId,r.tsxId=e.tsxId,r.sessId=e.sessId,400===r.op&&(r.streamId=r.rtcId+(t.owner.isCaller()?"__Callee":"__Caller")),1001!==r.op){var i=t.newMessage({op:1001,tsxId:e.tsxId,memId:e.memId,sessId:e.sessId,result:0,msg:"Web sdk success recv"});102!==r.op&&105!==r.op||s.extend(i,{streamId:r.rtcId+(n.isCaller()?"__Callee":"__Caller"),sver:1}),t.postMessage(i)}!function(e){setTimeout((function(){t.onMessage(e)}),10)}(r)}}});return s.extend(t.prototype._events,{1004:"onP2PMessage"}),t}((e.prototype.Session||n(149)).extend({})),function(e){return e.extend({__init__:function(){e.prototype.__init__.call(this),this.__cache_={};var t=this.iceRebuild;this.iceRebuild=function(e){this.isP2P()&&e.rtcId?e._webrtc&&!0===e._webrtc.answerWebrtc?a.warn("Stream not auto iceRebuild. caused by answer webrtc. it = ",e.id,e):e.located()?t.call(this,e):a.warn("Stream not auto iceRebuild. caused by not located. it = ",e.id,e):t.call(this,e)}},onEnter:function(t,n){var r=this;try{e.prototype.onEnter.call(r,t,n)}finally{if(!r.isP2P()||!(n=r._cacheMembers[n.id]))return;s.forEach(r.__cache_,(function(e,t){!0!==t.answered&&s.forEach(t,(function(e,t){!function(e){e.memId=n.id,r.postMessage(e)}(t)}))}))}},rejectAnswer:function(e,t,n,r){var i=this,o=i.newMessage().setOp(107).setRtcId(t).setMemId(e).setEndReason(n);i.postMessage(o,(function(e){if(0!=e.result)return i.onEvent(new c.RspFail({request:o,response:e})),void(r&&r(new c.RspFail({request:o,response:e})))}))},closeWebrtc:function(t,n,r){var i=this,o=!1;if(i.isP2P()){var c=i._ices[t];c&&(o=(o="failed"===c.iceConnectionState())&&c._rebuildCount<emedia.config.iceRebuildCount,a.warn("Webrtc state failed. it is ",t,c._rebuildCount,emedia.config.iceRebuildCount,c.__id))}if(e.prototype.closeWebrtc.call(i,t,n,r||o),i.isP2P()&&!r&&o&&s.forEach(i._cacheStreams,(function(e,n){n.rtcId===t&&(i._linkedStreams[e]=n,a.warn("Reput stream to _linkedStreams",e))})),i.isP2P()&&!n){s.removeAttribute(i.__cache_,t);var u=s.extend({},i._cacheStreams);s.forEach(u,(function(e,n){if(t===n.rtcId){s.removeAttribute(i._linkedStreams,n.id);var r=s.removeAttribute(i._cacheStreams,n.id);i._streamAutomators&&s.removeAttribute(i._streamAutomators,n.id),a.warn("P2P close webrtc. remove stream from _cacheStreams. it = ",n.id,n),r._localMediaStream&&i._service._stopTracks(r._localMediaStream),i.onRemoveStream&&(n=i.newStream(n),i.onRemoveStream(n))}}))}},subscribeStream:function(t,n,r,i){if(this.isP2P()){var o=this._ices[t],s=this._cacheStreams[n];if(s.updateAttributes({_webrtc:o,rtcId:t}),i=i||{subSVideo:!0,subSAudio:!0},s.updateAttributes({subArgs:s.subArgs||{subSVideo:!0,subSAudio:!0}}),s._webrtc&&s._webrtc.setSubArgs(s._webrtc.subArgs||{subSVideo:!0,subSAudio:!0}),!s.subArgs.subSVideo&&i.subSVideo&&s.voff)throw a.error("Sub not allow. stream voff"),"Sub not allow. stream voff";if(!s.subArgs.subSAudio&&i.subSAudio&&s.aoff)throw a.error("Sub not allow. stream aoff"),"Sub not allow. stream aoff";if(s.subArgs.subSVideo&&!i.subSVideo&&!s.voff&&emedia.isSafari)throw a.error("Sub not allow. safari close sub video. will error"),"Sub not allow. safari close sub video. will error";i&&s._webrtc&&s._webrtc.setSubArgs(i),i&&s.updateAttributes({subArgs:i});var u=new c.SubSuccess({stream:s,hidden:!0});this._updateRemoteStream(s,s._webrtc.getRemoteStream()),this.onEvent(u)}else e.prototype.subscribeStream.call(this,t,n,r,i)},unsubscribeStream:function(t){this.isP2P()||e.prototype.unsubscribeStream.call(this,t)},onPub:function(t,n,r){if(this.isP2P())return e.prototype.onPub.call(this,t,n,r);e.prototype.onPub.call(this,t,n,r)},onStreams:function(t,n){this.isP2P()?a.warn("P2P ingrone the onStreams"):e.prototype.onStreams.call(this,t,n)},_howDoWebrtcWhenCrtExsitsWebrtc:function(t){this.isP2P()?this.closeWebrtc(t.getRtcId(),!0,!0):e.prototype._howDoWebrtcWhenCrtExsitsWebrtc.call(this,t)},createWebrtcAndSubscribeStream:function(t,n,r,i){if((o=this).isP2P()){var o;n||(n={});var u=(o=this)._cacheStreams[t],d=o._cacheMembers[u.owner.id],l=u;i=i||l.subArgs||{subSVideo:!0,subSAudio:!0};var f=u.vcodes,p=d.vcodes,h=o.supportVCodes,m=o._getOptimalVideoCodecsSubset(f,p,h);i=i||l.subArgs;var v=l.subArgs,b=!(l.vcodes&&l.vcodes.length>0),g={offerToReceiveAudio:!0,offerToReceiveVideo:i.subSVideo&&b};g.offerToReceiveAudio||g.offerToReceiveVideo||a.warn("offerToReceiveAudio == false and offerToReceiveVideo == false");var _=o.createWebrtc({_rtcId:l.rtcId,iceServerConfig:r,optimalVideoCodecs:m,offerOptions:g,onGotMediaStream:function(e){var t=new c.SubSuccess({stream:l,hidden:!0});n.onGotRemote&&n.onGotRemote(l),o.onEvent&&o.onEvent(t)}},l.iceRebuildCount),y=_.getRtcId();a.warn(y," sub stream ",t,m);var w=l._webrtc;if(l.updateAttributes({_webrtc:_,rtcId:y,owner:s.extend({},d)}),o._ices[y]=_,_.answerWebrtc=!0,i&&l._webrtc&&l._webrtc.setSubArgs(i),i&&l.updateAttributes({subArgs:i}),y==="rtc-"+o.ticket.confrId){o.__lastCalleePub;var S=o._cacheStreams[y+(o.isCaller()?"__Caller":"__Callee")];S=new o._service.AVPubstream(S||{constaints:{audio:!l.aoff,video:!l.voff}}),w&&w.getLocalStream()&&o._service._stopTracks(w.getLocalStream()),o._service.openUserMedia(S).then((function(){var e=o.newStream(S);e.updateAttributes({_localMediaStream:S.localStream,_webrtc:_,rtcId:_.getRtcId(),id:y+(o.isCaller()?"__Caller":"__Callee"),owner:{id:o.getMemberId(),nickName:o.nickName,name:o.sysUserId,ext:o.extObj}}),o.onEvent(new c.PushSuccess({stream:e,hidden:!0})),x(S.localStream),o.answerCall(y,S,A)}),A)}else x(),o.answer(y,A)}else e.prototype.createWebrtcAndSubscribeStream.call(o,t,n,r,i);function A(e){a.warn("sub stream error",t,e),v&&l._webrtc&&l._webrtc.setSubArgs(v),v&&l.updateAttributes({subArgs:v}),e=new c.SubFail({stream:l,hidden:!0===e.hidden,cause:e}),n&&n.onEvent&&n.onEvent(e),o.onEvent&&o.onEvent(e)}function x(e){e&&_.setLocalStream(e),_.setRemoteDescription(l.sdp),l.cands&&l.cands.length>0&&_.addIceCandidate(l.cands)}}})}((e.prototype.Attendee||n(153)).extend({})))}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.outer=void 0;var r=p(n(142)),i=p(n(115)),o=p(n(145)),s=p(n(80)),a=p(n(152)),c=p(n(8)),u=p(n(2)),d=n(167),l=p(n(146)),f=p(n(5));function p(e){return e&&e.__esModule?e:{default:e}}var h={};function m(t){if(t&&0!=(0,s.default)(t).length)if(t.key){var n=t.key,r=t.val,i=t.success,o=t.error,a=t.type;if(this.__current_confrId){var c=this._confrs[this.__current_confrId].roleToken;if(c){var d={roleToken:c,cattrs:[{key:n,val:r,op:a}]};e.ajax({type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/confr/attrs/update",data:(0,u.default)(d),contentType:"application/json",success:function(e){i&&"function"==typeof i&&i(e)},error:function(e){o&&"function"==typeof o&&o(e)}})}else console.warn("roleToken is not have")}else console.warn("please set_confr_attrs after joined")}else console.warn("options.key is not have");else console.warn("options is not have")}function v(t,n){var r={type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/confr/attrs/update",data:(0,u.default)({roleToken:t,cstate:{muteAll:n}}),contentType:"application/json"};return new c.default((function(t,n){e.ajax((0,a.default)({},r,{success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}}))}))}d.single.onMemberJoin=function(e,t){emedia.decodeMemeberName(e),this.onMemberJoined(e,d.single._confr(t))},d.single.onMemberLeave=function(e,t,n){emedia.decodeMemeberName(e),this.onMemberExited(e,t,d.single._confr(n))},d.single._onRoleUpdated=function(e,t){this.onRoleChanged(e,d.single._confr(t))},d.single._onAddMemberStream=function(e,t){e&&emedia.decodeMemeberName(e.owner),this.onStreamAdded(e.owner,e,d.single._confr(t))},d.single._onRemoveMemberStream=function(e,t){e&&emedia.decodeMemeberName(e.owner),this.onStreamRemoved(e.owner,e,d.single._confr(t))},d.single._onUpdateMemberStream=function(e,t,n){e&&emedia.decodeMemeberName(e.owner),this.onStreamUpdated&&this.onStreamUpdated(e.owner,e,t,d.single._confr(n))},d.single.onExit=function(e,t,n){this.onConferenceExit(e,t,d.single._confr(n))},h.onMemberJoined=function(e){},h.onMemberExited=function(e,t){},h.onRoleChanged=function(e){},h.onStreamAdded=function(e,t){},h.onStreamRemoved=function(e,t){},h.onConferenceExit=function(e,t){},h.joinConferenceWithTicket=d.single.joinUseTicket,h.joinConference=d.single.joinUsePassword,h.getConferenceTkt=d.single.reqTkt,h.publish=function(e,t,n){return d.single.shareVideoWithAudio(e.video,e.audio,t,n)},h.unpublish=function(e){return d.single.hungup(e)},h.unsubscribe=function(e){return d.single.hungup(e)},h.exitConference=function(e){return d.single.exit(e||!1)},h.getConferenceInfo=function(e,t){return d.single.selectConfr(e,t)},h.createConference=d.single.createConfrSptMnPrg,h.grantRole=function(e,t,n){return d.single.chanageRoles(n,t,e.id)},h.degradeRole=function(t,n,r){if(t)if(n&&n instanceof Array!=0&&0!=n.length){if(r){var i=this._confrs[t];if(i){var o=i.role,s=i.roleToken;if(!(Number(r)>=Number(o))){var d={type:"POST",url:emedia.config.restPrefix+"/easemob/rtc/role/degrade",data:(0,u.default)({roleToken:s,uids:n,role:r}),contentType:"application/json"};return new c.default((function(t,n){e.ajax((0,a.default)({},d,{success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}}))}))}console.warn("only degradeRole,oldRole: "+o+" >>> toRole: "+r)}else console.warn("confr is not exist")}}else console.warn("members is must Array also length > 0")},h.kickMembersById=function(e,t){return d.single.kickMember(t,e.id)},h.destroyConference=function(e){return d.single.disbandConfr(e,e.roleToken)},h.setConferenceAttrs=function(e){e.type="UPDATE",m.call(this,e)},h.deleteConferenceAttrs=function(e){e.type="DEL",m.call(this,e)},h.onConfrStateUpdated=function(e){var t=this,n=this.__current_confrId;if(n){var r=this._services[n];if(r){var i=r.current;i&&i.role&&i.role!=this.Role.ADMIN&&function(){var n=e.muteAll;if(void 0!==n){if(void 0===t._temp_muteAll)t._temp_muteAll=n;else{if(n===t._temp_muteAll)return;t._temp_muteAll=n}n?t.onMuteAll&&"function"==typeof t.onMuteAll&&t.onMuteAll():t.onUnMuteAll&&"function"==typeof t.onUnMuteAll&&t.onUnMuteAll()}}()}}},h.joinRoom=function(){var t=(0,o.default)(r.default.mark((function t(n){var o,s,d,l,f,p,h,m,v,b,g,_,y,w,S,A,x,C,E,k;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=function(t){var n=emedia.config,r=n.restPrefix,i=n.appkey;if(!i)throw new Error("in joinRoom appkey is not defined");var o=r+"/"+i.split("#")[0]+"/"+i.split("#")[1]+"/conferences/room";return new c.default((function(n,r){var i={url:o,data:(0,u.default)(t),type:"POST",contentType:"application/json",success:function(e){e.error?r(e):n(e)},error:function(e){r(e)}};e.ajax(i)}))},s=this,d=function(t){var n=emedia.config.restPrefix+"/easemob/rtc/req/ticket?_ct="+(new Date).getTime();t.region&&(n+="&REGION="+t.region),t.confrId&&(n+="&CONFRID="+t.confrId);var r={type:"POST",url:n,data:(0,u.default)(t),contentType:"application/json",dataType:"json"};return new c.default((function(t,n){e.ajax((0,a.default)({},r,{success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}}))}))},l=n.roomName,f=n.password,p=n.role,h=n.config,m=this.identityName,v=this.identityToken,l){t.next=7;break}throw new Error("the roomName is required at joinRoom");case 7:if(f){t.next=9;break}throw new Error("the password is required at joinRoom");case 9:if(m){t.next=11;break}throw new Error("the memName is required at joinRoom");case 11:if(v){t.next=13;break}throw new Error("the token is required at joinRoom");case 13:if(p){t.next=15;break}throw new Error("the role is required at joinRoom");case 15:return b=(0,a.default)({roomName:l,password:f,memName:m,token:v},h),h&&h.supportWechatMiniProgram&&(b.useVCodes=["H264","VP8"]),t.next=19,o(b);case 19:return g=t.sent,_=g.confrId,y={uid:m,token:v,confrId:_,password:f,role:p,terminal:this._terminalInfo},t.next=24,d(y);case 24:return(w=t.sent).mixed=11===w.type||12===w.type,w.id=w.serverConfrId=w.confrId=_,this._confrs[_]=(0,i.default)(this._confrs[_]||{},w),S=w.ticket,x=(A=h||{}).nickName,C=A.ext,E=g.isCreator,t.next=33,s.joinConferenceWithTicket(_,S,(0,a.default)({nickName:x},C));case 33:return k=t.sent,E&&(k.isCreator=E),t.abrupt("return",k);case 36:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),h.requestToTalker=function(e){e?this._services[e].requestToTalker():console.warn("requestToTalker confrId is required")},h.requestToAdmin=function(e){e?this._services[e].requestToAdmin():console.warn("requestToTalker confrId is required")},h.muteBymemberId=function(e,t){e&&t?this._services[e].muteBymemberId(t):console.warn("muteBymemberId confrId and memberId is required")},h.unmuteBymemberId=function(e,t){e&&t?this._services[e].unmuteBymemberId(t):console.warn("muteBymemberId confrId and memberId is required")},h.muteAll=function(e){if(!e)throw new Error("muteAll confrId is required");var t=this._confrs[e];if(!t)throw new Error("confr is not exist");var n=t.role,r=t.roleToken;if(7!=n)throw new Error("only admin can action");if(!r)throw new Error("roleToken is not exist");return v.call(this,r,!0)},h.unmuteAll=function(e){if(!e)throw new Error("unmuteAll confrId is required");var t=this._confrs[e];if(!t)throw new Error("confr is not exist");var n=t.role,r=t.roleToken;if(7!=n)throw new Error("only admin can action");if(!r)throw new Error("roleToken is not exist");return v.call(this,r,!1)},h.addLive=function(t,n){if(!t)throw new Error("addLive confrId is required");if(!n)throw new Error("addLive liveCfg is required");var r=this._confrs[t];if(!r)throw new Error("confr is not exist");var i=r.role,o=r.roleToken;if(7!=i)throw new Error("only admin can addLive");if(!o)throw new Error("addLive roleToken is required");var s=emedia.config.restPrefix+"/easemob/rtc/livecfg",a={confrId:t,roleToken:o,liveCfg:n};return new c.default((function(t,n){e.ajax({url:s,type:"POST",data:(0,u.default)(a),contentType:"application/json",dataType:"json",success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}})}))},h.updateLiveLayout=function(t,n,r){if(!t)throw new Error("updateLiveLayout confrId is required");if(!n)throw new Error("updateLiveLayout liveId is required");if(!r)throw new Error("updateLiveLayout regions is required");var i=this._confrs[t];if(!i)throw new Error("confr is not exist");var o=i.role,s=i.roleToken;if(7!=o)throw new Error("only admin can updateLiveLayout");if(!s)throw new Error("updateLiveLayout roleToken is required");var a=emedia.config.restPrefix+"/easemob/rtc/live/layout",d={confrId:t,liveId:n,regions:r,roleToken:s};return new c.default((function(t,n){e.ajax({url:a,type:"POST",data:(0,u.default)(d),contentType:"application/json",dataType:"json",success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}})}))},h.deleteLive=function(t,n){if(!t)throw new Error("deleteLive confrId is required");if(!n)throw new Error("deleteLive liveId is required");var r=this._confrs[t];if(!r)throw new Error("confr is not exist");var i=r.role,o=r.roleToken;if(7==i){if(o){var s=emedia.config.restPrefix+"/easemob/rtc/delete/live",a={confrId:t,liveId:n,roleToken:o};return new c.default((function(t,n){e.ajax({url:s,type:"DELETE",data:(0,u.default)(a),contentType:"application/json",dataType:"json",success:function(e){0==e.error?t(e):n(e)},error:function(e){n(e)}})}))}console.error("updateLiveLayout roleToken is required")}else console.warn("only admin can deleteLive")},emedia.decodeMemeberName=function(e){if("function"!==typeof emedia.decodeMemeberNameString)return e;if("string"===typeof e)return emedia.decodeMemeberNameString(e);if(l.default.isArray(e)){for(var t=0;t<e.length;t++)e[t]=emedia.decodeMemeberName(e[t]);return e}return e.name?(e.globalName=e.name,void(e.memName=e.name=emedia.decodeMemeberName(e.name))):e.memName?(e.globalName=e.memName,void(e.memName=e.name=emedia.decodeMemeberName(e.memName))):void 0},emedia.ConfrType=d.single.ConfrType,emedia.Role=d.single.Role,emedia.StreamType=d.single.StreamType,(0,f.default)((function(){var e=window.WebIM;if(e&&e.conn&&"function"===typeof e.conn.onOpened){var t=function(){emedia.decodeMemeberNameString=function(t){if("string"===typeof t){if(t.indexOf(e.conn.orgName)<0)return t;var n=t.indexOf("_");n<0?n=0:n++;var r=t.indexOf("@");return r<0&&(r=t.length),t.substring(n,r)}return t},d.single.setIdentity(e.conn.orgName+"#"+e.conn.appName+"_"+e.conn.user,e.conn.token),emedia.config({appkey:e.conn.appKey,restPrefix:e.conn.apiUrl})},n=e.conn.onOpened;e.conn.onOpened=function(){n.apply(e.conn,arguments),t()},e.conn.token&&t()}})),t.outer=l.default.extend(d.single,h)}).call(this,n(5))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.single=void 0;var r=m(n(142)),i=m(n(145)),o=m(n(152)),s=m(n(88)),a=m(n(2)),c=(m(n(8)),m(n(87))),u=m(n(5)),d=m(n(146)),l=m(n(168)),f=n(172),p=n(274),h=m(n(157));function m(e){return e&&e.__esModule?e:{default:e}}var v,b=c.default.tagLogger("mgr");function g(){this._confrs={},this._services={},this._events={},this._videos={},this.dns_current=0,this.dns_urls=["https://rs.easemob.com","http://182.92.174.78","http://112.126.66.111"],this.restPrefixArr=[],this.restIndex=0}window.emedia=window.emedia||{},g.prototype.ConfrType={COMMUNICATION:10,COMMUNICATION_MIX:11,LIVE:12,P2P:13,INTERCOMM:14},g.prototype.Role={ADMIN:7,TALKER:3,AUDIENCE:1},g.prototype.StreamType={VIDEO:0,DESKTOP:1,MIXVIDEO:2},v={createConfr:"/easemob/rtc/req/ticket",reqTkt:"/easemob/rtc/req/ticket",chanageRoles:"/easemob/rtc/chanage/roles",disbandConfr:"/easemob/rtc/disband/conference",kickMember:"/easemob/rtc/kick/member",selectConfr:"/easemob/rtc/select/confr"},c.default.forEach(v,(function(e,t){g.prototype[e]=function(n){var r=t;r=r+"?_ct="+(new Date).getTime(),n.region&&(r=r+"&REGION="+n.region),n.confrId&&(r=r+"&CONFRID="+n.confrId);var i,o,s=this.createUrl(r,e);return i=s,o=n,function(e){u.default.ajax({type:"POST",url:i,data:(0,a.default)(o),contentType:"application/json",dataType:"json",success:function(t,n,r){b.debug("REST: ",t," -> ",o,i),0===t.error?(c.default.removeAttribute(t,"error"),e.next(t),e.complete()):(c.default.extend(t,{errorType:"server_refuse"}),e.error(t))},error:function(t,n,r){var s={errorType:"http_error",error:t.status,errorMessage:r};b.debug("REST: ",s," -> ",o,i),e.error({errorType:"http_error",error:t.status,errorMessage:r})}})}}})),g.prototype.get_dns_config=function(){var t=this,n={url:this.dns_urls[this.dns_current]+"/easemob/server.json",dataType:"json",type:"GET",data:{app_key:encodeURIComponent(emedia.config.appkey)},success:function(e,n){var r=e.rest.hosts;r&&(t.restPrefixArr=r.filter((function(e){return"https"==e.protocol})),t.update_rest_prefix(),t.check_rest_prefix())},error:function(e,n,r){console.log("getHttpDNS error",e,r),t.dns_current++,t.dns_current<=t.dns_urls.length-1&&t.get_dns_config()}};b.info("get_dns_config options",n),e.ajax(n)},g.prototype.check_rest_prefix=function(){var t={grant_type:"password",password:"123456",timestamp:(new Date).getTime(),username:"e432598ea3a34ba8ba196df046efdf90"},n=this,r=emedia.config.appkey.split("#")[0],i=emedia.config.appkey.split("#")[1],o={url:emedia.config.restPrefix+"/"+r+"/"+i+"/token",data:(0,a.default)(t),type:"POST",contentType:"application/json",success:function(){b.info("check_rest_prefix success")},error:function(){b.error("check_rest_prefix error rest",emedia.config.restPrefix),n.restIndex++,n.restIndex<n.restPrefixArr.length&&(n.update_rest_prefix(),n.check_rest_prefix())}};e.ajax(o)},g.prototype.update_rest_prefix=function(){var e=this.restPrefixArr[this.restIndex],t=e.protocol+"://"+e.domain;emedia.config({restPrefix:t})},g.prototype.createUrl=function(e,t){return(emedia.config&&emedia.config.restPrefix||"")+e},g.prototype.setUrlCreator=function(e){this.createUrl=e.bind(this)},g.prototype.destroy=function(){},g.prototype.ZeroStream=h.default.extend({__init__:function(){this.type=2,this.id="0",this._located=!1,this.mutedMuted=!1},onGotRemoteMediaStream:function(e){if(!this.remotePlayAudioObject){this.id;var t=document.createElement("audio");t.style.display="none",t.id="__o_remote_play_audio_"+this.id,t.autoplay=!0,t.playsinline=!0,this.remotePlayAudioObject=t,document.body.appendChild(t)}this.remotePlayAudioObject.srcObject=e}}),g.prototype.setIdentity=function(e,t,n){emedia.config.isHttpDNS&&!window.WebIM&&this.get_dns_config(),this.identityName=e,this.identityToken=t,this.ext=n,this._terminalInfo={browser:emedia.browser,browserVersion:emedia.browserVersion,version:window._emediaVersion||emedia.config.version,userAgent:emedia.config.userAgent},b.info("set identity: ",e,t),this.destroy(),emedia.config({autoSub:!1,onlyEnter:!0})},g.prototype.EventsObservable=n(372).default;var _=(0,p.catchError)((function(e,t){throw b.error(e),e}));function y(e,t,n,r){var i=this,o=void 0,a=void 0;if(arguments.length>=0&&"object"===(0,s.default)(arguments[0])){var u=arguments[0];o=u.region,e=u.confrType,t=u.password,n=u.rec,r=u.recMerge,a=u.liveCfg}return"string"===typeof e&&(e=parseInt(e)),f.Observable.create(g.prototype.createConfr.call(i,{region:o,uid:i.identityName,token:i.identityToken,confrType:e,password:t,terminal:i._terminalInfo,rec:n,recMerge:r,liveCfg:a})).pipe((0,p.map)((function(e){return e.mixed=11===e.type||12===e.type,e.id=e.serverConfrId=e.confrId,i._confrs[e.confrId]=d.default.extend({},e),c.default.removeAttribute(e,"rtcCfg"),e})),_)}function w(e,t,n,r,i){var a=this,u={};if(arguments.length>=0&&"object"===(0,s.default)(arguments[0])){var l=arguments[0];u=(0,o.default)({uid:a.identityName,token:a.identityToken,terminal:a._terminalInfo},l)}else u={uid:a.identityName,token:a.identityToken,terminal:a._terminalInfo,confrType:e,password:t,rec:n,recMerge:r,supportWechatMiniProgram:i};return u.confrType&&(u.confrType=parseInt(u.confrType)),i&&(u.useVCodes=["VP8","H264"]),f.Observable.create(g.prototype.createConfr.call(a,u)).pipe((0,p.map)((function(e){return e.mixed=11===e.type||12===e.type,e.id=e.serverConfrId=e.confrId,a._confrs[e.confrId]=d.default.extend({},e),c.default.removeAttribute(e,"rtcCfg"),e})),_)}function S(e,t){var n,r=this;if(arguments.length>=0&&"object"===(0,s.default)(arguments[0])){var i=arguments[0];e=i.confrId,t=i.password,n=i.role}var o=r._confr(e),a={uid:r.identityName,token:r.identityToken,confrId:o&&o.id||e,password:t,role:n,terminal:r._terminalInfo};return r._confrs[e]&&(a.roleToken=r._confrs[e].roleToken),f.Observable.create(g.prototype.reqTkt.call(r,a)).pipe((0,p.map)((function(t){return t.mixed=11===t.type||12===t.type,t.id=t.serverConfrId=t.confrId=e,r._confrs[e]=c.default.extend(r._confrs[e]||{},t),c.default.removeAttribute(t,"rtcCfg"),t})),_)}function A(e,t,n){var r=this._confr(n),i=this._service(n),o={confrId:r&&r.id||n,uids:t,role:e,roleToken:r.roleToken};return f.Observable.create(g.prototype.chanageRoles.call(this,o)).pipe((0,p.map)((function(e){return i&&i.current&&i.current._sysCopy(),r.id})),_)}function x(e,t){var n=this,r=n._confr(e),i={confrId:r&&r.id||e,roleToken:r&&r.roleToken||t};return f.Observable.create(g.prototype.disbandConfr.call(n,i)).pipe((0,p.map)((function(t){return setTimeout((function(){n.upload_stats&&(n.upload_stats.stop(),delete n.upload_stats)}),3e3),c.default.removeAttribute(n._confrs,e),r.id})),_)}function C(e,t){var n=this._confr(t),r={confrId:n&&n.id||t,uids:e,roleToken:n.roleToken};return f.Observable.create(g.prototype.kickMember.call(this,r)).pipe((0,p.map)((function(e){return n.id})),_)}function E(e,t){var n=this._confr(e),r={uid:this.identityName,token:this.identityToken,confrId:n&&n.id||e,password:t};return n&&(r.password=t||n.password,r.roleToken=n.roleToken),f.Observable.create(g.prototype.selectConfr.call(this,r)).pipe(_)}function k(e,t){}function I(e,t){var n=this,r=n._confr(e),i=n._service(e);switch(r.type){case 0:case 10:case 11:break;case 12:var o=new n.ZeroStream;if(i.current._cacheStreams[o.id]=o,i.current.role==$.Role.AUDIENCE)return z.call(n,e,o,!1,!0).pipe((0,p.concatMap)((function(){return(0,f.of)(c.default.extend({},n._confrs[e]))})));break;case 13:case 14:default:return(0,f.throwError)("not support conf type: "+r.type)}return(0,f.of)(c.default.extend({},n._confrs[e]))}function T(e,t,n){var r=this;return emedia.ctrl.support(n,(function(t,n,i){r.onHasRemoteControl(t,n,i,e)}),(function(t,n,i){r.onRemoteFreeControl(t,n,i,e)})),b.info("support remote control. ",e,t),(0,f.of)(c.default.extend({},r._confrs[e]))}function R(e,t,n){var r=this;if(r.joined(e))return(0,f.throwError)("had joined confr "+e+", if you want join again, please call exitConference");var i=r._events[e]=new r.EventsObservable(r,e,(function(t){k.call(r,e,t)}));r.confrEventsObserver&&i.subscribe(r.confrEventsObserver);var o=r._service(e);return(o=r._services[e]=new emedia.XService({listeners:i,nickName:n&&n.nickName})).setup(t,n),f.Observable.create((function(t){if(emedia.config.uploadStats){r.upload_stats=new l.default(emedia);try{r.upload_stats.connect_ws()}catch(n){console.error("upload_stats.connect_ws error",n)}}o.join((function(n){if(r.upload_stats){var i=o.current._session._sessionId;r.upload_stats.join_success(i)}r.__current_confrId=e,r._confrs[e].joinId=n,r._confrs[e].role=o.current&&o.current.role,t.next(r._confrs[e]),t.complete()}),(function(e){r.upload_stats&&r.upload_stats.join_fail(),o.exit(),t.error({errorType:"join_fail",error:-200,errorMessage:e.message()})}))})).pipe((0,p.concatMap)((function(t,n){return T.call(r,e,t,o)})),(0,p.concatMap)((function(t,n){return I.call(r,e,t)})),_)}function M(e,t,n){var r=this;return S.call(r,e,t,n).pipe((0,p.concatMap)((function(t,i){return R.call(r,e,t.ticket,n)})))}function O(e,t,n){var r=this;return E.call(r,e,t,n).pipe((0,p.concatMap)((function(i,o){return M.call(r,e,t,n)})))}function P(e,t){var n=this._service(e);return f.Observable.create((function(e){n.openUserMedia(t).then((function(){e.next(t),e.complete()}),(function(t){e.error({errorType:"open_user_media_fail",error:-201,errorMessage:t.message()})}))})).pipe(_)}function j(e,t){var n=this._service(e);return f.Observable.create((function(e){n.push(t,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"push_fail",error:-203,errorMessage:t.message()})}))})).pipe(_)}function N(e,t,n){this._confr(n);var r=this._service(n);return(e="string"===typeof e?r.getStreamById(e):r.getStreamById(e.id))?t?d.default.isEqual(t,e.constaints.video)?B.call(this,n,e,0):L.call(this,n,e,t):B.call(this,n,e,1):(0,f.throwError)("pub stream not exsits. it is "+e)}function D(e,t){if(this.upload_stats&&e&&t){var n=this._services[this.__current_confrId].current;if(n){var r={event:e,rtcId:t.rtcId,sId:t.id,sessionId:n._session._sessionId,streamType:t.type,voff:t.voff,aoff:t.aoff};this.upload_stats.upload_event(r)}}}function B(e,t,n){var r=this,i=r._service(e);return f.Observable.create((function(e){i.voff(t,n,(function(t){e.error({errorType:"voff_fail",error:-203,errorMessage:t.message()})}),(function(){var o=i.getStreamById(t.id);e.next(o),e.complete();var s=1==n?8:6;D.bind(r)(s,o)}))})).pipe(_)}function L(e,t,n){var r=this._service(e);return f.Observable.create((function(e){var i={};d.default.isObject(t.constaints)&&(i=c.default.extend(!0,{},t.constaints)),i.video=n,r.chanageConstraints(t,i,(function(t){e.error({errorType:"ChanageVideoConstraints_fail",error:-203,errorMessage:t.message()})}),(function(){e.next(r.getStreamById(t.id)),e.complete()}))})).pipe(_)}function V(e,t,n){var r=this._confr(n),i=this._service(n);return(e="string"===typeof e?i.getStreamById(e):i.getStreamById(e.id))?r.type!==this.ConfrType.COMMUNICATION_MIX&&r.type!==this.ConfrType.LIVE||1!==e.type||t?U.call(this,n,e,t):(b.warn("confr mix. not allow desktop with audio."),(0,f.throwError)("confr mix. not allow desktop with audio.")):(0,f.throwError)("pub stream not exsits. it is "+e)}function U(e,t,n){var r=this,i=r._service(e);return f.Observable.create((function(e){i.aoff(t,n,(function(t){e.error({errorType:"aoff_fail",error:-203,errorMessage:t.message()})}),(function(){var o=i.getStreamById(t.id);e.next(o),e.complete();var s=1==n?7:5;D.bind(r)(s,o)}))})).pipe(_)}function F(e,t,n,r){var i=this,o=i._confr(e),s=i._service(e);if(s.current.role==i.Role.AUDIENCE)return(0,f.throwError)("Audience not allow publish");if(o.av)return(0,f.throwError)("Audio and video stream has been published. not allow repeat publish.");var a=o.mixed?s.AudioMixerPubstream:s.AVPubstream,u=o.av=new a({constaints:t,aoff:0,voff:0,ext:r});return P.call(i,o.id,u).pipe((0,p.concatMap)((function(e){return n&&c.default.targetDOM(n)&&attachMediaStream(n,e.localStream),j.call(i,o.id,e,r)})),(0,p.map)((function(e){return o.av=e,n&&i.streamBindVideo(o.av,n),o.type==i.ConfrType.LIVE&&i.hungup(0),c.default.extend({},e)})),(0,p.catchError)((function(e,t){throw o.av&&i.hungup(o.av),o.av=void 0,b.error(e),e})))}function G(e){var t=this._confr(e),n=this._service(e);return n.current.role==this.Role.AUDIENCE?(0,f.throwError)("Audience not allow publish"):f.Observable.create((function(e){n.switchMobileCamera(t.av,(function(t){e.error({errorType:"switch_camera_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(_)}function W(e){var t=this._confr(e),n=this._service(e);return n.current.role==this.Role.AUDIENCE?(0,f.throwError)("Audience not allow publish"):f.Observable.create((function(e){n.chanageCamera(t.av,(function(t){e.error({errorType:"switch_camera_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(_)}function q(e){var t=e.confrId,n=e.constaints,r=e.videoTag,i=e.ext,o=e.stopSharedCallback,s=this,a=s._confr(t),u=s._service(t);if(u.current.role==s.Role.AUDIENCE)return(0,f.throwError)("Audience not allow publish");if(a.desktop)return(0,f.throwError)("desktop stream has been published. not allow repeat publish.");if((a.type===s.ConfrType.COMMUNICATION_MIX||a.type===s.ConfrType.LIVE)&&n.audio)return b.warn("confr mix. not allow desktop with audio."),(0,f.throwError)("confr mix. not allow desktop with audio.");n.audio||!a.av||a.av.aoff||b.warn("repeat audio. desktop and av");var d=a.desktop=new u.ShareDesktopPubstream({screenOptions:n.video&&n.video.screenOptions||["screen","window","tab"],mandatory:n.video&&n.video.mandatory||{},vbitrate:n.video&&n.video.bitrate,abitrate:n.audio&&n.audio.bitrate,aoff:n.audio?0:1,ext:i,onMediaInactive:function(){"function"==typeof o&&o()}});return P.call(s,a.id,d).pipe((0,p.concatMap)((function(e){return r&&c.default.targetDOM(r)&&attachMediaStream(r,e.localStream),j.call(s,a.id,e,i)})),(0,p.map)((function(e){return a.desktop=e,r&&c.default.targetDOM(r)&&s.streamBindVideo(a.desktop,r),c.default.extend({},e)})),(0,p.catchError)((function(e,t){throw a.desktop=void 0,b.error(e),e})))}function z(e,t,n,r,i){var o=this,s="string"===typeof t?t:t.id,a=o._confr(e),u=o._service(e);return 2===t.type&&1==r&&0!=t.id&&(r=!1,b.warn("Mixed audio stream. not allow repeat sub audio. force reset subSAudio = false")),i&&c.default.targetDOM(i)&&o.streamBindVideo(s,i),f.Observable.create((function(e){u.subscribe(s,(function(t){try{if("0"!=s){var n=u.getStreamById(s),r={video:n.subArgs?n.subArgs.subSVideo:!n.voff,audio:n.subArgs?n.subArgs.subSAudio:!n.aoff};2===n.type&&(r.audio=!0),o._onMemberMediaChanaged(n.owner,n,r,a.confrId)}}finally{e.next(t),e.complete()}}),(function(t){e.error({errorType:"sub_fail",error:-203,errorMessage:t.message()})}),{subSVideo:n,subSAudio:r})})).pipe(_)}function Q(e,t,n){var r=this,i=r._service(n);e=i.current._cacheStreams["string"===typeof e?e:e.id];var o=t||r.crtAndReturnVideo(e.owner,e);if(o){r._videos[e.id]=o,o.setAttribute("autoplay","autoplay"),o.setAttribute("playsinline","playsinline"),o.setAttribute("hx_stream",e.id),e.aoff?o.setAttribute("aoff","aoff"):o.removeAttribute("aoff"),e.voff?o.setAttribute("voff","voff"):o.removeAttribute("voff"),e.ifMediaStream((function(e){o&&attachMediaStream(o,e),o.hasAttribute("flow")&&r.onMediaTransmission(o,(function(e,t,n,r){(0,u.default)(o).trigger("onMediaTransmission",[e,t,n,r])}))}));var s=(0,u.default)(o);s.off("hungup"),s.on("hungup",(function(t,i,o){r.hungup(e,n),o&&o()})),s.off("subscribe"),s.on("subscribe",(function(t,i,o,s,a){e.located()?s&&s("local stream not allow sub"):(i=e.subArgs&&e.subArgs.subSVideo||!0,o=e.subArgs&&e.subArgs.subSAudio||!0,r.subscribe(e.owner,e,i,o,n).then(a).catch(s))})),s.off("pauseVideo"),s.on("pauseVideo",(function(t,o,a){(e=i.current._cacheStreams["string"===typeof e?e:e.id]).located()?(s[0].__constaints_video=e.constaints&&e.constaints.video,r.pauseVideo(e,n).then(a).catch(o)):r.subscribe(e.owner,e,!1,e.subArgs&&e.subArgs.subSAudio||!e.aoff,n).then(a).catch(o)})),s.off("resumeVideo"),s.on("resumeVideo",(function(t,o,a,c){(e=i.current._cacheStreams["string"===typeof e?e:e.id]).located()?(void 0===c&&(void 0!==(c=s[0].__constaints_video)&&null!=c||(c=!0)),s[0].__constaints_video=void 0,r.resumeVideo(e,c,n).then(a).catch(o)):r.subscribe(e.owner,e,!0,e.subArgs&&e.subArgs.subSVideo||!e.voff,n).then(a).catch(o)})),s.off("pauseAudio"),s.on("pauseAudio",(function(t,i,o){e.located()?r.pauseAudio(e,n).then(o).catch(i):r.subscribe(e.owner,e,e.subArgs.subSVideo,!1,n).then(o).catch(i)})),s.off("resumeAudio"),s.on("resumeAudio",(function(t,i,o){e.located()?r.resumeAudio(e,n).then(o).catch(i):r.subscribe(e.owner,e,e.subArgs.subSVideo,!0,n).then(o).catch(i)})),s.off("remoteControl"),s.on("remoteControl",(function(t,i,s,a,c,u,d,l){if(e.located())throw b.error("not allow remote control at local"),"not allow remote control at local";r.remoteControl(e,o,o,i,s,a,c,u,d,l,n)})),s.off("chanageCamera"),s.on("chanageCamera",(function(e,t,i){r.chanageCamera(n).then(i).catch(t)})),s.off("captureVideo"),s.on("captureVideo",(function(e,t,i,s){var a=r.captureVideo(o,i,s,n);t&&t(a)})),s.off("capturePictureRemote"),s.on("capturePictureRemote",(function(t,i,o){r.capturePictureRemote(e,!1,n).then(o).catch(i)})),s.off("freezeFrameRemote"),s.on("freezeFrameRemote",(function(t,i,o){r.freezeFrameRemote(e,n).then(o).catch(i)})),s.off("zoomRemote"),s.on("zoomRemote",(function(t,i,o,s){r.zoomRemote(e,i,n).then(s).catch(o)})),s.off("torchRemote"),s.on("torchRemote",(function(t,i,o,s){r.torchRemote(e,i,n).then(s).catch(o)})),s.off("freeRemoteControl"),s.on("freeRemoteControl",(function(t,i,o){try{r.freeRemoteControl(e,n)}finally{o&&o()}}));var a={video:!e.voff,audio:!e.aoff,voff:e.voff,aoff:e.aoff};e.located()||(a={video:e.subArgs?e.subArgs.subSVideo:!e.voff,audio:e.subArgs?e.subArgs.subSAudio:!e.aoff,voff:e.voff,aoff:e.aoff}),s.trigger("onMediaChanaged",[a,e,e.owner,n]),o.getAttribute("sound")&&(i.current._monitSoundChanagedStreams=i.current._monitSoundChanagedStreams||{},i.current._monitSoundChanagedStreams[e.id]=e.id)}}function X(e,t,n,r){"string"!==typeof t&&(t=t.id),this._confr(e);var i=this._service(e);return f.Observable.create((function(e){i.focusExpoRemote(t,n,r,(function(t){e.error({errorType:"focusexpo_remote_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(_)}function Y(e,t,n){"string"!==typeof t&&(t=t.id),this._confr(e);var r=this._service(e);return f.Observable.create((function(e){r.capturePictureRemote(t,n,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"capture_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(_)}function H(e,t,n){"string"!==typeof t&&(t=t.id),this._confr(e);var r=this._service(e);return f.Observable.create((function(e){r.zoomRemote(t,n,(function(t){e.error({errorType:"capture_remote_fail",error:-203,errorMessage:t.message()})}),(function(){e.complete()}))})).pipe(_)}function K(e,t,n){"string"!==typeof t&&(t=t.id),this._confr(e);var r=this._service(e);return f.Observable.create((function(e){r.torchRemote(t,n,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"torch_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(_)}function J(e,t){"string"!==typeof t&&(t=t.id),this._confr(e);var n=this._service(e);return f.Observable.create((function(e){n.freezeFrameRemote(t,(function(t){e.next(t),e.complete()}),(function(t){e.error({errorType:"freeze_remote_fail",error:-203,errorMessage:t.message()})}))})).pipe(_)}var Z=c.default.extend(new g,{_confr:function(e){return e||(e=this.__current_confrId),this._confrs[e]},_service:function(e){return e||(e=this.__current_confrId),this._services[e]},getStreamById:function(e,t){var n=this._service(t);return n&&n.getStreamById(e)},getMemberById:function(e,t){var n=this._service(t);return n&&n.getMemberById(e)},streamBindVideo:function(e,t,n){Q.call(this,e,t,n)},getBindVideoBy:function(e){if("string"!==typeof e&&e&&e.id&&(e=e.id),"string"!==typeof e)throw b.error("Bad stream ",e),"Bad stream "+e;return this._videos[e]},createConfr:function(e,t,n,r){return y.apply(this,arguments).toPromise()},createConfrSptMnPrg:function(e,t,n,r){return w.apply(this,arguments).toPromise()},reqTkt:function(e,t){return S.apply(this,arguments).toPromise()},chanageRoles:function(e,t,n){return A.apply(this,arguments).toPromise()},disbandConfr:function(e,t){return x.apply(this,arguments).toPromise()},kickMember:function(e,t){return C.apply(this,arguments).toPromise()},selectConfr:function(e,t){return E.apply(this,arguments).toPromise()},joinUsePassword:function(e,t,n){return O.call(this,e,t,n).toPromise()},joinUseTicket:function(e,t,n){return R.call(this,e,t,n).toPromise()},joined:function(e){return e&&this._confrs[e]&&this._confrs[e].joinId},shareDesktopWithAudio:function(e){if(navigator.mediaDevices.getDisplayMedia&&!emedia.isElectron)return this.shareDesktopWithAudioNew(e);var t=e.videoConstaints,n=e.withAudio,r=e.videoTag,i=e.ext,o=e.confrId,s=e.sharedCallback,a=e.stopSharedCallback;c.default.targetDOM(r)||(o=i,i=r,r=void 0);var u={confrId:o,constaints:{video:t,audio:n},videoTag:r,ext:i,sharedCallback:s,stopSharedCallback:a};return q.call(this,u).toPromise()},shareDesktopWithAudioNew:function(){var e=(0,i.default)(r.default.mark((function e(t){var n,i,o,s,a,c,u,d,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.confrId,i=t.withAudio,o=t.ext,s=t.video,a=t.stopSharedCallback,n){e.next=3;break}throw new Error("shareDesktop confrId is required");case 3:return c={video:s||!0,audio:i},e.next=6,navigator.mediaDevices.getDisplayMedia(c);case 6:return(u=e.sent)._located=!0,d={localStream:u,type:1,aoff:i?0:1,voff:0,constaints:c,_located:!0},e.prev=9,e.next=12,j.call(this,n,d,o).toPromise();case 12:return l=e.sent,u.getVideoTracks()[0].addEventListener("ended",(function(){"function"==typeof a&&a(l.id)})),e.abrupt("return",l);case 17:e.prev=17,e.t0=e.catch(9);case 19:case"end":return e.stop()}}),e,this,[[9,17]])})));return function(t){return e.apply(this,arguments)}}(),changeCamera:function(e){return W.call(this,e).toPromise()},switchMobileCamera:function(e){return G.call(this,e).toPromise()},shareVideoWithAudio:function(e,t,n,r,i){c.default.targetDOM(n)||(i=r,r=n,n=void 0);var o={video:e,audio:t};return F.call(this,i,o,n,r).toPromise()},captureVideo:function(e,t,n,r){return this._service(r).captureVideo(e,t,n)},openUserMedia:function(e,t){var n=this._service(t);return f.Observable.create((function(t){n.__getUserMedia(e,(function(e,n){t.next(n),t.complete()}),(function(e){t.error(e)}))})).pipe(_).toPromise()},mediaDevices:function(e){return"function"===typeof e&&(e=void 0),f.Observable.create((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){for(var r=[],i=0;i!==n.length;++i){var o=n[i];o.deviceId,e||r.push(o),e&&e===o.kind?r.push(o):"audioinput"===o.kind||"audiooutput"===o.kind||"videoinput"===o.kind||b.info("Some other kind of source/device: ",o)}t.next(r),t.complete()})).catch((function(e){b.warn("navigator.getUserMedia error: ",e),t.error(e)}))})).pipe(_).toPromise()},resumeVideo:function(e,t,n){return N.call(this,e,t||!0,n).toPromise()},pauseVideo:function(e,t){return N.call(this,e,!1,t).toPromise()},resumeAudio:function(e,t){return V.call(this,e,!1,t).toPromise()},pauseAudio:function(e,t){return V.call(this,e,!0,t).toPromise()},freezeFrameRemote:function(e,t){return J.call(this,t,e).toPromise()},torchRemote:function(e,t,n){return K.call(this,n,e,t).toPromise()},zoomRemote:function(e,t,n){return H.call(this,n,e,t).toPromise()},capturePictureRemote:function(e,t){return Y.call(this,t,e,!1).toPromise()},focusExpoRemote:function(e,t,n,r){return X.call(this,r,e,t,n).toPromise()},onFocusExpoRemoteWhenClickVideo:function(e,t,n,r){var i=this;return"function"===typeof t&&(r=n,n=t,t=void 0),(0,u.default)(e).off(t||"click"),(0,u.default)(e).on(t||"click",(function(t){var o=e.getAttribute("hx_stream");i.focusExpoRemote(o,e,t).then(r).catch(n)})),t},offEventAtTag:function(e,t){t&&(0,u.default)(e).off(t)},hungup:function(e,t){var n;n="string"===typeof e?e:e.id||e+"";var r=this._service(t),i=this._confr(t);if(i&&r){r.hungup(n);var o=!1;if(i.av&&(o=i.av.id===n)&&(i.av=void 0),i.desktop&&i.desktop.id===n&&(i.desktop=void 0),o&&i.type==this.ConfrType.LIVE&&r.current.role==$.Role.AUDIENCE){var s=r.current&&r.current._cacheStreams[0];this.subscribe(r.current,s,!1,!0,t)}}else b.warn("when hungup stream. not found confr and service.",e)},subscribe:function(e,t,n,r,i,o){return c.default.targetDOM(i)||(o=i,i=void 0),z.call(this,o,t,n,r,i).toPromise()},exit:function(e,t){var n=this,r=n._service(t);r?(r.exit(e),setTimeout((function(){n.upload_stats&&(n.upload_stats.stop(),delete n.upload_stats)}),3e3)):b.warn("when exit. not found service.",t)},_onExit:function(e,t,n){var r=this;try{r.__current_confrId=void 0,r.onExit(t,n,e)}finally{c.default.removeAttribute(r._confrs,e),c.default.removeAttribute(r._services,e),c.default.removeAttribute(r._videos,e),c.default.removeAttribute(r._events,e),r.cattrs=void 0,setTimeout((function(){r.upload_stats&&(r.upload_stats.stop(),delete r.upload_stats)}),3e3)}},onExit:function(e,t,n){},_onRoleUpdated:function(e,t){},onMemberJoin:function(e,t){},onMemberLeave:function(e,t,n){},_onRecvRemoteMessage:function(e,t,n){},crtAndReturnVideo:function(e,t,n){},unloadVideo:function(e,t,n,r){},remoteControl:function(e,t,n,r,i,o,s,a,c,u,d){var l=this._service(d);r=!!r;var f="string"===typeof e?e:e.id;r?emedia.ctrl.mirrorControlled(l,f,t,n,i,o,s,a,c,u):emedia.ctrl.controlled(l,f,t,n,i,o,s,a,c,u)},freeRemoteControl:function(e,t){var n=this._service(t),r="string"===typeof e?e:e.id;emedia.ctrl.disControlled(n,r)},zeptoTrigger:function(e,t){var n=[];return Array.prototype.push.apply(n,Array.prototype.slice.call(arguments,2)),f.Observable.create((function(r){var i=[function(){r.error.apply(r,arguments)},function(){r.next.apply(r,arguments),r.complete()}];Array.prototype.push.apply(i,n),(0,u.default)(e).trigger(t,i)})).pipe(_).toPromise()},_onAddMemberStream:function(e,t){},_onRemoveMemberStream:function(e,t){},_onUpdateMemberStream:function(e,t,n){},_onMemberMediaChanaged:function(e,t,n,r){var i=this._videos[t.id];n&&(n.voff=t.voff,n.aoff=t.aoff),i&&(0,u.default)(i).trigger("onMediaChanaged",[n,t,e,r])},onMediaChanaged:function(e,t){this.addVideoEventListener(e,"onMediaChanaged",t)},_onMemberSoundChanaged:function(e,t,n,r){var i=this._videos[t.id];i&&(0,u.default)(i).trigger("onSoundChanaged",[n,t,e,r])},onSoundChanaged:function(e,t){if(!emedia.config.getMediaMeterIntervalMillis||emedia.config.getMediaMeterIntervalMillis<=0)throw b.error("monit sound chanaged not config. please config getMediaMeterIntervalMillis"),"monit sound chanaged not config. please config getMediaMeterIntervalMillis";e.setAttribute("sound","sound"),this.addVideoEventListener(e,"onSoundChanaged",t)},onMediaTransmission:function(e,t){if(emedia.helper&&"function"===typeof emedia.helper.inboundVideo){var n=this._service(),r=e.getAttribute("hx_stream"),i=r&&n.getStreamById(r),o=e.getAttribute("flowWebrtc");i&&i._webrtc&&o==i._webrtc.__id||(e.hasAttribute("flow")&&i&&i._webrtc?(i.located()?emedia.helper.outboundVideo(i,t,1e3):emedia.helper.inboundVideo(i,t,1e3),e.setAttribute("flowWebrtc",i._webrtc.__id)):(this.addVideoEventListener(e,"onMediaTransmission",t),e.setAttribute("flow","flow")))}else b.warn("please import helper. <script>")},_onTalking:function(e,t,n,r){},_onNotSupportMemberPublishVideoCodecs:function(e,t,n){var r=this._videos[t.id];r&&(0,u.default)(r).trigger("onNotSupportVideoCodecs",[t,e,n])},onNotSupportVideoCodecs:function(e,t){this.addVideoEventListener(e,"onNotSupportVideoCodecs",t)},_onStreamIceStateChanged:function(e,t,n,r){var i=this._videos[t.id];i&&(0,u.default)(i).trigger("onIceStateChanged",[n,t,e,r])},onIceStateChanged:function(e,t){this.addVideoEventListener(e,"onIceStateChanged",t)},onHasRemoteControl:function(e,t,n,r){var i=this._videos[e.id];i&&(0,u.default)(i).trigger("onRemoteControl",[t,n,e,r])},onRemoteControl:function(e,t){this.addVideoEventListener(e,"onRemoteControl",t)},onRemoteFreeControl:function(e,t,n,r){var i=this._videos[e.id];i&&(0,u.default)(i).trigger("onFreeControl",[t,n,e,r])},onFreeControl:function(e,t){this.addVideoEventListener(e,"onFreeControl",t)},addVideoEventListener:function(e,t,n){(0,u.default)(e).off(t),(0,u.default)(e).on(t,(function(){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);n&&n.apply(e,t)}))}});d.default.each(["hungup","subscribe","pauseVideo","resumeVideo","pauseAudio","resumeAudio","chanageCamera","freeRemoteControl","capturePictureRemote","freezeFrameRemote"],(function(e,t){var n=e.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}));Z["trigger"+n]=function(t){var n=[];return n.push(t),n.push(e),Array.prototype.push.apply(n,Array.prototype.slice.call(arguments,1)),Z.zeptoTrigger.apply(Z,n)}})),Z.triggerTorchRemote=function(e,t){return f.Observable.create((function(n){(0,u.default)(e).trigger("torchRemote",[t,function(){n.error.apply(n,arguments)},function(){n.next.apply(n,arguments),n.complete()}])})).pipe(_).toPromise()},Z.triggerZoomRemote=function(e,t){return f.Observable.create((function(n){(0,u.default)(e).trigger("zoomRemote",[t,function(){n.error.apply(n,arguments)},function(){n.next.apply(n,arguments),n.complete()}])})).pipe(_).toPromise()},Z.triggerSubscribe=function(e,t,n){return f.Observable.create((function(r){(0,u.default)(e).trigger("subscribe",[t,n,function(){r.error.apply(r,arguments)},function(){r.next.apply(r,arguments),r.complete()}])})).pipe(_).toPromise()},Z.triggerRemoteControl=function(e,t,n,r,i,o,s,a){(0,u.default)(e).trigger("remoteControl",[t,n,r,i,o,s,a])},Z.triggerCaptureVideo=function(e,t,n){return f.Observable.create((function(r){(0,u.default)(e).trigger("captureVideo",[function(){r.next.apply(r,arguments),r.complete()},t,n])})).pipe(_).toPromise()};var $=t.single=Z}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(169)),i=p(n(142)),o=p(n(145)),s=p(n(115)),a=p(n(88)),c=p(n(2)),u=p(n(80)),d=p(n(170)),l=p(n(171)),f=p(n(150));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t){(0,d.default)(this,e),this.emedia=t,this.streams=[],this._intervals_get=null,this._intervals_upload=null,this.data=[],this.counterId=1,this.prev_obj={},this.sessionId=null,this.network_quality_obj={},this.network_quality_threshold={RTT:{time:8e3,value:500},aPLR:{time:8e3,value:18},vPLR:{time:8e3,value:23},disconnect:{time:5e3}},this.re_timer_count=0}return(0,l.default)(e,[{key:"_get_url",value:function(){var e="",t=this.emedia.useCurrentXService.current;if(!t)return e;var n=t.ticket,r=n.qoeUpUrl,i=n.memName;i=i.split("_")[1];var o=emedia.config.appkey;return e=r+"?orgName="+o.split("#")[0]+"&appName="+o.split("#")[1]+"&memName="+i+"&ts="+(new Date).getTime()+"&access_token="+emedia.mgr.identityToken}},{key:"connect_ws",value:function(){var e=this._get_url();if(e){var t=new WebSocket(e),n=this;t.onopen=function(){console.log("upload stats ws connected"),n.ws_connected=!0,n.socket=t,n.re_connect&&(console.log("has Reconnectioned"),console.log("before joinS"),n.sessionId&&(console.log("have sessID"),n.join_success(n.sessionId)))},t.onclose=function(e){n._stop_timer(),n.ws_connected=!1,console.error("upload stats ws close",e),!n.exited_meeting&&navigator.onLine&&n.reconnection()},t.message=function(e){console.log("upload stats ws recv msg",e)},t.onerror=function(e){console.error("upload stats ws error",e)},window.addEventListener("online",(function(){n.re_timer_count=0,n.reconnection()}))}else console.error("upload stats not have ws url")}},{key:"reconnection",value:function(){if(!this.ws_connected){var e=this;this.reconnection_timer=setInterval((function(){e.ws_connected||e.re_timer_count>=10?clearInterval(e.reconnection_timer):(console.log("reconnection..."),e.re_connect=!0,e.connect_ws(),e.re_timer_count++)}),5e3)}}},{key:"start",value:function(){this._intervals_get=setInterval(this.get.bind(this),2e3),this._intervals_upload=setInterval(this.upload.bind(this),500)}},{key:"join_success",value:function(e){e&&(this.sessionId=e,this.data.unshift(this._get_init_data()),this.start())}},{key:"join_fail",value:function(){this.socket&&this.socket.send({type:0,result:1,errorInfo:"join fail"})}},{key:"get",value:function(){if(this.emedia.useCurrentXService&&this.emedia.useCurrentXService.current&&this.emedia.useCurrentXService.current._cacheStreams){var e=this.emedia.useCurrentXService.current._cacheStreams,t=this;(0,u.default)(e).map((function(n){t.push_stats_to_data(e[n])}))}}},{key:"upload",value:function(){if(0!=this.data.length){if(this.socket){var e=this.data.shift();void 0==e.counterId&&(e.counterId=this.counterId,this.counterId=this.counterId+1),this.socket.send((0,c.default)(e))}}else console.warn("upload_stats upload fun -- this.data.length == 0")}},{key:"upload_event",value:function(e){if(e){var t=this._get_format_event_obj(e);t&&this.data.splice(1,0,t)}}},{key:"_get_format_event_obj",value:function(e){var t={type:2,time:(new Date).getTime()};if("object"!=(0,a.default)(e.event)&&void 0!=e.event)return(0,s.default)(t,e);var n=this.sessionId;if(e instanceof f.default.ICEConnected){var r=this._get_ice_connect_state_obj(e.webrtc,2);t=(0,s.default)(t,r)}else if(e instanceof f.default.ICEConnectFail){var i=this._get_ice_connect_state_obj(e.webrtc,4);t=(0,s.default)(t,i)}else if(e instanceof f.default.ICEDisconnected){var o=this._get_ice_connect_state_obj(e.webrtc,5);t=(0,s.default)(t,o)}else if(e instanceof f.default.PushSuccess){if(!e.hidden)return;var c=e.stream,u={event:14,sessionId:n,rtcId:c.rtcId,voff:c.voff,aoff:c.aoff,streamType:c.type,result:0};t=(0,s.default)(t,u)}else if(e instanceof f.default.SubSuccess){var d=e.stream,l=d.rtcId,p=d.id,h=d.type,m=d.memId,v={event:16,rtcId:l,sId:p,sessionId:n,result:0,streamType:h,subMemName:d.memName,subMemId:m};t=(0,s.default)(t,v)}else if(e instanceof f.default.EnterSuccess){var b={event:0,ip:e.ip};t=(0,s.default)(t,b)}return void 0!=t.event?t:void 0}},{key:"_get_ice_connect_state_obj",value:function(e,t){var n=this.emedia.useCurrentXService.current,r=null;for(var i in n._linkedStreams)n._linkedStreams[i].rtcId==e.getRtcId()&&(r=n._linkedStreams[i]);if(!r)return{};var o={event:20,rtcId:r.rtcId,connState:t,isPub:r.located(),sId:r.id,rtcCfg:r.rtcCfg,voff:r.voff,aoff:r.aoff};if(!r.located()){var a={subSId:r.id,subMemName:r.memName,subMemId:r.memId,subVideo:r.subSVideo,subAudio:r.subSAudio};o=(0,s.default)(o,a)}return o}},{key:"stop",value:function(){this.exited_meeting=!0,this.socket.close(),this._stop_timer()}},{key:"_stop_timer",value:function(){clearInterval(this._intervals_get),clearInterval(this._intervals_upload)}},{key:"push_stats_to_data",value:function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._webrtc){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t._webrtc._rtcPeerConnection.getStats();case 4:n=e.sent,r=this._get_format_upload_obj(n,t),this.data.push(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_get_init_data",value:function(){var e=this.emedia.useCurrentXService.current;if(e){var t=this.emedia.config,n=t.appkey,r=t.version,i=e.confrId,o=e._memberId,s=e.memName,a=this.sessionId,c=this.emedia,u=c.browser,d=c.browserVersion;return c.isWifi,{type:0,counterId:0,appkey:n,confrId:i,memId:o,memName:s,time:(new Date).getTime(),joinConfrTime:e.ticket.timestamp,sessionId:a,networkType:"WIFI",sdkOS:"Web",sdkVersion:r,deviceInfo:u,osVersion:d,result:0}}}},{key:"_get_format_upload_obj",value:function(e,t){var n={type:1,time:(new Date).getTime(),streamType:t.type,sId:t.id,rtcId:t.rtcId};if(t.located()){n.isPub=!0;var r=this._get_outbound_stats(e);n=(0,s.default)(n,r)}else{n.isPub=!1,n.subMemName=t.memName,n.subMemId=t.memId;var i=this._get_inbound_stats(e);n=(0,s.default)(n,i)}return n=this._calc_KBps_and_PLR(n),n=this._set_stats_int(n)}},{key:"_get_outbound_stats",value:function(e){var t={};return e.forEach((function(e){"outbound-rtp"==e.type&&("audio"==e.mediaType&&(t.aP=e.packetsSent,t.aB=e.bytesSent),"video"==e.mediaType&&(t.vW=e.frameWidth,t.vH=e.frameHeight,t.vP=e.packetsSent,t.vB=e.bytesSent)),"remote-inbound-rtp"==e.type&&("audio"==e.kind&&(t.aPL=e.packetsLost),"video"==e.kind&&(t.vPL=e.packetsLost)),"media-source"==e.type&&("audio"==e.kind&&(t.audioInputLevel=1e3*e.audioLevel),"video"==e.kind&&(t.vFps=e.framesPerSecond)),"candidate-pair"==e.type&&(t.RTT=1e3*e.totalRoundTripTime/e.responsesReceived)})),t}},{key:"_get_inbound_stats",value:function(e){var t={};return e.forEach((function(e){"inbound-rtp"==e.type&&(("audio"==e.kind||e.id.indexOf("AudioStream")>-1)&&(t.aP=e.packetsReceived,t.aPL=e.packetsLost,t.aB=e.bytesReceived),("video"==e.kind||e.id.indexOf("VideoStream")>-1)&&(t.vP=e.packetsReceived,t.vPL=e.packetsLost,t.vB=e.bytesReceived)),"track"==e.type&&("video"==e.kind&&(t.vW=e.frameWidth,t.vH=e.frameHeight,t.vFR=e.framesReceived),"audio"==e.kind&&(t.audioInputLevel=1e3*e.audioLevel)),"candidate-pair"==e.type&&(t.RTT=1e3*e.totalRoundTripTime/e.responsesReceived)})),t}},{key:"_calc_KBps_and_PLR",value:function(e){var t=e.sId,n=e.aB,r=e.vB,i=e.time;e.aKBps=this._get_KBps_by_sId(t,"audio",n,i)||0,e.vKBps=this._get_KBps_by_sId(t,"video",r,i)||0;var o=e.aP,s=e.aPL,a=e.vP,c=e.vPL,u=this._get_PLR_by_sId(t,"audio",o,s),d=this._get_PLR_by_sId(t,"video",a,c);if((u||0==u)&&(e.aPLR=u),(d||0==d)&&(e.vPLR=d),!e.isPub){var l=e.vFR;if(this.prev_obj[t]&&this.prev_obj[t].video&&this.prev_obj[t].video.framesReceived){var f=this.prev_obj[t].time,p=(l-this.prev_obj[t].video.framesReceived)/((i-f)/1e3);p<0&&(p=0),e.vFps=p}}var h=this._get_w_quality(e);if(2!=h){var m={time:(new Date).getTime(),event:4,type:2,counterId:this.counterId,sessionId:this.sessionId,rtcId:e.rtcId,sId:e.sId,isPub:e.isPub,streamType:e.sId,aoff:e.aoff,voff:e.voff,subMemName:e.subMemName,subMemId:e.subMemId};this.data.push(m)}if(this.emedia.mgr&&this.emedia.mgr.onNetworkQuality){var v=this.emedia.mgr.onNetworkQuality;"function"==typeof v&&v(e.sId,h)}return this._set_prev_obj(e),delete e.aB,delete e.vB,delete e.vFR,delete e.RTT,e}},{key:"_set_stats_int",value:function(e){var t=["audioInputLevel","vKBps","vFps","vW","vH","vP","vPL","vPLR","aKBps","aP","aPL","aPLR"];for(var n in e)t.indexOf(n)>-1&&(e[n]=Math.round(e[n]));return e}},{key:"_get_KBps_by_sId",value:function(e,t,n,r){if(!e||!t||!n)return null;var i=this.prev_obj[e];if(!i||!i[t]||!i[t].bytes)return null;var o=i.time,s=n-i[t].bytes;return s<0&&(s=0),s/(parseInt(r-o)/1e3).toFixed(2)/1e3}},{key:"_get_PLR_by_sId",value:function(e,t,n,r){if(!e)return null;if(!t||!n||!r)return 0;var i=this.prev_obj[e];if(!i||!i[t]||!i[t].packets||!i[t].packets_lost)return 0;var o=i[t],s=o.packets,a=r-o.packets_lost,c=a/(n-s+a);return c=Math.round(100*c)}},{key:"_set_prev_obj",value:function(e){var t=e.sId;if(t){var n=e.aB,r=e.vB,i=e.time,o=e.aP,s=e.aPL,a=e.vP,c=e.vPL,d=e.vFR,l={},f={};n&&(l.bytes=n),o&&(l.packets=o),(s||0==s)&&(l.packets_lost=s),r&&(f.bytes=r),a&&(f.packets=a),(c||0==c)&&(f.packets_lost=c),d&&(f.framesReceived=d),0==(0,u.default)(l).length&&0==(0,u.default)(f).length||(this.prev_obj[t]||(this.prev_obj[t]={}),this.prev_obj[t].time=i,(0,u.default)(l).length>0&&(this.prev_obj[t].audio=l),(0,u.default)(f).length>0&&(this.prev_obj[t].video=f))}}},{key:"_get_w_quality",value:function(e){e.RTT,e.aPLR,e.vPLR;var t=e.time,n=e.vKBps,i=e.aKBps,o=e.sId;if(!o)return 2;var s=this,a=function(e){if(!e||!t)return!1;var n=s.network_quality_obj[o];if(!n)return s.network_quality_obj[o]=(0,r.default)({},e,{time:t}),!1;if(!n[e])return s.network_quality_obj[o][e]={time:t},!1;var i=n[e].time,a=s.network_quality_threshold[e].time;return t-i>=a},c=function(e){var t=s.network_quality_obj[o];t&&t[e]&&(s.network_quality_obj[o][e]=void 0)};if(n||i){!function(){var e=s.network_quality_obj[o];e&&e.disconnect&&(s.network_quality_obj[o].disconnect=void 0)}();for(var u=["RTT","aPLR","vPLR"],d=2,l=0;l<u.length;l++){var f=u[l],p=this.network_quality_threshold[f].value;e[f]>=p?a(f)&&(d=1):c(f)}return d}return function(){var e=s.network_quality_obj[o];if(!e)return s.network_quality_obj[o]={disconnect:{time:t}},!1;if(!e.disconnect)return s.network_quality_obj[o]={disconnect:{time:t}},!1;var n=e.disconnect.time,r=s.network_quality_threshold.disconnect.time;return t-n>=r}()?0:2}}]),e}();t.default=h},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(138),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(138),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";n.r(t);var r=n(173);n.d(t,"Observable",(function(){return r.Observable}));var i=n(190);n.d(t,"ConnectableObservable",(function(){return i.ConnectableObservable}));var o=n(195);n.d(t,"GroupedObservable",(function(){return o.GroupedObservable}));var s=n(187);n.d(t,"observable",(function(){return s.observable}));var a=n(191);n.d(t,"Subject",(function(){return a.Subject}));var c=n(196);n.d(t,"BehaviorSubject",(function(){return c.BehaviorSubject}));var u=n(197);n.d(t,"ReplaySubject",(function(){return u.ReplaySubject}));var d=n(214);n.d(t,"AsyncSubject",(function(){return d.AsyncSubject}));var l=n(215);n.d(t,"asapScheduler",(function(){return l.asap}));var f=n(219);n.d(t,"asyncScheduler",(function(){return f.async}));var p=n(198);n.d(t,"queueScheduler",(function(){return p.queue}));var h=n(220);n.d(t,"animationFrameScheduler",(function(){return h.animationFrame}));var m=n(223);n.d(t,"VirtualTimeScheduler",(function(){return m.VirtualTimeScheduler})),n.d(t,"VirtualAction",(function(){return m.VirtualAction}));var v=n(204);n.d(t,"Scheduler",(function(){return v.Scheduler}));var b=n(181);n.d(t,"Subscription",(function(){return b.Subscription}));var g=n(175);n.d(t,"Subscriber",(function(){return g.Subscriber}));var _=n(206);n.d(t,"Notification",(function(){return _.Notification})),n.d(t,"NotificationKind",(function(){return _.NotificationKind}));var y=n(188);n.d(t,"pipe",(function(){return y.pipe}));var w=n(189);n.d(t,"noop",(function(){return w.noop}));var S=n(224);n.d(t,"identity",(function(){return S.identity}));var A=n(225);n.d(t,"isObservable",(function(){return A.isObservable}));var x=n(226);n.d(t,"ArgumentOutOfRangeError",(function(){return x.ArgumentOutOfRangeError}));var C=n(227);n.d(t,"EmptyError",(function(){return C.EmptyError}));var E=n(192);n.d(t,"ObjectUnsubscribedError",(function(){return E.ObjectUnsubscribedError}));var k=n(184);n.d(t,"UnsubscriptionError",(function(){return k.UnsubscriptionError}));var I=n(228);n.d(t,"TimeoutError",(function(){return I.TimeoutError}));var T=n(229);n.d(t,"bindCallback",(function(){return T.bindCallback}));var R=n(231);n.d(t,"bindNodeCallback",(function(){return R.bindNodeCallback}));var M=n(232);n.d(t,"combineLatest",(function(){return M.combineLatest}));var O=n(243);n.d(t,"concat",(function(){return O.concat}));var P=n(254);n.d(t,"defer",(function(){return P.defer}));var j=n(207);n.d(t,"empty",(function(){return j.empty}));var N=n(255);n.d(t,"forkJoin",(function(){return N.forkJoin}));var D=n(247);n.d(t,"from",(function(){return D.from}));var B=n(256);n.d(t,"fromEvent",(function(){return B.fromEvent}));var L=n(257);n.d(t,"fromEventPattern",(function(){return L.fromEventPattern}));var V=n(258);n.d(t,"generate",(function(){return V.generate}));var U=n(259);n.d(t,"iif",(function(){return U.iif}));var F=n(260);n.d(t,"interval",(function(){return F.interval}));var G=n(262);n.d(t,"merge",(function(){return G.merge}));var W=n(263);n.d(t,"never",(function(){return W.never}));var q=n(208);n.d(t,"of",(function(){return q.of}));var z=n(264);n.d(t,"onErrorResumeNext",(function(){return z.onErrorResumeNext}));var Q=n(265);n.d(t,"pairs",(function(){return Q.pairs}));var X=n(266);n.d(t,"partition",(function(){return X.partition}));var Y=n(269);n.d(t,"race",(function(){return Y.race}));var H=n(270);n.d(t,"range",(function(){return H.range}));var K=n(213);n.d(t,"throwError",(function(){return K.throwError}));var J=n(271);n.d(t,"timer",(function(){return J.timer}));var Z=n(272);n.d(t,"using",(function(){return Z.using}));var $=n(273);n.d(t,"zip",(function(){return $.zip}));var ee=n(248);n.d(t,"scheduled",(function(){return ee.scheduled})),n.d(t,"EMPTY",(function(){return j.EMPTY})),n.d(t,"NEVER",(function(){return W.NEVER}));var te=n(179);n.d(t,"config",(function(){return te.config}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Observable",(function(){return c}));var r=n(174),i=n(186),o=n(187),s=n(188),a=n(179),c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=Object(i.toSubscriber)(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||a.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Object(r.canReportError)(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=u(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Object(s.pipeFromArray)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=u(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function u(e){if(e||(e=a.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},function(e,t,n){"use strict";n.r(t),n.d(t,"canReportError",(function(){return i}));var r=n(175);function i(e){for(;e;){var t=e,n=t.closed,i=t.destination,o=t.isStopped;if(n||o)return!1;e=i&&i instanceof r.Subscriber?i:null}return!0}},function(e,t,n){"use strict";n.r(t),n.d(t,"Subscriber",(function(){return d})),n.d(t,"SafeSubscriber",(function(){return l}));var r=n(176),i=n(177),o=n(178),s=n(181),a=n(185),c=n(179),u=n(180),d=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.empty;break;case 1:if(!n){s.destination=o.empty;break}if("object"===typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new l(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new l(s,n,r,i)}return s}return r.__extends(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(s.Subscription),l=function(e){function t(t,n,r,s){var a,c=e.call(this)||this;c._parentSubscriber=t;var u=c;return Object(i.isFunction)(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o.empty&&(u=Object.create(n),Object(i.isFunction)(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=r,c._complete=s,c}return r.__extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(u.hostReportError)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(u.hostReportError)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw n;Object(u.hostReportError)(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return c.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(u.hostReportError)(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(d)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return d})),n.d(t,"__generator",(function(){return l})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__await",(function(){return b})),n.d(t,"__asyncGenerator",(function(){return g})),n.d(t,"__asyncDelegator",(function(){return _})),n.d(t,"__asyncValues",(function(){return y})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return A}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function g(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof b?Promise.resolve(n.value.v).then(c,u):d(o[0][2],n)}catch(r){d(o[0][3],r)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";function r(e){return"function"===typeof e}n.r(t),n.d(t,"isFunction",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"empty",(function(){return o}));var r=n(179),i=n(180),o={closed:!0,next:function(e){},error:function(e){if(r.config.useDeprecatedSynchronousErrorHandling)throw e;Object(i.hostReportError)(e)},complete:function(){}}},function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.r(t),n.d(t,"hostReportError",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Subscription",(function(){return a}));var r=n(182),i=n(183),o=n(177),s=n(184),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,a=this._unsubscribe,u=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var d=0;d<n.length;++d)n[d].remove(this);if(Object(o.isFunction)(a))try{a.call(this)}catch(p){t=p instanceof s.UnsubscriptionError?c(p.errors):[p]}if(Object(r.isArray)(u)){d=-1;for(var l=u.length;++d<l;){var f=u[d];if(Object(i.isObject)(f))try{f.unsubscribe()}catch(p){t=t||[],p instanceof s.UnsubscriptionError?t=t.concat(c(p.errors)):t.push(p)}}}if(t)throw new s.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function c(e){return e.reduce((function(e,t){return e.concat(t instanceof s.UnsubscriptionError?t.errors:t)}),[])}},function(e,t,n){"use strict";n.r(t),n.d(t,"isArray",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"===typeof e.length}}()},function(e,t,n){"use strict";function r(e){return null!==e&&"object"===typeof e}n.r(t),n.d(t,"isObject",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"UnsubscriptionError",(function(){return r}));var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"rxSubscriber",(function(){return r})),n.d(t,"$$rxSubscriber",(function(){return i}));var r=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),i=r},function(e,t,n){"use strict";n.r(t),n.d(t,"toSubscriber",(function(){return s}));var r=n(175),i=n(185),o=n(178);function s(e,t,n){if(e){if(e instanceof r.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||n?new r.Subscriber(e,t,n):new r.Subscriber(o.empty)}},function(e,t,n){"use strict";n.r(t),n.d(t,"observable",(function(){return r}));var r=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}()},function(e,t,n){"use strict";n.r(t),n.d(t,"pipe",(function(){return i})),n.d(t,"pipeFromArray",(function(){return o}));var r=n(189);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:r.noop}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"noop",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"ConnectableObservable",(function(){return u})),n.d(t,"connectableObservableDescriptor",(function(){return d}));var r=n(176),i=n(191),o=n(173),s=n(175),a=n(181),c=n(194),u=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.__extends(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new a.Subscription).add(this.source.subscribe(new l(this.getSubject(),this))),e.closed&&(this._connection=null,e=a.Subscription.EMPTY)),e},t.prototype.refCount=function(){return Object(c.refCount)()(this)},t}(o.Observable),d=function(){var e=u.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.__extends(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber);s.Subscriber},function(e,t,n){"use strict";n.r(t),n.d(t,"SubjectSubscriber",(function(){return d})),n.d(t,"Subject",(function(){return l})),n.d(t,"AnonymousSubject",(function(){return f}));var r=n(176),i=n(173),o=n(175),s=n(181),a=n(192),c=n(193),u=n(185),d=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.__extends(t,e),t}(o.Subscriber),l=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.__extends(t,e),t.prototype[u.rxSubscriber]=function(){return new d(this)},t.prototype.lift=function(e){var t=new f(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new f(e,t)},t}(i.Observable),f=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.__extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.Subscription.EMPTY},t}(l)},function(e,t,n){"use strict";n.r(t),n.d(t,"ObjectUnsubscribedError",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"SubjectSubscription",(function(){return i}));var r=n(176),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.__extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(181).Subscription)},function(e,t,n){"use strict";n.r(t),n.d(t,"refCount",(function(){return o}));var r=n(176),i=n(175);function o(){return function(e){return e.lift(new s(e))}}var s=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new a(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.__extends(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"groupBy",(function(){return c})),n.d(t,"GroupedObservable",(function(){return f}));var r=n(176),i=n(175),o=n(181),s=n(173),a=n(191);function c(e,t,n,r){return function(i){return i.lift(new u(e,t,n,r))}}var u=function(){function e(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),d=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.keySelector=n,s.elementSelector=r,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return r.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(n){return void this.error(n)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(c){this.error(c)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new a.Subject,n.set(t,i);var o=new f(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new f(t,i))}catch(c){return void this.error(c)}this.add(s.subscribe(new l(t,i,this)))}}i.closed||i.next(r)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(i.Subscriber),l=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return r.__extends(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(i.Subscriber),f=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return r.__extends(t,e),t.prototype._subscribe=function(e){var t=new o.Subscription,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new p(n)),t.add(r.subscribe(e)),t},t}(s.Observable),p=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return r.__extends(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o.Subscription)},function(e,t,n){"use strict";n.r(t),n.d(t,"BehaviorSubject",(function(){return s}));var r=n(176),i=n(191),o=n(192),s=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return r.__extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.Subject)},function(e,t,n){"use strict";n.r(t),n.d(t,"ReplaySubject",(function(){return d}));var r=n(176),i=n(191),o=n(198),s=n(181),a=n(205),c=n(192),u=n(193),d=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.__extends(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new l(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new c.ObjectUnsubscribedError;if(this.isStopped||this.hasError?t=s.Subscription.EMPTY:(this.observers.push(e),t=new u.SubjectSubscription(this,e)),i&&e.add(e=new a.ObserveOnSubscriber(e,i)),n)for(var d=0;d<o&&!e.closed;d++)e.next(r[d]);else for(d=0;d<o&&!e.closed;d++)e.next(r[d].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject),l=function(){return function(e,t){this.time=e,this.value=t}}()},function(e,t,n){"use strict";n.r(t),n.d(t,"queue",(function(){return i}));var r=n(199),i=new(n(202).QueueScheduler)(r.QueueAction)},function(e,t,n){"use strict";n.r(t),n.d(t,"QueueAction",(function(){return i}));var r=n(176),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.__extends(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n(200).AsyncAction)},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncAction",(function(){return i}));var r=n(176),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.__extends(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(n(201).Action)},function(e,t,n){"use strict";n.r(t),n.d(t,"Action",(function(){return i}));var r=n(176),i=function(e){function t(t,n){return e.call(this)||this}return r.__extends(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(181).Subscription)},function(e,t,n){"use strict";n.r(t),n.d(t,"QueueScheduler",(function(){return i}));var r=n(176),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(n(203).AsyncScheduler)},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncScheduler",(function(){return o}));var r=n(176),i=n(204),o=function(e){function t(n,r){void 0===r&&(r=i.Scheduler.now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.__extends(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i.Scheduler)},function(e,t,n){"use strict";n.r(t),n.d(t,"Scheduler",(function(){return r}));var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"observeOn",(function(){return s})),n.d(t,"ObserveOnOperator",(function(){return a})),n.d(t,"ObserveOnSubscriber",(function(){return c})),n.d(t,"ObserveOnMessage",(function(){return u}));var r=n(176),i=n(175),o=n(206);function s(e,t){return void 0===t&&(t=0),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.scheduler,this.delay))},e}(),c=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r.__extends(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete()),this.unsubscribe()},t}(i.Subscriber),u=function(){return function(e,t){this.notification=e,this.destination=t}}()},function(e,t,n){"use strict";n.r(t),n.d(t,"NotificationKind",(function(){return r})),n.d(t,"Notification",(function(){return a}));var r,i=n(207),o=n(208),s=n(213);r||(r={});var a=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"===typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Object(o.of)(this.value);case"E":return Object(s.throwError)(this.error);case"C":return Object(i.empty)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!==typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EMPTY",(function(){return i})),n.d(t,"empty",(function(){return o}));var r=n(173),i=new r.Observable((function(e){return e.complete()}));function o(e){return e?function(e){return new r.Observable((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},function(e,t,n){"use strict";n.r(t),n.d(t,"of",(function(){return s}));var r=n(209),i=n(210),o=n(212);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(r.isScheduler)(n)?(e.pop(),Object(o.scheduleArray)(e,n)):Object(i.fromArray)(e)}},function(e,t,n){"use strict";function r(e){return e&&"function"===typeof e.schedule}n.r(t),n.d(t,"isScheduler",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"fromArray",(function(){return s}));var r=n(173),i=n(211),o=n(212);function s(e,t){return t?Object(o.scheduleArray)(e,t):new r.Observable(Object(i.subscribeToArray)(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToArray",(function(){return r}));var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleArray",(function(){return o}));var r=n(173),i=n(181);function o(e,t){return new r.Observable((function(n){var r=new i.Subscription,o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"throwError",(function(){return i}));var r=n(173);function i(e,t){return t?new r.Observable((function(n){return t.schedule(o,0,{error:e,subscriber:n})})):new r.Observable((function(t){return t.error(e)}))}function o(e){var t=e.error;e.subscriber.error(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"AsyncSubject",(function(){return s}));var r=n(176),i=n(191),o=n(181),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return r.__extends(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(i.Subject)},function(e,t,n){"use strict";n.r(t),n.d(t,"asap",(function(){return i}));var r=n(216),i=new(n(218).AsapScheduler)(r.AsapAction)},function(e,t,n){"use strict";n.r(t),n.d(t,"AsapAction",(function(){return o}));var r=n(176),i=n(217),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.__extends(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=i.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(i.Immediate.clearImmediate(n),t.scheduled=void 0)},t}(n(200).AsyncAction)},function(e,t,n){"use strict";n.r(t),n.d(t,"Immediate",(function(){return o}));var r=1,i={},o={setImmediate:function(e){var t=r++;return i[t]=e,Promise.resolve().then((function(){return function(e){var t=i[e];t&&t()}(t)})),t},clearImmediate:function(e){delete i[e]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"AsapScheduler",(function(){return i}));var r=n(176),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(203).AsyncScheduler)},function(e,t,n){"use strict";n.r(t),n.d(t,"async",(function(){return i}));var r=n(200),i=new(n(203).AsyncScheduler)(r.AsyncAction)},function(e,t,n){"use strict";n.r(t),n.d(t,"animationFrame",(function(){return i}));var r=n(221),i=new(n(222).AnimationFrameScheduler)(r.AnimationFrameAction)},function(e,t,n){"use strict";n.r(t),n.d(t,"AnimationFrameAction",(function(){return i}));var r=n(176),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.__extends(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(n(200).AsyncAction)},function(e,t,n){"use strict";n.r(t),n.d(t,"AnimationFrameScheduler",(function(){return i}));var r=n(176),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(203).AsyncScheduler)},function(e,t,n){"use strict";n.r(t),n.d(t,"VirtualTimeScheduler",(function(){return o})),n.d(t,"VirtualAction",(function(){return s}));var r=n(176),i=n(200),o=function(e){function t(t,n){void 0===t&&(t=s),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r.__extends(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(n(203).AsyncScheduler),s=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return r.__extends(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(i.AsyncAction)},function(e,t,n){"use strict";function r(e){return e}n.r(t),n.d(t,"identity",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"isObservable",(function(){return i}));var r=n(173);function i(e){return!!e&&(e instanceof r.Observable||"function"===typeof e.lift&&"function"===typeof e.subscribe)}},function(e,t,n){"use strict";n.r(t),n.d(t,"ArgumentOutOfRangeError",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"EmptyError",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"TimeoutError",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"bindCallback",(function(){return u}));var r=n(173),i=n(214),o=n(230),s=n(174),a=n(182),c=n(209);function u(e,t,n){if(t){if(!Object(c.isScheduler)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u(e,n).apply(void 0,r).pipe(Object(o.map)((function(e){return Object(a.isArray)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a,c=this,u={context:c,subject:a,callbackFunc:e,scheduler:n};return new r.Observable((function(r){if(n){var o={args:t,subscriber:r,params:u};return n.schedule(d,0,o)}if(!a){a=new i.AsyncSubject;try{e.apply(c,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.next(e.length<=1?e[0]:e),a.complete()}]))}catch(l){Object(s.canReportError)(a)?a.error(l):console.warn(l)}}return a.subscribe(r)}))}}function d(e){var t=this,n=e.args,r=e.subscriber,o=e.params,s=o.callbackFunc,a=o.context,c=o.scheduler,u=o.subject;if(!u){u=o.subject=new i.AsyncSubject;try{s.apply(a,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(c.schedule(l,0,{value:r,subject:u}))}]))}catch(d){u.error(d)}}this.add(u.subscribe(r))}function l(e){var t=e.value,n=e.subject;n.next(t),n.complete()}},function(e,t,n){"use strict";n.r(t),n.d(t,"map",(function(){return o})),n.d(t,"MapOperator",(function(){return s}));var r=n(176),i=n(175);function o(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"bindNodeCallback",(function(){return u}));var r=n(173),i=n(214),o=n(230),s=n(174),a=n(209),c=n(182);function u(e,t,n){if(t){if(!Object(a.isScheduler)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u(e,n).apply(void 0,r).pipe(Object(o.map)((function(e){return Object(c.isArray)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new r.Observable((function(r){var o=a.context,c=a.subject;if(n)return n.schedule(d,0,{params:a,subscriber:r,context:o});if(!c){c=a.subject=new i.AsyncSubject;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?c.error(n):(c.next(e.length<=1?e[0]:e),c.complete())}]))}catch(u){Object(s.canReportError)(c)?c.error(u):console.warn(u)}}return c.subscribe(r)}))}}function d(e){var t=this,n=e.params,r=e.subscriber,o=e.context,s=n.callbackFunc,a=n.args,c=n.scheduler,u=n.subject;if(!u){u=n.subject=new i.AsyncSubject;try{s.apply(o,a.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(c.schedule(f,0,{err:r,subject:u}));else{var i=e.length<=1?e[0]:e;t.add(c.schedule(l,0,{value:i,subject:u}))}}]))}catch(d){this.add(c.schedule(f,0,{err:d,subject:u}))}}this.add(u.subscribe(r))}function l(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function f(e){var t=e.err;e.subject.error(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"combineLatest",(function(){return d})),n.d(t,"CombineLatestOperator",(function(){return l})),n.d(t,"CombineLatestSubscriber",(function(){return f}));var r=n(176),i=n(209),o=n(182),s=n(233),a=n(234),c=n(210),u={};function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(i.isScheduler)(e[e.length-1])&&(r=e.pop()),"function"===typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(o.isArray)(e[0])&&(e=e[0]),Object(c.fromArray)(e,r).lift(new l(n))}var l=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.resultSelector))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.__extends(t,e),t.prototype._next=function(e){this.values.push(u),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(a.subscribeToResult)(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0===(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===u?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"OuterSubscriber",(function(){return i}));var r=n(176),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(175).Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToResult",(function(){return s}));var r=n(235),i=n(236),o=n(173);function s(e,t,n,s,a){if(void 0===a&&(a=new r.InnerSubscriber(e,n,s)),!a.closed)return t instanceof o.Observable?t.subscribe(a):Object(i.subscribeTo)(t)(a)}},function(e,t,n){"use strict";n.r(t),n.d(t,"InnerSubscriber",(function(){return i}));var r=n(176),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.__extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(175).Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeTo",(function(){return f}));var r=n(211),i=n(237),o=n(238),s=n(240),a=n(241),c=n(242),u=n(183),d=n(239),l=n(187),f=function(e){if(e&&"function"===typeof e[l.observable])return Object(s.subscribeToObservable)(e);if(Object(a.isArrayLike)(e))return Object(r.subscribeToArray)(e);if(Object(c.isPromise)(e))return Object(i.subscribeToPromise)(e);if(e&&"function"===typeof e[d.iterator])return Object(o.subscribeToIterable)(e);var t=Object(u.isObject)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToPromise",(function(){return i}));var r=n(180),i=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,r.hostReportError),t}}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToIterable",(function(){return i}));var r=n(239),i=function(e){return function(t){for(var n=e[r.iterator]();;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"===typeof n.return&&t.add((function(){n.return&&n.return()})),t}}},function(e,t,n){"use strict";function r(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.r(t),n.d(t,"getSymbolIterator",(function(){return r})),n.d(t,"iterator",(function(){return i})),n.d(t,"$$iterator",(function(){return o}));var i=r(),o=i},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeToObservable",(function(){return i}));var r=n(187),i=function(e){return function(t){var n=e[r.observable]();if("function"!==typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"isArrayLike",(function(){return r}));var r=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e}},function(e,t,n){"use strict";function r(e){return!!e&&"function"!==typeof e.subscribe&&"function"===typeof e.then}n.r(t),n.d(t,"isPromise",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"concat",(function(){return o}));var r=n(208),i=n(244);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(i.concatAll)()(r.of.apply(void 0,e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatAll",(function(){return i}));var r=n(245);function i(){return Object(r.mergeAll)(1)}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeAll",(function(){return o}));var r=n(246),i=n(224);function o(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r.mergeMap)(i.identity,e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeMap",(function(){return u})),n.d(t,"MergeMapOperator",(function(){return d})),n.d(t,"MergeMapSubscriber",(function(){return l}));var r=n(176),i=n(234),o=n(233),s=n(235),a=n(230),c=n(247);function u(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof t?function(r){return r.pipe(u((function(n,r){return Object(c.from)(e(n,r)).pipe(Object(a.map)((function(e,i){return t(n,e,r,i)})))}),n))}:("number"===typeof t&&(n=t),function(t){return t.lift(new d(e,n))})}var d=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.concurrent))},e}(),l=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.__extends(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new s.InnerSubscriber(this,void 0,void 0);this.destination.add(r),Object(i.subscribeToResult)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"from",(function(){return s}));var r=n(173),i=n(236),o=n(248);function s(e,t){return t?Object(o.scheduled)(e,t):e instanceof r.Observable?e:new r.Observable(Object(i.subscribeTo)(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduled",(function(){return l}));var r=n(249),i=n(250),o=n(212),s=n(251),a=n(252),c=n(242),u=n(241),d=n(253);function l(e,t){if(null!=e){if(Object(a.isInteropObservable)(e))return Object(r.scheduleObservable)(e,t);if(Object(c.isPromise)(e))return Object(i.schedulePromise)(e,t);if(Object(u.isArrayLike)(e))return Object(o.scheduleArray)(e,t);if(Object(d.isIterable)(e)||"string"===typeof e)return Object(s.scheduleIterable)(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleObservable",(function(){return s}));var r=n(173),i=n(181),o=n(187);function s(e,t){return new r.Observable((function(n){var r=new i.Subscription;return r.add(t.schedule((function(){var i=e[o.observable]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"schedulePromise",(function(){return o}));var r=n(173),i=n(181);function o(e,t){return new r.Observable((function(n){var r=new i.Subscription;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"scheduleIterable",(function(){return s}));var r=n(173),i=n(181),o=n(239);function s(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.Observable((function(n){var r,s=new i.Subscription;return s.add((function(){r&&"function"===typeof r.return&&r.return()})),s.add(t.schedule((function(){r=e[o.iterator](),s.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}})))}))),s}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"isInteropObservable",(function(){return i}));var r=n(187);function i(e){return e&&"function"===typeof e[r.observable]}},function(e,t,n){"use strict";n.r(t),n.d(t,"isIterable",(function(){return i}));var r=n(239);function i(e){return e&&"function"===typeof e[r.iterator]}},function(e,t,n){"use strict";n.r(t),n.d(t,"defer",(function(){return s}));var r=n(173),i=n(247),o=n(207);function s(e){return new r.Observable((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?Object(i.from)(n):Object(o.empty)()).subscribe(t)}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"forkJoin",(function(){return c}));var r=n(173),i=n(182),o=n(230),s=n(183),a=n(247);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Object(i.isArray)(n))return u(n,null);if(Object(s.isObject)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return u(r.map((function(e){return n[e]})),r)}}if("function"===typeof e[e.length-1]){var a=e.pop();return u(e=1===e.length&&Object(i.isArray)(e[0])?e[0]:e,null).pipe(Object(o.map)((function(e){return a.apply(void 0,e)})))}return u(e,null)}function u(e,t){return new r.Observable((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,s=0,c=function(c){var u=Object(a.from)(e[c]),d=!1;n.add(u.subscribe({next:function(e){d||(d=!0,s++),i[c]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&d||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)c(u);else n.complete()}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"fromEvent",(function(){return a}));var r=n(173),i=n(182),o=n(177),s=n(230);function a(e,t,n,c){return Object(o.isFunction)(n)&&(c=n,n=void 0),c?a(e,t,n).pipe(Object(s.map)((function(e){return Object(i.isArray)(e)?c.apply(void 0,e):c(e)}))):new r.Observable((function(r){!function e(t,n,r,i,o){var s;if(function(e){return e&&"function"===typeof e.addEventListener&&"function"===typeof e.removeEventListener}(t)){var a=t;t.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(function(e){return e&&"function"===typeof e.on&&"function"===typeof e.off}(t)){var c=t;t.on(n,r),s=function(){return c.off(n,r)}}else if(function(e){return e&&"function"===typeof e.addListener&&"function"===typeof e.removeListener}(t)){var u=t;t.addListener(n,r),s=function(){return u.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var d=0,l=t.length;d<l;d++)e(t[d],n,r,i,o)}i.add(s)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"fromEventPattern",(function(){return a}));var r=n(173),i=n(182),o=n(177),s=n(230);function a(e,t,n){return n?a(e,t).pipe(Object(s.map)((function(e){return Object(i.isArray)(e)?n.apply(void 0,e):n(e)}))):new r.Observable((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(s){return void n.error(s)}if(Object(o.isFunction)(t))return function(){return t(i,r)}}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"generate",(function(){return s}));var r=n(173),i=n(224),o=n(209);function s(e,t,n,s,c){var u,d;if(1==arguments.length){var l=e;d=l.initialState,t=l.condition,n=l.iterate,u=l.resultSelector||i.identity,c=l.scheduler}else void 0===s||Object(o.isScheduler)(s)?(d=e,u=i.identity,c=s):(d=e,u=s);return new r.Observable((function(e){var r=d;if(c)return c.schedule(a,0,{subscriber:e,iterate:n,condition:t,resultSelector:u,state:r});for(;;){if(t){var i=void 0;try{i=t(r)}catch(s){return void e.error(s)}if(!i){e.complete();break}}var o=void 0;try{o=u(r)}catch(s){return void e.error(s)}if(e.next(o),e.closed)break;try{r=n(r)}catch(s){return void e.error(s)}}}))}function a(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(o){return void t.error(o)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(o){return void t.error(o)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(o){return void t.error(o)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"iif",(function(){return o}));var r=n(254),i=n(207);function o(e,t,n){return void 0===t&&(t=i.EMPTY),void 0===n&&(n=i.EMPTY),Object(r.defer)((function(){return e()?t:n}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"interval",(function(){return s}));var r=n(173),i=n(219),o=n(261);function s(e,t){return void 0===e&&(e=0),void 0===t&&(t=i.async),(!Object(o.isNumeric)(e)||e<0)&&(e=0),t&&"function"===typeof t.schedule||(t=i.async),new r.Observable((function(n){return n.add(t.schedule(a,e,{subscriber:n,counter:0,period:e})),n}))}function a(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}},function(e,t,n){"use strict";n.r(t),n.d(t,"isNumeric",(function(){return i}));var r=n(182);function i(e){return!Object(r.isArray)(e)&&e-parseFloat(e)+1>=0}},function(e,t,n){"use strict";n.r(t),n.d(t,"merge",(function(){return a}));var r=n(173),i=n(209),o=n(245),s=n(210);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,a=null,c=e[e.length-1];return Object(i.isScheduler)(c)?(a=e.pop(),e.length>1&&"number"===typeof e[e.length-1]&&(n=e.pop())):"number"===typeof c&&(n=e.pop()),null===a&&1===e.length&&e[0]instanceof r.Observable?e[0]:Object(o.mergeAll)(n)(Object(s.fromArray)(e,a))}},function(e,t,n){"use strict";n.r(t),n.d(t,"NEVER",(function(){return o})),n.d(t,"never",(function(){return s}));var r=n(173),i=n(189),o=new r.Observable(i.noop);function s(){return o}},function(e,t,n){"use strict";n.r(t),n.d(t,"onErrorResumeNext",(function(){return a}));var r=n(173),i=n(247),o=n(182),s=n(207);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return s.EMPTY;var n=e[0],c=e.slice(1);return 1===e.length&&Object(o.isArray)(n)?a.apply(void 0,n):new r.Observable((function(e){var t=function(){return e.add(a.apply(void 0,c).subscribe(e))};return Object(i.from)(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"pairs",(function(){return o})),n.d(t,"dispatch",(function(){return s}));var r=n(173),i=n(181);function o(e,t){return t?new r.Observable((function(n){var r=Object.keys(e),o=new i.Subscription;return o.add(t.schedule(s,0,{keys:r,index:0,subscriber:n,subscription:o,obj:e})),o})):new r.Observable((function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()}))}function s(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var s=t[n];r.next([s,o[s]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}},function(e,t,n){"use strict";n.r(t),n.d(t,"partition",(function(){return a}));var r=n(267),i=n(236),o=n(268),s=n(173);function a(e,t,n){return[Object(o.filter)(t,n)(new s.Observable(Object(i.subscribeTo)(e))),Object(o.filter)(Object(r.not)(t,n))(new s.Observable(Object(i.subscribeTo)(e)))]}},function(e,t,n){"use strict";function r(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}n.r(t),n.d(t,"not",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"filter",(function(){return o}));var r=n(176),i=n(175);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"race",(function(){return c})),n.d(t,"RaceOperator",(function(){return u})),n.d(t,"RaceSubscriber",(function(){return d}));var r=n(176),i=n(182),o=n(210),s=n(233),a=n(234);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(i.isArray)(e[0]))return e[0];e=e[0]}return Object(o.fromArray)(e,void 0).lift(new u)}var u=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new d(e))},e}(),d=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.__extends(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(a.subscribeToResult)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(s.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"range",(function(){return i})),n.d(t,"dispatch",(function(){return o}));var r=n(173);function i(e,t,n){return void 0===e&&(e=0),new r.Observable((function(r){void 0===t&&(t=e,e=0);var i=0,s=e;if(n)return n.schedule(o,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(s++),r.closed)break}}))}function o(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"timer",(function(){return a}));var r=n(173),i=n(219),o=n(261),s=n(209);function a(e,t,n){void 0===e&&(e=0);var a=-1;return Object(o.isNumeric)(t)?a=Number(t)<1?1:Number(t):Object(s.isScheduler)(t)&&(n=t),Object(s.isScheduler)(n)||(n=i.async),new r.Observable((function(t){var r=Object(o.isNumeric)(e)?e:+e-n.now();return n.schedule(c,r,{index:0,period:a,subscriber:t})}))}function c(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"using",(function(){return s}));var r=n(173),i=n(247),o=n(207);function s(e,t){return new r.Observable((function(n){var r,s;try{r=e()}catch(c){return void n.error(c)}try{s=t(r)}catch(c){return void n.error(c)}var a=(s?Object(i.from)(s):o.EMPTY).subscribe(n);return function(){a.unsubscribe(),r&&r.unsubscribe()}}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"zip",(function(){return d})),n.d(t,"ZipOperator",(function(){return l})),n.d(t,"ZipSubscriber",(function(){return f}));var r=n(176),i=n(210),o=n(182),s=n(175),a=n(233),c=n(234),u=n(239);function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"===typeof n&&e.pop(),Object(i.fromArray)(e,void 0).lift(new l(n))}var l=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.resultSelector))},e}(),f=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"===typeof n?n:null,i.values=r,i}return r.__extends(t,e),t.prototype._next=function(e){var t=this.iterators;Object(o.isArray)(e)?t.push(new h(e)):"function"===typeof e[u.iterator]?t.push(new p(e[u.iterator]())):t.push(new m(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++)if("function"===typeof(s=e[r]).hasValue&&!s.hasValue())return;var i=!1,o=[];for(r=0;r<t;r++){var s,a=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s.Subscriber),p=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),h=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[u.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.__extends(t,e),t.prototype[u.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return Object(c.subscribeToResult)(this,this.observable,this,t)},t}(a.OuterSubscriber)},function(e,t,n){"use strict";n.r(t);var r=n(275);n.d(t,"audit",(function(){return r.audit}));var i=n(276);n.d(t,"auditTime",(function(){return i.auditTime}));var o=n(277);n.d(t,"buffer",(function(){return o.buffer}));var s=n(278);n.d(t,"bufferCount",(function(){return s.bufferCount}));var a=n(279);n.d(t,"bufferTime",(function(){return a.bufferTime}));var c=n(280);n.d(t,"bufferToggle",(function(){return c.bufferToggle}));var u=n(281);n.d(t,"bufferWhen",(function(){return u.bufferWhen}));var d=n(282);n.d(t,"catchError",(function(){return d.catchError}));var l=n(283);n.d(t,"combineAll",(function(){return l.combineAll}));var f=n(284);n.d(t,"combineLatest",(function(){return f.combineLatest}));var p=n(285);n.d(t,"concat",(function(){return p.concat}));var h=n(244);n.d(t,"concatAll",(function(){return h.concatAll}));var m=n(286);n.d(t,"concatMap",(function(){return m.concatMap}));var v=n(287);n.d(t,"concatMapTo",(function(){return v.concatMapTo}));var b=n(288);n.d(t,"count",(function(){return b.count}));var g=n(289);n.d(t,"debounce",(function(){return g.debounce}));var _=n(290);n.d(t,"debounceTime",(function(){return _.debounceTime}));var y=n(291);n.d(t,"defaultIfEmpty",(function(){return y.defaultIfEmpty}));var w=n(292);n.d(t,"delay",(function(){return w.delay}));var S=n(294);n.d(t,"delayWhen",(function(){return S.delayWhen}));var A=n(295);n.d(t,"dematerialize",(function(){return A.dematerialize}));var x=n(296);n.d(t,"distinct",(function(){return x.distinct}));var C=n(297);n.d(t,"distinctUntilChanged",(function(){return C.distinctUntilChanged}));var E=n(298);n.d(t,"distinctUntilKeyChanged",(function(){return E.distinctUntilKeyChanged}));var k=n(299);n.d(t,"elementAt",(function(){return k.elementAt}));var I=n(302);n.d(t,"endWith",(function(){return I.endWith}));var T=n(303);n.d(t,"every",(function(){return T.every}));var R=n(304);n.d(t,"exhaust",(function(){return R.exhaust}));var M=n(305);n.d(t,"exhaustMap",(function(){return M.exhaustMap}));var O=n(306);n.d(t,"expand",(function(){return O.expand}));var P=n(268);n.d(t,"filter",(function(){return P.filter}));var j=n(307);n.d(t,"finalize",(function(){return j.finalize}));var N=n(308);n.d(t,"find",(function(){return N.find}));var D=n(309);n.d(t,"findIndex",(function(){return D.findIndex}));var B=n(310);n.d(t,"first",(function(){return B.first}));var L=n(195);n.d(t,"groupBy",(function(){return L.groupBy}));var V=n(311);n.d(t,"ignoreElements",(function(){return V.ignoreElements}));var U=n(312);n.d(t,"isEmpty",(function(){return U.isEmpty}));var F=n(313);n.d(t,"last",(function(){return F.last}));var G=n(230);n.d(t,"map",(function(){return G.map}));var W=n(315);n.d(t,"mapTo",(function(){return W.mapTo}));var q=n(316);n.d(t,"materialize",(function(){return q.materialize}));var z=n(317);n.d(t,"max",(function(){return z.max}));var Q=n(320);n.d(t,"merge",(function(){return Q.merge}));var X=n(245);n.d(t,"mergeAll",(function(){return X.mergeAll}));var Y=n(246);n.d(t,"mergeMap",(function(){return Y.mergeMap})),n.d(t,"flatMap",(function(){return Y.mergeMap}));var H=n(321);n.d(t,"mergeMapTo",(function(){return H.mergeMapTo}));var K=n(322);n.d(t,"mergeScan",(function(){return K.mergeScan}));var J=n(323);n.d(t,"min",(function(){return J.min}));var Z=n(324);n.d(t,"multicast",(function(){return Z.multicast}));var $=n(205);n.d(t,"observeOn",(function(){return $.observeOn}));var ee=n(325);n.d(t,"onErrorResumeNext",(function(){return ee.onErrorResumeNext}));var te=n(326);n.d(t,"pairwise",(function(){return te.pairwise}));var ne=n(327);n.d(t,"partition",(function(){return ne.partition}));var re=n(328);n.d(t,"pluck",(function(){return re.pluck}));var ie=n(329);n.d(t,"publish",(function(){return ie.publish}));var oe=n(330);n.d(t,"publishBehavior",(function(){return oe.publishBehavior}));var se=n(331);n.d(t,"publishLast",(function(){return se.publishLast}));var ae=n(332);n.d(t,"publishReplay",(function(){return ae.publishReplay}));var ce=n(333);n.d(t,"race",(function(){return ce.race}));var ue=n(318);n.d(t,"reduce",(function(){return ue.reduce}));var de=n(334);n.d(t,"repeat",(function(){return de.repeat}));var le=n(335);n.d(t,"repeatWhen",(function(){return le.repeatWhen}));var fe=n(336);n.d(t,"retry",(function(){return fe.retry}));var pe=n(337);n.d(t,"retryWhen",(function(){return pe.retryWhen}));var he=n(194);n.d(t,"refCount",(function(){return he.refCount}));var me=n(338);n.d(t,"sample",(function(){return me.sample}));var ve=n(339);n.d(t,"sampleTime",(function(){return ve.sampleTime}));var be=n(319);n.d(t,"scan",(function(){return be.scan}));var ge=n(340);n.d(t,"sequenceEqual",(function(){return ge.sequenceEqual}));var _e=n(341);n.d(t,"share",(function(){return _e.share}));var ye=n(342);n.d(t,"shareReplay",(function(){return ye.shareReplay}));var we=n(343);n.d(t,"single",(function(){return we.single}));var Se=n(344);n.d(t,"skip",(function(){return Se.skip}));var Ae=n(345);n.d(t,"skipLast",(function(){return Ae.skipLast}));var xe=n(346);n.d(t,"skipUntil",(function(){return xe.skipUntil}));var Ce=n(347);n.d(t,"skipWhile",(function(){return Ce.skipWhile}));var Ee=n(348);n.d(t,"startWith",(function(){return Ee.startWith}));var ke=n(349);n.d(t,"subscribeOn",(function(){return ke.subscribeOn}));var Ie=n(351);n.d(t,"switchAll",(function(){return Ie.switchAll}));var Te=n(352);n.d(t,"switchMap",(function(){return Te.switchMap}));var Re=n(353);n.d(t,"switchMapTo",(function(){return Re.switchMapTo}));var Me=n(301);n.d(t,"take",(function(){return Me.take}));var Oe=n(314);n.d(t,"takeLast",(function(){return Oe.takeLast}));var Pe=n(354);n.d(t,"takeUntil",(function(){return Pe.takeUntil}));var je=n(355);n.d(t,"takeWhile",(function(){return je.takeWhile}));var Ne=n(356);n.d(t,"tap",(function(){return Ne.tap}));var De=n(357);n.d(t,"throttle",(function(){return De.throttle}));var Be=n(358);n.d(t,"throttleTime",(function(){return Be.throttleTime}));var Le=n(300);n.d(t,"throwIfEmpty",(function(){return Le.throwIfEmpty}));var Ve=n(359);n.d(t,"timeInterval",(function(){return Ve.timeInterval}));var Ue=n(360);n.d(t,"timeout",(function(){return Ue.timeout}));var Fe=n(361);n.d(t,"timeoutWith",(function(){return Fe.timeoutWith}));var Ge=n(362);n.d(t,"timestamp",(function(){return Ge.timestamp}));var We=n(363);n.d(t,"toArray",(function(){return We.toArray}));var qe=n(364);n.d(t,"window",(function(){return qe.window}));var ze=n(365);n.d(t,"windowCount",(function(){return ze.windowCount}));var Qe=n(366);n.d(t,"windowTime",(function(){return Qe.windowTime}));var Xe=n(367);n.d(t,"windowToggle",(function(){return Xe.windowToggle}));var Ye=n(368);n.d(t,"windowWhen",(function(){return Ye.windowWhen}));var He=n(369);n.d(t,"withLatestFrom",(function(){return He.withLatestFrom}));var Ke=n(370);n.d(t,"zip",(function(){return Ke.zip}));var Je=n(371);n.d(t,"zipAll",(function(){return Je.zipAll}))},function(e,t,n){"use strict";n.r(t),n.d(t,"audit",(function(){return s}));var r=n(176),i=n(233),o=n(234);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.__extends(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=void 0;try{t=(0,this.durationSelector)(e)}catch(r){return this.destination.error(r)}var n=Object(o.subscribeToResult)(this,t);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},t.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))},t.prototype.notifyNext=function(e,t,n,r){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"auditTime",(function(){return s}));var r=n(219),i=n(275),o=n(271);function s(e,t){return void 0===t&&(t=r.async),Object(i.audit)((function(){return Object(o.timer)(e,t)}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"buffer",(function(){return s}));var r=n(176),i=n(233),o=n(234);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingNotifier))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.buffer=[],r.add(Object(o.subscribeToResult)(r,n)),r}return r.__extends(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferCount",(function(){return o}));var r=n(176),i=n(175);function o(e,t){return void 0===t&&(t=null),function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?c:a}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bufferSize=n,r.buffer=[],r}return r.__extends(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(i.Subscriber),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r.__extends(t,e),t.prototype._next=function(e){var t=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n===0&&r.push([]);for(var o=r.length;o--;){var s=r[o];s.push(e),s.length===t&&(r.splice(o,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var r=t.shift();r.length>0&&n.next(r)}e.prototype._complete.call(this)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferTime",(function(){return a}));var r=n(176),i=n(219),o=n(175),s=n(209);function a(e){var t=arguments.length,n=i.async;Object(s.isScheduler)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;t>=2&&(r=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),function(t){return t.lift(new c(e,r,o,n))}}var c=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),u=function(){return function(){this.buffer=[]}}(),d=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=r,s.maxBufferSize=i,s.scheduler=o,s.contexts=[];var a=s.openContext();if(s.timespanOnly=null==r||r<0,s.timespanOnly){var c={subscriber:s,context:a,bufferTimeSpan:n};s.add(a.closeAction=o.schedule(l,n,c))}else{var u={subscriber:s,context:a},d={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:s,scheduler:o};s.add(a.closeAction=o.schedule(p,n,u)),s.add(o.schedule(f,r,d))}return s}return r.__extends(t,e),t.prototype._next=function(e){for(var t,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(e),s.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,n=this.destination;t.length>0;){var r=t.shift();n.next(r.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(l,n,r))}},t.prototype.openContext=function(){var e=new u;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(o.Subscriber);function l(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function f(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,i=e.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(p,n,{subscriber:r,context:o})),this.schedule(e,t))}function p(e){var t=e.subscriber,n=e.context;t.closeContext(n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferToggle",(function(){return a}));var r=n(176),i=n(181),o=n(234),s=n(233);function a(e,t){return function(n){return n.lift(new c(e,t))}}var c=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.openings,this.closingSelector))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(Object(o.subscribeToResult)(i,n)),i}return r.__extends(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(n){this._error(n)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=new i.Subscription,r={buffer:[],subscription:n};t.push(r);var s=Object(o.subscribeToResult)(this,e,r);!s||s.closed?this.closeBuffer(r):(s.context=r,this.add(s),n.add(s))},t}(s.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"bufferWhen",(function(){return a}));var r=n(176),i=n(181),o=n(233),s=n(234);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r.__extends(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,n,r,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{t=(0,this.closingSelector)()}catch(r){return this.error(r)}e=new i.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(s.subscribeToResult)(this,t)),this.subscribing=!1},t}(o.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"catchError",(function(){return a}));var r=n(176),i=n(233),o=n(235),s=n(234);function a(e){return function(t){var n=new c(e),r=t.lift(n);return n.caught=r}}var c=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.selector,this.caught))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return r.__extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(i){return void e.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new o.InnerSubscriber(this,void 0,void 0);this.add(r),Object(s.subscribeToResult)(this,n,void 0,void 0,r)}},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"combineAll",(function(){return i}));var r=n(232);function i(e){return function(t){return t.lift(new r.CombineLatestOperator(e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"combineLatest",(function(){return s}));var r=n(182),i=n(232),o=n(247);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return"function"===typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(r.isArray)(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(Object(o.from)([t].concat(e)),new i.CombineLatestOperator(n))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"concat",(function(){return i}));var r=n(243);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r.concat.apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatMap",(function(){return i}));var r=n(246);function i(e,t){return Object(r.mergeMap)(e,t,1)}},function(e,t,n){"use strict";n.r(t),n.d(t,"concatMapTo",(function(){return i}));var r=n(286);function i(e,t){return Object(r.concatMap)((function(){return e}),t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"count",(function(){return o}));var r=n(176),i=n(175);function o(e){return function(t){return t.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r.__extends(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"debounce",(function(){return s}));var r=n(176),i=n(233),o=n(234);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return r.__extends(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(o.subscribeToResult)(this,t))&&!n.closed&&this.add(this.durationSubscription=n)},t.prototype.notifyNext=function(e,t,n,r,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"debounceTime",(function(){return s}));var r=n(176),i=n(175),o=n(219);function s(e,t){return void 0===t&&(t=o.async),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.dueTime,this.scheduler))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r.__extends(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(i.Subscriber);function u(e){e.debouncedNext()}},function(e,t,n){"use strict";n.r(t),n.d(t,"defaultIfEmpty",(function(){return o}));var r=n(176),i=n(175);function o(e){return void 0===e&&(e=null),function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.defaultValue))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.__extends(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"delay",(function(){return c}));var r=n(176),i=n(219),o=n(293),s=n(175),a=n(206);function c(e,t){void 0===t&&(t=i.async);var n=Object(o.isDate)(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new u(n,t))}}var u=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.delay,this.scheduler))},e}(),d=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r.__extends(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new l(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(a.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(a.Notification.createComplete()),this.unsubscribe()},t}(s.Subscriber),l=function(){return function(e,t){this.time=e,this.notification=t}}()},function(e,t,n){"use strict";function r(e){return e instanceof Date&&!isNaN(+e)}n.r(t),n.d(t,"isDate",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"delayWhen",(function(){return c}));var r=n(176),i=n(175),o=n(173),s=n(233),a=n(234);function c(e,t){return t?function(n){return new l(n,t).lift(new u(e))}:function(t){return t.lift(new u(e))}}var u=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.delayDurationSelector))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(r){this.destination.error(r)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var n=Object(a.subscribeToResult)(this,e,t);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(s.OuterSubscriber),l=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=n,r}return r.__extends(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new f(e,this.source))},t}(o.Observable),f=function(e){function t(t,n){var r=e.call(this)||this;return r.parent=t,r.source=n,r.sourceSubscribed=!1,r}return r.__extends(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"dematerialize",(function(){return o}));var r=n(176),i=n(175);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"distinct",(function(){return s})),n.d(t,"DistinctSubscriber",(function(){return c}));var r=n(176),i=n(233),o=n(234);function s(e,t){return function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.keySelector,this.flushes))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=n,i.values=new Set,r&&i.add(Object(o.subscribeToResult)(i,r)),i}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(r){return void n.error(r)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"distinctUntilChanged",(function(){return o}));var r=n(176),i=n(175);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.compare,this.keySelector))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"===typeof n&&(i.compare=n),i}return r.__extends(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"distinctUntilKeyChanged",(function(){return i}));var r=n(297);function i(e,t){return Object(r.distinctUntilChanged)((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"elementAt",(function(){return c}));var r=n(226),i=n(268),o=n(300),s=n(291),a=n(301);function c(e,t){if(e<0)throw new r.ArgumentOutOfRangeError;var n=arguments.length>=2;return function(c){return c.pipe(Object(i.filter)((function(t,n){return n===e})),Object(a.take)(1),n?Object(s.defaultIfEmpty)(t):Object(o.throwIfEmpty)((function(){return new r.ArgumentOutOfRangeError})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"throwIfEmpty",(function(){return s}));var r=n(176),i=n(227),o=n(175);function s(e){return void 0===e&&(e=u),function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.errorFactory))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.__extends(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(o.Subscriber);function u(){return new i.EmptyError}},function(e,t,n){"use strict";n.r(t),n.d(t,"take",(function(){return a}));var r=n(176),i=n(175),o=n(226),s=n(207);function a(e){return function(t){return 0===e?Object(s.empty)():t.lift(new c(e))}}var c=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r.__extends(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"endWith",(function(){return o}));var r=n(243),i=n(208);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return Object(r.concat)(t,i.of.apply(void 0,e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"every",(function(){return o}));var r=n(176),i=n(175);function o(e,t){return function(n){return n.lift(new s(e,t,n))}}var s=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg,this.source))},e}(),a=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r.__extends(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"exhaust",(function(){return s}));var r=n(176),i=n(233),o=n(234);function s(){return function(e){return e.lift(new a)}}var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r.__extends(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(o.subscribeToResult)(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"exhaustMap",(function(){return u}));var r=n(176),i=n(233),o=n(235),s=n(234),a=n(230),c=n(247);function u(e,t){return t?function(n){return n.pipe(u((function(n,r){return Object(c.from)(e(n,r)).pipe(Object(a.map)((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new d(e))}}var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project))},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r.__extends(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new o.InnerSubscriber(this,void 0,void 0);this.destination.add(r),Object(s.subscribeToResult)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"expand",(function(){return s})),n.d(t,"ExpandOperator",(function(){return a})),n.d(t,"ExpandSubscriber",(function(){return c}));var r=n(176),i=n(233),o=n(234);function s(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new a(e,t,n))}}var a=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.concurrent,this.scheduler))},e}(),c=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return r.__extends(t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,i=e.index;t.subscribeToProjection(n,r,i)},t.prototype._next=function(e){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(e);try{var i=(0,this.project)(e,r);if(this.scheduler){var o={subscriber:this,result:i,value:e,index:r};this.destination.add(this.scheduler.schedule(t.dispatch,0,o))}else this.subscribeToProjection(i,e,r)}catch(s){n.error(s)}}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,n){this.active++,this.destination.add(Object(o.subscribeToResult)(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.destination.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"finalize",(function(){return s}));var r=n(176),i=n(175),o=n(181);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.callback))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.add(new o.Subscription(n)),r}return r.__extends(t,e),t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"find",(function(){return o})),n.d(t,"FindValueOperator",(function(){return s})),n.d(t,"FindValueSubscriber",(function(){return a}));var r=n(176),i=n(175);function o(e,t){if("function"!==typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new s(e,n,!1,t))}}var s=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),a=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.predicate=n,s.source=r,s.yieldIndex=i,s.thisArg=o,s.index=0,s}return r.__extends(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this.predicate,n=this.thisArg,r=this.index++;try{t.call(n||this,e,r,this.source)&&this.notifyComplete(this.yieldIndex?r:e)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"findIndex",(function(){return i}));var r=n(308);function i(e,t){return function(n){return n.lift(new r.FindValueOperator(e,n,!0,t))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"first",(function(){return u}));var r=n(227),i=n(268),o=n(301),s=n(291),a=n(300),c=n(224);function u(e,t){var n=arguments.length>=2;return function(u){return u.pipe(e?Object(i.filter)((function(t,n){return e(t,n,u)})):c.identity,Object(o.take)(1),n?Object(s.defaultIfEmpty)(t):Object(a.throwIfEmpty)((function(){return new r.EmptyError})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"ignoreElements",(function(){return o}));var r=n(176),i=n(175);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype._next=function(e){},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"isEmpty",(function(){return o}));var r=n(176),i=n(175);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"last",(function(){return u}));var r=n(227),i=n(268),o=n(314),s=n(300),a=n(291),c=n(224);function u(e,t){var n=arguments.length>=2;return function(u){return u.pipe(e?Object(i.filter)((function(t,n){return e(t,n,u)})):c.identity,Object(o.takeLast)(1),n?Object(a.defaultIfEmpty)(t):Object(s.throwIfEmpty)((function(){return new r.EmptyError})))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"takeLast",(function(){return a}));var r=n(176),i=n(175),o=n(226),s=n(207);function a(e){return function(t){return 0===e?Object(s.empty)():t.lift(new c(e))}}var c=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.__extends(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"mapTo",(function(){return o}));var r=n(176),i=n(175);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.value))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return r.__extends(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"materialize",(function(){return s}));var r=n(176),i=n(175),o=n(206);function s(){return function(e){return e.lift(new a)}}var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}(),c=function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype._next=function(e){this.destination.next(o.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(o.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(o.Notification.createComplete()),e.complete()},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"max",(function(){return i}));var r=n(318);function i(e){var t="function"===typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t};return Object(r.reduce)(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"reduce",(function(){return a}));var r=n(319),i=n(314),o=n(291),s=n(188);function a(e,t){return arguments.length>=2?function(n){return Object(s.pipe)(Object(r.scan)(e,t),Object(i.takeLast)(1),Object(o.defaultIfEmpty)(t))(n)}:function(t){return Object(s.pipe)(Object(r.scan)((function(t,n,r){return e(t,n,r+1)})),Object(i.takeLast)(1))(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"scan",(function(){return o}));var r=n(176),i=n(175);function o(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(e,t,n))}}var s=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.accumulator,this.seed,this.hasSeed))},e}(),a=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r.__extends(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"merge",(function(){return i}));var r=n(262);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r.merge.apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeMapTo",(function(){return i}));var r=n(246);function i(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof t?Object(r.mergeMap)((function(){return e}),t,n):("number"===typeof t&&(n=t),Object(r.mergeMap)((function(){return e}),n))}},function(e,t,n){"use strict";n.r(t),n.d(t,"mergeScan",(function(){return a})),n.d(t,"MergeScanOperator",(function(){return c})),n.d(t,"MergeScanSubscriber",(function(){return u}));var r=n(176),i=n(234),o=n(233),s=n(235);function a(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new c(e,t,n))}}var c=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.concurrent))},e}(),u=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r.__extends(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,e,t)}catch(i){return n.error(i)}this.active++,this._innerSub(r,e,t)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n){var r=new s.InnerSubscriber(this,void 0,void 0);this.destination.add(r),Object(i.subscribeToResult)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.destination.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(o.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"min",(function(){return i}));var r=n(318);function i(e){var t="function"===typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t};return Object(r.reduce)(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"multicast",(function(){return i})),n.d(t,"MulticastOperator",(function(){return o}));var r=n(190);function i(e,t){return function(n){var i;if(i="function"===typeof e?e:function(){return e},"function"===typeof t)return n.lift(new o(i,t));var s=Object.create(n,r.connectableObservableDescriptor);return s.source=n,s.subjectFactory=i,s}}var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"onErrorResumeNext",(function(){return u})),n.d(t,"onErrorResumeNextStatic",(function(){return d}));var r=n(176),i=n(247),o=n(182),s=n(233),a=n(235),c=n(234);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Object(o.isArray)(e[0])&&(e=e[0]),function(t){return t.lift(new l(e))}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return 1===e.length&&Object(o.isArray)(e[0])&&(e=e[0]),n=e.shift(),Object(i.from)(n,null).lift(new l(e))}var l=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.nextSources))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.nextSources=n,r}return r.__extends(t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new a.InnerSubscriber(this,void 0,void 0);this.destination.add(t),Object(c.subscribeToResult)(this,e,void 0,void 0,t)}else this.destination.complete()},t}(s.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"pairwise",(function(){return o}));var r=n(176),i=n(175);function o(){return function(e){return e.lift(new s)}}var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){var n=e.call(this,t)||this;return n.hasPrev=!1,n}return r.__extends(t,e),t.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"partition",(function(){return o}));var r=n(267),i=n(268);function o(e,t){return function(n){return[Object(i.filter)(e,t)(n),Object(i.filter)(Object(r.not)(e,t))(n)]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"pluck",(function(){return i}));var r=n(230);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(t){return Object(r.map)(o(e,n))(t)}}function o(e,t){return function(n){for(var r=n,i=0;i<t;i++){var o=r[e[i]];if("undefined"===typeof o)return;r=o}return r}}},function(e,t,n){"use strict";n.r(t),n.d(t,"publish",(function(){return o}));var r=n(191),i=n(324);function o(e){return e?Object(i.multicast)((function(){return new r.Subject}),e):Object(i.multicast)(new r.Subject)}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishBehavior",(function(){return o}));var r=n(196),i=n(324);function o(e){return function(t){return Object(i.multicast)(new r.BehaviorSubject(e))(t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishLast",(function(){return o}));var r=n(214),i=n(324);function o(){return function(e){return Object(i.multicast)(new r.AsyncSubject)(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"publishReplay",(function(){return o}));var r=n(197),i=n(324);function o(e,t,n,o){n&&"function"!==typeof n&&(o=n);var s="function"===typeof n?n:void 0,a=new r.ReplaySubject(e,t,o);return function(e){return Object(i.multicast)((function(){return a}),s)(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"race",(function(){return o}));var r=n(182),i=n(269);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&Object(r.isArray)(e[0])&&(e=e[0]),t.lift.call(i.race.apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"repeat",(function(){return s}));var r=n(176),i=n(175),o=n(207);function s(e){return void 0===e&&(e=-1),function(t){return 0===e?Object(o.empty)():e<0?t.lift(new a(-1,t)):t.lift(new a(e-1,t))}}var a=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.count,this.source))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r.__extends(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,n=this.count;if(0===n)return e.prototype.complete.call(this);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"repeatWhen",(function(){return a}));var r=n(176),i=n(191),o=n(233),s=n(234);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,t))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){var t;this.notifications=new i.Subject;try{t=(0,this.notifier)(this.notifications)}catch(n){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=Object(s.subscribeToResult)(this,t)},t}(o.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"retry",(function(){return o}));var r=n(176),i=n(175);function o(e){return void 0===e&&(e=-1),function(t){return t.lift(new s(e,t))}}var s=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.count,this.source))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r.__extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return e.prototype.error.call(this,t);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"retryWhen",(function(){return a}));var r=n(176),i=n(191),o=n(233),s=n(234);function a(e){return function(t){return t.lift(new c(e,t))}}var c=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,this.source))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i}return r.__extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,o=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new i.Subject;try{r=(0,this.notifier)(n)}catch(a){return e.prototype.error.call(this,a)}o=Object(s.subscribeToResult)(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=o,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},t}(o.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"sample",(function(){return s}));var r=n(176),i=n(233),o=n(234);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new c(e),r=t.subscribe(n);return r.add(Object(o.subscribeToResult)(n,this.notifier)),r},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasValue=!1,t}return r.__extends(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,n,r,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"sampleTime",(function(){return s}));var r=n(176),i=n(175),o=n(219);function s(e,t){return void 0===t&&(t=o.async),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.period,this.scheduler))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(u,n,{subscriber:i,period:n})),i}return r.__extends(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i.Subscriber);function u(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"sequenceEqual",(function(){return o})),n.d(t,"SequenceEqualOperator",(function(){return s})),n.d(t,"SequenceEqualSubscriber",(function(){return a}));var r=n(176),i=n(175);function o(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.compareTo=e,this.comparator=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.compareTo,this.comparator))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new c(t,i))),i}return r.__extends(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this._a,t=this._b,n=this.comparator;e.length>0&&t.length>0;){var r=e.shift(),i=t.shift(),o=!1;try{o=n?n(r,i):r===i}catch(s){this.destination.error(s)}o||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t}(i.Subscriber),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.parent=n,r}return r.__extends(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"share",(function(){return a}));var r=n(324),i=n(194),o=n(191);function s(){return new o.Subject}function a(){return function(e){return Object(i.refCount)()(Object(r.multicast)(s)(e))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"shareReplay",(function(){return i}));var r=n(197);function i(e,t,n){var i;return i=e&&"object"===typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,i=e.bufferSize,o=void 0===i?Number.POSITIVE_INFINITY:i,s=e.windowTime,a=void 0===s?Number.POSITIVE_INFINITY:s,c=e.refCount,u=e.scheduler,d=0,l=!1,f=!1;return function(e){d++,t&&!l||(l=!1,t=new r.ReplaySubject(o,a,u),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){f=!0,t.complete()}}));var i=t.subscribe(this);this.add((function(){d--,i.unsubscribe(),n&&!f&&c&&0===d&&(n.unsubscribe(),n=void 0,t=void 0)}))}}(i))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"single",(function(){return s}));var r=n(176),i=n(175),o=n(227);function s(e){return function(t){return t.lift(new a(e,t))}}var a=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.source))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r.__extends(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new o.EmptyError)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"skip",(function(){return o}));var r=n(176),i=n(175);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.total))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r.__extends(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"skipLast",(function(){return s}));var r=n(176),i=n(175),o=n(226);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new i.Subscriber(e)):t.subscribe(new c(e,this._skipCount))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r.__extends(t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,i=this._ring,o=i[r];i[r]=e,this.destination.next(o)}},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"skipUntil",(function(){return a}));var r=n(176),i=n(233),o=n(235),s=n(234);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var i=new o.InnerSubscriber(r,void 0,void 0);return r.add(i),r.innerSubscription=i,Object(s.subscribeToResult)(r,n,void 0,void 0,i),r}return r.__extends(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(e,t,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"skipWhile",(function(){return o}));var r=n(176),i=n(175);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate))},e}(),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r.__extends(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(n){this.destination.error(n)}},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"startWith",(function(){return o}));var r=n(243),i=n(209);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(i.isScheduler)(n)?(e.pop(),function(t){return Object(r.concat)(e,t,n)}):function(t){return Object(r.concat)(e,t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeOn",(function(){return i}));var r=n(350);function i(e,t){return void 0===t&&(t=0),function(n){return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new r.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"SubscribeOnObservable",(function(){return a}));var r=n(176),i=n(173),o=n(215),s=n(261),a=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=o.asap);var i=e.call(this)||this;return i.source=t,i.delayTime=n,i.scheduler=r,(!Object(s.isNumeric)(n)||n<0)&&(i.delayTime=0),r&&"function"===typeof r.schedule||(i.scheduler=o.asap),i}return r.__extends(t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=o.asap),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source;return this.scheduler.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(i.Observable)},function(e,t,n){"use strict";n.r(t),n.d(t,"switchAll",(function(){return o}));var r=n(352),i=n(224);function o(){return Object(r.switchMap)(i.identity)}},function(e,t,n){"use strict";n.r(t),n.d(t,"switchMap",(function(){return u}));var r=n(176),i=n(233),o=n(235),s=n(234),a=n(230),c=n(247);function u(e,t){return"function"===typeof t?function(n){return n.pipe(u((function(n,r){return Object(c.from)(e(n,r)).pipe(Object(a.map)((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new d(e))}}var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project))},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return r.__extends(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new o.InnerSubscriber(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(s.subscribeToResult)(this,e,t,n,i)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"switchMapTo",(function(){return i}));var r=n(352);function i(e,t){return t?Object(r.switchMap)((function(){return e}),t):Object(r.switchMap)((function(){return e}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"takeUntil",(function(){return s}));var r=n(176),i=n(233),o=n(234);function s(e){return function(t){return t.lift(new a(e))}}var a=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new c(e),r=Object(o.subscribeToResult)(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"takeWhile",(function(){return o}));var r=n(176),i=n(175);function o(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.inclusive))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r.__extends(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"tap",(function(){return a}));var r=n(176),i=n(175),o=n(189),s=n(177);function a(e,t,n){return function(r){return r.lift(new c(e,t,n))}}var c=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))},e}(),u=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a._tapNext=o.noop,a._tapError=o.noop,a._tapComplete=o.noop,a._tapError=r||o.noop,a._tapComplete=i||o.noop,Object(s.isFunction)(n)?(a._context=a,a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||o.noop,a._tapError=n.error||o.noop,a._tapComplete=n.complete||o.noop),a}return r.__extends(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"defaultThrottleConfig",(function(){return s})),n.d(t,"throttle",(function(){return a}));var r=n(176),i=n(233),o=n(234),s={leading:!0,trailing:!1};function a(e,t){return void 0===t&&(t=s),function(n){return n.lift(new c(e,t.leading,t.trailing))}}var c=function(){function e(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.durationSelector,this.leading,this.trailing))},e}(),u=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return r.__extends(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._hasValue,t=this._sendValue;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=null},t.prototype.throttle=function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=Object(o.subscribeToResult)(this,t))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(t){return this.destination.error(t),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=null,t&&this.send()},t.prototype.notifyNext=function(e,t,n,r,i){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"throttleTime",(function(){return a}));var r=n(176),i=n(175),o=n(219),s=n(357);function a(e,t,n){return void 0===t&&(t=o.async),void 0===n&&(n=s.defaultThrottleConfig),function(r){return r.lift(new c(e,t,n.leading,n.trailing))}}var c=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),u=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.duration=n,s.scheduler=r,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return r.__extends(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(d,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(i.Subscriber);function d(e){e.subscriber.clearThrottle()}},function(e,t,n){"use strict";n.r(t),n.d(t,"timeInterval",(function(){return a})),n.d(t,"TimeInterval",(function(){return c}));var r=n(219),i=n(319),o=n(254),s=n(230);function a(e){return void 0===e&&(e=r.async),function(t){return Object(o.defer)((function(){return t.pipe(Object(i.scan)((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),Object(s.map)((function(e){var t=e.current,n=e.last,r=e.value;return new c(r,t-n)})))}))}}var c=function(){return function(e,t){this.value=e,this.interval=t}}()},function(e,t,n){"use strict";n.r(t),n.d(t,"timeout",(function(){return a}));var r=n(219),i=n(228),o=n(361),s=n(213);function a(e,t){return void 0===t&&(t=r.async),Object(o.timeoutWith)(e,Object(s.throwError)(new i.TimeoutError),t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"timeoutWith",(function(){return c}));var r=n(176),i=n(219),o=n(293),s=n(233),a=n(234);function c(e,t,n){return void 0===n&&(n=i.async),function(r){var i=Object(o.isDate)(e),s=i?+e-n.now():Math.abs(e);return r.lift(new u(s,i,t,n))}}var u=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),d=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=i,s.scheduler=o,s.action=null,s.scheduleTimeout(),s}return r.__extends(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(a.subscribeToResult)(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(s.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"timestamp",(function(){return o})),n.d(t,"Timestamp",(function(){return s}));var r=n(219),i=n(230);function o(e){return void 0===e&&(e=r.async),Object(i.map)((function(t){return new s(t,e.now())}))}var s=function(){return function(e,t){this.value=e,this.timestamp=t}}()},function(e,t,n){"use strict";n.r(t),n.d(t,"toArray",(function(){return o}));var r=n(318);function i(e,t,n){return 0===n?[t]:(e.push(t),e)}function o(){return Object(r.reduce)(i,[])}},function(e,t,n){"use strict";n.r(t),n.d(t,"window",(function(){return a}));var r=n(176),i=n(191),o=n(233),s=n(234);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new u(e),r=t.subscribe(n);return r.closed||n.add(Object(s.subscribeToResult)(n,this.windowBoundaries)),r},e}(),u=function(e){function t(t){var n=e.call(this,t)||this;return n.window=new i.Subject,t.next(n.window),n}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new i.Subject;t.next(n)},t}(o.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"windowCount",(function(){return s}));var r=n(176),i=n(175),o=n(191);function s(e,t){return void 0===t&&(t=0),function(n){return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.windowSize,this.startWindowEvery))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.destination=t,i.windowSize=n,i.startWindowEvery=r,i.windows=[new o.Subject],i.count=0,t.next(i.windows[0]),i}return r.__extends(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,s=i.length,a=0;a<s&&!this.closed;a++)i[a].next(e);var c=this.count-r+1;if(c>=0&&c%t===0&&!this.closed&&i.shift().complete(),++this.count%t===0&&!this.closed){var u=new o.Subject;i.push(u),n.next(u)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(i.Subscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"windowTime",(function(){return u}));var r=n(176),i=n(191),o=n(219),s=n(175),a=n(261),c=n(209);function u(e){var t=o.async,n=null,r=Number.POSITIVE_INFINITY;return Object(c.isScheduler)(arguments[3])&&(t=arguments[3]),Object(c.isScheduler)(arguments[2])?t=arguments[2]:Object(a.isNumeric)(arguments[2])&&(r=arguments[2]),Object(c.isScheduler)(arguments[1])?t=arguments[1]:Object(a.isNumeric)(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new d(e,n,r,t))}}var d=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return r.__extends(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(i.Subject),f=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;s.destination=t,s.windowTimeSpan=n,s.windowCreationInterval=r,s.maxWindowSize=i,s.scheduler=o,s.windows=[];var a=s.openWindow();if(null!==r&&r>=0){var c={subscriber:s,window:a,context:null},u={windowTimeSpan:n,windowCreationInterval:r,subscriber:s,scheduler:o};s.add(o.schedule(m,n,c)),s.add(o.schedule(h,r,u))}else{var d={subscriber:s,window:a,windowTimeSpan:n};s.add(o.schedule(p,n,d))}return s}return r.__extends(t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0;r<n;r++){var i=t[r];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new l;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(s.Subscriber);function p(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function h(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,i=e.windowCreationInterval,o=n.openWindow(),s={action:this,subscription:null},a={subscriber:n,window:o,context:s};s.subscription=r.schedule(m,t,a),this.add(s.subscription),this.schedule(e,i)}function m(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"windowToggle",(function(){return c}));var r=n(176),i=n(191),o=n(181),s=n(233),a=n(234);function c(e,t){return function(n){return n.lift(new u(e,t))}}var u=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.openings,this.closingSelector))},e}(),d=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(a.subscribeToResult)(i,n,n)),i}return r.__extends(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(t),o.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,r=-1;++r<n;){var i=t[r];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1;++n<t;){var r=e[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,n,r,s){if(e===this.openings){var c=void 0;try{c=(0,this.closingSelector)(t)}catch(p){return this.error(p)}var u=new i.Subject,d=new o.Subscription,l={window:u,subscription:d};this.contexts.push(l);var f=Object(a.subscribeToResult)(this,c,l);f.closed?this.closeWindow(this.contexts.length-1):(f.context=l,d.add(f)),this.destination.next(u)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,i=n.subscription;t.splice(e,1),r.complete(),i.unsubscribe()}},t}(s.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"windowWhen",(function(){return a}));var r=n(176),i=n(191),o=n(233),s=n(234);function a(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.closingSelector=n,r.openWindow(),r}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow(i)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n,r=this.window=new i.Subject;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(o){return this.destination.error(o),void this.window.error(o)}this.add(this.closingNotification=Object(s.subscribeToResult)(this,n))},t}(o.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"withLatestFrom",(function(){return s}));var r=n(176),i=n(233),o=n(234);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;"function"===typeof e[e.length-1]&&(n=e.pop());var r=e;return t.lift(new a(r,n))}}var a=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.observables,this.project))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;i.observables=n,i.project=r,i.toRespond=[];var s=n.length;i.values=new Array(s);for(var a=0;a<s;a++)i.toRespond.push(a);for(a=0;a<s;a++){var c=n[a];i.add(Object(o.subscribeToResult)(i,c,c,a))}return i}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(i.OuterSubscriber)},function(e,t,n){"use strict";n.r(t),n.d(t,"zip",(function(){return i}));var r=n(273);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(r.zip.apply(void 0,[t].concat(e)))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"zipAll",(function(){return i}));var r=n(273);function i(e){return function(t){return t.lift(new r.ZipOperator(e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(87)),i=n(172),o=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}function a(){r.default.extend(this,{subscribe:function(e,t,n){return this.subject.subscribe(e,t,n)}},{onMeExit:function(e,t){this.mgr._onExit(this.confrId,e,t),this.mgr.upload_stats&&this.mgr.upload_stats.upload_event({event:1,reason:e,sessionId:this._session._sessionId})},onAddMember:function(e){if(this.mgr.onMemberJoin(e,this.confrId),this.mgr.upload_stats){var t=e.role,n=e.memName,r=e.id;this.mgr.upload_stats.upload_event({event:10,role:t,addMemName:n,addMemId:r})}},onRemoveMember:function(e,t){if(this.mgr.onMemberLeave(e,t,this.confrId),this.mgr.upload_stats){var n=e.role,r=e.memName,i=e.id;this.mgr.upload_stats.upload_event({event:11,role:n,removeMemName:r,removeMemId:i})}},onAddStream:function(e){if(0!=e.id&&(e.located()||this.onRemoteStream&&this.onRemoteStream(e),this.mgr.streamBindVideo(e,void 0,this.confrId),this.mgr._onAddMemberStream(e,this.confrId),!e.located()&&this.mgr.upload_stats)){var t=e.id,n=e.voff,r=e.aoff,i=e.type,o=e.memId,s=e.memName;this.mgr.upload_stats.upload_event({event:12,sId:t,voff:n,aoff:r,streamType:i,addMemId:o,addMemName:s})}},onRemoveStream:function(e){if(0!=e.id){var t=this.mgr._confr(this.confrId);t&&e&&e.located()&&(t.av&&t.av.id===e.id&&(t.av=void 0),t.desktop&&t.desktop.id===e.id&&(t.desktop=void 0));var n=r.default.removeAttribute(this.mgr._videos,e.id);if(this.mgr._onRemoveMemberStream(e,this.confrId),n&&this.mgr.unloadVideo(e.owner,e,n),!e.located()&&this.mgr.upload_stats){var i=e.id,o=e.type,s=e.memId,a=e.memName;this.mgr.upload_stats.upload_event({event:13,sId:i,streamType:o,removeMemId:s,removeMemName:a})}}},onUpdateStream:function(e,t){if(0!=e.id){var n=this,r=this.mgr._videos[e.id];r&&(t&&t.ifMediaStream((function(e){r&&attachMediaStream(r,e),r&&r.hasAttribute("flow")&&n.mgr.onMediaTransmission(r,(function(e,t,n,i){(0,o.default)(r).trigger("onMediaTransmission",[e,t,n,i])}))})),e.aoff?r.setAttribute("aoff","aoff"):r.removeAttribute("aoff"),e.voff?r.setAttribute("voff","voff"):r.removeAttribute("voff"));var i={video:!e.voff,audio:!e.aoff};t&&t.ifVoff((function(t){i||(i={}),i.video=!t,e.located()||(i.video=e.subArgs?e.subArgs.subSVideo:!e.voff)})),t&&t.ifAoff((function(t){i||(i={}),i.audio=!t,e.located()||(i.audio=e.subArgs?e.subArgs.subSAudio:!e.aoff,2===e.type&&(i.audio=!0))})),i&&this.mgr._onMemberMediaChanaged(e.owner,e,i,this.confrId),i&&this.mgr._onUpdateMemberStream(e,i,this.confrId)}},onNetworkWeak:function(){},onNotSupportPublishVideoCodecs:function(e){this.mgr._onNotSupportMemberPublishVideoCodecs(e,this.confrId)},onRecvRemoteMessage:function(e,t){this.mgr._onRecvRemoteMessage(e,t,this.confrId)},onSoundChanage:function(e,t,n){this.mgr._onMemberSoundChanaged(e,t,n,this.confrId)},onTalking:function(e,t,n){this.mgr._onTalking(e,t,n,this.confrId)},onRoleUpdate:function(e,t){var n=this.mgr._confrs[this.confrId];t&&(n.roleToken=t),n.role=e,e==this.mgr.Role.AUDIENCE&&(n.av&&this.mgr.hungup(n.av),n.desktop&&this.mgr.hungup(n.desktop)),this.mgr._onRoleUpdated(e,this.confrId),this.mgr.upload_stats&&this.mgr.upload_stats.upload_event({event:21,role:e,sessionId:this._session._sessionId})},onNotifyEvent:function(e){var t=this;try{if(e instanceof emedia.event.ICEChanage){var n=e.webrtc,i=e.state;r.default.forEach(t._cacheStreams,(function(e,o){if(o.rtcId==n.getRtcId()){var s=r.default.extend({},o),a=r.default.extend({},o.owner);t.mgr._onStreamIceStateChanged(a,s,i,t.confrId)}}))}}finally{t.subject.next(e)}}})}t.default=function(e,t,n){this.mgr=e,this.confrId=t,a.apply(this),this.subject=new i.Subject,this.onRemoteStream=n}},function(e,t,n){"use strict";var r,i=n(2),o=(r=i)&&r.__esModule?r:{default:r},s=n(87),a=s.tagLogger("PannelVideo"),c=n(374),u=n(375),d=(n(163),n(164)),l=n(376);function f(e){f._overrideCount++,f.overrideObj!==e&&(f.overrideObj=e,p.override=e.listeners.onRemoveMember,p.overrideService=e,e.listeners.onRemoveMember=p)}function p(e,t){try{var n=e&&e.id&&x(p.overrideService,e.id);n&&n.length&&s.forEach(n,(function(t,n){a.warn("Remove member. free remote controller. it is ",n.id,n._ctrlStream.id,n._controller.memName,e.id),n._free(),n._callbacks&&n._callbacks.onRemoteFreeControl&&n._callbacks.onRemoteFreeControl(n._ctrlStream,n._controller,n._cId)}))}finally{p.override&&p.override.apply(this,arguments)}}function h(e){h._overrideCount++,h.overrideObj!==e&&(h.overrideObj=e,m.override=e.listeners.onRemoveStream,m.overrideService=e,e.listeners.onRemoveStream=m)}function m(e){v(m.overrideService,e),m.override&&m.override.apply(this,arguments)}function v(e,t){P(e,t.id);var n=C(e,t);n&&s.forEach(n,(function(e,t){t._free&&t._free()})),s.removeAttribute(e.current.__remoteControls,t.id)}function b(e){if(b._overrideCount++,b.overrideObj!==e){b.overrideObj=e;var t=e.onHungup;e.onHungup=function(n){v(e,n),t&&t.apply(this,arguments)}.bind(e)}}function g(e,t){if(g._overrideCount++,g.overrideObj!==e){g.overrideObj=e;var n=e._onRemotePannelControl;e._onRemotePannelControl=function(e){E(this,e,!1,t),n&&n.apply(this,arguments)}.bind(e)}}function _(e,t,n){var r=[];n&&s.forEach(n.actions,(function(e,t){t.xy&&r.push({x:Math.round(1e4*t.xy.x),y:Math.round(1e4*t.xy.y),oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time}),t.xy||r.push({oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time})}));var i={op2:30,evt:0,streamId:t.id,actions:r,cId:n.cId};return e.current.newMessage({op:1002,memId:t.owner.id,arg:(0,o.default)(i),_reqOps:[100230]})}f._overrideCount=0,h._overrideCount=0,b._overrideCount=0,g._overrideCount=0;var y=0,w=s.prototypeExtend({__init__:function(){this.id=y++},accept:function(e,t){var n=this;if(n.hasOtherControl())throw n.busy(),a.error("Other has been controled."),"Other has been controled.";var r=!1,i=C(this._service,this._ctrlStream,this._controller);i&&s.forEach(i,(function(e,t){t.id<n.id?t._free():r=!0})),r?n._free():((this._service.current.__remoteControls||(this._service.current.__remoteControls={}))[n.id]=n,N(this,e,t),S(this._service,this._reqevt,0))},controlling:function(){var e=this,t=[],n=C(this._service,this._ctrlStream);return n&&s.forEach(n,(function(n,r){r._controller.memName===e._controller.memName&&t.push(r)})),t&&t.length?t:void 0},hasOtherControl:function(){var e=this,t=!1,n=C(this._service,this._ctrlStream);return n&&s.forEach(n,(function(n,r){r._controller.memName!=e._controller.memName&&(t=!0)})),t},busy:function(){S(this._service,this._reqevt,-403)},reject:function(){S(this._service,this._reqevt,-402)},_free:function(){s.removeAttribute(this._service.current.__remoteControls,this.id)},forceDisconnect:function(){var e=C(this._service,this._ctrlStream);e&&s.forEach(e,(function(e,t){t._free&&t._free()})),a.info("remote control force disconnect")}});function S(e,t,n){e.current.message({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,o.default)({cId:t.arg.cId}),result:n}).post()}function A(e,t){S(e,t,-405)}function x(e,t,n){var r=[];return e.current.__remoteControls&&s.forEach(e.current.__remoteControls,(function(e,i){n&&i._ctrlStream.id!==n.id||t&&i._controller.id!==t||r.push(i)})),r}function C(e,t,n,r){var i=[];return e.current.__remoteControls&&s.forEach(e.current.__remoteControls,(function(e,o){t&&o._ctrlStream.id!==t.id||n&&o._controller.memName!==n.memName||r&&o._cId!==r||i.push(o)})),i}function E(e,t,n,r){!function(e){"string"===typeof e.arg&&(e.arg=JSON.parse(e.arg));var t=e.arg,n=[],r=[];t&&t.actions&&s.forEach(t.actions,(function(e,t){void 0!==t.x&&void 0!==t.y&&n.push({xy:{x:t.x/1e4,y:t.y/1e4},oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time}),(void 0===t.x||void 0===t.y)&&r.push({oper:t.oper,btn:t.btn,sn:t.sn,_time:t._time})})),t.mouse=n,t.keyboard=r}(t);var i=t.arg,c=i.cId,u=i.streamId,l=e.getMemberById(t.memId),f=e.getStreamById(u);if(n||!function(){if(!l||!f)return A(e,t),!0;if(1===i.evt){var n,o=new w({_service:e,_controller:l,_ctrlStream:f,_cId:c,_reqevt:t,_callbacks:r});return o.hasOtherControl()?(o.busy(),!0):(n=o.controlling())?(s.forEach(n,(function(e,t){t._cId=c})),S(e,t,0),!0):(r&&r.onHasRemoteControl&&r.onHasRemoteControl(f,l,o),!0)}if(2===i.evt){var a=C(e,f,l,c);return a&&s.forEach(a,(function(n,r){r._free&&r._free(),S(e,t,0)})),r&&r.onRemoteFreeControl&&r.onRemoteFreeControl(f,l,c),!0}}()){var p=C(e,f,l,c);if(n||p&&0!==p.length||A(e,t),p&&s.forEach(p,(function(e,t){t._lastRecvTimestamp=(new Date).getTime()})),n){var h=e.current.__remoteControls[f.id];p=p||[],h&&p.push(h)}s.forEach(p,(function(r,c){var u,l=0;if((u=i.mouse)&&u.length>0)try{s.forEach(u,(function(e,t){t.sn>l&&(l=t.sn),t.oper===d.BTN.MOVE?c.mouseTrack&&c.mouseTrack.track(t.xy):c.mouseTrack&&c.mouseTrack.trigger(new d(t))}))}catch(f){a.warn(f)}if((u=i.keyboard)&&u.length>0)try{s.forEach(u,(function(e,t){t.sn>l&&(l=t.sn),c.keyboard&&(t.oper===d.BTN.KEYBOARD_DOWN?c.keyboard.onKeyDown(t.btn):t.oper===d.BTN.KEYBOARD_UP&&c.keyboard.onKeyUp(t.btn))}))}catch(f){a.warn(f)}if(!0!==n)try{e.current.message({op:1001,tsxId:t.tsxId,memId:t.memId,arg:(0,o.default)({sn:l}),result:0}).post((function(e){a.debug("Send remote control response. the result = ",e.result,e.msg||"")}))}catch(f){a.warn(f)}}))}}function k(e,t,n,r,i){r&&r()}function I(e,t,n,r,i){r&&r()}function T(e,t,n,r,i,o,s){var a=e.eventXYAtMedia(r,n);a&&(O(e,{xy:a={x:a.x/a.width,y:a.y/a.height},oper:d.BTN.MOVE,sid:t},s),o&&o(a,i))}function R(e,t,n,r,i,o,a){r.xy=e.eventXYAtMedia(r.xy,n),r.xy&&(r.xy={x:r.xy.x/r.xy.width,y:r.xy.y/r.xy.height},s.extend(r,{sid:t}),O(e,r,a),o&&o(r,i))}function M(e,t,n,r,i,o){O(e,{oper:n,btn:r,sid:t},o),i&&i(n,r)}function O(e,t,n){var r=t.sid,i=e.getStreamById(r);e.current.__remoteControls&&e.current.__remoteControls[r]&&E(e,_(e,i,{actions:[t]}),!0);var o=e.current.__pannelBuffers[r],c=o.getUnclearSize();o.put(t),c<emedia.config.allowSendWhenLessThan&&function t(){for(var c=o.getUnread(),u=0,d=0;c&&d<c.length;d++){var l=c[d];s.removeAttribute(l,"sid"),u<l.sn&&(u=l.sn)}c&&0!==c.length&&(a.debug(r,"buffer remain:",o.getUnclearSize(),", send evt:",c.length),e.current.postMessage(_(e,i,{actions:c,cId:o._cId}),(function(e){if(-402!==e.result)if(-403!==e.result)if(-408!==e.result){if(-507===e.result||-405===e.result)return o.clearRead(u),void(n&&n.onNotAllowRemoteControl&&n.onNotAllowRemoteControl(i));0===e.result&&(o._lastRspTimestamp=(new Date).getTime());var c=e.arg;c&&(c=JSON.parse(c))&&!s.isInt(c.sn)?a.warn("rsp.sn not a Number.",c.sn,"for streamId",r):c&&void 0!==c.sn&&o.clearRead(c.sn),t()}else n&&n.onRemoteControlTimeout&&n.onRemoteControlTimeout(i);else n&&n.onBusy&&n.onBusy(i);else n&&n.onReject&&n.onReject(i)})))}()}function P(e,t){var n,r=e.current.__pannelMouses&&s.removeAttribute(e.current.__pannelMouses,t),i=e.current.__pannelKeyboards&&s.removeAttribute(e.current.__pannelKeyboards,t);if(e.current.__pannelBuffers&&(n=s.removeAttribute(e.current.__pannelBuffers,t)),r&&r.ungrab(),i&&i.ungrab(),n){var c=e.getStreamById(t);if(n._callbacks&&n._callbacks.onDisControlled&&n._callbacks.onDisControlled(c),c){var u=e.current.newMessage({op:1002,memId:c.owner.id,arg:(0,o.default)({op2:30,streamId:c.id,evt:2,cId:n._cId}),_reqOps:[100230]});e.current.postMessage(u,(function(e){0!==e.result&&a.warn("Unkown result\uff1a",e.result)}))}}}function j(e,t,n,r,i,s){var f=Math.uuidFast();f=f.substr(f.length-6,6);var p=e.getStreamById(t);if(!p._webrtc)throw s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(p),a.error("Not allow control. cause by the stream not sub"),"Not allow control. cause by the stream not sub";var h={op2:30,streamId:p.id,evt:1,cId:f},m=e.current.newMessage({op:1002,memId:p.owner.id,arg:(0,o.default)(h),_reqOps:[100230]});e.current.postMessage(m,(function(o){if(-402!==o.result)if(-403!==o.result)if(-408!==o.result)if(-507!==o.result&&-405!==o.result){if(0===o.result)return function(e,t,n,r,i,o,s,f){void 0===i&&(i=n);var p,h=e.getStreamById(t),m=(e.current.__pannelMouses||(e.current.__pannelMouses={}))[t];if(m&&P(e,t),!h.located()&&!h.owner.acptOps[1003])throw a.error("which do not recv remote message, it is ",h.owner.memName),h.owner.memName+" do not recv remote message";m=new c({_target:i,_focused:!0,onMouseEnter:function(){k.call(m,e,t,n,o&&o.onMouseEnter,o),p&&p.grab()},onMouseExit:function(){I.call(m,e,t,n,o&&o.onMouseExit,o),p&&p.ungrab()},onMouseButton:function(i,s){!0===r&&(i.xy.x=-i.xy.x),R.call(m,e,t,n,i,s,o&&o.onMouseButton,o)},onMouseMove:function(i,s){emedia.config.disableTrack||(!0===r&&(i.x=-i.x),T.call(m,e,t,n,i,s,o&&o.onMouseMove,o))}}),(e.current.__pannelBuffers||(e.current.__pannelBuffers={}))[t]=new l({_cId:s,_callbacks:o,trackBufferSize:emedia.config.trackBufferSize||1e3}),(e.current.__pannelMouses||(e.current.__pannelMouses={}))[t]=m,m.grab(),f&&(p=new u({_target:document,_focused:!0,onKeyPress:function(n,r){var i=r?d.BTN.KEYBOARD_DOWN:d.BTN.KEYBOARD_UP,s=n;M.call(p,e,t,i,s,o&&o.onKeyboard,o)}}),(e.current.__pannelKeyboards||(e.current.__pannelKeyboards={}))[t]=p)}(e,t,n,r,i,s,f,!0),void(s&&s.onAccept&&s.onAccept(p));a.warn("Unkown result\uff1a",o.result),s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(p)}else s&&s.onNotAllowRemoteControl&&s.onNotAllowRemoteControl(p);else s&&s.onRemoteControlTimeout&&s.onRemoteControlTimeout(p);else s&&s.onBusy&&s.onBusy(p);else s&&s.onReject&&s.onReject(p)}))}function N(e,t,n){var r=t;r&&(e.mouseTrack=r),e.keyboard=n}var D=function e(t){var n,r;e.timeoutId&&clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e(t)}),emedia.config.ctrlCheckIntervalMillis),t.current&&((n=t.current.__remoteControls)&&s.forEach(n,(function(e,t){if(void 0!==t.id&&e==t.id){var n=(new Date).getTime();t._lastRecvTimestamp&&n-t._lastRecvTimestamp>emedia.config.ctrlTimeoutMillis&&(a.warn("Timeout for remote controller. it is ",t.id,t._ctrlStream.id,t._controller.memName),t._free(),t._callbacks&&t._callbacks.onRemoteFreeControl&&t._callbacks.onRemoteFreeControl(t._ctrlStream,t._controller,t._cId))}})),(r=t.current.__pannelBuffers)&&s.forEach(r,(function(e,n){var r=t.getStreamById(e);r&&!r.located()&&t.current.message({op:1002,memId:r.owner.id,arg:(0,o.default)({op2:30,streamId:r.id,evt:3,cId:n._cId}),_reqOps:[100230]}).post((function(e){}))})))};e.exports={mirrorControlled:function(e,t,n,r){var i={};s.forEach(arguments,(function(e,t){"function"===typeof t&&(i[t.name]=t)})),j(e,t,n,!0,r,i)},controlled:function(e,t,n,r){var i={};s.forEach(arguments,(function(e,t){"function"===typeof t&&(i[t.name]=t)})),j(e,t,n,!1,r,i)},disControlled:P,controlling:N,graffiti:function(e,t,n,r){var i=new c({_target:e,_focused:!0,onMouseEnter:function(){},onMouseExit:function(){t.releaseTrigger()},onMouseButton:function(e,i){e.xy={x:e.xy.x/e.xy.width,y:e.xy.y/e.xy.height},!0===r&&(e.xy.x=-e.xy.x),n&&(e.xy=emedia.Service.prototype.eventXYAtMedia.call(null,e.xy,n)),e.xy&&t.trigger(e)},onMouseMove:function(e,i){e={x:e.x/e.width,y:e.y/e.height},!0===r&&(e.x=-e.x),n&&(e=emedia.Service.prototype.eventXYAtMedia.call(null,e,n)),e&&t.track(e)}});return i.grab(),i},echoControl:function(e,t,n,r){var i=e.getStreamById(t),o={_ctrlStream:i,_controller:i.owner,_service:e};N(o,n,r),(e.current.__remoteControls||(e.current.__remoteControls={}))[t]=o},disEchoControl:function(e,t){s.removeAttribute(e.current.__remoteControls,t)},support:function(e){var t={};s.forEach(arguments,(function(e,n){0!=e&&"function"===typeof n&&(t[n.name]=n)})),b(e),h(e),f(e),g(e,t),D(e)},getController:function(e,t){var n=e.getStreamById(t),r=C(e,n);if(r&&0!==r.length)return r[0]._controller.memName}}},function(e,t,n){"use strict";var r=n(87),i=(r.tagLogger("Mouse"),n(164));e.exports=r.prototypeExtend({__init__:function(){this._handlers=r.extend({mousedown:this._handleMouseDown.bind(this),mouseup:this._handleMouseUp.bind(this),mousemove:this._handleMouseMove.bind(this),mousewheel:this._handleMouseWheel.bind(this),mousedisable:this._handleMouseDisable.bind(this),mouseover:this._handleMouseOver.bind(this),mouseout:this._handleMouseOut.bind(this)},this._handlers||{})},onMouseButton:function(e,t){},onMouseMove:function(e,t){},onMouseEnter:function(){},onMouseExit:function(){},_onMouseButton:function(e,t,n){var r=(new Date).getTime(),o=new i({xy:e,oper:t,btn:n,_time:r});this.onMouseButton&&this.onMouseButton(o,this._lastTrigger),this._lastTrigger=o},_onMouseMove:function(e){this.onMouseMove&&this.onMouseMove(e,this._lastTrigger)},_captureMouse:function(){this._target.setCapture&&this._target.setCapture(),this._mouseCaptured=!0},_releaseMouse:function(){this._target.releaseCapture&&this._target.releaseCapture(),this._mouseCaptured=!1},_resetDoubleClickTimer:function(){this._doubleClickTimer=null},_handleMouseOver:function(e){!1!==this._mouseExit&&(this._mouseExit=!1,this.onMouseEnter&&this.onMouseEnter())},_handleMouseOut:function(e){!0!==this._mouseExit&&(this._mouseExit=!0,this.onMouseExit&&this.onMouseExit()),this._lastTrigger=void 0},_handleMouseDown:function(e){this._captureMouse(),this._handleMouseButton(e,i.BTN.KEY_DOWN)},_handleMouseUp:function(e){this._mouseCaptured&&(this._handleMouseButton(e,i.BTN.KEY_UP),this._releaseMouse())},_handleMouseWheel:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale),n=(e.detail?-1*e.detail:e.wheelDelta/40)>0?i.BTN.WHEEL_ROLL_UP:i.BTN.WHEEL_ROLL_DOWN;this._onMouseButton(t,i.BTN.KEY_DOWN,n),r.stopEvent(e)}},_handleMouseMove:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale);this._onMouseMove(t),r.stopEvent(e)}},_handleMouseDisable:function(e){if(this._focused){e=e||window.event;var t=r.getEventElementXY(e,this._target,this._scale);try{return!(t.realX>=0&&t.realY>=0&&t.realX<this._target.offsetWidth&&t.realY<this._target.offsetHeight)}finally{r.stopEvent(e)}}},_handleMouseButton:function(e,t){if(this._focused){e=e||window.event;var n,o=r.getEventElementXY(e,this._target,this._scale);if(e.touches||e.changedTouches){if(t==i.BTN.KEY_DOWN){if(null===this._doubleClickTimer)this._lastTouchPos=o;else{clearTimeout(this._doubleClickTimer);var s=this._lastTouchPos.x-o.x,a=this._lastTouchPos.y-o.y;Math.sqrt(s*s+a*a)<20*window.devicePixelRatio&&(o=this._lastTouchPos)}this._doubleClickTimer=setTimeout(this._resetDoubleClickTimer.bind(this),500)}n=i.BTN.LEFT}else n=e.which?1<<e.button:(1&e.button)+2*(2&e.button)+(4&e.button)/2;this._onMouseButton(o,t,n),r.stopEvent(e)}},grab:function(){var e=this._target;r.addEvent(e,"mouseover",this._handlers.mouseover),r.addEvent(e,"mouseout",this._handlers.mouseout),r.addEvent(e,"touchstart",this._handlers.mousedown),r.addEvent(e,"touchend",this._handlers.mouseup),r.addEvent(e,"touchmove",this._handlers.mousemove),r.addEvent(e,"mousedown",this._handlers.mousedown),r.addEvent(e,"mouseup",this._handlers.mouseup),r.addEvent(e,"mousemove",this._handlers.mousemove),r.addEvent(e,r.layoutEngine.gecko?"DOMMouseScroll":"mousewheel",this._handlers.mousewheel),r.addEvent(e,"contextmenu",this._handlers.mousedisable)},ungrab:function(){var e=this._target;r.removeEvent(e,"mouseover",this._handlers.mouseover),r.removeEvent(e,"mouseout",this._handlers.mouseout),r.removeEvent(e,"touchstart",this._handlers.mousedown),r.removeEvent(e,"touchend",this._handlers.mouseup),r.removeEvent(e,"touchmove",this._handlers.mousemove),r.removeEvent(e,"mousedown",this._handlers.mousedown),r.removeEvent(e,"mouseup",this._handlers.mouseup),r.removeEvent(e,"mousemove",this._handlers.mousemove),r.removeEvent(e,r.layoutEngine.gecko?"DOMMouseScroll":"mousewheel",this._handlers.mousewheel),r.removeEvent(e,"contextmenu",this._handlers.mousedisable)}})},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("Keyboard");e.exports=r.prototypeExtend({__init__:function(){this._eventHandlers={keyup:this._handleKeyUp.bind(this),keydown:this._handleKeyDown.bind(this),keypress:this._handleKeyPress.bind(this),blur:this._allKeysUp.bind(this)}},getKey:function(e){return"keyCode"in e&&"key"in e?e.key+":"+e.keyCode:"keyCode"in e?e.keyCode:e.key},onKeyPress:function(e,t){},_onKeyPress:function(e,t){this.onKeyPress&&this.onKeyPress(e,t)},_handleRfbEvent:function(e,t){e.shiftKey,e.ctrlKey,e.altKey;var n=e.keyCode||e.which;this._onKeyPress(n,"keydown"==t)},_handleKeyDown:function(e){return!this._focused||!this._handleRfbEvent(e,"keydown")||(r.stopEvent(e),!1)},_handleKeyPress:function(e){return!this._focused||(r.stopEvent(e),!1)},_handleKeyUp:function(e){return!this._focused||!this._handleRfbEvent(e,"keyup")||(r.stopEvent(e),!1)},_allKeysUp:function(){},sync:function(e){},grab:function(){var e=this._target;r.addEvent(e,"keydown",this._eventHandlers.keydown),r.addEvent(e,"keyup",this._eventHandlers.keyup),r.addEvent(e,"keypress",this._eventHandlers.keypress),r.addEvent(e,"blur",this._eventHandlers.blur),i.info("keyboard grab at element")},ungrab:function(){var e=this._target;r.removeEvent(e,"keydown",this._eventHandlers.keydown),r.removeEvent(e,"keyup",this._eventHandlers.keyup),r.removeEvent(e,"keypress",this._eventHandlers.keypress),r.removeEvent(e,"blur",this._eventHandlers.blur),this._allKeysUp(),i.info("keyboard upgrab at element")}})},function(e,t,n){"use strict";var r=n(87),i=(r.tagLogger("TotalBuffer"),n(377)),o=n(378),s=n(164);e.exports=r.prototypeExtend({trackBufferSize:100,_trackBufferCompRadio:.25,_sn:1,__init__:function(){this._eventBuffer=new i({_nextsn:this._nextsn.bind(this)}),this._trackBuffer=new o({_nextsn:this._nextsn.bind(this),_compRadio:this._trackBufferCompRadio,mouseTrackBufferSize:this.trackBufferSize})},_nextsn:function(){return this._sn++},put:function(e){e&&void 0!==e.oper&&(e.oper===s.BTN.MOVE?this._trackBuffer.put(e):this._eventBuffer.put(e))},getUnread1:function(e){function t(e,t){return e._time-t.time}var n;if(!e){var r=this._eventBuffer.getUnread(),i=this._trackBuffer.getUnread();return Array.prototype.push.apply(r,i),(n=r).sort(t),n}n=[],r=this._eventBuffer._getUnread(e),i=this._trackBuffer._getUnread(e),Array.prototype.push.apply(n,r),Array.prototype.push.apply(n,i),n.sort(t),n=n.slice(0,e>n.length?n.length:e);for(var o=0;o<n.length;o++)n[o].oper===s.BTN.MOVE?this._trackBuffer.getUnread(1):this._eventBuffer.getUnread(1);return n},getUnread:function(e){e||(e=this._eventBuffer.getUnreadSize()+this._trackBuffer.getUnreadSize());for(var t=[];t.length!==e;){var n=this._eventBuffer._getUnread(1),r=this._trackBuffer._getUnread(1);if(void 0===n&&r)t.push(this._trackBuffer.getUnread(1));else if(void 0===r&&n)t.push(this._eventBuffer.getUnread(1));else{if(void 0===r&&void 0===n)return t;n.sn<r.sn?t.push(this._eventBuffer.getUnread(1)):t.push(this._trackBuffer.getUnread(1))}}return t},getUnreadSize:function(){return this._trackBuffer.getUnreadSize()+this._eventBuffer.getUnreadSize()},getUnclearSize:function(){return this._trackBuffer.getUnclearSize()+this._eventBuffer.getUnclearSize()},clearRead:function(e){return this._eventBuffer.clearRead(e)+this._trackBuffer.clearRead(e)}})},function(e,t,n){"use strict";var r=n(87);r.tagLogger("EventBuffer"),e.exports=r.prototypeExtend({_buffer:[],_sn:1,_beginIndex:0,_readIndex:0,_endIndex:0,_nextsn:function(){return this._sn++},put:function(e){e&&(e.sn=this._nextsn(),this._buffer.push(e),this._endIndex++)},_getUnread:function(e){return this._readIndex===this._endIndex?1===e?void 0:[]:this._buffer[this._readIndex]},getUnread:function(e){var t;try{return t=this._getUnread(e)}finally{t&&(this._readIndex+=1===e?1:t.length)}},getUnreadSize:function(){return this._endIndex-this._readIndex},getUnclearSize:function(){return this._readIndex-this._beginIndex},clearRead:function(e){if(this._readIndex!==this._beginIndex){for(var t=0,n=this._beginIndex;n<this._readIndex&&this._buffer[n].sn<=e;n++)t++;if(0===t)return 0;for(n=0;n<t;n++)this._buffer.shift();return this._beginIndex=0,this._readIndex-=t,this._endIndex-=t,t}}})},function(e,t,n){"use strict";var r=n(87);r.tagLogger("TrackBuffer"),e.exports=r.prototypeExtend({mouseTrackBufferSize:1e3,_sn:1,_compRadio:.25,_beginIndex:0,_readIndex:0,_endIndex:0,__init__:function(){this._mouseTrackBuffer=new Array(this.mouseTrackBufferSize)},_nextsn:function(){return this._sn++},_index:function(e){return e%this.mouseTrackBufferSize},comp1:function(e){if(!(e>=1)){for(var t=Math.floor(1/e),n=this._beginIndex,r=n+1;n<this._endIndex;){for(var i=2;i<t&&n+i<this._endIndex;i++)this._mouseTrackBuffer[this._index(r++)]=this._mouseTrackBuffer[this._index(n+i)];n+=t}this._endIndex=r}},put1:function(e){if(e){e.sn=this._nextsn(),this._endIndex-this._readIndex===this.mouseTrackBufferSize&&(this.comp1(this._compRadio),this._readIndex=this._beginIndex);var t=this._index(this._beginIndex),n=(this._index(this._readIndex),this._index(this._endIndex));n<=t&&n>=0&&this._endIndex>this._beginIndex&&this._beginIndex++,this._mouseTrackBuffer[n]=e,this._endIndex++}},compHalfOfUnread:function(){for(var e=this._readIndex+2,t=this._readIndex+1;e<this._endIndex;)this._mouseTrackBuffer[this._index(t++)]=this._mouseTrackBuffer[this._index(e)],e+=2;this._endIndex=t},put:function(e){if(e){e.sn=this._nextsn(),this._endIndex-this._beginIndex===this.mouseTrackBufferSize&&this.compHalfOfUnread();var t=this._index(this._endIndex);this._mouseTrackBuffer[t]=e,this._endIndex++}},_interval:function(e,t){var n=this._index(e),r=this._index(t);if(n<r)return this._mouseTrackBuffer.slice(n,r);var i=this._mouseTrackBuffer.slice(n);return Array.prototype.push.apply(i,this._mouseTrackBuffer.slice(0,r)),i},_getUnread:function(e){return this._readIndex===this._endIndex?1===e?void 0:[]:this._mouseTrackBuffer[this._index(this._readIndex)]},getUnread:function(e){var t;try{return t=this._getUnread(e)}finally{t&&(this._readIndex+=1===e?1:t.length)}},getUnreadSize:function(){return this._endIndex-this._readIndex},getUnclearSize:function(){return this._readIndex-this._beginIndex},clearRead:function(e){if(this._readIndex!==this._beginIndex){for(var t=0,n=this._beginIndex;n<this._readIndex;n++){var r=this._index(n);if(!(this._mouseTrackBuffer[r].sn<=e))break;this._beginIndex++,t++}return t}}})},function(e,t,n){"use strict";var r=n(87),i=r.tagLogger("CompositeCanvas");function o(){}for(var s in CanvasRenderingContext2D.prototype)!function(e){o.prototype[e]=function(){if("function"===typeof this._canvasContext[e])this._canvasContext[e].apply(this._canvasContext,arguments);else{var t=arguments.length>=1?arguments[0]:void 0;if(!t)return this._canvasContext[e];this._canvasContext[e]=t}}}(s);var a=r.prototypeExtend(o,{__init__:function(){this.compositeCanvasTag||(this.compositeCanvasTag=document.createElement("canvas")),this._canvasContext=this.compositeCanvasTag.getContext("2d"),this._canvasContext.globalAlpha=void 0!==this._globalAlpha?this._globalAlpha:1,this._compositeOperation=this._compositeOperation||c.source_over,this.globalCompositeOperation(this._compositeOperation)},setCanvas:function(){for(var e,t=this,n=0;n<arguments.length;n++)"function"===typeof(e=arguments[n])&&e(this.compositeCanvasTag,this._canvasContext),"function"!==typeof e&&r.isPlainObject(e)&&r.forEach(e,(function(e,n){i.debug("Canvas set ",e," = ",n),t.compositeCanvasTag.setAttribute(e,n)}));return t},getCanvasImageData:function(e,t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e.getContext("2d");return i.globalAlpha=t||0,i.getImageData.apply(i,n)},_composite:function(e){return new a(this,{_compositeOperation:e})},composite:function(e){return this.globalCompositeOperation(e),this},requestAnimationFrame:function(e){var t=this;return t.requestFrame(),t._requestAnimationFrameStart=window.requestAnimationFrame((function(e){t.requestAnimationFrame(e)})),t},cancelAnimationFrame:function(){return this._requestAnimationFrameStart&&window.cancelAnimationFrame(this._requestAnimationFrameStart),this},requestFrame:function(e){var t;if("function"!==typeof this.requestOneFrame)throw i.error("Pleas implement requestOneFrame()"),"Pleas implement requestOneFrame()";try{this.requestOneFrame()}catch(r){i.error(r)}if(e&&(t=Math.floor(1e3/e)),!t)return this;var n=this.requestFrame.bind(this);return this.intervalId=setInterval((function(){n(e)}),t),this},stopRequestFrame:function(){return this.intervalId&&clearInterval(this.intervalId),this}});a.CompositeOperation=["source-atop","source-in","source-out","source-over","destination-atop","destination-in","destination-out","destination-over","lighter","darker","xor","copy"];var c=a.operation={source_atop:"source-atop",source_in:"source-in",source_out:"source-out",source_over:"source-over",destination_atop:"destination-atop",destination_in:"destination-in",destination_out:"destination-out",destination_over:"destination-over",lighter:"lighter",darker:"darker",xor:"xor",copy:"copy"};a.compositeVideoOverCanvas=function(e,t,n){var r;return(r=e.compositeCanvas)||(r=new a({compositeCanvasTag:e,requestOneFrame:function(){t&&r.drawImage(t,0,0,e.width,e.height),n&&r.drawImage(n,0,0,e.width,e.height)}}),e.compositeCanvas=r),r},e.exports=a},function(e,t,n){"use strict";var r=n(87);r.tagLogger("Keyboard"),e.exports=r.prototypeExtend({onKeyDown:function(e){},onKeyUp:function(e){}})},function(e,t,n){"use strict";window.emedia=window.emedia||{};var r=n(87).tagLogger("electron");emedia.electron=window.require("electron"),emedia.chooseElectronDesktopMedia=function(e,t,n){r.info("Choose desktop. ",e[0]),t(e[0])}}])},module.exports=factory()},432:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(5),s=n.n(o),a=n(35),c=n(36),u=n(39),d=n(37),l=n(179),f=n(51),p=(n(188),n(189),n(140)),h=(n(191),n(178)),m=n(167),v=(n(193),n(138)),b=n(17),g=(n(195),n(111)),_=(n(197),n(78)),y=n(66),w=(n(200),n(40)),S=(n(202),n(9)),A=(n(204),n(180)),x=(n(206),n(109)),C=(n(141),n(57)),E=(n(209),n(181)),k=(n(211),n(139)),I=(n(213),n(108)),T=(n(81),n(19)),R=n(11),M=n.n(R),O=(n(142),n(12)),P=n(21),j=(n(217),n(77)),N=(n(433),n(110)),D=(n(221),n(171)),B=(n(223),n(4)),L=n.n(B),V=n(168),U=n.n(V),F=n(73),G=n.n(F);function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(r,i){("GET"===n?G.a.get(e,{params:t}):G.a.post(e,t)).then((function(e){r(e.data)})).catch((function(e){O.a.error("\u8bf7\u6c42\u51fa\u9519\u4e86: "+e.message),i(e)}))}))}var q="easemob-demo#chatdemoui",z="https://a1.easemob.com",Q=q.split("#")[0],X=q.split("#")[1],Y="".concat(z,"/").concat(Q,"/").concat(X,"/users"),H="".concat(z,"/").concat(Q,"/").concat(X,"/token"),K=function(e){return W(Y,e,"POST")},J=function(e){return W(H,e,"POST")};var Z=(new function(){var e=this;this.user={},this.get_uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},this.register=Object(P.a)(M.a.mark((function t(){var n,r,i;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:e.get_uuid().split("-").join(""),password:"123456"},t.next=3,K(n);case 3:(r=t.sent).entities&&r.entities[0]&&r.entities[0].activated&&(i={username:n.username,password:n.password},e.user=i,window.sessionStorage.setItem("easemob-user",JSON.stringify(e.user)));case 5:case"end":return t.stop()}}),t)}))),this.login=Object(P.a)(M.a.mark((function t(){var n,r,i;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={grant_type:"password",username:e.user.username,password:e.user.password,timestamp:(new Date).getTime()},t.next=3,J(n);case 3:if((r=t.sent).access_token){t.next=6;break}return t.abrupt("return");case 6:return i={username:r.user&&r.user.username,token:r.access_token,uuid:r.user&&r.user.uuid},t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)}))),this.init=Object(P.a)(M.a.mark((function t(){var n,r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.user=JSON.parse(window.sessionStorage.getItem("easemob-user")),e.user&&e.user.username&&e.user.password){t.next=10;break}return t.next=4,e.register();case 4:return t.next=6,e.login();case 6:return n=t.sent,t.abrupt("return",n);case 10:return t.next=12,e.login();case 12:return r=t.sent,t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))}).init;function $(e,t){D.a[e]({message:t,placement:"bottomRight",className:"openNotification"})}var ee=n(281),te=function(e){if(e){var t=ee.resolve("./".concat(e,".png"));return n(t)}},ne=function(e){var t=function(e){return e.slice(0,4)+"****"+e.slice(-4)};return!e.nickName||e.nickName.split("_")[1]?t(e.name.split("_")[1]):e.nickName.length<15?e.nickName:t(e.nickName)},re=N.a.Item,ie=j.a.Header,oe=j.a.Content,se=j.a.Footer,ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={checked_talker:null,show:!1},e.show=function(t){e.handle_apply_talker_callback=t,e.setState({show:!0})},e.hide=function(){e.setState({show:!1,checked_talker:null})},e.onChange=function(t){e.setState({checked_talker:t.target.value})},e.confirm=Object(P.a)(M.a.mark((function t(){var n,r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.user_room,r=e.state.checked_talker,t.prev=2,t.next=5,L.a.mgr.grantRole(n,[r],1);case 5:e.handle_apply_talker_callback&&"function"==typeof e.handle_apply_talker_callback&&e.handle_apply_talker_callback(),e.hide(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),O.a.error("\u9009\u4eba\u4e0b\u9ea6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.stream_list,t=this.state,n=t.show,r=t.checked_talker;return i.a.createElement(E.a,{placement:"left",closable:!1,visible:n,mask:!1,getContainer:!1,width:"336px",className:"to-audience-list",destroyOnClose:!0},i.a.createElement("div",{className:"title"},i.a.createElement(T.a,{style:{background:"transparent",color:"#fff"},onClick:this.hide},"\u8fd4\u56de"),i.a.createElement("span",{style:{textAlign:"center"}},"\u4e3b\u64ad\u4eba\u6570\u5df2\u6ee1",i.a.createElement("br",null),"\u53ef\u9009\u62e9\u66ff\u6362\u4e3b\u64ad"),i.a.createElement(T.a,{onClick:this.confirm},"\u786e\u5b9a")),i.a.createElement(k.a.Group,{onChange:this.onChange,value:r,name:"to-audience"},e.map((function(e){if(e&&e.member&&e.member.is_me&&e.stream.type!=L.a.StreamType.DESKTOP){var t=e.member.ext&&e.member.ext.headImage;return i.a.createElement("div",{className:"info-wrapper",key:e.member.name},i.a.createElement(I.a,{src:"https://download-sdk.oss-cn-beijing.aliyuncs.com/downloads/RtcDemo/headImage/"+t}),i.a.createElement("span",{className:"name"},ne(e.member)+(7==e.member.role?"(\u4e3b\u6301\u4eba)":"")),i.a.createElement(k.a,{value:e.member.name}))}}))))}}]),n}(r.Component),ce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={mute_all:!1},e.mute_all_action=Object(P.a)(M.a.mark((function t(){var n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.user_room.confrId,t.next=3,L.a.mgr.muteAll(n);case 3:e.setState({mute_all:!0});case 4:case"end":return t.stop()}}),t)}))),e.unmute_all_action=Object(P.a)(M.a.mark((function t(){var n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.user_room.confrId,t.next=3,L.a.mgr.unmuteAll(n);case 3:e.setState({mute_all:!1});case 4:case"end":return t.stop()}}),t)}))),e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state.mute_all;return i.a.createElement(C.a,{title:e?"\u89e3\u9664\u9759\u97f3":"\u5168\u4f53\u9759\u97f3",placement:"left"},e?i.a.createElement("img",{className:"mute-action",src:te("mute-all-icon"),onClick:this.unmute_all_action}):i.a.createElement("img",{className:"mute-action",id:"moren",src:te("unmute-all-icon"),onClick:this.mute_all_action}))}}]),n}(r.Component),ue=(r.Component,function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={visible:!1,url_list:{},headimg_url_suffix:""},e.show=function(){e.setState({visible:!0})},e.handleCancel=function(){e.setState({visible:!1,headimg_url_suffix:""})},e.handleSubmit=function(){var t=e.state.headimg_url_suffix;e.props.headimg_change(t),e.setState({visible:!1})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.get_url_json()}},{key:"get_url_json",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://download-sdk.oss-cn-beijing.aliyuncs.com/downloads/RtcDemo/headImage/headImage.conf",e.next=3,G()({method:"get",url:"https://download-sdk.oss-cn-beijing.aliyuncs.com/downloads/RtcDemo/headImage/headImage.conf"});case 3:t=e.sent,this.setState({url_list:t.data.headImageList});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"change",value:function(e){e&&this.setState({headimg_url_suffix:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,r=t.url_list,o=t.headimg_url_suffix;return i.a.createElement(w.a,{title:"\u8bf7\u9009\u62e9\u5934\u50cf",visible:n,onOk:this.handleSubmit,onCancel:this.handleCancel,footer:null,getContainer:!1,className:"head-images-modal",width:"470px"},i.a.createElement("div",{className:"head-image-list"},Object.keys(r).map((function(t,n){return i.a.createElement("div",{className:"avatar-wrapper",key:n,onClick:function(){return e.change(r[t])}},i.a.createElement(I.a,{src:"https://download-sdk.oss-cn-beijing.aliyuncs.com/downloads/RtcDemo/headImage/"+r[t]}),o==r[t]?i.a.createElement("div",{className:"checked-mask"},i.a.createElement(S.a,{type:"check"})):"")}))),i.a.createElement("div",{className:"action"},i.a.createElement(T.a,{type:"primary",onClick:this.handleSubmit},"\u4fdd\u5b58\u5e76\u8fd4\u56de")))}}]),n}(r.Component)),de=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={visible:!1,headimg_url_suffix:"",push_cdn:!1,cdn:"",rec:!1,recMerge:!1,join_as_audience:!1},e.show=function(){var t=e.props,n=t.push_cdn,r=t.cdn,i=t.rec,o=t.recMerge,s=t.join_as_audience;e.setState({visible:!0,push_cdn:n,cdn:r,rec:i,recMerge:o,join_as_audience:s})},e.handleCancel=function(){e.setState({visible:!1})},e.handleSubmit=function(){var t=e.state,n=t.headimg_url_suffix,r=t.cdn,i=t.push_cdn,o=t.rec,s=t.recMerge,a=t.join_as_audience;e.props._get_setting_values({headimg_url_suffix:n,cdn:r,push_cdn:i,rec:o,recMerge:s,join_as_audience:a}),e.setState({visible:!1}),window.sessionStorage.setItem("easemob-headimg_url_suffix",n)},e.headimg_change=function(t){t&&e.setState({headimg_url_suffix:t})},e.handleChange=function(t){var n=t.target,r="cdn"===n.name?n.value:n.checked,i=n.name;e.setState(Object(y.a)({},i,r))},e.get_headimg_url=function(){e.head_images.show()},e}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({headimg_url_suffix:e.headimg_url_suffix})}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,r=t.headimg_url_suffix,o=this;return i.a.createElement(w.a,{visible:n,onOk:this.handleSubmit,onCancel:this.handleCancel,destroyOnClose:!0,footer:null,getContainer:!1,className:"setting-modal",width:"470px"},i.a.createElement("form",{action:"",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"avatar-wrapper "},i.a.createElement(I.a,{src:"https://download-sdk.oss-cn-beijing.aliyuncs.com/downloads/RtcDemo/headImage/"+r,onClick:this.get_headimg_url,className:"setting-avatar"}),i.a.createElement(ue,{ref:function(t){return e.head_images=t},headimg_change:this.headimg_change})),[{key:"push_cdn",text:"\u5f00\u542f\u63a8\u6d41 CDN"},{key:"cdn",text:"\u63a8\u6d41CDN\u5730\u5740"},{key:"rec",text:"\u5f00\u542f\u5f55\u5236"},{key:"recMerge",text:"\u5f00\u542f\u5f55\u5236\u5408\u5e76"},{key:"join_as_audience",text:"\u4ee5\u89c2\u4f17\u8eab\u4efd\u52a0\u5165\u4f1a\u8bae"}].map((function(e,t){var n=e.key,r=e.text;return"cdn"==n?i.a.createElement(_.a,{key:t,placeholder:r,name:n,value:o.state[n],onChange:o.handleChange,disabled:!o.state.push_cdn}):i.a.createElement(g.a,{key:t,checked:o.state[n],name:n,onChange:o.handleChange},r)})),i.a.createElement("div",{className:"join_as_audience_tips"},"\u52a0\u5165\u540e\u53ea\u80fd\u89c2\u770b\uff0c\u9700\u7533\u8bf7\u4e0a\u9ea6"),i.a.createElement("div",{className:"action"},i.a.createElement(T.a,{type:"primary",onClick:this.handleSubmit},"\u4fdd\u5b58\u5e76\u8fd4\u56de"))))}}]),n}(r.Component);function le(e){var t=e.my_username,n=e.my_role,r=e.stream_list,o=e.user_room;if(3==n){return i.a.createElement("div",{className:"admin-change-handle",onClick:function(){O.a.success("\u4e3b\u6301\u4eba\u7533\u8bf7\u5df2\u53d1\u51fa\uff0c\u8bf7\u7b49\u5f85\u4e3b\u6301\u4eba\u540c\u610f"),L.a.mgr.requestToAdmin(o.confrId)}},"\u7533\u8bf7\u4e3b\u6301\u4eba")}if(7==n){var s=0;if(r.map((function(e){e&&e.member&&7==e.member.role&&e.stream.type!=L.a.StreamType.DESKTOP&&s++})),s<2)return"";var a=function(){var e=Object(P.a)(M.a.mark((function e(){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.warn("ApplyAdmin username is required"),e.abrupt("return");case 3:return n=q+"_"+t,e.prev=4,e.next=7,L.a.mgr.grantRole(o,[n],3);case 7:O.a.success("\u60a8\u5df2\u7ecf\u53d8\u4e3a\u4e86\u4e3b\u64ad"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),O.a.error("\u53d8\u66f4\u4e3b\u64ad\u5931\u8d25");case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"admin-change-handle",onClick:a},"\u653e\u5f03\u4e3b\u6301\u4eba")}return""}window.addEventListener("offline",(function(){O.a.error("\u60a8\u7684\u7f51\u7edc\u94fe\u63a5\u65ad\u5f00\u4e86")})),window.addEventListener("online",(function(){return O.a.success("\u60a8\u7684\u7f51\u7edc\u94fe\u63a5\u6210\u529f")}));var fe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.network_status;e=void 0==e?2:e;return i.a.createElement("div",{className:"network-wrapper ".concat({0:"dis",1:"weak",2:""}[e])},i.a.createElement("div",{className:"network-item one ".concat(e>0?"high-light":"")}),i.a.createElement("div",{className:"network-item two ".concat(e>0?"high-light":"")}),i.a.createElement("div",{className:"network-item three ".concat(e>1?"high-light":"")}),i.a.createElement("div",{className:"network-item four ".concat(e>1?"high-light":"")}),i.a.createElement("div",{className:"icon"},i.a.createElement("span",{className:"line"})))}}]),n}(r.Component);function pe(e){var t=e.room_setting_modal_show,n=e.roomName,r=e.stream_list,o=e.user,s=e.user_room,a=o.username,c=s.role;return i.a.createElement("div",{className:"room-setting".concat(t?" open":"")},i.a.createElement("div",{className:"toast-title"},i.a.createElement("span",null,"\u4f1a\u8bae\u540d\u79f0"),i.a.createElement(S.a,{type:"close-circle",onClick:function(){return e.toggle_room_setting_modal()}})),i.a.createElement("div",{className:"text"},n),i.a.createElement("div",{className:"item-wrapper"},i.a.createElement("div",{className:"title"},"\u4e3b\u6301\u4eba"),function(){var e=[];return r.map((function(t){t&&t.member&&7==t.member.role&&t.stream.type!=L.a.StreamType.DESKTOP&&e.push(ne(t.member))})),e}().map((function(e,t){return i.a.createElement("div",{key:t,className:"text"},e)}))),i.a.createElement(le,{my_username:a,stream_list:r,my_role:c,user_room:s}))}function he(e){var t=document.createElement("div");function n(){s.a.unmountComponentAtNode(t)&&t.parentNode&&t.parentNode.removeChild(t)}document.body.appendChild(t),s.a.render(i.a.createElement("div",{className:"toast"},i.a.createElement("div",{className:"toast-title"},i.a.createElement("span",null,"\u63d0\u793a"),i.a.createElement(S.a,{type:"close-circle",onClick:function(){return n()}})),i.a.createElement("div",{className:"text"}," \u9000\u51fa\u540e\u5c06\u7ed3\u675f\u4e92\u52a8\u767d\u677f "),i.a.createElement("div",{className:"handle"},i.a.createElement("span",{className:"leave",onClick:function(){return function(){var t=e.onOk;t&&"function"==typeof t&&(t(),n())}()}},"\u7ee7\u7eed\u9000\u51fa"),i.a.createElement("br",null),i.a.createElement("span",{className:"end",onClick:function(){return n()}},"\u53d6\u6d88"))),t)}function me(e){var t=document.createElement("div");t.id="toast-msg",t.innerText=e,document.body.appendChild(t),setTimeout((function(){document.querySelector("#toast-msg")&&document.body.removeChild(document.querySelector("#toast-msg"))}),2e3)}var ve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={visible:!1},r.handle_click=r.handle_click.bind(Object(b.a)(r)),r.handleCancel=r.handleCancel.bind(Object(b.a)(r)),r.handleOk=r.handleOk.bind(Object(b.a)(r)),r.onChange=r.onChange.bind(Object(b.a)(r)),r}return Object(c.a)(n,[{key:"handle_click",value:function(){this.setState({visible:!0})}},{key:"handleOk",value:function(){var e=this,t=this.state.msg;this.setState({confirmLoading:!0}),setTimeout((function(){e.setState({visible:!1,confirmLoading:!1}),L.a.fileReport("",t),w.a.success({title:"\u60a8\u7684\u4f1a\u8bae\u65e5\u5fd7\uff0c\u5df2\u7ecf\u4fdd\u5b58\u5230\u4e86\u672c\u5730",content:"\u8bf7\u6dfb\u52a0QQ\uff1a454374569, \u8fdb\u884c\u95ee\u9898\u53cd\u9988",okText:"\u77e5\u9053\u4e86"})}),500)}},{key:"handleCancel",value:function(){this.setState({visible:!1})}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({msg:t})}},{key:"render",value:function(){var e=this.state,t=e.visible,n=e.confirmLoading,r=_.a.TextArea;return i.a.createElement("div",null,i.a.createElement(w.a,{title:"\u8bf7\u586b\u5199\u60a8\u9047\u5230\u7684\u95ee\u9898",visible:t,onOk:this.handleOk,confirmLoading:n,onCancel:this.handleCancel,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},i.a.createElement(r,{rows:4,onChange:this.onChange})))}}]),n}(r.PureComponent),be=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={visible:!1,sources:[],accessApproved:null,choosed_stream:null},e}return Object(c.a)(n,[{key:"show",value:function(e,t,n){this.setState({sources:e,accessApproved:t,accessDenied:n,visible:!0})}},{key:"hide",value:function(){this.setState({visible:!1,choosed_stream:null});var e=this.state.accessDenied;e&&"function"==typeof e&&e()}},{key:"choose",value:function(e){e&&this.setState({choosed_stream:e})}},{key:"share",value:function(){var e=this.state,t=e.accessApproved,n=e.choosed_stream;t&&n&&"function"==typeof t&&(t(n),this.setState({visible:!1,choosed_stream:null}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,r=t.sources,o=t.choosed_stream,s=[],a=[];r.map((function(e){e&&(/window/.test(e.id)?a.push(e):/screen/.test(e.id)&&s.push(e))}));var c=v.a.TabPane;return i.a.createElement(w.a,{title:"\u5171\u4eab\u5c4f\u5e55",visible:n,destroyOnClose:!0,mask:!1,maskClosable:!1,okText:"\u5206\u4eab",cancelText:"\u53d6\u6d88",closable:!1,onOk:function(){return e.share()},okButtonProps:{disabled:!o},onCancel:function(){return e.hide()},wrapClassName:"electorn-choose-desktop-media",getContainer:!1,width:600,style:{top:20}},i.a.createElement("div",null,"Electorn \u60f3\u8981\u5171\u4eab\u60a8\u5c4f\u5e55\u4e0a\u7684\u5185\u5bb9\u3002\u8bf7\u9009\u62e9\u4f60\u5e0c\u671b\u5171\u4eab\u54ea\u4e9b\u5185\u5bb9"),i.a.createElement(v.a,{defaultActiveKey:"1"},i.a.createElement(c,{tab:"\u60a8\u7684\u6574\u4e2a\u5c4f\u5e55",key:"1"},i.a.createElement("div",{className:"tab-content"},s.map((function(t,n){var r={};return o&&o.id==t.id&&(r={borderColor:"rgba(146, 210, 241, 0.7)"}),i.a.createElement("div",{className:"img-wrapper",onClick:function(){return e.choose(t)},style:r,key:n},i.a.createElement("img",{src:t.hxThumbDataURL}),i.a.createElement("div",{className:"name"}," ",t.name," "))})))),i.a.createElement(c,{tab:"\u5e94\u7528\u7a97\u53e3",key:"2"},i.a.createElement("div",{className:"tab-content"},a.map((function(t,n){var r={};return o&&o.id==t.id&&(r={borderColor:"rgba(146, 210, 241, 0.7)"}),i.a.createElement("div",{className:"img-wrapper",onClick:function(){return e.choose(t)},style:r,key:n},i.a.createElement("img",{src:t.hxThumbDataURL}),i.a.createElement("div",{className:"name"}," ",t.name," "))}))))))}}]),n}(r.PureComponent);function ge(e){if(!e)return"";var t=window.location.href.split("?")[1];if(!t)return"";var n="";return t.split("&").map((function(t){var r=t.split("=")[0],i=t.split("=")[1];e==r&&(n=i)})),decodeURI(n)}var _e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).join_handle=function(e){e&&e.preventDefault();var t=Object(b.a)(r);r.props.form.validateFields((function(e,n){var r=n.roomName,i=n.nickName,o=n.audio,s=n.video;t.setState({roomName:r,audio:o,video:s,nickName:i},(function(){e||t.join()}))}))},r._get_setting_values=function(e){if(e){for(var t in e)r.setState(Object(y.a)({},t,e[t]));e.join_as_audience?r.setState({user_room:{role:1}}):r.setState({user_room:{role:3}})}},r._set_nickname=function(e){var t=r.state.user.username;r.setState({nickName:e||t},r.join_handle),r.state.is_localStorage_nickName_admin&&window.localStorage.setItem("easemob-nickName",e)},r.video_change=function(e){r.setState({video:e.target.checked})},r.close_audio=Object(P.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state.user_room.role,n=r.state.own_stream,1!=t){e.next=4;break}return e.abrupt("return");case 4:if(n){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,L.a.mgr.pauseAudio(n);case 8:r.setState({audio:!1});case 9:case"end":return e.stop()}}),e)}))),r.open_audio=Object(P.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state.user_room.role,n=r.state.own_stream,1!=t){e.next=4;break}return e.abrupt("return");case 4:if(n){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,L.a.mgr.resumeAudio(n);case 8:r.setState({audio:!0});case 9:case"end":return e.stop()}}),e)}))),r.audio_change=function(e){r.setState({audio:e.target.checked})},r.control_talker_list=function(){r.setState((function(e){return{talker_list_show:!e.talker_list_show}}))},r.close_talker_model=function(){r.setState({talker_is_full:!1})},r.state={step1:!1,step:!1,roomName:ge("roomName")||"",nickName:"",user:{},user_room:{role:3},own_stream:null,own_desktop_stream:null,own_member:null,time:0,stream_list:[null],talker_list_show:!1,audio:!0,video:!1,headimg_url_suffix:"",joined:!1,loading:!1,talker_is_full:!1,talker_full_btn_disable:!1,shared_desktop:!1,set_nickname_modal_show:!1,room_setting_modal_show:!1,cdn:"",push_cdn:!1,liveCfg:{cdn:"",layoutStyle:"GRID",canvas:{bgclr:0,w:640,h:480,fps:20,bps:12e5,codec:"H264"}},cdn_zorder:1,use_white_board:!0,white_board_url:"",white_board_is_created:!1,am_i_white_board_creator:!1,not_visible_arr:[],leaveConfirmModal_show:!1,prev_volumes:{},subed_v_els:{},join_btn_disable:!1,main_loading:!1,main_loading_text:"",modalMember:!1,arr:[{index:"1",name:"11"},{index:"2",name:"111"},{index:"3",name:"112"},{index:"4",name:"112"},{index:"5",name:"112"},{index:"6",name:"112"}]},r.toggle_main=r.toggle_main.bind(Object(b.a)(r)),r.join_handle=r.join_handle.bind(Object(b.a)(r)),r.talker_is_full_handle=r.talker_is_full_handle.bind(Object(b.a)(r)),r.leave=r.leave.bind(Object(b.a)(r)),r.toggle_audio=r.toggle_audio.bind(Object(b.a)(r)),r.toggle_video=r.toggle_video.bind(Object(b.a)(r)),r.apply_talker=r.apply_talker.bind(Object(b.a)(r)),r.apply_audience=r.apply_audience.bind(Object(b.a)(r)),r.stop_share_desktop=r.stop_share_desktop.bind(Object(b.a)(r)),r.share_desktop=r.share_desktop.bind(Object(b.a)(r)),r.toggle_room_setting_modal=r.toggle_room_setting_modal.bind(Object(b.a)(r)),r.confirm_destory_white_board=r.confirm_destory_white_board.bind(Object(b.a)(r)),r.create_white_board=r.create_white_board.bind(Object(b.a)(r)),r.talker_list_scroll=r.talker_list_scroll.bind(Object(b.a)(r),r.talker_list_scroll_stop.bind(Object(b.a)(r)),1e3)(),r.hide_leaveConfirmModal=r.hide_leaveConfirmModal.bind(Object(b.a)(r)),r.leave_handle=r.leave_handle.bind(Object(b.a)(r)),r.leave=r.leave.bind(Object(b.a)(r)),r}return Object(c.a)(n,[{key:"whetherCanUse",value:function(){navigator.userAgent.indexOf("Mobile")>-1?this.setState({join_btn_disable:!0}):L.a.isChrome||L.a.isElectron||L.a.isEdge||L.a.isSafari||this.setState({join_btn_disable:!0})}},{key:"join",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,n,r,i,o,s,a,c,u,d,l,f,p;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,talker_is_full:!1}),t=this.state,n=t.roomName,r=t.nickName,i=t.headimg_url_suffix,o=t.push_cdn,s=t.cdn,a=t.rec,c=t.recMerge,u=this.state.user_room.role,d={roomName:n,password:n,role:u,config:{nickName:r,ext:{headImage:i},rec:a,recMerge:c,maxPubDesktopCount:1}},o&&s&&((l=this.state.liveCfg).cdn=s,d.config.liveCfg=l),e.prev=5,e.next=8,L.a.mgr.joinRoom(d);case 8:if(f=e.sent,this.startTime(),this._set_config_to_localStorage(),this.setState({joined:!0,user_room:f}),window.location.hash="",f.role!=L.a.mgr.Role.AUDIENCE){e.next=15;break}return e.abrupt("return");case 15:this.publish(),e.next=26;break;case 18:if(e.prev=18,e.t0=e.catch(5),!/cause: -523|cause:-523/.test(e.t0.errorMessage)){e.next=23;break}return this.setState({talker_is_full:!0,loading:!1,talker_full_btn_disable:!0}),e.abrupt("return");case 23:p={"-530":"\u521b\u5efasession\u5931\u8d25","-531":"\u8bbe\u7f6e\u5e03\u5c40\u5931\u8d25","-532":"\u753b\u5e03\u4e0d\u80fd\u4e3a\u7a7a","-533":"\u5220\u9664session\u5931\u8d25","-534":"\u81ea\u5b9a\u4e49\u5f55\u5236\u5931\u8d25","-200":"\u53c2\u6570\u9519\u8bef"},O.a.error(p[e.t0.error]||e.t0.errorMessage||e.t0.message),this.setState({loading:!1});case 26:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"talker_is_full_handle",value:function(){this.setState({join_as_audience:!0,user_room:{role:1}},this.join_handle)}},{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.whetherCanUse(),this.setState({loading:!0}),e.next=4,Z();case 4:t=e.sent,this.setState({loading:!1}),this.setState({user:t}),this.init_emedia_callback(),this.init_white_board(),n=this,window.onbeforeunload=function(e){e=window.event||e;n.state.am_i_white_board_creator&&(n.emit_white_board_is_destroyed(),n.destroy_white_board()),n.state.shared_desktop&&n.stop_share_desktop(),L.a.mgr.exitConference()},this._get_config_from_localStorage(),this._get_headimg_url_suffix_from_session(),ge("roomName")&&(r=this,setTimeout((function(){r.join_handle()}),1e3));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.timeID)}},{key:"init_emedia_callback",value:function(){var e=this,t=this.state.user,n=t.username,r=t.token;L.a.config({appkey:q});var i=q+"_"+n;L.a.mgr.setIdentity(i,r),L.a.mgr.onStreamAdded=function(t,n){console.log("onStreamAdded >>>",t,n),e._on_stream_added(t,n)},L.a.mgr.onStreamRemoved=function(t,n){console.log("onStreamRemoved",t,n),e._on_stream_removed(n)},L.a.mgr.onMemberJoined=function(e){console.log("onMemberJoined",e),O.a.success("".concat(e.nickName||e.name," \u52a0\u5165\u4e86\u4f1a\u8bae"))},L.a.mgr.onMemberLeave=function(e,t,n){console.log("onMemberLeave",e,t,n),O.a.success("".concat(e.nickName||e.name," \u9000\u51fa\u4e86\u4f1a\u8bae"))},L.a.mgr.onConferenceExit=function(t,n){var r="\u6b63\u5e38\u6302\u65ad";t&&(r={0:"\u6b63\u5e38\u6302\u65ad",1:"\u6ca1\u54cd\u5e94",2:"\u670d\u52a1\u5668\u62d2\u7edd",3:"\u5bf9\u65b9\u5fd9",4:"\u7f51\u7edc\u539f\u56e0",5:"\u4e0d\u652f\u6301",6:"\u8d85\u65f6",10:"\u5176\u4ed6\u8bbe\u5907\u767b\u5f55",11:"\u4f1a\u8bae\u5173\u95ed",12:"\u88ab\u8e22\u51fa\u4e86\u4f1a\u8bae"}[t]),4==t&&n&&(r=function(e){return{"-9527":"\u5931\u8d25,\u7f51\u7edc\u539f\u56e0","-500":"Ticket\u5931\u6548","-502":"Ticket\u8fc7\u671f","-504":"\u94fe\u63a5\u5df2\u5931\u6548","-508":"\u4f1a\u8bae\u65e0\u6548","-510":"\u670d\u52a1\u7aef\u9650\u5236"}[e]}(n)),console.log("onConferenceExit",t,n),e.state.am_i_white_board_creator&&e.destroy_white_board(),e.state.shared_desktop&&e.stop_share_desktop(),O.a.warn(r,1,(function(){e.state.talker_is_full?e.setState({talker_full_btn_disable:!1}):window.location.reload()}))},L.a.mgr.onConfrAttrsUpdated=function(t){console.log("onConfrAttrsUpdated",t),e.confrAttrsUpdated(t)},L.a.mgr.onRoleChanged=function(t){e._on_role_changed(t)},L.a.mgr.onAdminChanged=function(t){t.memberId&&e.admin_changed(t)},L.a.mgr.onPubVideoTooMuch=Object(P.a)(M.a.mark((function t(){var n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(O.a.warn("\u5df2\u8fbe\u5230\u6700\u5927\u89c6\u9891\u6570\uff0c\u53ea\u80fd\u5f00\u542f\u97f3\u9891"),!(n=e.state.own_stream)){t.next=5;break}return t.next=5,L.a.mgr.unpublish(n);case 5:e.setState({audio:!0,video:!1},e.publish);case 6:case"end":return t.stop()}}),t)}))),L.a.mgr.onPubDesktopTooMuch=function(){O.a.warn("\u5171\u4eab\u684c\u9762\u6570\u5df2\u7ecf\u8fbe\u5230\u6700\u5927"),e.stop_share_desktop()},L.a.mgr.onRequestToTalker=function(t,n,r){e.handle_apply_talker(t,n,r)},L.a.mgr.onRequestToTalkerReply=function(e){1==e&&O.a.error("\u7ba1\u7406\u5458\u62d2\u7edd\u4e86\u4f60\u7684\u4e0a\u9ea6\u7533\u8bf7")},L.a.mgr.onRequestToAdminReply=function(e){1==e&&O.a.error("\u7ba1\u7406\u5458\u62d2\u7edd\u4e86\u4f60\u7684\u4e3b\u6301\u4eba\u7533\u8bf7")},L.a.mgr.onRequestToAdmin=function(e,t,n){var r=e.memberId,i=e.nickName;r&&(0,w.a.confirm)({title:"\u662f\u5426\u540c\u610f".concat(i||r,"\u7684\u4e3b\u6301\u4eba\u8bf7\u6c42"),onOk:function(){return t(r)},onCancel:function(){return n(r)},cancelText:"\u62d2\u7edd",okText:"\u540c\u610f"})},L.a.mgr.onMuted=function(){O.a.warn("\u4f60\u88ab\u7ba1\u7406\u5458\u9759\u97f3\u4e86"),e.close_audio()},L.a.mgr.onUnmuted=function(){O.a.success("\u4f60\u88ab\u7ba1\u7406\u5458\u53d6\u6d88\u4e86\u9759\u97f3"),e.open_audio()},L.a.mgr.onMuteAll=function(){O.a.warn("\u7ba1\u7406\u5458\u542f\u7528\u4e86\u5168\u4f53\u9759\u97f3"),setTimeout(e.close_audio,500)},L.a.mgr.onUnMuteAll=function(){O.a.success("\u7ba1\u7406\u5458\u53d6\u6d88\u4e86\u5168\u4f53\u9759\u97f3"),e.open_audio()},L.a.mgr.onNetworkQuality=function(t,n){var r=e.state,i=r.stream_list,o=r.n_weak_ms_t,s=!1;i.map((function(r){if(r&&r.stream&&r.stream.id==t&&(r.stream.network_status!=n&&(s=!0,r.stream.network_status=n,console.log("onNetworkQuality change: sid=".concat(t,", status=").concat(n))),r.member&&r.member.is_me&&2!=n)){var i=(new Date).getTime();o?i-o>1e4&&(e.setState({n_weak_ms_t:i}),me("\u60a8\u7684\u7f51\u7edc\u72b6\u6001\u4e0d\u4f73")):(e.setState({n_weak_ms_t:i}),me("\u60a8\u7684\u7f51\u7edc\u72b6\u6001\u4e0d\u4f73"))}})),s&&e.setState({stream_list:i})},L.a.isElectron&&(L.a.chooseElectronDesktopMedia=function(t,n,r){e.choose_desktop_media&&e.choose_desktop_media.show(t,n,r)})}},{key:"init_white_board",value:function(){this.white_board=new U.a({restApi:"https://wbrtc.easemob.com",appKey:q})}},{key:"_on_role_changed",value:function(e){if(e){var t=this.state.user_room,n=t.role;t.role=e;var r=this;this.setState({user_room:t},(function(){return 1==n&&3==e?(r.setState({audio:!0},r.publish),void O.a.success("\u4f60\u5df2\u7ecf\u4e0a\u9ea6\u6210\u529f,\u5e76\u4e14\u63a8\u6d41\u6210\u529f")):3!=n&&7!=n||1!=e?void(3!=n||7!=e||O.a.success("\u4f60\u5df2\u7ecf\u662f\u4e3b\u6301\u4eba\u4e86")):(O.a.success("\u4f60\u5df2\u7ecf\u4e0b\u9ea6\u4e86,\u5e76\u4e14\u505c\u6b62\u63a8\u6d41"),void r.setState({join_as_audience:!0}))}));!function(){var t=r.state.user_room.joinId,n=r.state.stream_list;n.map((function(n){n&&n.member&&n.member.id==t&&(n.member.role=e)})),r.setState({stream_list:n})}()}}},{key:"confrAttrsUpdated",value:function(e){var t=e.filter((function(e){return"whiteBoard"==e.key}));if(t.length>0){var n=t[0],r=n.op,i=n.val;if("DEL"==r)return O.a.success("\u767d\u677f\u7ba1\u7406\u5458\u9500\u6bc1\u4e86\u767d\u677f"),void this.setState({white_board_is_created:!1});i=JSON.parse(i);var o=this.state.user.username;if(i.creator==o)return;O.a.success("\u6709\u4eba\u521b\u5efa\u4e86\u767d\u677f");var s=i,a=s.roomName,c=s.roomPswd,u=this.state.user,d={roomName:a,password:c,userName:u.username,token:u.token};this.setState({join_white_board_params:d,talker_list_show:!0},this.join_white_board)}}},{key:"_get_nickname_from_session",value:function(){var e=window.localStorage.getItem("easemob-nickName"),t=window.localStorage.getItem("easemob-nickName-used");return e?"true"==t?void 0:(window.localStorage.setItem("easemob-nickName-used",!0),void this.setState({is_localStorage_nickName_admin:!0,nickName:e})):(window.localStorage.setItem("easemob-nickName-used",!0),void this.setState({is_localStorage_nickName_admin:!0}))}},{key:"_get_config_from_localStorage",value:function(){var e=window.localStorage.getItem("em-meeting-config");for(var t in console.log("config",e),e=JSON.parse(e))this.setState(Object(y.a)({},t,e[t]))}},{key:"_set_config_to_localStorage",value:function(){var e=this.state,t={nickName:e.nickName,audio:e.audio,video:e.video};window.localStorage.setItem("em-meeting-config",JSON.stringify(t))}},{key:"_get_headimg_url_suffix_from_session",value:function(){var e=window.sessionStorage.getItem("easemob-headimg_url_suffix");e||(e="Image1.png"),this.setState({headimg_url_suffix:e})}},{key:"hide_leaveConfirmModal",value:function(){this.setState({leaveConfirmModal_show:!1})}},{key:"get_leaveConfirmModal",value:function(){if(!this.state.leaveConfirmModal_show)return"";var e=this.state.user_room.confrId;return i.a.createElement("div",{className:"leave-confirm-modal"},i.a.createElement("div",{className:"toast-title"},i.a.createElement("span",null,"\u8b66\u544a"),i.a.createElement(S.a,{type:"close-circle",onClick:this.hide_leaveConfirmModal})),i.a.createElement("div",{className:"text"},"\u5982\u679c\u60a8\u4e0d\u60f3\u7ed3\u675f\u4f1a\u8bae",i.a.createElement("br",null),"\u8bf7\u5728\u79bb\u5f00\u4f1a\u8bae\u524d\u6307\u5b9a\u65b0\u7684\u4e3b\u6301\u4eba"),i.a.createElement("div",{className:"handle"},i.a.createElement("span",{className:"leave",onClick:this.leave},"\u79bb\u5f00\u4f1a\u8bae"),i.a.createElement("br",null),i.a.createElement("span",{className:"end",onClick:function(){return L.a.mgr.destroyConference(e)}},"\u7ed3\u675f\u4f1a\u8bae")))}},{key:"leave_handle",value:function(){7==this.state.user_room.role?this.setState((function(e){return{leaveConfirmModal_show:!e.leaveConfirmModal_show}})):window.confirm("\u786e\u5b9a\u9000\u51fa\u4f1a\u8bae\u5417\uff1f")&&this.leave()}},{key:"leave",value:function(){var e=this.state,t=e.am_i_white_board_creator,n=e.shared_desktop;t&&(this.emit_white_board_is_destroyed(),this.destroy_white_board()),n?w.a.info({title:"\u60a8\u8fd8\u5728\u5171\u4eab\u684c\u9762\uff0c\u8bf7\u5148\u505c\u6b62\u5171\u4eab\u684c\u9762"}):setTimeout(L.a.mgr.exitConference,300)}},{key:"publish",value:function(){var e=this.state,t=e.audio,n=e.video,r={audio:t,video:n};t||n||(r={audio:!0});var i=this;Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.mgr.publish(r);case 3:e.sent,$("success","\u53d1\u5e03\u6d41\u6210\u529f"),t||n||i.close_audio(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("\u53d1\u5e03\u6d41\u5931\u8d25",e.t0),$("error","\u53d1\u5e03\u6d41\u5931\u8d25"),-201==e.t0.error&&$("error","\u8bf7\u68c0\u67e5\u6444\u50cf\u5934\u6216\u9ea6\u514b\u98ce\u662f\u5426\u88ab\u5141\u8bb8");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},{key:"apply_talker",value:function(){var e=this.state.user_room.confrId;O.a.success("\u4e0a\u9ea6\u7533\u8bf7\u5df2\u53d1\u51fa\uff0c\u8bf7\u7b49\u5f85\u4e3b\u6301\u4eba\u540c\u610f"),L.a.mgr.requestToTalker(e)}},{key:"handle_apply_talker",value:function(e,t,n){var r=e.memberId,i=e.nickName;if(r){var o=w.a.confirm;o({title:"\u662f\u5426\u540c\u610f".concat(i||r,"\u7684\u4e0a\u9ea6\u8bf7\u6c42"),onOk:function(){return t(r,a)},onCancel:function(){return n(r)},cancelText:"\u62d2\u7edd",okText:"\u540c\u610f"});var s=this,a=function(){o({title:"\u4e3b\u64ad\u4eba\u6570\u5df2\u6ee1\uff0c\u8bf7\u9009\u4eba\u4e0b\u9ea6",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){s.to_audience_list.show((function(){return t(r)}))},onCancel:function(){return n(r)}})}}}},{key:"apply_audience",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,n,r,i,o,s,a,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.stream_list,r=t.am_i_white_board_creator,i=t.shared_desktop,!r){e.next=4;break}return O.a.warn("\u5f53\u524d\u60a8\u6b63\u5728\u5171\u4eab\u767d\u677f\uff0c\u8bf7\u9000\u51fa\u767d\u677f\u540e\uff0c\u518d\u4e0b\u9ea6"),e.abrupt("return");case 4:if(1!=n.filter((function(e){return e})).length){e.next=7;break}return O.a.warn("\u5f53\u524d\u60a8\u662f\u552f\u4e00\u4e3b\u64ad\uff0c\u4e0d\u5141\u8bb8\u4e0b\u9ea6"),e.abrupt("return");case 7:if(o=this.state.user.username,s=this.state.user_room.confrId,o){e.next=11;break}return e.abrupt("return");case 11:a=q+"_"+o,c=this,w.a.confirm({title:"\u4e0b\u9ea6\u540e\u4e0d\u80fd\u53d1\u5e03\u8bed\u97f3\u89c6\u9891",okText:"\u786e\u8ba4\u4e0b\u9ea6",cancelText:"\u53d6\u6d88",onOk:function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.mgr.degradeRole(s,[a],L.a.mgr.Role.AUDIENCE);case 3:i&&c.stop_share_desktop(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset_state",value:function(){this.setState({shared_desktop:!1,room_setting_modal_show:!1})}},{key:"admin_changed",value:function(e){if(e){var t=e.memberId,n=e.role,r=this.state.stream_list;r.map((function(e){if(e&&e.member&&t==e.member.id){e.member.role=n;var r=e.member.nickName||e.member.name,i=7==n?"\u6210\u4e3a\u4e86\u4e3b\u6301\u4eba":"\u53d8\u6210\u4e86\u4e3b\u64ad";O.a.success(r+i)}})),this.setState({stream_list:r})}}},{key:"toggle_main",value:function(e){var t=this._check_has_shared();if(t)O.a.warn("".concat("desktop"==t?"\u6709\u4eba\u5728\u5171\u4eab\u684c\u9762\uff0c\u4e0d\u53ef\u5207\u6362\u5927\u56fe":"\u6709\u4eba\u5728\u5171\u4eab\u767d\u677f\uff0c\u4e0d\u53ef\u5207\u6362\u5927\u56fe"));else{var n=this.state.stream_list,r=n.splice(e,1)[0];r.larger=!0,n.unshift(r),this.setState({stream_list:n},this.move_v_els)}}},{key:"upload_stream_by_id",value:function(e,t){if(e==this.state.own_stream.id){var n=Object.assign(this.state.own_stream,t);this.setState({own_stream:n})}var r=this.state.stream_list;r.map((function(n){n&&n.stream&&n.stream.id==e&&Object.assign(n.stream,t)})),this.setState({stream_list:r})}},{key:"toggle_video",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,i,o,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.user_room.role,r=this.state.own_stream,1!=n){e.next=4;break}return e.abrupt("return");case 4:if(r){e.next=6;break}return e.abrupt("return");case 6:if(!(i=this.state.video)){e.next=14;break}return e.next=10,L.a.mgr.pauseVideo(r);case 10:i=!i,this.setState({video:i}),e.next=20;break;case 14:return t&&((o=t.target).style.cursor="wait"),e.next=17,L.a.mgr.resumeVideo(r);case 17:o&&(o.style.cursor="pointer"),i=!i,this.setState({video:i});case 20:s=r.id,this.upload_stream_by_id(s,{voff:i?0:1});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggle_audio",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.user_room.role,n=this.state.own_stream,1!=t){e.next=4;break}return e.abrupt("return");case 4:if(n){e.next=6;break}return e.abrupt("return");case 6:if(!(r=this.state.audio)){e.next=14;break}return e.next=10,L.a.mgr.pauseAudio(n);case 10:r=!r,this.setState({audio:r}),e.next=18;break;case 14:return e.next=16,L.a.mgr.resumeAudio(n);case 16:r=!r,this.setState({audio:r});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"share_desktop",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.user_room.confrId,e.prev=1,n=this,r={withAudio:!0,confrId:t,stopSharedCallback:function(e){return n.stop_share_desktop(e)}},e.next=6,L.a.mgr.shareDesktopWithAudio(r);case 6:this.setState({shared_desktop:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),-201==e.t0.error&&e.t0.errorMessage.indexOf("ShareDesktopExtensionNotFound")>0&&O.a.error("\u8bf7\u786e\u8ba4\u5df2\u5b89\u88c5\u5171\u4eab\u684c\u9762\u63d2\u4ef6 \u6216\u8005\u662f\u5426\u4f7f\u7528\u7684 https\u57df\u540d");case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop_share_desktop",value:function(e){var t=this.state.own_desktop_stream;t&&(L.a.mgr.unpublish(t),this.setState({shared_desktop:!1,own_desktop_stream:null}))}},{key:"_on_stream_added",value:function(e,t){if(t.type==L.a.StreamType.DESKTOP&&t.located())this.setState({own_desktop_stream:t});else if(e&&t){var n=this.state.stream_list;if(t.located()){var r=this.state.user_room.role;e.role=r,e.is_me=!0,t.type!=L.a.StreamType.DESKTOP&&this.setState({own_stream:t}),this.setState({own_member:e})}t.type==L.a.StreamType.DESKTOP?n.unshift({stream:t,member:e}):this._check_has_shared()||!t.located()||n[0]?n.push({stream:t,member:e}):n.unshift({stream:t,member:e});var i=this;this.setState({stream_list:n,talker_list_show:!0},(function(){i.insert_video_by_stream(e,t),1==t.type&&i.move_v_els();var n=i.state,r=n.push_cdn,o=n.user_room;r&&o.isCreator&&i.setState((function(e){return{cdn_zorder:e.cdn_zorder+1}}),i._update_live_layout)}))}}},{key:"insert_video_by_stream",value:function(e,t){var n=document.createElement("video");n.autoplay=!0,t.located()&&1!=t.type&&n.setAttribute("is-main-media",!0);var r=document.querySelector("[sid="+t.id+"]"),i=this._get_video_loading_el();if(r&&r.appendChild(i),setTimeout((function(){for(var e=document.querySelectorAll(".v-wrapper .loading-wrapper"),t=0;t<e.length;t++){var n=e[t];n.parentNode.removeChild(n)}}),1e3),t.located())L.a.mgr.streamBindVideo(t,n);else{var o={video:!0,audio:!0};console.log("%c sub","color:green"),L.a.mgr.subscribe(e,t,o.video,o.audio,n).then((function(){})).catch((function(t){console.error("\u8ba2\u9605\u6d41\u5931\u8d25",t),$("error","\u8ba2\u9605".concat(e.nickName,"\u7684\u6d41\u5931\u8d25"))}))}r&&r.appendChild(n),this._on_media_chanaged_by_stream(n,t);var s=this.state.subed_v_els;s[t.id]=n,this.setState({subed_v_els:s})}},{key:"move_v_els",value:function(){for(var e=document.querySelectorAll(".v-wrapper[sid]"),t=0;t<e.length;t++){var n=e[t],r=n.getAttribute("sid"),i=this.state.subed_v_els[r],o=n.querySelector("video");o&&n.removeChild(o),n.appendChild(i)}}},{key:"_on_stream_removed",value:function(e){if(e){var t=this.state.stream_list;t.map((function(n,r){n&&n.stream&&n.stream.id==e.id&&t.splice(r,1)}));var n=this;this.setState({stream_list:t},(function(){n.move_v_els();var e=n.state,t=e.push_cdn,r=e.user_room;t&&r.isCreator&&n.setState((function(e){return{cdn_zorder:e.cdn_zorder+1}}),n._update_live_layout)}));var r=this.state.subed_v_els;r[e.id]&&delete r[e.id],this.setState({subed_v_els:r})}}},{key:"_check_has_shared",value:function(e){var t=this.state,n=t.own_desktop_stream,r=t.white_board_is_created,i=t.am_i_white_board_creator,o=this.state.stream_list[0];if(e){var s=!1;return"desktop"==e&&(r&&(s="white-board"),o&&o.stream&&1==o.stream.type&&(s="desktop")),"white-board"==e&&((n||o&&o.stream&&1==o.stream.type)&&(s="desktop"),r&&!i&&(s="white-board")),s}return n||o&&o.stream&&1==o.stream.type?"desktop":!!r&&"white-board"}},{key:"_on_media_chanaged_by_stream",value:function(e,t){var n=this;this.set_stream_item_changed=function(e,t){if(t&&e){var r=n.state.stream_list,i=e.aoff,o=e.voff;r=r.map((function(e){return e&&e.stream&&e.stream.id==t&&(e.stream.aoff=i,e.stream.voff=o),e})),n.setState({stream_list:r})}},this.sound_chanaged=function(e,t){if(e){var r=n.state.stream_list;r=r.map((function(n){return n&&n.stream&&n.stream.id==e&&(n.stream.volume=t),n})),n.setState({stream_list:r})}};var r=this;L.a.mgr.onMediaChanaged(e,(function(e,t){r.set_stream_item_changed(e,t.id)})),L.a.mgr.onSoundChanaged(e,(function(e,t){var n=e.instant,i=Math.round(n/(.15/14));i=i>14?14:i;var o=r.state.prev_volumes;o[t.id]!=i&&(r.sound_chanaged(t.id,i),o[t.id],r.setState({prev_volumes:o}))}))}},{key:"_update_live_layout",value:function(){var e=this.state.stream_list,t=this,n=function(){var e=0;t.state.stream_list.map((function(t){t&&e++}));var n=Math.ceil(Math.sqrt(e)),r=Math.ceil(e/n),i=t.state.liveCfg.canvas,o=i.w,s=i.h;return{col_num:n,row_num:r,cell_width:parseInt(o/n),cell_height:parseInt(s/r)}}(),r=[],i=0,o=this.state.cdn_zorder;e.map((function(e){if(e){var t=function(e,t){var n={x:0,y:0},r=t.col_num,i=t.cell_width,o=t.cell_height,s=Math.ceil(e/r),a=e%r;return 0==a&&(a+=r),n.x=i*(a-1),n.y=o*(s-1),n}(++i,n),s=e.stream.id;r.push({sid:s,x:t.x,y:t.y,z:o,w:n.cell_width,h:n.cell_height,style:"AspectFit"})}}));var s=this.state.user_room.confrId,a=L.a.config.liveCfgs;a&&a[0]&&L.a.mgr.updateLiveLayout(s,a[0].id,r)}},{key:"_get_header_el",value:function(){var e=this.state,t=e.roomName,n=e.own_stream;return i.a.createElement("div",{className:"header-wrapper"},i.a.createElement("div",{className:"logo"}),i.a.createElement("div",{className:"name-wrapper"},i.a.createElement("div",{className:"name"},t||"\u623f\u95f4\u540d\u79f0"),i.a.createElement("div",{className:"time"},this._get_tick())),i.a.createElement("div",{className:"leave-action-wrapper"},n?i.a.createElement("div",{className:"network-icon"},i.a.createElement(fe,{network_status:n.network_status})):"",i.a.createElement("div",{onClick:this.leave_handle,className:"leave-action"},i.a.createElement("img",{src:te("leave-icon")}),i.a.createElement("span",null,"\u79bb\u5f00\u4f1a\u8bae")),i.a.createElement(ve,null)))}},{key:"_voff_show",value:function(e,t){if(!e)return i.a.createElement("div",{className:"voff-show"});var n=e.member.ext;if(!n||!n.headImage)return i.a.createElement("div",{className:"voff-show"});return i.a.createElement("div",{className:"voff-show"},i.a.createElement("div",{className:"avatar-wrapper"},i.a.createElement("img",{className:"avatar",src:"https://download-sdk.oss-cn-beijing.aliyuncs.com/downloads/RtcDemo/headImage/"+n.headImage}),"main"==t?i.a.createElement("div",{className:"nick-name"},ne(e.member),7==e.member.role?i.a.createElement("img",{src:te("admin-icon")}):""):""))}},{key:"_get_video_loading_el",value:function(){var e=document.createElement("div");e.classList.add("loading-wrapper");return e.innerHTML=['<div class="loading">\n                <div class="circle circle1">\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                </div>\n                <div class="circle circle2">\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                </div>\n                <div class="circle circle3">\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                </div>\n            </div>'],e}},{key:"talker_list_scroll",value:function(e,t){var n,r=this;return function(){for(var i=document.querySelectorAll(".talker-list-wrapper video"),o=function(e){return r.state.not_visible_arr.indexOf(e)>-1},s=function(e){if(!e)return null;var t=null;return r.state.stream_list.map((function(n){n&&n.member&&n.stream&&n.stream.id==e&&(t=n)})),t},a=0;a<i.length;a++){var c=i[a],u=c.parentNode,d=c.getAttribute("hx_stream");if(!s(d).stream.voff)if(!r.talker_is_not_visble(c)&&o(d))u.querySelector(".loading-wrapper")||u.appendChild(r._get_video_loading_el());else{var l=u.querySelector(".loading-wrapper");l&&u.removeChild(l)}}n&&clearTimeout(n),n=setTimeout(e,t)}}},{key:"talker_list_scroll_stop",value:function(){for(var e=document.querySelectorAll(".talker-list-wrapper video"),t=this,n=function(e){if(!e)return null;var n=null;return t.state.stream_list.map((function(t){t&&t.member&&t.stream&&t.stream.id==e&&(n=t)})),n},r=function(e,n){var r=t.state.not_visible_arr;if("not-visible"==n&&r.indexOf(e)>-1)return!1;if("not-visible"==n&&-1==r.indexOf(e))return r.push(e),t.setState({not_visible_arr:r}),!0;if("visible"==n&&r.indexOf(e)>-1){var i=r.indexOf(e);return r.splice(i,1),t.setState({not_visible_arr:r}),!0}return("visible"!=n||-1!=r.indexOf(e))&&void 0},i=function(e){var t=e.querySelector(".loading-wrapper");t&&e.removeChild(t)},o=0;o<e.length;o++){var s=e[o],a=s.getAttribute("hx_stream");if(a){var c=n(a);if(!c.stream.voff)if(!c.stream.located())i(s.parentNode),this.talker_is_not_visble(s)?r(a,"not-visible")&&L.a.useCurrentXService.subscribe(c.stream.id,{subSVideo:!1,subSAudio:!0}):r(a,"visible")&&L.a.useCurrentXService.subscribe(c.stream.id,{subSVideo:!0,subSAudio:!0})}}}},{key:"talker_is_not_visble",value:function(e){var t=document.body.getBoundingClientRect().height,n=document.querySelectorAll(".talker-list-wrapper .v-wrapper")[0].getBoundingClientRect().height,r=document.querySelector("footer").getBoundingClientRect().height,i=e.getBoundingClientRect().top;return i>=t-r||i<125&&Math.abs(i-125)>n}},{key:"_get_drawer_component",value:function(){var e=this,t=this.state,n=t.stream_list,r=t.talker_list_show,o=this.state.user_room.role;return i.a.createElement("div",{className:"talker-list-placeholder"},i.a.createElement("div",{className:"talker-list-wrapper",style:r?{}:{transform:"translateX(calc(100% + 10px))"}},i.a.createElement("div",{className:"control-btn",onClick:this.control_talker_list},i.a.createElement("img",{src:te("expand-icon"),style:r?{transform:"rotateY(180deg)"}:{}})),i.a.createElement("div",{className:"header"},"\u53c2\u4f1a\u4eba\u6570 ",function(){var t=0;return e.state.stream_list.map((function(e){e&&e.stream&&e.stream.type!=L.a.StreamType.DESKTOP&&t++})),t}(),7==o?i.a.createElement(ce,this.state):""),i.a.createElement("div",{className:"content",onScroll:this.talker_list_scroll},n.map((function(t,n){if(0!=n&&t)return e._get_video_item(t,n)})))))}},{key:"_get_main_el",value:function(){var e=this.state.stream_list[0];if(e){var t=e.stream,n=t.volume,r=t.type,o=t.voff,s=t.aoff;return i.a.createElement("div",{className:"main-video-wrapper v-wrapper",sid:e.stream.id},1==r?"":s?i.a.createElement("img",{src:te("micro-is-close-icon"),className:"is-speak-icon"}):i.a.createElement("img",{src:te("volume-"+(n||0)),className:"is-speak-icon"}),o?this._voff_show(e,"main"):""," ")}return i.a.createElement("i",null)}},{key:"_get_video_item",value:function(e,t){var n=this,r=e.stream,o=e.member;if(console.log(e),!r||!o||0==Object.keys(r).length||0==Object.keys(o).length)return"";var s=r.id,a=r.aoff,c=r.volume,u=(r.type,r.voff),d=o.role,l=o.is_me,f=(this.state.user_room.role,this.state.user.username,this.state.user_room,ne(o));return i.a.createElement("div",{key:s,className:"item v-wrapper",sid:r.id,onDoubleClick:function(){return n.toggle_main(t)},style:{display:o.is_me||e.larger?"block":"none"}},i.a.createElement("div",{className:"info"},i.a.createElement("span",{className:"name"},f+(l?"(\u6211)":"")),i.a.createElement("div",{className:"status-icon"},i.a.createElement("div",{className:"network-icon"},i.a.createElement(fe,{network_status:r.network_status})),7==d?i.a.createElement("img",{className:"admin",src:te("admin-small-icon")}):"",a?i.a.createElement("img",{src:te("micro-is-close-icon")}):i.a.createElement("img",{src:te("volume-"+(c||0))}))),u?this._voff_show(e):"")}},{key:"handleMute",value:function(e){var t=e.member.id,n=this.state.user_room.confrId,r=t;e.stream.aoff?L.a.mgr.unmuteBymemberId(n,r):L.a.mgr.muteBymemberId(n,r)}},{key:"_get_action_el",value:function(){var e=this,t=this.state.user_room.role,n=this.state,r=n.audio,o=n.video,s=n.shared_desktop,a=n.room_setting_modal_show,c=(n.roomName,n.own_member,n.join_as_audience),u=(n.nickName,n.modalMember),d=n.stream_list,l=this._check_has_shared("desktop");return i.a.createElement("div",{className:"actions"},i.a.createElement("div",{className:"wrapper"},i.a.createElement("img",{className:1==t?"disabled":"",src:te(1==t?"micro-is-close-icon":r?"micro-is-open-icon":"micro-is-close-icon"),onClick:function(){return e.toggle_audio()}}),i.a.createElement("span",{className:"text"},1==t?"\u89e3\u9664\u9759\u97f3":r?"\u9759\u97f3":"\u89e3\u9664\u9759\u97f3")),i.a.createElement("div",{className:"wrapper"},i.a.createElement("img",{className:1==t?"disabled":"",src:te(1==t?"video-is-close-icon":o?"video-is-open-icon":"video-is-close-icon"),onClick:function(t){return e.toggle_video(t)}}),i.a.createElement("span",{className:"text"},1==t?"\u5f00\u542f\u89c6\u9891":o?"\u5173\u95ed\u89c6\u9891":"\u5f00\u542f\u89c6\u9891")),c?i.a.createElement("div",{className:"wrapper"},1==t?i.a.createElement("img",{src:te("apply-to-talker-icon"),onClick:function(){return e.apply_talker()}}):i.a.createElement("img",{src:te("apply-to-audience-icon"),onClick:function(){return e.apply_audience()}}),i.a.createElement("span",null,1==t?"\u4e0a\u9ea6":"\u4e0b\u9ea6")):"",this.get_white_board_action_btn(),i.a.createElement("div",{className:"wrapper"},i.a.createElement("img",{src:te("invite-icon"),onClick:function(){e.setState({modalMember:!0})}}),i.a.createElement("span",null,"\u6210\u5458\u5217\u8868"),i.a.createElement(w.a,{title:"\u6210\u5458\u5217\u8868",visible:u,footer:[],onCancel:function(){e.setState({modalMember:!1})}},i.a.createElement("div",null,d.map((function(t,n){if(t)return i.a.createElement("ul",{key:n,className:"memberListUl"},i.a.createElement("li",null,i.a.createElement("span",{className:"span1"},t.member.nickName+(t.member.is_me?"(\u6211)":"")),t.member.is_me?"":i.a.createElement("div",null,i.a.createElement("span",null,i.a.createElement(T.a,{onClick:function(){var n=e.state.user_room,r=t.member.memName;n&&r&&L.a.mgr.kickMembersById(n,[r])}},"\u79fb\u51fa\u4f1a\u8bae")),i.a.createElement("span",null,i.a.createElement(T.a,{onClick:function(){for(var r=document.getElementsByClassName("item v-wrapper"),i=0;i<r.length;i++)r[i].attributes.sid.value===t.stream.id&&(t.videoStep?(r[i].style.display="none",d[n].videoStep=!1,e.setState({stream_list:d})):(r[i].style.display="block",d[n].videoStep=!0,e.setState({stream_list:d})))}},t.videoStep?"\u5173\u95ed\u6444\u50cf\u5934":"\u5f00\u542f\u6444\u50cf\u5934")),i.a.createElement("span",null,i.a.createElement(T.a,{onClick:function(){return e.handleMute(t)}},t.stream.aoff?"\u89e3\u9664\u9759\u97f3":"\u9759\u97f3")))))}))))),i.a.createElement("div",{className:"wrapper"},1==t?i.a.createElement(C.a,{title:"\u89c2\u4f17\u4e0d\u53ef\u5171\u4eab\u684c\u9762"},i.a.createElement("img",{src:te("share-desktop-icon"),style:{opacity:"0.7",cursor:"not-allowed"}})):l?i.a.createElement(C.a,{title:"desktop"==l?"\u6709\u4eba\u5728\u5171\u4eab\u684c\u9762\uff0c\u4e0d\u53ef\u518d\u5171\u4eab\u684c\u9762":"\u6709\u4eba\u5728\u5171\u4eab\u767d\u677f\uff0c\u4e0d\u53ef\u518d\u5171\u4eab\u684c\u9762"},i.a.createElement("img",{src:te("share-desktop-icon"),style:{opacity:"0.7",cursor:"not-allowed"}})):s?i.a.createElement("img",{src:te("stop-share-desktop-icon"),onClick:function(){return e.stop_share_desktop()}}):i.a.createElement("img",{src:te("share-desktop-icon"),onClick:function(){return e.share_desktop()}}),i.a.createElement("span",null,s?"\u505c\u6b62\u5171\u4eab":"\u5171\u4eab\u684c\u9762")),i.a.createElement("div",{className:"wrapper"},i.a.createElement("img",{src:te(a?"room-setting-open-icon":"room-setting-close-icon"),onClick:function(){return e.toggle_room_setting_modal()}}),i.a.createElement("span",null,"\u4f1a\u8bae\u4fe1\u606f")))}},{key:"toggle_room_setting_modal",value:function(){var e=this.state.room_setting_modal_show;this.setState({room_setting_modal_show:!e})}},{key:"get_white_board_action_btn",value:function(){var e=this,t=this.state,n=t.use_white_board,r=t.white_board_is_created;if(!n)return"";if(this.state.user_room.role==L.a.mgr.Role.AUDIENCE)return"";var o=this._check_has_shared("white-board");return o?i.a.createElement("div",{className:"wrapper"},i.a.createElement(C.a,{title:"desktop"==o?"\u6709\u4eba\u5728\u5171\u4eab\u684c\u9762\uff0c\u4e0d\u53ef\u518d\u53d1\u8d77\u767d\u677f":"\u6709\u4eba\u5728\u5171\u4eab\u767d\u677f\uff0c\u4e0d\u53ef\u518d\u53d1\u8d77\u767d\u677f"},i.a.createElement("img",{src:te("join-white-board-icon"),style:{opacity:"0.7",cursor:"not-allowed"}})),i.a.createElement("span",null,"\u53d1\u8d77\u767d\u677f")):r?i.a.createElement("div",{className:"wrapper"},i.a.createElement("img",{src:te("destory-white-board-icon"),onClick:function(){return e.confirm_destory_white_board()}}),i.a.createElement("span",null,"\u9000\u51fa\u767d\u677f")):i.a.createElement("div",{className:"wrapper"},i.a.createElement("img",{src:te("join-white-board-icon"),onClick:function(){return e.create_white_board()}}),i.a.createElement("span",null,"\u53d1\u8d77\u767d\u677f"))}},{key:"get_white_board_content_el",value:function(){var e=this.state,t=e.white_board_is_created,n=e.white_board_url;return t?("https:"==location.protocol&&(n=n.replace(/http:\/\//g,"https://")),i.a.createElement("iframe",{name:"white-board",src:n})):""}},{key:"emit_white_board_is_created",value:function(){var e=this.state.user.username,t=this.state.roomName,n={key:"whiteBoard",val:JSON.stringify({creator:e,roomName:t,roomPswd:t,timestamp:(new Date).getTime()})};L.a.mgr.setConferenceAttrs(n)}},{key:"emit_white_board_is_destroyed",value:function(){L.a.mgr.deleteConferenceAttrs({key:"whiteBoard"})}},{key:"create_white_board",value:function(){var e=this,t=this.state.roomName,n=this.state.user,r=n.username,i=n.token,o=this,s={roomName:t,password:t,userName:r,token:i,suc:function(t){var n=t.whiteBoardUrl;o.setState({white_board_url:n,white_board_is_created:!0,am_i_white_board_creator:!0,talker_list_show:!0}),O.a.success("\u521b\u5efa\u767d\u677f\u6210\u529f"),o.emit_white_board_is_created(),o.set_main_stream_to_talker_list(),e.setState({white_board_info:t})},error:function(e){O.a.error(e)}};this.setState({main_loading:!0,main_loading_text:"\u6b63\u5728\u521b\u5efa\u767d\u677f..."}),this.white_board.join(s)}},{key:"join_white_board",value:function(){var e=this.state.join_white_board_params;if(e){var t=this;this.white_board.join(Object(m.a)({},e,{suc:function(e){var n=e.whiteBoardUrl;t.setState({white_board_url:n,white_board_is_created:!0}),O.a.success("\u52a0\u5165\u767d\u677f\u6210\u529f"),t.set_main_stream_to_talker_list()},error:function(e){console.log("\u52a0\u5165\u767d\u677f\u5931\u8d25",e)}}))}}},{key:"set_main_stream_to_talker_list",value:function(){var e=this.state.stream_list;e.unshift(null),this.setState({stream_list:e},this.move_v_els)}},{key:"confirm_destory_white_board",value:function(){he({onOk:this.destroy_white_board.bind(this)})}},{key:"destroy_white_board",value:function(){var e=this.state.white_board_info;if(e){var t=e.roomId,n=this.state.user,r=n.username,i=n.token;this.setState({main_loading:!0,main_loading_text:"\u6b63\u5728\u9500\u6bc1\u767d\u677f..."});var o=this;this.white_board.destroy({roomId:t,userName:r,token:i,suc:function(e){O.a.success("\u5df2\u7ecf\u9000\u51fa\u4e86\u767d\u677f"),o.setState({white_board_is_created:!1,am_i_white_board_creator:!1,main_loading:!1,main_loading_text:""}),o.emit_white_board_is_destroyed()},error:function(e){O.a.error("\u9000\u51fa\u767d\u677f\u5931\u8d25")}})}}},{key:"startTime",value:function(){var e=this;this.timeID=setInterval((function(){e.setState((function(e){return{time:e.time+1}}))}),1e3)}},{key:"_get_tick",value:function(){var e=this.state.time;function t(e){return e<10?"0"+e:e}var n="";if(e<60)n="00:"+t(e);else if(e>=60){n=function(e){return e<10?"0"+e:e}(parseInt(e/60))+":"+t(e%60)}return n}},{key:"_get_loading_el",value:function(){var e=this.state,t=e.main_loading,n=e.main_loading_text;return t?i.a.createElement("div",{className:"main-loading-wrapper"},i.a.createElement(h.a,{tip:n}," ")):""}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n=this.state.joined,r=this.state.user_room.role,o=this.state,s=o.audio,a=o.video,c=o.nickName,u=(o.headimg_url_suffix,o.roomName),d=o.talker_full_btn_disable,l=o.shared_desktop,f=o.join_btn_disable;return i.a.createElement("div",{style:{width:"100%",height:"100%"}},i.a.createElement("div",{className:"login-wrap",style:{display:n?"none":"flex",background:"url("+te("login-bg")+")",backgroundSize:"cover"}},f?i.a.createElement(p.a,{message:"\u4e3a\u4e86\u6700\u4f73\u4f7f\u7528\u4f53\u9a8c\uff0c\u8bf7\u4f7f\u7528chrome\u6d4f\u89c8\u5668",type:"warning",closable:!0}):"",i.a.createElement("div",{className:"header"},i.a.createElement("img",{src:te("\u54c1\u724c\u4ef7\u503cLogo")})),i.a.createElement(N.a,{className:"login-form",onSubmit:this.join_handle},i.a.createElement("img",{src:te("setting-icon"),className:"setting-handle",onClick:function(){return e.setting_modal.show()}}),i.a.createElement("img",{className:"PinPai",src:te("\u54c1\u724c\u4ef7\u503cLogo")}),i.a.createElement("div",{className:"app-name"},"\u52a0\u5165\u4f1a\u8bae"),i.a.createElement(re,null,t("roomName",{initialValue:u||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_IM_HOST:"https://a1.easemob.com",REACT_APP_RTC_HOST:"https://a1.easemob.com",REACT_APP_WHITE_BOARD_HOST:"https://wbrtc.easemob.com"}).REACT_APP_ROOMNAME,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f1a\u8bae\u540d\u79f0"},{min:3,message:"\u4f1a\u8bae\u540d\u79f0\u4e0d\u80fd\u5c11\u4e8e3\u4f4d"},{pattern:/^[\u4e00-\u9fa5\w-]*$/,message:"\u8bf7\u8f93\u5165\u4e2d\u6587\u3001\u82f1\u6587\u3001\u6570\u5b57\u3001\u51cf\u53f7\u6216\u4e0b\u5212\u7ebf"}]})(i.a.createElement(_.a,{prefix:i.a.createElement(S.a,{type:"home",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u4f1a\u8bae\u540d\u79f0",maxLength:18,autoComplete:"off"}))),i.a.createElement(re,null,t("nickName",{initialValue:c||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u6635\u79f0"}]})(i.a.createElement(_.a,{prefix:i.a.createElement(S.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u6635\u79f0",autoComplete:"off"}))),i.a.createElement("div",{className:"control-contraints"},t("video",{valuePropName:"checked",initialValue:a})(i.a.createElement(g.a,null,"\u6253\u5f00\u6444\u50cf\u5934")),t("audio",{valuePropName:"checked",initialValue:s})(i.a.createElement(g.a,null,"\u6253\u5f00\u9ea6\u514b\u98ce"))),i.a.createElement("div",{className:"action"},i.a.createElement("button",{type:"primary",danger:!0,htmlType:"submit",onClick:this.join_handle,loading:this.state.loading,style:{width:"100%"},disabled:f},"\u52a0\u5165\u4f1a\u8bae"),i.a.createElement("div",{className:"info-tips"},i.a.createElement(S.a,{type:"info-circle"}),"\u4e0d\u7528\u521b\u5efa\u4f1a\u8bae\uff0c\u521d\u6b21\u52a0\u5165\u5219\u81ea\u52a8\u521b\u5efa")),i.a.createElement("div",{className:"version-text"})),i.a.createElement(w.a,{visible:this.state.talker_is_full,closable:!1,onOk:function(){return e.talker_is_full_handle()},onCancel:this.close_talker_model,okText:"\u4ee5\u89c2\u4f17\u8eab\u4efd\u767b\u5f55",cancelText:"\u6682\u4e0d\u767b\u5f55",centered:!0,mask:!1,maskClosable:!1,width:"470px",className:"talker-is-full-modal",okButtonProps:{disabled:d},cancelButtonProps:{disabled:d}},i.a.createElement("div",null,i.a.createElement("img",{src:te("warning-icon")})),i.a.createElement("div",null,"\u4e3b\u64ad\u4eba\u6570\u5df2\u6ee1",i.a.createElement("br",null),"\u662f\u5426\u4ee5\u89c2\u4f17\u8eab\u4efd\u8fdb\u5165\uff1f")),i.a.createElement(de,Object.assign({},this.state,{_get_setting_values:this._get_setting_values,ref:function(t){return e.setting_modal=t}}))),i.a.createElement(j.a,{className:"meeting",style:{display:n?"block":"none"}},i.a.createElement(ie,null,this._get_header_el()),i.a.createElement(oe,null,this._get_loading_el(),this.get_white_board_content_el(),this._get_main_el()),this._get_drawer_component(),i.a.createElement(se,null,this._get_action_el(),i.a.createElement(pe,Object.assign({},this.state,{toggle_room_setting_modal:this.toggle_room_setting_modal}))),this.get_leaveConfirmModal(),7==r?i.a.createElement(ae,Object.assign({},this.state,{ref:function(t){return e.to_audience_list=t}})):i.a.createElement("i",null),L.a.isElectron?i.a.createElement(be,{ref:function(t){return e.choose_desktop_media=t}}):"",l?i.a.createElement(p.a,{className:"shared-desktop-alert",message:"\u60a8\u6b63\u5728\u5171\u4eab\u684c\u9762",type:"info",showIcon:!0}):""))}}]),n}(r.Component),ye=N.a.create()(_e),we=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement(l.a,null,i.a.createElement(f.c,null," ",i.a.createElement(f.a,{path:"/room",component:ye}),i.a.createElement(f.a,{path:"/",component:ye})))}}]),n}(r.Component);s.a.render(i.a.createElement(we,null),document.getElementById("root"))}},[[183,1,2]]]);
//# sourceMappingURL=main.fb971985.chunk.js.map